"use strict";!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).LC=e()}window&&(!window.LC||window.LC&&!window.LC.shapeToJSON)&&(window.LC=e())}(function(){return function a(r,s,l){function c(o,e){if(!s[o]){if(!r[o]){var t="function"==typeof require&&require;if(!e&&t)return t(o,!0);if(d)return d(o,!0);var n=new Error("Cannot find module '"+o+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[o]={exports:{}};r[o][0].call(i.exports,function(e){var t=r[o][1][e];return c(t||e)},i,i.exports,a,r,s,l)}return s[o].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,o){var h,u,m,a,n,i,s,r,l,c,d,f=[].slice,p=[].indexOf||function(e){for(var t=0,o=this.length;t<o;t++)if(t in this&&this[t]===e)return t;return-1};m=e("./actions"),a=e("./bindEvents"),n=e("./math"),(i=e("./shapes")).createShape,c=i.shapeToJSON,u=i.JSONToShape,s=e("./canvasRenderer").renderShapeToContext,e("./svgRenderer").renderShapeToSVG,r=e("./renderSnapshotToImage"),l=e("./renderSnapshotToSVG"),e("../tools/Pencil"),d=e("./util"),h="infinite",t.exports=function(){function e(e,t){var o,n,i,a;this.setImageSize=(o=this.setImageSize,n=this,function(){return o.apply(n,arguments)}),i=a=null,a=e instanceof HTMLElement?(i=e,t):e,this.opts=a||{},this.config={zoomMin:a.zoomMin||.2,zoomMax:a.zoomMax||4,zoomStep:a.zoomStep||.2},this.colors={primary:a.primaryColor||"#000",secondary:a.secondaryColor||"#fff",background:a.backgroundColor||"transparent"},this.watermarkImage=a.watermarkImage,this.watermarkScale=a.watermarkScale||1,this.backgroundCanvas=document.createElement("canvas"),this.backgroundCanvas.className="background-canvas",this.backgroundCtx=this.backgroundCanvas.getContext("2d"),this.canvas=document.createElement("canvas"),this.canvas.style["background-color"]="transparent",this.buffer=document.createElement("canvas"),this.buffer.style["background-color"]="transparent",this.ctx=this.canvas.getContext("2d"),this.bufferCtx=this.buffer.getContext("2d"),this.backingScale=d.getBackingScale(this.ctx),this.backgroundShapes=a.backgroundShapes||[],this._shapesInProgress=[],this.shapes=[],this.undoStack=[],this.redoStack=[],this.isDragging=!1,this.isDrawAble=!0,this.isTmpDrawAble=!0,this.rotateDeg=0,this.position={x:0,y:0},this.scale=1,this.setTool(new this.opts.tools[0](this)),this.width=a.imageSize.width||h,this.height=a.imageSize.height||h,this.setZoom(this.scale),a.snapshot&&this.loadSnapshot(a.snapshot),this.isBound=!1,i&&this.bindToElement(i)}return e.prototype.setWatermarkImageToLcBackground=function(e){this.watermarkImageToLcBackground=e,this.containerEl.setAttribute("watermarkImageToLcBackground",this.watermarkImageToLcBackground)},e.prototype.bindToElement=function(e){var t,o,n,i;if(!this.containerEl)return this.containerEl=e,this._unsubscribeEvents=a(this,this.containerEl,this.opts.keyboardShortcuts),this.containerEl.style["background-color"]=this.colors.background,this.containerEl.appendChild(this.backgroundCanvas),this.containerEl.appendChild(this.canvas),this.isBound=!0,o=function(){return n.keepPanInImageBounds(),n.repaintAllLayers()},(n=this).respondToSizeChange=d.matchElementSize(this.containerEl,[this.backgroundCanvas,this.canvas],this.backingScale,o),this.watermarkImage&&(this.watermarkImage.onload=(i=this,function(){return i.repaintLayer("background")})),null!=(t=this.tool)&&t.didBecomeActive(this),o();console.warn("Trying to bind Literally Canvas to a DOM element more than once is unsupported.")},e.prototype._teardown=function(){var e;return null!=(e=this.tool)&&e.willBecomeInactive(this),"function"==typeof this._unsubscribeEvents&&this._unsubscribeEvents(),this.tool=null,this.containerEl=null,this.isBound=!1},e.prototype.trigger=function(e,t){return this.canvas.dispatchEvent(new CustomEvent(e,{detail:t})),null},e.prototype.on=function(e,t){var o,n;return o=function(e){return t(e.detail)},this.canvas.addEventListener(e,o),n=this,function(){return n.canvas.removeEventListener(e,o)}},e.prototype.getRenderScale=function(){return this.scale*this.backingScale},e.prototype.clientCoordsToDrawingCoords=function(e,t){var o,n,i=this.canvas.width,a=this.canvas.height;switch(this.rotateDeg){case 0:o=e,n=t;break;case 90:o=t,n=a-e;break;case 180:o=i-e,n=a-t;break;case 270:o=i-t,n=e;break;default:o=e,n=t}return{x:(o*this.backingScale-this.position.x)/this.getRenderScale(),y:(n*this.backingScale-this.position.y)/this.getRenderScale()}},e.prototype.drawingCoordsToClientCoords=function(e,t){return{x:e*this.getRenderScale()+this.position.x,y:t*this.getRenderScale()+this.position.y}},e.prototype.setImageSize=function(e,t){return this.width=e||h,this.height=t||h,this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("imageSizeChange",{width:this.width,height:this.height})},e.prototype.setTool=function(e){var t;if(this.isBound&&null!=(t=this.tool)&&t.willBecomeInactive(this),this.tool=e,this.trigger("toolChange",{tool:e}),this.isBound)return this.tool.didBecomeActive(this)},e.prototype.setShapesInProgress=function(e){return this._shapesInProgress=e},e.prototype.pointerDown=function(e,t){var o;return o=this.clientCoordsToDrawingCoords(e,t),this.tool.usesSimpleAPI?(this.tool.begin(o.x,o.y,this),this.isDragging=!0,this.trigger("drawStart",{tool:this.tool})):(this.isDragging=!0,this.trigger("lc-pointerdown",{tool:this.tool,x:o.x,y:o.y,rawX:e,rawY:t}))},e.prototype.pointerMove=function(o,n){return d.requestAnimationFrame((i=this,function(){var e,t;return e=i.clientCoordsToDrawingCoords(o,n),null!=(t=i.tool)&&t.usesSimpleAPI?i.isDragging?(i.tool.continue(e.x,e.y,i),i.trigger("drawContinue",{tool:i.tool})):void 0:i.isDragging?i.trigger("lc-pointerdrag",{tool:i.tool,x:e.x,y:e.y,rawX:o,rawY:n}):i.trigger("lc-pointermove",{tool:i.tool,x:e.x,y:e.y,rawX:o,rawY:n})}));var i},e.prototype.pointerUp=function(e,t){var o;return o=this.clientCoordsToDrawingCoords(e,t),this.tool.usesSimpleAPI?this.isDragging?(this.tool.end(o.x,o.y,this),this.isDragging=!1,this.trigger("drawEnd",{tool:this.tool})):void 0:(this.isDragging=!1,this.trigger("lc-pointerup",{tool:this.tool,x:o.x,y:o.y,rawX:e,rawY:t}))},e.prototype.setColor=function(e,t){if(this.colors[e]=t,this.isBound){switch(e){case"background":this.containerEl.style.backgroundColor=this.colors.background,this.repaintLayer("background");break;case"primary":this.repaintLayer("main");break;case"secondary":this.repaintLayer("main")}return this.trigger(e+"ColorChange",this.colors[e]),"background"===e?this.trigger("drawingChange"):void 0}},e.prototype.getColor=function(e){return this.colors[e]},e.prototype.saveShape=function(e,t,o,n,i,a){n=null!=n&&null!=n&&n,null==t&&(t=!0),null==o&&(o=null),o||(o=this.shapes.length?this.shapes[this.shapes.length-1].id:null),e.authorUserId=i;var r="saveShape_"+(new Date).getTime()+parseInt(1e4*Math.random()),s=new m.AddShapeAction(this,e,o,r,n,i,a);return this.execute(s),this.isDrawAble&&t&&this.trigger("shapeSave",{shape:e,previousShapeId:o,executeId:r,shapeId:e.id,action:{actionName:s.actionName}}),this.trigger("drawingChange")},e.prototype.pan=function(e,t){return this.setPan(this.position.x-e,this.position.y-t)},e.prototype.keepPanInImageBounds=function(){var e,t,o,n;return t=this.getRenderScale(),o=(e=this.position).x,n=e.y,this.width!==h&&(o=this.canvas.width>this.width*t?(this.canvas.width-this.width*t)/2:Math.max(Math.min(0,o),this.canvas.width-this.width*t)),this.height!==h&&(n=this.canvas.height>this.height*t?(this.canvas.height-this.height*t)/2:Math.max(Math.min(0,n),this.canvas.height-this.height*t)),this.position={x:o,y:n}},e.prototype.setPan=function(e,t){return this.position={x:e,y:t},this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("pan",{x:this.position.x,y:this.position.y})},e.prototype.zoom=function(e){var t;return t=this.scale+e,t=Math.max(t,this.config.zoomMin),t=Math.min(t,this.config.zoomMax),t=Math.round(100*t)/100,this.setZoom(t)},e.prototype.setZoom=function(e){var t;return t=this.scale,this.scale=e,this.position.x=n.scalePositionScalar(this.position.x,this.canvas.width,t,this.scale),this.position.y=n.scalePositionScalar(this.position.y,this.canvas.height,t,this.scale),this.keepPanInImageBounds(),this.repaintAllLayers(),this.trigger("zoom",{oldScale:t,newScale:this.scale})},e.prototype.setPdf=function(e,t){var o={pdfOpenParams:{pagemode:"bookmarks",navpanes:0,statusbar:0,toolbar:0,view:"FitV"},forcePDFJS:!0,PDFJS_URL:e},n="#"+this.customCanvasBackgroundElement.id;window.PDFObject.embed(e,n,o),t&&"function"==typeof t&&t()},e.prototype.setWatermarkImage=function(e){if(this.watermarkImage=e,this.watermarkImageToLcBackground){if(d.addImageOnload(e,(t=this,function(){return t.repaintLayer("background")})),e.width)return this.repaintLayer("background")}else this.customCanvasBackgroundElement.style.backgroundImage="url("+JSON.stringify(e.src)+")";var t},e.prototype.repaintAllLayers=function(){var e,t,o,n;for(e=0,o=(n=["background","main"]).length;e<o;e++)t=n[e],this.repaintLayer(t);return null},e.prototype.repaintLayer=function(e,t){var o;if(null==t&&(t="main"===e),this.isBound){switch(e){case"background":if(!this.watermarkImageToLcBackground)return;this.backgroundCtx.clearRect(0,0,this.backgroundCanvas.width,this.backgroundCanvas.height),o=function(){return r.repaintLayer("background")},(r=this).watermarkImage&&this._renderWatermark(this.backgroundCtx,!0,o),this.draw(this.backgroundShapes,this.backgroundCtx,o);break;case"main":i=this,o=function(){return i.repaintLayer("main",!0)},t&&(this.buffer.width=this.canvas.width,this.buffer.height=this.canvas.height,this.bufferCtx.clearRect(0,0,this.buffer.width,this.buffer.height),this.draw(this.shapes,this.bufferCtx,o)),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),0<this.canvas.width&&0<this.canvas.height&&(this.ctx.fillStyle="#ccc",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.clipped((n=this,function(){return n.ctx.clearRect(0,0,n.canvas.width,n.canvas.height),n.ctx.drawImage(n.buffer,0,0)}),this.ctx),this.clipped((a=this,function(){return a.transformed(function(){var e,t,o,n,i;for(n=[],e=0,t=(o=a._shapesInProgress).length;e<t;e++)i=o[e],n.push(s(a.ctx,i,{bufferCtx:a.bufferCtx,shouldOnlyDrawLatest:!0}));return n},a.ctx,a.bufferCtx)}),this.ctx,this.bufferCtx))}var a,n,i,r;return this.trigger("repaint",{layerKey:e})}},e.prototype._renderWatermark=function(e,t,o){if(null==t&&(t=!0),this.watermarkImage.width)return e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.scale(this.watermarkScale,this.watermarkScale),t&&e.scale(this.backingScale,this.backingScale),e.drawImage(this.watermarkImage,-this.watermarkImage.width/2,-this.watermarkImage.height/2),e.restore();this.watermarkImage.onload=o},e.prototype.drawShapeInProgress=function(e){return this.repaintLayer("main",!1),this.clipped((t=this,function(){return t.transformed(function(){return s(t.ctx,e,{bufferCtx:t.bufferCtx,shouldOnlyDrawLatest:!0})},t.ctx,t.bufferCtx)}),this.ctx,this.bufferCtx);var t},e.prototype.draw=function(i,a,r){var e,t;if(i.length)return e=function(){var e,t,o,n;for(o=[],e=0,t=i.length;e<t;e++)n=i[e],o.push(s(a,n,{retryCallback:r}));return o},this.clipped((t=this,function(){return t.transformed(e,a)}),a)},e.prototype.clipped=function(){var e,t,o,n,i,a,r,s,l,c,d,u;for(o=arguments[0],e=2<=arguments.length?f.call(arguments,1):[],d=this.width===h?0:this.position.x,u=this.height===h?0:this.position.y,c=function(){switch(this.width){case h:return this.canvas.width;default:return this.width*this.getRenderScale()}}.call(this),n=function(){switch(this.height){case h:return this.canvas.height;default:return this.height*this.getRenderScale()}}.call(this),i=0,r=e.length;i<r;i++)(t=e[i]).save(),t.beginPath(),t.rect(d,u,c,n),t.clip();for(o(),l=[],a=0,s=e.length;a<s;a++)t=e[a],l.push(t.restore());return l},e.prototype.transformed=function(){var e,t,o,n,i,a,r,s,l;for(o=arguments[0],n=0,a=(e=2<=arguments.length?f.call(arguments,1):[]).length;n<a;n++)(t=e[n]).save(),t.translate(Math.floor(this.position.x),Math.floor(this.position.y)),l=this.getRenderScale(),t.scale(l,l);for(o(),s=[],i=0,r=e.length;i<r;i++)t=e[i],s.push(t.restore());return s},e.prototype.sendClear=function(e){var t=!1;if(e){for(var o=0;o<this.shapes.length;o++)if(this.shapes[o].authorUserId===e){t=!0;break}}else t=!0;if(t){var n="clear_"+(new Date).getTime()+parseInt(1e4*Math.random());this.trigger("sendClear",{clearActionId:n,action:{actionName:"ClearAction"}})}},e.prototype.clear=function(e,t,o,n,i){var a,r;if(null==e&&(e=!0),r=this.shapes,a=[],0!==this.shapes.length){if(n&&0<this.shapes.length){for(var s=!1,l=0;l<this.shapes.length;l++)this.shapes[l].authorUserId!==n?a.push(this.shapes[l]):s=!0;if(!s)return}this.setShapesInProgress([]);var c=t||"clear_"+(new Date).getTime()+parseInt(1e4*Math.random()),d=new m.ClearAction(this,r,a,c,o,n,i);return this.execute(d),this.repaintLayer("main"),e&&this.trigger("clear",{clearActionId:c,oldShapes:r,action:{actionName:d.actionName}}),this.trigger("drawingChange",{})}},e.prototype.execute=function(e){return this.undoStack.push(e),e.do(),0<this.redoStack.length&&this.trigger("doClearRedoStack",{doClearRedoStack:this.redoStack}),this.redoStack=[]},e.prototype.goToStackPosition=function(e){},e.prototype.sendUndo=function(e){if(this.undoStack.length){var t;if(e){for(var o=this.undoStack.length-1;0<=o;o--)if(e===this.undoStack[o].authorUserId){t=this.undoStack[o];break}}else t=this.undoStack[this.undoStack.length-1];t&&(t.executeId="undo_"+(new Date).getTime()+parseInt(1e4*Math.random()),this.trigger("sendUndo",{action:t,executeId:t.executeId}))}},e.prototype.undo=function(e,t){var o;if(null==e&&(e=!0),this.undoStack.length){if(t){for(var n=this.undoStack.length-1;0<=n;n--)if(this.undoStack[n]&&this.undoStack[n].id===t){o=this.undoStack[n],this.undoStack.splice(n,1);break}}else o=this.undoStack.pop();return o?(o.undo(),o.executeId="undo_"+(new Date).getTime()+parseInt(1e4*Math.random()),this.redoStack.push(o),this.undoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?e.seq-t.seq:0}),this.redoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?t.seq-e.seq:0}),e&&this.trigger("undo",{action:o,executeId:o.executeId}),this.trigger("drawingChange",{})):void 0}},e.prototype.sendRedo=function(e){if(this.redoStack.length){var t;if(e){for(var o=this.redoStack.length-1;0<=o;o--)if(e===this.redoStack[o].authorUserId){t=this.redoStack[o];break}}else t=this.redoStack[this.redoStack.length-1];t&&(t.executeId="redo_"+(new Date).getTime()+parseInt(1e4*Math.random()),this.trigger("sendRedo",{action:t,executeId:t.executeId}))}},e.prototype.redo=function(e,t){var o;if(null==e&&(e=!0),this.redoStack.length){if(t){for(var n=this.redoStack.length-1;0<=n;n--)if(this.redoStack[n]&&this.redoStack[n].id===t){o=this.redoStack[n],this.redoStack.splice(n,1);break}}else o=this.redoStack.pop();if(o){this.undoStack.push(o);return o.do(!0),this.undoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?e.seq-t.seq:0}),this.redoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?t.seq-e.seq:0}),o.executeId="redo_"+(new Date).getTime()+parseInt(1e4*Math.random()),e&&this.trigger("redo",{action:o,executeId:o.executeId}),this.trigger("drawingChange",{})}}},e.prototype.canUndo=function(){if(this.isOnlyUndoRedoClearMyselfShape&&this.myselfId){for(var e=!1,t=this.undoStack.length-1;0<=t;t--)if(this.undoStack[t].authorUserId==this.myselfId){e=!0;break}return e}return!!this.undoStack.length},e.prototype.canRedo=function(){if(this.isOnlyUndoRedoClearMyselfShape&&this.myselfId){for(var e=!1,t=0;t<this.redoStack.length;t++)this.redoStack[t].authorUserId==this.myselfId&&(e=!0);return e}return!!this.redoStack.length},e.prototype.getPixel=function(e,t){var o,n;return o=this.drawingCoordsToClientCoords(e,t),(n=this.ctx.getImageData(o.x,o.y,1,1).data)[3]?"rgb("+n[0]+", "+n[1]+", "+n[2]+")":null},e.prototype.getContentBounds=function(){return d.getBoundingRect(this.shapes.concat(this.backgroundShapes).map(function(e){return e.getBoundingRect()}),this.width===h?0:this.width,this.height===h?0:this.height)},e.prototype.getDefaultImageRect=function(e,t){var i;return null==e&&(e={width:0,height:0}),null==t&&(t={top:0,right:0,bottom:0,left:0}),d.getDefaultImageRect(function(){var e,t,o,n;for(n=[],e=0,t=(o=this.shapes.concat(this.backgroundShapes)).length;e<t;e++)i=o[e],n.push(i.getBoundingRect(this.ctx));return n}.call(this),e,t)},e.prototype.getImage=function(e){return null==e&&(e={}),null==e.includeWatermark&&(e.includeWatermark=!0),null==e.scaleDownRetina&&(e.scaleDownRetina=!0),null==e.scale&&(e.scale=1),e.scaleDownRetina||(e.scale*=this.backingScale),e.includeWatermark&&(e.watermarkImage=this.watermarkImage,e.watermarkScale=this.watermarkScale,e.scaleDownRetina||(e.watermarkScale*=this.backingScale)),r(this.getSnapshot(),e)},e.prototype.canvasForExport=function(){return this.repaintAllLayers(),d.combineCanvases(this.backgroundCanvas,this.canvas)},e.prototype.canvasWithBackground=function(e){return d.combineCanvases(e,this.canvasForExport())},e.prototype.getSnapshot=function(e){var t,o,n,i,a,r;for(null==e&&(e=null),null==e&&(e=["shapes","imageSize","colors","position","scale","backgroundShapes"]),r={},t=0,n=(i=["colors","position","scale"]).length;t<n;t++)o=i[t],0<=p.call(e,o)&&(r[o]=this[o]);return 0<=p.call(e,"shapes")&&(r.shapes=function(){var e,t,o,n;for(n=[],e=0,t=(o=this.shapes).length;e<t;e++)a=o[e],n.push(c(a));return n}.call(this)),0<=p.call(e,"backgroundShapes")&&(r.backgroundShapes=function(){var e,t,o,n;for(n=[],e=0,t=(o=this.backgroundShapes).length;e<t;e++)a=o[e],n.push(c(a));return n}.call(this)),0<=p.call(e,"imageSize")&&(r.imageSize={width:this.width,height:this.height}),r},e.prototype.getSnapshotJSON=function(){return console.warn("lc.getSnapshotJSON() is deprecated. use JSON.stringify(lc.getSnapshot()) instead."),JSON.stringify(this.getSnapshot())},e.prototype.getSVGString=function(e){return null==e&&(e={}),l(this.getSnapshot(),e)},e.prototype.loadSnapshot=function(i){var e,t,o,n,a,r,s,l,c,d;if(i){if(i.colors)for(e=0,n=(r=["primary","secondary","background"]).length;e<n;e++)o=r[e],this.setColor(o,i.colors[o]);if(i.shapes)for(this.shapes=[],t=0,a=(s=i.shapes).length;t<a;t++)d=s[t],(c=u(d))&&this.execute(new m.AddShapeAction(this,c));return i.backgroundShapes&&(this.backgroundShapes=function(){var e,t,o,n;for(n=[],e=0,t=(o=i.backgroundShapes).length;e<t;e++)l=o[e],n.push(u(l));return n}()),i.imageSize&&(this.width=i.imageSize.width,this.height=i.imageSize.height),i.position&&(this.position=i.position),i.scale&&(this.scale=i.scale),this.repaintAllLayers(),this.trigger("snapshotLoad"),this.trigger("drawingChange",{})}},e.prototype.loadSnapshotJSON=function(e){return console.warn("lc.loadSnapshotJSON() is deprecated. use lc.loadSnapshot(JSON.parse(snapshot)) instead."),this.loadSnapshot(JSON.parse(e))},e}()},{"../tools/Pencil":24,"./actions":3,"./bindEvents":4,"./canvasRenderer":5,"./math":10,"./renderSnapshotToImage":11,"./renderSnapshotToSVG":12,"./shapes":13,"./svgRenderer":14,"./util":15}],2:[function(e,t,o){var n,c,h,d;e("./fontmetrics.js"),d=function(e){var t,o,n,i,a,r;for(i=o=0,a=(t=e.split(" ")).length;i<a;i++)n=t[i],r=parseInt(n.replace("px",""),10),isNaN(r)||(o=r);if(!o)throw"Font size not found";return{fontSize:o,fontFamily:e.substring(t[0].length+1).replace("bold ","").replace("italic ","").replace("underline ","")}},h=function(e,t,o){var n,i,a,r,s,l,c,d,u,h;if(!t.length)return["",""];for(c=l=i=0,h=!1;;)if(r=(s=!(a=(i+=1)>=t.length)&&t[i].match(/\s/))||a,u=t.substring(0,i),(n=!o||e.measureTextWidth(u).width<=o)&&(c=i),r&&h&&(h=!1,n&&(l=i)),h=!s,a||!n){if(n)return[t,""];if(0<l){for(d=l+1;d<t.length&&t[d].match("/s/");)d+=1;return[t.substring(0,l),t.substring(d)]}return[t.substring(0,c),t.substring(c)]}},c=function(e,t,o){var n,i,a,r,s,l,c,d,u;for(a=[],n=0,i=(u=t.split(/\r\n|\r|\n/g)).length;n<i;n++)if(d=u[n],r=(s=h(e,d,o))[0],c=s[1],r)for(;r;)a.push(r),r=(l=h(e,c,o))[0],c=l[1];else a.push(d);return a},n=function(){function e(t,e,o,n,i){var a,r,s,l;this.text=e,this.font=o,this.forcedWidth=n,this.forcedHeight=i,a=(s=d(this.font)).fontFamily,r=s.fontSize,t.font=this.font,t.textBaseline="baseline",this.emDashWidth=t.measureTextWidth("—",r,a).width,this.caratWidth=t.measureTextWidth("|",r,a).width,this.lines=c(t,this.text,this.forcedWidth),this.metricses=this.lines.map((l=this,function(e){return t.measureText2(e||"X",r,l.font)})),this.metrics={ascent:Math.max.apply(Math,this.metricses.map(function(e){return e.ascent})),descent:Math.max.apply(Math,this.metricses.map(function(e){return e.descent})),fontsize:Math.max.apply(Math,this.metricses.map(function(e){return e.fontsize})),leading:Math.max.apply(Math,this.metricses.map(function(e){return e.leading})),width:Math.max.apply(Math,this.metricses.map(function(e){return e.width})),height:Math.max.apply(Math,this.metricses.map(function(e){return e.height})),bounds:{minx:Math.min.apply(Math,this.metricses.map(function(e){return e.bounds.minx})),miny:Math.min.apply(Math,this.metricses.map(function(e){return e.bounds.miny})),maxx:Math.max.apply(Math,this.metricses.map(function(e){return e.bounds.maxx})),maxy:Math.max.apply(Math,this.metricses.map(function(e){return e.bounds.maxy}))}},this.boundingBoxWidth=Math.ceil(this.metrics.width)}return e.prototype.draw=function(e,t,o){var n,i,a,r,s,l;for(e.textBaseline="top",e.font=this.font,l=[],i=n=0,a=(s=this.lines).length;i<a;i++)r=s[i],e.fillText(r,t,o+n*this.metrics.leading),l.push(n+=1);return l},e.prototype.getWidth=function(e){return null==e&&(e=!1),this.forcedWidth?this.forcedWidth:e?this.metrics.bounds.maxx+this.caratWidth:this.metrics.bounds.maxx},e.prototype.getHeight=function(){return this.forcedHeight||this.metrics.leading*this.lines.length},e}(),t.exports=n},{"./fontmetrics.js":7}],3:[function(e,t,o){var n,i;i=function(){function e(e,t,o,n,i,a,r){this.lc=e,this.oldShapes=t,this.newShapes=o,this.executeId=n,this.id=n,this.clearActionId=n,this.authorUserId=i,this.toAuthorUserId=a,this.seq=r,this.actions=[],this.actionName="ClearAction"}return e.prototype.do=function(){var e=[];this.actions=[];for(var t=this.lc.undoStack.length-1;0<=t;t--){var o=this.lc.undoStack[t];"AddShapeAction"===o.actionName&&(this.toAuthorUserId?this.lc.undoStack[t].authorUserId===this.toAuthorUserId?(this.actions.push(o),this.lc.undoStack.splice(t,1)):e.push(this.lc.undoStack[t].shape):(this.actions.push(o),this.lc.undoStack.splice(t,1)))}return this.lc.shapes=e.reverse(),this.lc.repaintLayer("main")},e.prototype.undo=function(){var e=[];this.lc.undoStack=this.lc.undoStack.concat(this.actions),this.actions=[],this.lc.undoStack.sort(function(e,t){return void 0!==e&&e.hasOwnProperty("seq")&&void 0!==t&&t.hasOwnProperty("seq")&&void 0!==e.seq&&void 0!==t.seq?e.seq-t.seq:0});for(var t=0;t<this.lc.undoStack.length;t++){"AddShapeAction"===this.lc.undoStack[t].actionName&&e.push(this.lc.undoStack[t].shape)}return this.lc.shapes=e,this.lc.repaintLayer("main")},e}(),n=function(){function e(e,t,o,n,i,a,r){this.lc=e,this.shape=t,this.previousShapeId=null!=o?o:null,this.doNotPaint=i,this.executeId=n,this.shapeId=t.id,this.id=t.id,this.authorUserId=a,this.seq=r,this.actionName="AddShapeAction"}return e.prototype.do=function(e,t){var o,n,i,a,r,s;if(e=null!=e&&e,this.lc.shapes.length&&this.lc.shapes[this.lc.shapes.length-1].id!==this.previousShapeId&&null!==this.previousShapeId){for(o=!(a=[]),n=0,i=(r=this.lc.shapes).length;n<i;n++)s=r[n],a.push(s),s.id===this.previousShapeId&&(a.push(this.shape),o=!0);o||a.push(this.shape),this.lc.shapes=a}else this.lc.shapes.push(this.shape);if((e||!this.doNotPaint)&&!t)return this.lc.repaintLayer("main")},e.prototype.undo=function(){var e,t,o,n,i;if(this.lc.shapes[this.lc.shapes.length-1].id===this.shape.id)this.lc.shapes.pop();else{for(o=[],e=0,t=(n=this.lc.shapes).length;e<t;e++)(i=n[e]).id!==this.shape.id&&o.push(i);this.lc.shapes=o}return this.lc.repaintLayer("main")},e}(),t.exports={ClearAction:i,AddShapeAction:n}},{}],4:[function(e,t,o){var m,f;m=function(e,t){var o,n,i;return n=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY,[n-(o=e.getBoundingClientRect()).left,i-o.top]},f=function(e,t){var o;return o=e.getBoundingClientRect(),{left:t.clientX-o.left,top:t.clientY-o.top}},t.exports=function(l,c,e){var t,d,u,s,h,i;return null==e&&(e=!1),i=[],d=function(e){var t;return e.preventDefault(),t=f(c,e),l.pointerMove(t.left,t.top)},u=function(e){var t;e.preventDefault(),c.onselectstart=function(){return!0},t=f(c,e),l.pointerUp(t.left,t.top);try{var o=document.getElementsByTagName("iframe");if(o&&0<o.length)for(var n=0;n<o.length;n++){var i=o[n].parentNode;if(i){var a=i.getElementsByClassName("ifreamTempLayer");if(a&&0<a.length)for(var r=a.length-1;0<=r;r--)i.removeChild(a[r])}}}catch(e){console.error("tklc error:",e)}return document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",u),c.addEventListener("mousemove",d)},c.addEventListener("mousedown",function(e){var t;if("canvas"===e.target.tagName.toLowerCase()){e.preventDefault(),c.onselectstart=function(){return!1},t=f(c,e),l.pointerDown(t.left,t.top);try{var o=document.getElementsByTagName("iframe");if(o&&0<o.length)for(var n=0;n<o.length;n++){var i=o[n].parentNode;if(i){var a=i.getElementsByClassName("ifreamTempLayer");if(a&&0<a.length)for(var r=a.length-1;0<=r;r--)i.removeChild(a[r]);var s=document.createElement("div");s.className="ifreamTempLayer",i.appendChild(s)}}}catch(e){console.error("tklc error:",e)}return c.removeEventListener("mousemove",d),document.addEventListener("mousemove",d),document.addEventListener("mouseup",u)}}),h=function(e){return e.preventDefault(),l.pointerMove.apply(l,m(c,e))},s=function(e){e.preventDefault();try{var t=document.getElementsByTagName("iframe");if(t&&0<t.length)for(var o=0;o<t.length;o++){var n=t[o].parentNode;if(n){var i=n.getElementsByClassName("ifreamTempLayer");if(i&&0<i.length)for(var a=i.length-1;0<=a;a--)n.removeChild(i[a])}}}catch(e){console.error("tklc error:",e)}return l.pointerUp.apply(l,m(c,e)),document.removeEventListener("touchmove",h),document.removeEventListener("touchend",s),document.removeEventListener("touchcancel",s)},c.addEventListener("touchstart",function(e){if("canvas"===e.target.tagName.toLowerCase()){e.preventDefault();try{var t=document.getElementsByTagName("iframe");if(t&&0<t.length)for(var o=0;o<t.length;o++){var n=t[o].parentNode;if(n){var i=n.getElementsByClassName("ifreamTempLayer");if(i&&0<i.length)for(var a=i.length-1;0<=a;a--)n.removeChild(i[a]);var r=document.createElement("div");r.className="ifreamTempLayer",n.appendChild(r)}}}catch(e){console.error("tklc error:",e)}return 1===e.touches.length?(l.pointerDown.apply(l,m(c,e)),document.addEventListener("touchmove",h),document.addEventListener("touchend",s),document.addEventListener("touchcancel",s)):l.pointerMove.apply(l,m(c,e))}}),e&&(console.warn("Keyboard panning is deprecated."),t=function(e){switch(e.keyCode){case 37:l.pan(-10,0);break;case 38:l.pan(0,-10);break;case 39:l.pan(10,0);break;case 40:l.pan(0,10)}return l.repaintAllLayers()},i.push(function(){return document.removeEventListener(t)})),function(){var e,t,o,n;for(n=[],t=0,o=i.length;t<o;t++)e=i[t],n.push(e());return n}}},{}],5:[function(e,t,o){var r,n,i,a,s,l,c,d,u,h;s=e("./lineEndCapShapes"),u={},l=function(){},d=function(e,t,o){var n;if(null==o&&(o={}),null==o.shouldIgnoreUnsupportedShapes&&(o.shouldIgnoreUnsupportedShapes=!1),null==o.retryCallback&&(o.retryCallback=l),null==o.shouldOnlyDrawLatest&&(o.shouldOnlyDrawLatest=!1),null==o.bufferCtx&&(o.bufferCtx=null),n=o.bufferCtx,u[t.className])return o.shouldOnlyDrawLatest&&u[t.className].drawLatestFunc?u[t.className].drawLatestFunc(e,n,t,o.retryCallback):u[t.className].drawFunc(e,t,o.retryCallback);if(o.shouldIgnoreUnsupportedShapes)return console.warn("Can't render shape of type "+t.className+" to canvas");throw"Can't render shape of type "+t.className+" to canvas"},c=function(e,t,o){return d(e.getContext("2d"),t,o)},(n=function(e,t,o){return u[e]={drawFunc:t,drawLatestFunc:o}})("Rectangle",function(e,t){var o,n;return o=t.x,n=t.y,t.strokeWidth%2!=0&&(o+=.5,n+=.5),e.fillStyle=t.fillColor,e.fillRect(o,n,t.width,t.height),e.lineWidth=t.strokeWidth,e.strokeStyle=t.strokeColor,e.strokeRect(o,n,t.width,t.height)}),n("Ellipse",function(e,t){var o,n,i,a;return e.save(),a=Math.floor(t.width/2),i=Math.floor(t.height/2),o=t.x+a,n=t.y+i,e.translate(o,n),e.scale(1,Math.abs(t.height/t.width)),e.beginPath(),e.arc(0,0,Math.abs(a),0,2*Math.PI),e.closePath(),e.restore(),e.fillStyle=t.fillColor,e.fill(),e.lineWidth=t.strokeWidth,e.strokeStyle=t.strokeColor,e.stroke()}),n("SelectionBox",(h=function(e,t,o){var n,i;if(n=t.x,i=t.y,0!==o)return e.fillStyle="#fff",e.fillRect(n,i,o,o),e.strokeStyle="#000",e.strokeRect(n,i,o,o)},function(e,t){return h(e,t.getTopLeftHandleRect(),t.handleSize),h(e,t.getTopRightHandleRect(),t.handleSize),h(e,t.getBottomLeftHandleRect(),t.handleSize),h(e,t.getBottomRightHandleRect(),t.handleSize),t.backgroundColor&&(e.fillStyle=t.backgroundColor,e.fillRect(t._br.x-t.margin,t._br.y-t.margin,t._br.width+2*t.margin,t._br.height+2*t.margin)),e.lineWidth=1,e.strokeStyle="#000",e.setLineDash([2,4]),e.strokeRect(t._br.x-t.margin,t._br.y-t.margin,t._br.width+2*t.margin,t._br.height+2*t.margin),e.setLineDash([])})),n("Image",function(e,t,o){return t.image.width?1===t.scale?e.drawImage(t.image,t.x,t.y):e.drawImage(t.image,t.x,t.y,t.image.width*t.scale,t.image.height*t.scale):o?t.image.onload=o:void 0}),n("Line",function(e,t){var o,n,i,a,r;if(t.x1!==t.x2||t.y1!==t.y2)return n=t.x1,i=t.x2,a=t.y1,r=t.y2,t.strokeWidth%2!=0&&(n+=.5,i+=.5,a+=.5,r+=.5),e.lineWidth=t.strokeWidth,e.strokeStyle=t.color,e.lineCap=t.capStyle,t.dash&&e.setLineDash(t.dash),e.beginPath(),e.moveTo(n,a),e.lineTo(i,r),e.stroke(),t.dash&&e.setLineDash([]),o=Math.max(2.2*t.strokeWidth,5),t.endCapShapes[0]&&s[t.endCapShapes[0]].drawToCanvas(e,n,a,Math.atan2(a-r,n-i),o,t.color),t.endCapShapes[1]?s[t.endCapShapes[1]].drawToCanvas(e,i,r,Math.atan2(r-a,i-n),o,t.color):void 0}),r=function(e,t,o,n){var i,a,r,s;if(null==o&&(o=!1),null==n&&(n="round"),t.length){for(e.lineCap=n,e.strokeStyle=t[0].color,e.lineWidth=t[0].size,e.beginPath(),t[0].size%2==0?e.moveTo(t[0].x,t[0].y):e.moveTo(t[0].x+.5,t[0].y+.5),i=0,a=(s=t.slice(1)).length;i<a;i++)r=s[i],t[0].size%2==0?e.lineTo(r.x,r.y):e.lineTo(r.x+.5,r.y+.5);return o?e.closePath():void 0}},n("LinePath",i=function(e,t){return r(e,t.smoothedPoints),e.stroke()},a=function(e,t,o){var n,i,a;return o.tail?(i=(a=o.smoothedPoints.length-o.segmentSize*o.tailSize)<2*o.segmentSize?0:a,n=a+o.segmentSize+1,r(t,o.smoothedPoints.slice(i,n))):r(t,o.smoothedPoints),t.stroke()}),n("ErasedLinePath",function(e,t){return e.save(),e.globalCompositeOperation="destination-out",i(e,t),e.restore()},function(e,t,o){return e.save(),e.globalCompositeOperation="destination-out",t.save(),t.globalCompositeOperation="destination-out",a(0,t,o),e.restore(),t.restore()}),n("Text",function(e,t){return t.renderer||t._makeRenderer(e),e.fillStyle=t.color,t.renderer.draw(e,t.x,t.y)}),n("Polygon",function(e,t){return e.fillStyle=t.fillColor,r(e,t.points,t.isClosed,"butt"),e.fill(),e.stroke()}),t.exports={defineCanvasRenderer:n,renderShapeToCanvas:c,renderShapeToContext:d}},{"./lineEndCapShapes":8}],6:[function(e,t,o){t.exports={imageURLPrefix:"lib/img",primaryColor:"hsla(0, 0%, 0%, 1)",secondaryColor:"hsla(0, 0%, 100%, 1)",backgroundColor:"transparent",strokeWidths:[1,2,5,10,20,30],defaultStrokeWidth:5,toolbarPosition:"top",keyboardShortcuts:!1,imageSize:{width:"infinite",height:"infinite"},backgroundShapes:[],watermarkImage:null,watermarkScale:1,zoomMin:.2,zoomMax:4,zoomStep:.2,snapshot:null,onInit:function(){},tools:[e("../tools/Pencil"),e("../tools/Eraser"),e("../tools/Line"),e("../tools/Rectangle"),e("../tools/Ellipse"),e("../tools/Text"),e("../tools/Polygon"),e("../tools/Pan"),e("../tools/Eyedropper")]}},{"../tools/Ellipse":19,"../tools/Eraser":20,"../tools/Eyedropper":21,"../tools/Line":22,"../tools/Pan":23,"../tools/Pencil":24,"../tools/Polygon":25,"../tools/Rectangle":26,"../tools/Text":28}],7:[function(e,t,o){!function(){if(!document.defaultView.getComputedStyle)throw"ERROR: 'document.defaultView.getComputedStyle' not found. This library only works in browsers that can report computed CSS values.";CanvasRenderingContext2D.prototype.measureTextWidth=CanvasRenderingContext2D.prototype.measureText;CanvasRenderingContext2D.prototype.measureText2=function(e,t,o){var n=this.measureTextWidth(e),i=!/\S/.test(e);n.fontsize=t;var a=document.createElement("div");a.style.position="absolute",a.style.opacity=0,a.style.font=o,a.innerHTML=e+"<br/>"+e,document.body.appendChild(a),n.leading=1.2*t;var r,s,l=(r=a,s="height",document.defaultView.getComputedStyle(r,null).getPropertyValue(s));if(2*t<=(l=l.replace("px",""))&&(n.leading=l/2|0),document.body.removeChild(a),i)n.ascent=0,n.descent=0,n.bounds={minx:0,maxx:n.width,miny:0,maxy:0},n.height=0;else{var c=document.createElement("canvas");c.width=n.width+100,c.height=3*t,c.style.opacity=1,c.style.font=o;var d=c.getContext("2d");d.font=o;var u=c.width,h=c.height,m=h/2;d.fillStyle="white",d.fillRect(-1,-1,u+2,h+2),d.fillStyle="black",d.fillText(e,50,m);for(var f=d.getImageData(0,0,u,h).data,p=0,g=4*u,v=f.length;++p<v&&255===f[p];);var y=p/g|0;for(p=v-1;0<--p&&255===f[p];);var b=p/g|0;for(p=0;p<v&&255===f[p];)v<=(p+=g)&&(p=p-v+4);var _=p%g/4|0,w=1;for(p=v-3;0<=p&&255===f[p];)(p-=g)<0&&(p=v-3-4*w++);var k=p%g/4+1|0;n.ascent=m-y,n.descent=b-m,n.bounds={minx:_-50,maxx:k-50,miny:0,maxy:b-y},n.height=b-y+1}return n}}()},{}],8:[function(e,t,o){var l;t.exports={arrow:(l=function(e,t,o,n,i){return[{x:e+Math.cos(o+Math.PI/2)*n/2,y:t+Math.sin(o+Math.PI/2)*n/2},{x:e+Math.cos(o)*i,y:t+Math.sin(o)*i},{x:e+Math.cos(o-Math.PI/2)*n/2,y:t+Math.sin(o-Math.PI/2)*n/2}]},{drawToCanvas:function(e,t,o,n,i,a,r){var s;return null==r&&(r=0),r=r||i,e.fillStyle=a,e.lineWidth=0,e.strokeStyle="transparent",e.beginPath(),s=l(t,o,n,i,r),e.moveTo(s[0].x,s[0].y),e.lineTo(s[1].x,s[1].y),e.lineTo(s[2].x,s[2].y),e.fill()},svg:function(e,t,o,n,i,a){return null==a&&(a=0),"<polygon fill='"+i+"' stroke='none' points='"+l(e,t,o,n,a=a||n).map(function(e){return e.x+","+e.y})+"' />"}})}},{}],9:[function(e,t,o){var n,i,a;a={},i=function(e){return a=e},n=function(e){return a[e]||e},t.exports={localize:i,_:n}},{}],10:[function(e,t,o){var l,n,c,i;e("./shapes").Point,e("./util"),n={toPoly:function(e){var t,o,n,i,a,r,s;for(r=[],s=[],t=o=0,n=e.length;t<n;t++)a=e[t],i=c(a,l(e,o)),r=r.concat([i[0]]),s=[i[1]].concat(s),o+=1;return r.concat(s)}},l=function(e,t){return e.length<3&&{x:0,y:0},0===t?l(e,t+1):t===e.length-1?l(e,t-1):n.diff(e[t-1],e[t+1])},n.diff=function(e,t){return{x:t.x-e.x,y:t.y-e.y}},i=function(e){var t;return t=n.len(e),{x:e.x/t,y:e.y/t}},c=function(e,t){return(t=i(t)).x=t.x*e.size/2,t.y=t.y*e.size/2,[{x:e.x-t.y,y:e.y+t.x,color:e.color},{x:e.x+t.y,y:e.y-t.x,color:e.color}]},n.len=function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))},n.scalePositionScalar=function(e,t,o,n){return e+(t*o-t*n)/2},t.exports=n},{"./shapes":13,"./util":15}],11:[function(e,t,o){var d,u,h,m;m=e("./util"),u=e("./shapes").JSONToShape,d="infinite",h=function(e,t,o){if(t.width)return e.save(),e.translate(e.canvas.width/2,e.canvas.height/2),e.scale(o,o),e.drawImage(t,-t.width/2,-t.height/2),e.restore()},t.exports=function(i,e){var n,t,o,a,r,s,l,c;return null==e&&(e={}),null==e.scale&&(e.scale=1),s=function(){var e,t,o,n;for(n=[],e=0,t=(o=i.shapes).length;e<t;e++)r=o[e],n.push(u(r));return n}(),t=[],i.backgroundShapes&&(t=function(){var e,t,o,n;for(n=[],e=0,t=(o=i.backgroundShapes).length;e<t;e++)r=o[e],n.push(u(r));return n}()),null==e.margin&&(e.margin={top:0,right:0,bottom:0,left:0}),a=i.imageSize||{width:d,height:d},o=i.colors||{background:"transparent"},n=s.concat(t),l=document.createElement("canvas"),c=l.getContext("2d"),e.rect?(e.rect.x-=e.margin.left,e.rect.y-=e.margin.top,e.rect.width+=e.margin.left+e.margin.right,e.rect.height+=e.margin.top+e.margin.bottom):e.rect=m.getDefaultImageRect(function(){var e,t,o;for(o=[],e=0,t=n.length;e<t;e++)r=n[e],o.push(r.getBoundingRect(c));return o}(),a,e.margin),l.width=e.rect.width*e.scale,l.height=e.rect.height*e.scale,c.fillStyle=o.background,c.fillRect(0,0,l.width,l.height),e.rect.width&&e.rect.height?(e.watermarkImage&&h(c,e.watermarkImage,e.watermarkScale),m.combineCanvases(l,m.renderShapes(t,e.rect,e.scale),m.renderShapes(s,e.rect,e.scale))):null}},{"./shapes":13,"./util":15}],12:[function(e,t,o){var d,u,h;h=e("./util"),u=e("./shapes").JSONToShape,d="infinite",t.exports=function(i,e){var n,t,o,a,r,s,l,c;return null==e&&(e={}),c=function(){var e,t,o,n;for(n=[],e=0,t=(o=i.shapes).length;e<t;e++)l=o[e],n.push(u(l));return n}(),t=[],i.backgroundShapes&&(t=function(){var e,t,o,n;for(n=[],e=0,t=(o=i.backgroundShapes).length;e<t;e++)l=o[e],n.push(u(l));return n}()),null==e.margin&&(e.margin={top:0,right:0,bottom:0,left:0}),s=i.imageSize||{width:d,height:d},o=i.colors||{background:"transparent"},n=c.concat(t),r=document.createElement("canvas"),a=r.getContext("2d"),e.rect?(e.rect.x-=e.margin.left,e.rect.y-=e.margin.top,e.rect.width+=e.margin.left+e.margin.right,e.rect.height+=e.margin.top+e.margin.bottom):e.rect=h.getDefaultImageRect(function(){var e,t,o;for(o=[],e=0,t=n.length;e<t;e++)l=n[e],o.push(l.getBoundingRect(a));return o}(),s,e.margin),LC.renderShapesToSVG(t.concat(c),e.rect,o.background)}},{"./shapes":13,"./util":15}],13:[function(e,t,o){var l,n,i,r,a,s,c,d,u,h,m,f,p,g,v,y,b,_,w,k;k=e("./util"),n=e("./TextRenderer"),e("./lineEndCapShapes"),g=e("./canvasRenderer"),h=g.defineCanvasRenderer,y=g.renderShapeToContext,v=e("./svgRenderer"),m=v.defineSVGRenderer,b=v.renderShapeToSVG,w={},u=function(e,t,o,n,i,a,r,s,l,c,d,u,h,m,f,p,g){var v;return(v=new w[e](t,o,n,i,a,r,s,l,c,d,u,h,m,f,p,g)).id=k.getGUID(),v},l=function(e){var t,o,n,i;return t=e.className,o=e.data,n=e.id,t in w?(i=w[t].fromJSON(o))?(n&&(i.id=n),i):(console.log("Unreadable shape:",t,o),null):(console.log("Unknown shape:",t,o),null)},_=function(e){return{className:e.className,data:e.toJSON(),id:e.id}},d=function(e,t){return t?d(a(a(c(e))),t-1):e},c=function(e){var t,o,n,i,a;for(a=[],i=t=0,o=(e=[e[0]].concat(e).concat(k.last(e))).length;i<o;i++)n=e[i],a[2*t]=n,e[t+1]&&(a[2*t+1]=s(n,e[t+1])),t+=1;return a},a=function(e){var t,o,n,i,a;for(t=[],a=o=0,n=e.length;a<n;a++)i=e[a],e[o+1]&&(t[o]=s(i,e[o+1])),o+=1;return t},s=function(e,t){return u("Point",{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2,size:e.size+(t.size-e.size)/2,color:e.color})},(f=function(e,g){var t,o,n,i,a,r,s,l;for(i in(t=function(e,t,o,n,i,a,r,s,l,c,d,u,h,m,f,p){return g.constructor.call(this,e,t,o,n,i,a,r,s,l,c,d,u,h,m,f,p),this}).prototype.className=e,t.fromJSON=g.fromJSON,g.draw&&(a=g.draw,r=g.draw||function(e,t,o){return this.draw(e,t,o)},o=function(e,t,o){return a.call(t,e,o)},n=function(e,t,o,n){return r.call(o,e,t,n)},delete g.draw,g.drawLatest&&delete g.drawLatest,h(e,o,n)),g.toSVG&&(s=g.toSVG,l=function(e){return s.call(e)},delete g.toSVG,m(e,l)),t.prototype.draw=function(e,t){return y(e,this,{retryCallback:t})},t.prototype.drawLatest=function(e,t,o){return y(e,this,{retryCallback:o,bufferCtx:t,shouldOnlyDrawLatest:!0})},t.prototype.toSVG=function(){return b(this)},g)"fromJSON"!==i&&(t.prototype[i]=g[i]);return w[e]=t})("Image",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.scale=e.scale||1,this.image=e.image||null},getBoundingRect:function(){return{x:this.x,y:this.y,width:this.image.width*this.scale,height:this.image.height*this.scale}},toJSON:function(){return{x:this.x,y:this.y,imageSrc:this.image.src,imageObject:this.image,scale:this.scale}},fromJSON:function(e){var t,o;return((t=null)!=(o=e.imageObject)?o.width:void 0)?t=e.imageObject:(t=new Image).src=e.imageSrc,u("Image",{x:e.x,y:e.y,image:t,scale:e.scale})},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),f("Rectangle",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.width=e.width||0,this.height=e.height||0,this.strokeWidth=e.strokeWidth||1,this.strokeColor=e.strokeColor||"black",this.fillColor=e.fillColor||"transparent"},getBoundingRect:function(){return{x:this.x-this.strokeWidth/2,y:this.y-this.strokeWidth/2,width:this.width+this.strokeWidth,height:this.height+this.strokeWidth}},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height,strokeWidth:this.strokeWidth,strokeColor:this.strokeColor,fillColor:this.fillColor}},fromJSON:function(e){return u("Rectangle",e)},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),f("Ellipse",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.width=e.width||0,this.height=e.height||0,this.strokeWidth=e.strokeWidth||1,this.strokeColor=e.strokeColor||"black",this.fillColor=e.fillColor||"transparent"},getBoundingRect:function(){return{x:this.x-this.strokeWidth/2,y:this.y-this.strokeWidth/2,width:this.width+this.strokeWidth,height:this.height+this.strokeWidth}},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height,strokeWidth:this.strokeWidth,strokeColor:this.strokeColor,fillColor:this.fillColor}},fromJSON:function(e){return u("Ellipse",e)},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),f("Line",{constructor:function(e){return null==e&&(e={}),this.x1=e.x1||0,this.y1=e.y1||0,this.x2=e.x2||0,this.y2=e.y2||0,this.strokeWidth=e.strokeWidth||1,this.color=e.color||"black",this.capStyle=e.capStyle||"round",this.endCapShapes=e.endCapShapes||[null,null],this.dash=e.dash||null},getBoundingRect:function(){return{x:Math.min(this.x1,this.x2)-this.strokeWidth/2,y:Math.min(this.y1,this.y2)-this.strokeWidth/2,width:Math.abs(this.x2-this.x1)+this.strokeWidth/2,height:Math.abs(this.y2-this.y1)+this.strokeWidth/2}},toJSON:function(){return{x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2,strokeWidth:this.strokeWidth,color:this.color,capStyle:this.capStyle,dash:this.dash,endCapShapes:this.endCapShapes}},fromJSON:function(e){return u("Line",e)},move:function(e){return null==e&&(e={}),this.x1=this.x1-e.xDiff,this.y1=this.y1-e.yDiff,this.x2=this.x2-e.xDiff,this.y2=this.y2-e.yDiff},setUpperLeft:function(e){var t,o,n;return null==e&&(e={}),o=(t=this.getBoundingRect()).x-e.x,n=t.y-e.y,this.move({xDiff:o,yDiff:n})}}),r=function(e){var t,o,n,i,a;if(!e.length)return!1;for(a=e[0].size,t=e[0].color,i=0,o=e.length;i<o;i++)if((n=e[i]).size===a&&n.color===t||console.log(a,t,n.size,n.color),n.size!==a||n.color!==t)return!1;return!0},i=function(e,a){var i,t,o,r,s;return t=null,a.points?t=function(){var e,t,o,n;for(n=[],t=0,e=(o=a.points).length;t<e;t++)i=o[t],n.push(l(i));return n}():a.pointCoordinatePairs&&(t=function(){var e,t,o,n,i;for(i=[],t=0,e=(o=a.pointCoordinatePairs).length;t<e;t++)n=o[t],r=n[0],s=n[1],i.push(l({className:"Point",data:{x:r,y:s,size:a.pointSize,color:a.pointColor,smooth:a.smooth}}));return i}()),o=null,a.smoothedPointCoordinatePairs&&(o=function(){var e,t,o,n,i;for(i=[],t=0,e=(o=a.smoothedPointCoordinatePairs).length;t<e;t++)n=o[t],r=n[0],s=n[1],i.push(l({className:"Point",data:{x:r,y:s,size:a.pointSize,color:a.pointColor,smooth:a.smooth}}));return i}()),t[0]?u(e,{points:t,smoothedPoints:o,order:a.order,tailSize:a.tailSize,smooth:a.smooth}):null},f("LinePath",p={constructor:function(e){var t,o,n,i,a;if(null==e&&(e={}),n=e.points||[],this.order=e.order||3,this.tailSize=e.tailSize||3,this.smooth=!("smooth"in e)||e.smooth,this.segmentSize=Math.pow(2,this.order),this.sampleSize=this.tailSize+1,e.smoothedPoints)return this.points=e.points,this.smoothedPoints=e.smoothedPoints;for(this.points=[],a=[],i=0,t=n.length;i<t;i++)o=n[i],a.push(this.addPoint(o));return a},getBoundingRect:function(){return k.getBoundingRect(this.points.map(function(e){return{x:e.x-e.size/2,y:e.y-e.size/2,width:e.size,height:e.size}}))},toJSON:function(){var i,a;return r(this.points)?{order:this.order,tailSize:this.tailSize,smooth:this.smooth,pointCoordinatePairs:function(){var e,t,o,n;for(n=[],t=0,e=(o=this.points).length;t<e;t++)a=o[t],n.push([a.x,a.y]);return n}.call(this),smoothedPointCoordinatePairs:function(){var e,t,o,n;for(n=[],t=0,e=(o=this.smoothedPoints).length;t<e;t++)a=o[t],n.push([a.x,a.y]);return n}.call(this),pointSize:this.points[0].size,pointColor:this.points[0].color}:{order:this.order,tailSize:this.tailSize,smooth:this.smooth,points:function(){var e,t,o,n;for(n=[],t=0,e=(o=this.points).length;t<e;t++)i=o[t],n.push(_(i));return n}.call(this)}},fromJSON:function(e){return i("LinePath",e)},addPoint:function(e){if(this.points.push(e),this.smooth)return!this.smoothedPoints||this.points.length<this.sampleSize?this.smoothedPoints=d(this.points,this.order):(this.tail=k.last(d(k.last(this.points,this.sampleSize),this.order),this.segmentSize*this.tailSize),this.smoothedPoints=this.smoothedPoints.slice(0,this.smoothedPoints.length-this.segmentSize*(this.tailSize-1)).concat(this.tail));this.smoothedPoints=this.points},move:function(e){var t,o,n;for(null==e&&(e={}),n=0,t=(o=this.smooth?this.smoothedPoints:this.points).length;n<t;n++)o[n].move(e);return this.points=this.smoothedPoints},setUpperLeft:function(e){var t,o,n;return null==e&&(e={}),o=(t=this.getBoundingRect()).x-e.x,n=t.y-e.y,this.move({xDiff:o,yDiff:n})}}),f("ErasedLinePath",{constructor:p.constructor,toJSON:p.toJSON,addPoint:p.addPoint,getBoundingRect:p.getBoundingRect,fromJSON:function(e){return i("ErasedLinePath",e)}}),f("Point",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.size=e.size||0,this.color=e.color||""},getBoundingRect:function(){return{x:this.x-this.size/2,y:this.y-this.size/2,width:this.size,height:this.size}},toJSON:function(){return{x:this.x,y:this.y,size:this.size,color:this.color}},fromJSON:function(e){return u("Point",e)},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),f("Polygon",{constructor:function(e){var t,o,n,i,a;for(null==e&&(e={}),this.points=e.points,this.fillColor=e.fillColor||"white",this.strokeColor=e.strokeColor||"black",this.strokeWidth=e.strokeWidth,this.dash=e.dash||null,null==e.isClosed&&(e.isClosed=!0),this.isClosed=e.isClosed,a=[],n=0,t=(i=this.points).length;n<t;n++)(o=i[n]).color=this.strokeColor,a.push(o.size=this.strokeWidth);return a},addPoint:function(e,t){return this.points.push(LC.createShape("Point",{x:e,y:t}))},getBoundingRect:function(){return k.getBoundingRect(this.points.map(function(e){return e.getBoundingRect()}))},toJSON:function(){return{strokeWidth:this.strokeWidth,fillColor:this.fillColor,strokeColor:this.strokeColor,dash:this.dash,isClosed:this.isClosed,pointCoordinatePairs:this.points.map(function(e){return[e.x,e.y]})}},fromJSON:function(n){return n.points=n.pointCoordinatePairs.map(function(e){var t,o;return t=e[0],o=e[1],u("Point",{x:t,y:o,size:n.strokeWidth,color:n.strokeColor})}),u("Polygon",n)},move:function(e){var t,o,n,i,a;for(null==e&&(e={}),a=[],n=0,t=(i=this.points).length;n<t;n++)o=i[n],a.push(o.move(e));return a},setUpperLeft:function(e){var t,o,n;return null==e&&(e={}),o=(t=this.getBoundingRect()).x-e.x,n=t.y-e.y,this.move({xDiff:o,yDiff:n})}}),f("Text",{constructor:function(e){return null==e&&(e={}),this.x=e.x||0,this.y=e.y||0,this.v=e.v||0,this.text=e.text||"",this.color=e.color||"black",this.font=e.font||"18px sans-serif",this.forcedWidth=e.forcedWidth||null,this.forcedHeight=e.forcedHeight||null},_makeRenderer:function(e){if(e.lineHeight=1.2,this.renderer=new n(e,this.text,this.font,this.forcedWidth,this.forcedHeight),this.v<1)return console.log("repairing baseline"),this.v=1,this.x-=this.renderer.metrics.bounds.minx,this.y-=this.renderer.metrics.leading-this.renderer.metrics.descent},setText:function(e){return this.text=e,this.renderer=null},setFont:function(e){return this.font=e,this.renderer=null},setPosition:function(e,t){return this.x=e,this.y=t},setSize:function(e,t){return this.forcedWidth=Math.max(e,0),this.forcedHeight=Math.max(t,0),this.renderer=null},enforceMaxBoundingRect:function(e){var t,o,n;if(t=this.getBoundingRect(e.ctx),n={x:-e.position.x/e.scale,y:-e.position.y/e.scale,width:e.canvas.width/e.scale,height:e.canvas.height/e.scale},t.x+t.width>n.x+n.width)return o=t.x-n.x,this.forcedWidth=n.width-o-10,this.renderer=null},getBoundingRect:function(e,t){if(null==t&&(t=!1),!this.renderer){if(!e)throw"Must pass ctx if text hasn't been rendered yet";this._makeRenderer(e)}return{x:Math.floor(this.x),y:Math.floor(this.y),width:Math.ceil(this.renderer.getWidth(!0)),height:Math.ceil(this.renderer.getHeight())}},toJSON:function(){return{x:this.x,y:this.y,text:this.text,color:this.color,font:this.font,forcedWidth:this.forcedWidth,forcedHeight:this.forcedHeight,v:this.v}},fromJSON:function(e){return u("Text",e)},move:function(e){return null==e&&(e={}),this.x=this.x-e.xDiff,this.y=this.y-e.yDiff},setUpperLeft:function(e){return null==e&&(e={}),this.x=e.x,this.y=e.y}}),f("SelectionBox",{constructor:function(e){return null==e&&(e={}),this.shape=e.shape,null!=e.handleSize?this.handleSize=e.handleSize:this.handleSize=10,this.margin=4,this.backgroundColor=e.backgroundColor||null,this._br=this.shape.getBoundingRect(e.ctx)},toJSON:function(){return{shape:_(this.shape),backgroundColor:this.backgroundColor}},fromJSON:function(e){var t,o;return o=e.shape,e.handleSize,e.margin,t=e.backgroundColor,u("SelectionBox",{shape:l(o),backgroundColor:t})},getTopLeftHandleRect:function(){return{x:this._br.x-this.handleSize-this.margin,y:this._br.y-this.handleSize-this.margin,width:this.handleSize,height:this.handleSize}},getBottomLeftHandleRect:function(){return{x:this._br.x-this.handleSize-this.margin,y:this._br.y+this._br.height+this.margin,width:this.handleSize,height:this.handleSize}},getTopRightHandleRect:function(){return{x:this._br.x+this._br.width+this.margin,y:this._br.y-this.handleSize-this.margin,width:this.handleSize,height:this.handleSize}},getBottomRightHandleRect:function(){return{x:this._br.x+this._br.width+this.margin,y:this._br.y+this._br.height+this.margin,width:this.handleSize,height:this.handleSize}},getBoundingRect:function(){return{x:this._br.x-this.margin,y:this._br.y-this.margin,width:this._br.width+2*this.margin,height:this._br.height+2*this.margin}}}),t.exports={defineShape:f,createShape:u,JSONToShape:l,shapeToJSON:_}},{"./TextRenderer":2,"./canvasRenderer":5,"./lineEndCapShapes":8,"./svgRenderer":14,"./util":15}],14:[function(e,t,o){var n,l,i,a;l=e("./lineEndCapShapes"),a={},i=function(e,t){if(null==t&&(t={}),null==t.shouldIgnoreUnsupportedShapes&&(t.shouldIgnoreUnsupportedShapes=!1),a[e.className])return a[e.className](e);if(t.shouldIgnoreUnsupportedShapes)return console.warn("Can't render shape of type "+e.className+" to SVG"),"";throw"Can't render shape of type "+e.className+" to SVG"},(n=function(e,t){return a[e]=t})("Rectangle",function(e){var t,o,n,i,a,r,s,l;return i=e.x,s=e.y,a=e.x+e.width,l=e.y+e.height,n=Math.min(i,a),r=Math.min(s,l),o=Math.max(i,a)-n,t=Math.max(s,l)-r,e.strokeWidth%2!=0&&(n+=.5,r+=.5),"<rect x='"+n+"' y='"+r+"' width='"+o+"' height='"+t+"' stroke='"+e.strokeColor+"' fill='"+e.fillColor+"' stroke-width='"+e.strokeWidth+"' />"}),n("SelectionBox",function(e){return""}),n("Ellipse",function(e){var t,o;return o=Math.floor(e.width/2),t=Math.floor(e.height/2),"<ellipse cx='"+(e.x+o)+"' cy='"+(e.y+t)+"' rx='"+Math.abs(o)+"' ry='"+Math.abs(t)+"' stroke='"+e.strokeColor+"' fill='"+e.fillColor+"' stroke-width='"+e.strokeWidth+"' />"}),n("Image",function(e){return"<image x='"+e.x+"' y='"+e.y+"' width='"+e.image.naturalWidth*e.scale+"' height='"+e.image.naturalHeight*e.scale+"' xlink:href='"+e.image.src+"' />"}),n("Line",function(e){var t,o,n,i,a,r,s;return n=e.dash?"stroke-dasharray='"+e.dash.join(", ")+"'":"",o="",t=Math.max(2.2*e.strokeWidth,5),i=e.x1,a=e.x2,r=e.y1,s=e.y2,e.strokeWidth%2!=0&&(i+=.5,a+=.5,r+=.5,s+=.5),e.endCapShapes[0]&&(o+=l[e.endCapShapes[0]].svg(i,r,Math.atan2(r-s,i-a),t,e.color)),e.endCapShapes[1]&&(o+=l[e.endCapShapes[1]].svg(a,s,Math.atan2(s-r,a-i),t,e.color)),"<g> <line x1='"+i+"' y1='"+r+"' x2='"+a+"' y2='"+s+"' "+n+" stroke-linecap='"+e.capStyle+"' stroke='"+e.color+" 'stroke-width='"+e.strokeWidth+"' /> "+o+" </g>"}),n("LinePath",function(e){return"<polyline fill='none' points='"+e.smoothedPoints.map(function(e){var t;return t=e.strokeWidth%2==0?0:.5,e.x+t+","+(e.y+t)}).join(" ")+"' stroke='"+e.points[0].color+"' stroke-linecap='round' stroke-width='"+e.points[0].size+"' />"}),n("ErasedLinePath",function(e){return""}),n("Polygon",function(e){return e.isClosed?"<polygon fill='"+e.fillColor+"' points='"+e.points.map(function(e){var t;return t=e.strokeWidth%2==0?0:.5,e.x+t+","+(e.y+t)}).join(" ")+"' stroke='"+e.strokeColor+"' stroke-width='"+e.strokeWidth+"' />":"<polyline fill='"+e.fillColor+"' points='"+e.points.map(function(e){var t;return t=e.strokeWidth%2==0?0:.5,e.x+t+","+(e.y+t)}).join(" ")+"' stroke='none' /> <polyline fill='none' points='"+e.points.map(function(e){var t;return t=e.strokeWidth%2==0?0:.5,e.x+t+","+(e.y+t)}).join(" ")+"' stroke='"+e.strokeColor+"' stroke-width='"+e.strokeWidth+"' />"}),n("Text",function(n){var e,t,o;return o=n.forcedWidth?"width='"+n.forcedWidth+"px'":"",e=n.forcedHeight?"height='"+n.forcedHeight+"px'":"",t=n.text.split(/\r\n|\r|\n/g),n.renderer&&(t=n.renderer.lines),"<text x='"+n.x+"' y='"+n.y+"' "+o+" "+e+" fill='"+n.color+"' style='font: "+n.font+";'> "+t.map(function(e,t){var o;return o=0===t?0:"1.2em","<tspan x='"+n.x+"' dy='"+o+"' alignment-baseline='text-before-edge'> "+e+" </tspan>"}).join("")+" </text>"}),t.exports={defineSVGRenderer:n,renderShapeToSVG:i}},{"./lineEndCapShapes":8}],15:[function(e,t,o){var l,s,n,r,i,c=[].slice;n=Array.prototype.slice,l=e("./canvasRenderer").renderShapeToContext,s=e("./svgRenderer").renderShapeToSVG,r={addImageOnload:function(e,t){var o;return o=e.onload,e.onload=function(){return"function"==typeof o&&o(),t()},e},last:function(e,t){return null==t&&(t=null),t?n.call(e,Math.max(e.length-t,0)):e[e.length-1]},classSet:function(e){var t,o;for(o in t=[],e)e[o]&&t.push(o);return t.join(" ")},matchElementSize:function(n,i,e,a){var t;return null==a&&(a=function(){}),t=function(){var e,t,o;for(t=0,o=i.length;t<o;t++)(e=i[t]).style.width=n.offsetWidth+"px",e.style.height=n.offsetHeight+"px",null!=e.width&&(e.setAttribute("width",n.offsetWidth),e.setAttribute("height",n.offsetHeight));return a()},n.addEventListener("resize",t),window.addEventListener("resize",t),window.addEventListener("orientationchange",t),t(),t},combineCanvases:function(){var e,t,o,n,i,a,r,s;for(o=1<=arguments.length?c.call(arguments,0):[],(e=document.createElement("canvas")).width=o[0].width,e.height=o[0].height,i=0,r=o.length;i<r;i++)t=o[i],e.width=Math.max(t.width,e.width),e.height=Math.max(t.height,e.height);for(n=e.getContext("2d"),a=0,s=o.length;a<s;a++)t=o[a],n.drawImage(t,0,0);return e},renderShapes:function(e,t,o,n){var i,a,r,s;for(null==o&&(o=1),null==n&&(n=null),(n=n||document.createElement("canvas")).width=t.width*o,n.height=t.height*o,(i=n.getContext("2d")).translate(-t.x*o,-t.y*o),i.scale(o,o),a=0,r=e.length;a<r;a++)s=e[a],l(i,s);return n},renderShapesToSVG:function(e,t,o){var n,i,a,r;return a=t.x,r=t.y,("<svg xmlns='http://www.w3.org/2000/svg' width='"+(i=t.width)+"' height='"+(n=t.height)+"' viewBox='0 0 "+i+" "+n+"'> <rect width='"+i+"' height='"+n+"' x='0' y='0' fill='"+o+"' /> <g transform='translate("+-a+", "+-r+")'> "+e.map(s).join("")+" </g> </svg>").replace(/(\r\n|\n|\r)/gm,"")},getBoundingRect:function(e,t,o){var n,i,a,r,s,l,c;if(!e.length)return{x:0,y:0,width:t,height:o};for(s=e[0].x,l=e[0].y,a=e[0].x+e[0].width,r=e[0].y+e[0].height,n=0,i=e.length;n<i;n++)c=e[n],s=Math.floor(Math.min(c.x,s)),l=Math.floor(Math.min(c.y,l)),a=Math.ceil(Math.max(a,c.x+c.width)),r=Math.ceil(Math.max(r,c.y+c.height));return{x:s=t?0:s,y:l=o?0:l,width:(a=t||a)-s,height:(r=o||r)-l}},getDefaultImageRect:function(e,t,o){var n,i,a;return null==t&&(t={width:0,height:0}),null==o&&(o={top:0,right:0,bottom:0,left:0}),a=t.width,n=t.height,(i=r.getBoundingRect(e,"infinite"===a?0:a,"infinite"===n?0:n)).x-=o.left,i.y-=o.top,i.width+=o.left+o.right,i.height+=o.top+o.bottom,i},getBackingScale:function(e){return null==window.devicePixelRatio?1:1<window.devicePixelRatio?window.devicePixelRatio:1},getGUID:(i=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},function(){return i()+i()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i()+i()}),requestAnimationFrame:function(e){return window.requestAnimationFrame?window.requestAnimationFrame(e):window.webkitRequestAnimationFrame?window.webkitRequestAnimationFrame(e):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(e):setTimeout(e,0)},cancelAnimationFrame:function(e){return window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(e):clearTimeout(e)}},t.exports=r},{"./canvasRenderer":5,"./svgRenderer":14}],16:[function(e,t,o){!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o}e.prototype=window.CustomEvent.prototype,window.CustomEvent=e}()},{}],17:[function(e,t,o){var n=!1;CanvasRenderingContext2D.prototype.setLineDash||(CanvasRenderingContext2D.prototype.setLineDash=function(){n||(console.warn("context2D.setLineDash is a no-op in this browser."),n=!0)}),t.exports=null},{}],18:[function(e,t,o){var d,n,i,a,s,r,l,c,u,h,m,f,p,g,v,y,b;e("./ie_customevent"),e("./ie_setLineDash"),d=e("./core/LiterallyCanvas"),s=e("./core/defaultOptions"),i=e("./core/canvasRenderer"),v=e("./core/svgRenderer"),g=e("./core/shapes"),b=e("./core/util"),m=e("./core/renderSnapshotToImage"),f=e("./core/renderSnapshotToSVG"),u=e("./core/localization").localize,a={snapshotToShapes:function(e){var t,o,n,i,a;for(i=[],t=0,o=(n=e.shapes).length;t<o;t++)a=n[t],i.push(g.JSONToShape(a));return i},snapshotJSONToShapes:function(e){return a.snapshotToShapes(JSON.parse(e))}},n=e("./tools/base"),y={Pencil:e("./tools/Pencil"),Eraser:e("./tools/Eraser"),Line:e("./tools/Line"),Rectangle:e("./tools/Rectangle"),Ellipse:e("./tools/Ellipse"),Text:e("./tools/Text"),Polygon:e("./tools/Polygon"),Pan:e("./tools/Pan"),Eyedropper:e("./tools/Eyedropper"),SelectShape:e("./tools/SelectShape"),Tool:n.Tool,ToolWithStroke:n.ToolWithStroke},r=s.tools,s.imageURLPrefix,p=function(e){return e,s.imageURLPrefix=e},l=function(e,t){var o,n,i,a,r;for(a in null==t&&(t={}),s)a in t||(t[a]=s[a]);for(n=0,i=(r=e.children).length;n<i;n++)o=r[n],e.removeChild(o);return c(e,t)},c=function(n,e){var t,i,a;a=n.className,-1===[" "," "].join(n.className).indexOf(" literally ")&&(n.className=n.className+" literally"),n.className=n.className+" toolbar-hidden",(t=document.createElement("div")).className="lc-drawing",n.appendChild(t);var o=document.createElement("div");o.className="custom-canvas-background",o.id="customCanvasView",t.appendChild(o);var r=document.createElement("div");r.className="draw-permission",n.appendChild(r);var s=document.createElement("div");s.className="temporary-draw-permission",n.appendChild(s);var l=document.createElement("span");l.className="laser-mark",n.appendChild(l);var c=document.createElement("div");return c.className="literally-data-loading-wrap",c.style.zIndex=100,c.style.display="none",n.appendChild(c),(i=new d(t,e)).customCanvasBackgroundElement=o,i.loadingElement=c,i.watermarkImageToLcBackground=void 0===e.watermarkImageToLcBackground||e.watermarkImageToLcBackground,t.setAttribute("watermarkImageToLcBackground",i.watermarkImageToLcBackground),i.isDrawAble?(r.className=r.className.replace(/( yes| no)/g,""),r.className+=" yes"):(r.className=r.className.replace(/( yes| no)/g,""),r.className+=" no"),i.isTmpDrawAble?(s.className=s.className.replace(/( yes| no)/g,""),s.className+=" yes"):(s.className=s.className.replace(/( yes| no)/g,""),s.className+=" no"),i.teardown=function(){var e,t,o;try{for(i._teardown(),t=(o=n.children).length-1;0<=t;t--)(e=o[t])&&n.removeChild(e);return n.className=a}catch(e){return void console.error("tk_lc error:",e)}},"onInit"in e&&e.onInit(i),i},h=function(e){return e.fn.literallycanvas=function(o){return null==o&&(o={}),this.each(function(e,t){return t.literallycanvas=l(t,o)}),this}},"undefined"!=typeof window&&(window.LC={init:l},window.$&&h(window.$)),t.exports={init:l,registerJQueryPlugin:h,util:b,tools:y,setDefaultImageURLPrefix:p,defaultTools:r,defineShape:g.defineShape,createShape:g.createShape,JSONToShape:g.JSONToShape,shapeToJSON:g.shapeToJSON,defineCanvasRenderer:i.defineCanvasRenderer,renderShapeToContext:i.renderShapeToContext,renderShapeToCanvas:i.renderShapeToCanvas,renderShapesToCanvas:b.renderShapes,defineSVGRenderer:v.defineSVGRenderer,renderShapeToSVG:v.renderShapeToSVG,renderShapesToSVG:b.renderShapesToSVG,snapshotToShapes:a.snapshotToShapes,snapshotJSONToShapes:a.snapshotJSONToShapes,renderSnapshotToImage:m,renderSnapshotToSVG:f,localize:u}},{"./core/LiterallyCanvas":1,"./core/canvasRenderer":5,"./core/defaultOptions":6,"./core/localization":9,"./core/renderSnapshotToImage":11,"./core/renderSnapshotToSVG":12,"./core/shapes":13,"./core/svgRenderer":14,"./core/util":15,"./ie_customevent":16,"./ie_setLineDash":17,"./tools/Ellipse":19,"./tools/Eraser":20,"./tools/Eyedropper":21,"./tools/Line":22,"./tools/Pan":23,"./tools/Pencil":24,"./tools/Polygon":25,"./tools/Rectangle":26,"./tools/SelectShape":27,"./tools/Text":28,"./tools/base":29}],19:[function(e,t,o){var n,i,a={}.hasOwnProperty;n=e("./base").ToolWithStroke,i=e("../core/shapes").createShape,t.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="Ellipse",t.prototype.iconName="ellipse",t.prototype.begin=function(e,t,o){return this.currentShape=i("Ellipse",{x:e,y:t,strokeWidth:this.strokeWidth,strokeColor:o.getColor("primary"),fillColor:o.getColor("secondary")})},t.prototype.continue=function(e,t,o){return this.currentShape.width=e-this.currentShape.x,this.currentShape.height=t-this.currentShape.y,o.drawShapeInProgress(this.currentShape)},t.prototype.end=function(e,t,o){return o.saveShape(this.currentShape)},t}()},{"../core/shapes":13,"./base":29}],20:[function(e,t,o){var n,i,a={}.hasOwnProperty;n=e("./Pencil"),i=e("../core/shapes").createShape,t.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="Eraser",t.prototype.iconName="eraser",t.prototype.makePoint=function(e,t,o){return i("Point",{x:e,y:t,size:this.strokeWidth,color:"#000"})},t.prototype.makeShape=function(){return i("ErasedLinePath")},t}()},{"../core/shapes":13,"./Pencil":24}],21:[function(e,t,o){var n,r,i={}.hasOwnProperty;n=e("./base").Tool,r=function(e,t){var o,n,i;return n=t.x,i=t.y,(o=e.getImageData(n,i,1,1).data)[3]?"rgb("+o[0]+", "+o[1]+", "+o[2]+")":null},t.exports=function(e){function t(e){t.__super__.constructor.call(this,e),this.strokeOrFill="stroke"}return function(e,t){for(var o in t)i.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="Eyedropper",t.prototype.iconName="eyedropper",t.prototype.optionsStyle="stroke-or-fill",t.prototype.readColor=function(e,t,o){var n,i,a;return a=o.getDefaultImageRect(),n=o.getImage(),(i=r(n.getContext("2d"),{x:e-a.x,y:t-a.y}))||o.getColor("background"),"stroke"===this.strokeOrFill?o.setColor("primary",i):o.setColor("secondary",i)},t.prototype.begin=function(e,t,o){return this.readColor(e,t,o)},t.prototype.continue=function(e,t,o){return this.readColor(e,t,o)},t}()},{"./base":29}],22:[function(e,t,o){var n,i,a={}.hasOwnProperty;n=e("./base").ToolWithStroke,i=e("../core/shapes").createShape,t.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="Line",t.prototype.iconName="line",t.prototype.optionsStyle="line-options-and-stroke-width",t.prototype.begin=function(e,t,o){return this.currentShape=i("Line",{x1:e,y1:t,x2:e,y2:t,strokeWidth:this.strokeWidth,dash:function(){switch(!1){case!this.isDashed:return[2*this.strokeWidth,4*this.strokeWidth];default:return null}}.call(this),endCapShapes:this.hasEndArrow?[null,"arrow"]:null,color:o.getColor("primary")})},t.prototype.continue=function(e,t,o){return this.currentShape.x2=e,this.currentShape.y2=t,o.drawShapeInProgress(this.currentShape)},t.prototype.end=function(e,t,o){return o.saveShape(this.currentShape)},t}()},{"../core/shapes":13,"./base":29}],23:[function(e,t,o){var n,i={}.hasOwnProperty;n=e("./base").Tool,e("../core/shapes").createShape,t.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var o in t)i.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="Pan",t.prototype.iconName="pan",t.prototype.usesSimpleAPI=!1,t.prototype.didBecomeActive=function(i){var a,n,r;return a=[],this.unsubscribe=function(){var e,t,o,n;for(n=[],t=0,o=a.length;t<o;t++)e=a[t],n.push(e());return n},a.push(i.on("lc-pointerdown",(n=this,function(e){var t,o;return t=e.rawX,o=e.rawY,n.oldPosition=i.position,n.pointerStart={x:t,y:o}}))),a.push(i.on("lc-pointerdrag",(r=this,function(e){var t,o,n;return o=e.rawX,n=e.rawY,t={x:(o-r.pointerStart.x)*i.backingScale,y:(n-r.pointerStart.y)*i.backingScale},i.setPan(r.oldPosition.x+t.x,r.oldPosition.y+t.y)})))},t.prototype.willBecomeInactive=function(e){return this.unsubscribe()},t}()},{"../core/shapes":13,"./base":29}],24:[function(e,t,o){var n,i,a={}.hasOwnProperty;n=e("./base").ToolWithStroke,i=e("../core/shapes").createShape,t.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="Pencil",t.prototype.iconName="pencil",t.prototype.eventTimeThreshold=10,t.prototype.begin=function(e,t,o){return this.color=o.getColor("primary"),this.currentShape=this.makeShape(),this.currentShape.addPoint(this.makePoint(e,t,o)),this.lastEventTime=Date.now()},t.prototype.continue=function(e,t,o){var n;if((n=Date.now()-this.lastEventTime)>this.eventTimeThreshold)return this.lastEventTime+=n,this.currentShape.addPoint(this.makePoint(e,t,o)),o.drawShapeInProgress(this.currentShape)},t.prototype.end=function(e,t,o){return o.saveShape(this.currentShape),this.currentShape=void 0},t.prototype.makePoint=function(e,t,o){return i("Point",{x:e,y:t,size:this.strokeWidth,color:this.color})},t.prototype.makeShape=function(){return i("LinePath")},t}()},{"../core/shapes":13,"./base":29}],25:[function(e,t,o){var n,i,a={}.hasOwnProperty;n=e("./base").ToolWithStroke,i=e("../core/shapes").createShape,t.exports=function(e){function p(){return p.__super__.constructor.apply(this,arguments)}return function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(p,n),p.prototype.name="Polygon",p.prototype.iconName="polygon",p.prototype.usesSimpleAPI=!1,p.prototype.didBecomeActive=function(n){var e,t,o,i,a,r,s,l,c,d,u,h,m,f;return p.__super__.didBecomeActive.call(this,n),s=[],this.polygonUnsubscribe=function(){var e,t,o,n;for(n=[],t=0,o=s.length;t<o;t++)e=s[t],n.push(e());return n},this.points=null,this.maybePoint=null,o=function(){return l._getWillFinish()?l._close(n):(n.trigger("lc-polygon-started"),l.points?l.points.push(l.maybePoint):l.points=[l.maybePoint],l.maybePoint={x:l.maybePoint.x,y:l.maybePoint.y},n.setShapesInProgress(l._getShapes(n)),n.repaintLayer("main"))},t=function(e){var t,o;if(t=e.x,o=e.y,c.maybePoint)return c.maybePoint.x=t,c.maybePoint.y=o,n.setShapesInProgress(c._getShapes(n)),n.repaintLayer("main")},e=function(e){var t,o;return t=e.x,o=e.y,d.maybePoint={x:t,y:o},n.setShapesInProgress(d._getShapes(n)),n.repaintLayer("main")},r=function(){return u.maybePoint={x:1/0,y:1/0},u._close(n)},a=function(){return h.maybePoint=h.points[0],h._close(n)},m=h=u=d=c=l=this,i=function(){return m._cancel(n)},s.push(n.on("drawingChange",(f=this,function(){return f._cancel(n)}))),s.push(n.on("lc-pointerdown",e)),s.push(n.on("lc-pointerdrag",t)),s.push(n.on("lc-pointermove",t)),s.push(n.on("lc-pointerup",o)),s.push(n.on("lc-polygon-finishopen",r)),s.push(n.on("lc-polygon-finishclosed",a)),s.push(n.on("lc-polygon-cancel",i))},p.prototype.willBecomeInactive=function(e){return p.__super__.willBecomeInactive.call(this,e),(this.points||this.maybePoint)&&this._cancel(e),this.polygonUnsubscribe()},p.prototype._getArePointsClose=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)<10},p.prototype._getWillClose=function(){return!!(this.points&&1<this.points.length)&&(!!this.maybePoint&&this._getArePointsClose(this.points[0],this.maybePoint))},p.prototype._getWillFinish=function(){return!!(this.points&&1<this.points.length)&&(!!this.maybePoint&&(this._getArePointsClose(this.points[0],this.maybePoint)||this._getArePointsClose(this.points[this.points.length-1],this.maybePoint)))},p.prototype._cancel=function(e){return e.trigger("lc-polygon-stopped"),this.maybePoint=null,this.points=null,e.setShapesInProgress([]),e.repaintLayer("main")},p.prototype._close=function(e){return e.trigger("lc-polygon-stopped"),e.setShapesInProgress([]),2<this.points.length&&e.saveShape(this._getShape(e,!1)),this.maybePoint=null,this.points=null},p.prototype._getShapes=function(e,t){var o;return null==t&&(t=!0),(o=this._getShape(e,t))?[o]:[]},p.prototype._getShape=function(e,t){var o;return null==t&&(t=!0),o=[],this.points&&(o=o.concat(this.points)),!t&&o.length<3?null:(t&&this.maybePoint&&o.push(this.maybePoint),1<o.length?i("Polygon",{isClosed:this._getWillClose(),strokeColor:e.getColor("primary"),fillColor:e.getColor("secondary"),strokeWidth:this.strokeWidth,points:o.map(function(e){return i("Point",e)})}):null)},p.prototype.optionsStyle="polygon-and-stroke-width",p}()},{"../core/shapes":13,"./base":29}],26:[function(e,t,o){var n,i,a={}.hasOwnProperty;n=e("./base").ToolWithStroke,i=e("../core/shapes").createShape,t.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="Rectangle",t.prototype.iconName="rectangle",t.prototype.begin=function(e,t,o){return this.currentShape=i("Rectangle",{x:e,y:t,strokeWidth:this.strokeWidth,strokeColor:o.getColor("primary"),fillColor:o.getColor("secondary")})},t.prototype.continue=function(e,t,o){return this.currentShape.width=e-this.currentShape.x,this.currentShape.height=t-this.currentShape.y,o.drawShapeInProgress(this.currentShape)},t.prototype.end=function(e,t,o){return o.saveShape(this.currentShape)},t}()},{"../core/shapes":13,"./base":29}],27:[function(e,t,o){var n,l,i={}.hasOwnProperty;n=e("./base").Tool,l=e("../core/shapes").createShape,t.exports=function(e){function t(e){this.selectCanvas=document.createElement("canvas"),this.selectCanvas.style["background-color"]="transparent",this.selectCtx=this.selectCanvas.getContext("2d")}return function(e,t){for(var o in t)i.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="SelectShape",t.prototype.usesSimpleAPI=!1,t.prototype.didBecomeActive=function(a){var e,t,o,i,r,n,s;return i=[],this._selectShapeUnsubscribe=function(){var e,t,o,n;for(n=[],t=0,o=i.length;t<o;t++)e=i[t],n.push(e());return n},e=function(e){var t,o,n,i;if(n=e.x,i=e.y,r.didDrag=!1,o=r._getPixel(n,i,a,r.selectCtx),r.selectedShape=a.shapes[o],null!=r.selectedShape)return a.trigger("shapeSelected",{selectedShape:r.selectedShape}),a.setShapesInProgress([r.selectedShape,l("SelectionBox",{shape:r.selectedShape,handleSize:0})]),a.repaintLayer("main"),t=r.selectedShape.getBoundingRect(),r.dragOffset={x:n-t.x,y:i-t.y}},t=function(e){var t,o;if(t=e.x,o=e.y,null!=n.selectedShape)return n.didDrag=!0,n.selectedShape.setUpperLeft({x:t-n.dragOffset.x,y:o-n.dragOffset.y}),a.setShapesInProgress([n.selectedShape,l("SelectionBox",{shape:n.selectedShape,handleSize:0})]),a.repaintLayer("main")},s=n=r=this,o=function(e){if(e.x,e.y,s.didDrag)return s.didDrag=!1,a.trigger("shapeMoved",{shape:s.selectedShape}),a.trigger("drawingChange",{}),a.repaintLayer("main"),s._drawSelectCanvas(a)},i.push(a.on("lc-pointerdown",e)),i.push(a.on("lc-pointerdrag",t)),i.push(a.on("lc-pointerup",o)),this._drawSelectCanvas(a)},t.prototype.willBecomeInactive=function(e){return this._selectShapeUnsubscribe(),e.setShapesInProgress([])},t.prototype._drawSelectCanvas=function(e){var t,o;return this.selectCanvas.width=e.canvas.width,this.selectCanvas.height=e.canvas.height,this.selectCtx.clearRect(0,0,this.selectCanvas.width,this.selectCanvas.height),t=e.shapes.map((o=this,function(e,t){return l("SelectionBox",{shape:e,handleSize:0,backgroundColor:"#"+o._intToHex(t)})})),e.draw(t,this.selectCtx)},t.prototype._intToHex=function(e){return("000000"+e.toString(16)).slice(-6)},t.prototype._getPixel=function(e,t,o,n){var i,a;return i=o.drawingCoordsToClientCoords(e,t),(a=n.getImageData(i.x,i.y,1,1).data)[3]?parseInt(this._rgbToHex(a[0],a[1],a[2]),16):null},t.prototype._componentToHex=function(e){return("0"+e.toString(16)).slice(-2)},t.prototype._rgbToHex=function(e,t,o){return""+this._componentToHex(e)+this._componentToHex(t)+this._componentToHex(o)},t}()},{"../core/shapes":13,"./base":29}],28:[function(e,t,o){var n,r,s,i={}.hasOwnProperty;n=e("./base").Tool,r=e("../core/shapes").createShape,s=function(e,t){return!(e.x<t.x)&&(!(e.y<t.y)&&(!(e.x>t.x+t.width)&&!(e.y>t.y+t.height)))},t.exports=function(e){function t(){this.text="",this.font="bold 18px sans-serif",this.currentShape=null,this.currentShapeState=null,this.initialShapeBoundingRect=null,this.dragAction=null,this.didDrag=!1}return function(e,t){for(var o in t)i.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.name="Text",t.prototype.iconName="text",t.prototype.didBecomeActive=function(t){var i,e,o,n,a,r,s;return i=[],this.unsubscribe=function(){var e,t,o,n;for(n=[],t=0,o=i.length;t<o;t++)e=i[t],n.push(e());return n},function(){return o._ensureNotEditing(t),o._clearCurrentShape(t),t.repaintLayer("main")},n=o=this,e=function(){return n._updateInputEl(t)},i.push(t.on("zoom",e)),i.push(t.on("imageSizeChange",e)),i.push(t.on("snapshotLoad",(a=this,function(){return a._clearCurrentShape(t),t.repaintLayer("main")}))),i.push(t.on("primaryColorChange",(r=this,function(e){if(r.currentShape)return r.currentShape.color=e,r._updateInputEl(t),t.repaintLayer("main")}))),i.push(t.on("setFont",(s=this,function(e){if(s.currentShape)return s.font=e,s.currentShape.setFont(e),s._setShapesInProgress(t),s._updateInputEl(t),t.repaintLayer("main")})))},t.prototype.willBecomeInactive=function(e){return this.currentShape&&(this._ensureNotEditing(e),this.commit(e)),this.unsubscribe()},t.prototype.setText=function(e){return this.text=e},t.prototype._ensureNotEditing=function(e){if("editing"===this.currentShapeState)return this._exitEditingState(e)},t.prototype._clearCurrentShape=function(e){return this.currentShape=null,this.initialShapeBoundingRect=null,this.currentShapeState=null,e.setShapesInProgress([])},t.prototype.commit=function(e){return this.currentShape.text&&e.saveShape(this.currentShape),this._clearCurrentShape(e),e.repaintLayer("main")},t.prototype._getSelectionShape=function(e,t){return null==t&&(t=null),r("SelectionBox",{shape:this.currentShape,ctx:e,backgroundColor:t})},t.prototype._setShapesInProgress=function(e){switch(this.currentShapeState){case"selected":return e.setShapesInProgress([this._getSelectionShape(e.ctx),this.currentShape]);case"editing":return e.setShapesInProgress([this._getSelectionShape(e.ctx,"#fff")]);default:return e.setShapesInProgress([this.currentShape])}},t.prototype.begin=function(e,t,o){var n,i,a;if(this.dragAction="none",this.didDrag=!1,"selected"===this.currentShapeState||"editing"===this.currentShapeState?(n=this.currentShape.getBoundingRect(o.ctx),(a=this._getSelectionShape(o.ctx)).getBoundingRect(),s(i={x:e,y:t},n)&&(this.dragAction="move"),s(i,a.getBottomRightHandleRect())&&(this.dragAction="resizeBottomRight"),s(i,a.getTopLeftHandleRect())&&(this.dragAction="resizeTopLeft"),s(i,a.getBottomLeftHandleRect())&&(this.dragAction="resizeBottomLeft"),s(i,a.getTopRightHandleRect())&&(this.dragAction="resizeTopRight"),"none"===this.dragAction&&"editing"===this.currentShapeState&&(this.dragAction="stop-editing",this._exitEditingState(o))):(this.color=o.getColor("primary"),this.currentShape=r("Text",{x:e,y:t,text:this.text,color:this.color,font:this.font,v:1}),this.dragAction="place",this.currentShapeState="selected"),"none"!==this.dragAction)return this.initialShapeBoundingRect=this.currentShape.getBoundingRect(o.ctx),this.dragOffset={x:e-this.initialShapeBoundingRect.x,y:t-this.initialShapeBoundingRect.y},this._setShapesInProgress(o),o.repaintLayer("main");this.commit(o)},t.prototype.continue=function(e,t,o){var n,i,a;if("none"!==this.dragAction){switch(a=(n=this.initialShapeBoundingRect).x+n.width,i=n.y+n.height,this.dragAction){case"place":this.currentShape.x=e,this.currentShape.y=t,this.didDrag=!0;break;case"move":this.currentShape.x=e-this.dragOffset.x,this.currentShape.y=t-this.dragOffset.y,this.didDrag=!0;break;case"resizeBottomRight":this.currentShape.setSize(e-(this.dragOffset.x-this.initialShapeBoundingRect.width)-n.x,t-(this.dragOffset.y-this.initialShapeBoundingRect.height)-n.y);break;case"resizeTopLeft":this.currentShape.setSize(a-e+this.dragOffset.x,i-t+this.dragOffset.y),this.currentShape.setPosition(e-this.dragOffset.x,t-this.dragOffset.y);break;case"resizeBottomLeft":this.currentShape.setSize(a-e+this.dragOffset.x,t-(this.dragOffset.y-this.initialShapeBoundingRect.height)-n.y),this.currentShape.setPosition(e-this.dragOffset.x,this.currentShape.y);break;case"resizeTopRight":this.currentShape.setSize(e-(this.dragOffset.x-this.initialShapeBoundingRect.width)-n.x,i-t+this.dragOffset.y),this.currentShape.setPosition(this.currentShape.x,t-this.dragOffset.y)}return this._setShapesInProgress(o),o.repaintLayer("main"),this._updateInputEl(o)}},t.prototype.end=function(e,t,o){if(this.currentShape)return this.currentShape.setSize(this.currentShape.forcedWidth,0),"selected"===this.currentShapeState&&("place"===this.dragAction||"move"===this.dragAction&&!this.didDrag)&&this._enterEditingState(o),this._setShapesInProgress(o),o.repaintLayer("main"),this._updateInputEl(o)},t.prototype._enterEditingState=function(t){var e,o,n;if(this.currentShapeState="editing",this.inputEl)throw"State error";return this.inputEl=document.createElement("textarea"),this.inputEl.className="text-tool-input",this.inputEl.style.position="absolute",this.inputEl.style.transformOrigin="0px 0px",this.inputEl.style.backgroundColor="transparent",this.inputEl.style.border="none",this.inputEl.style.outline="none",this.inputEl.style.margin="0",this.inputEl.style.padding="4px",this.inputEl.style.zIndex="1000",this.inputEl.style.overflow="hidden",this.inputEl.style.resize="none",this.inputEl.value=this.currentShape.text,this.inputEl.addEventListener("mousedown",function(e){return e.stopPropagation()}),this.inputEl.addEventListener("touchstart",function(e){return e.stopPropagation()}),e=function(e){return o.currentShape.setText(e.target.value),o.currentShape.enforceMaxBoundingRect(t),o._setShapesInProgress(t),t.repaintLayer("main"),o._updateInputEl(t),e.stopPropagation()},(o=this).inputEl.addEventListener("keydown",(n=this,function(){return n._updateInputEl(t,!0)})),this.inputEl.addEventListener("keyup",e),this.inputEl.addEventListener("change",e),this._updateInputEl(t),t.containerEl.appendChild(this.inputEl),this.inputEl.focus(),this._setShapesInProgress(t)},t.prototype._exitEditingState=function(e){return this.currentShapeState="selected",e.containerEl.removeChild(this.inputEl),this.inputEl=null,this._setShapesInProgress(e),e.repaintLayer("main")},t.prototype._updateInputEl=function(e,t){var o,n;if(null==t&&(t=!1),this.inputEl)return o=this.currentShape.getBoundingRect(e.ctx,!0),this.inputEl.style.font=this.currentShape.font,this.inputEl.style.color=this.currentShape.color,this.inputEl.style.left=e.position.x/e.backingScale+o.x*e.scale-4+"px",this.inputEl.style.top=e.position.y/e.backingScale+o.y*e.scale-4+"px",t&&!this.currentShape.forcedWidth?this.inputEl.style.width=o.width+10+this.currentShape.renderer.emDashWidth+"px":this.inputEl.style.width=o.width+12+"px",this.inputEl.style.height=t?o.height+10+this.currentShape.renderer.metrics.leading+"px":o.height+10+"px",n="scale("+e.scale+")",this.inputEl.style.transform=n,this.inputEl.style.webkitTransform=n,this.inputEl.style.MozTransform=n,this.inputEl.style.msTransform=n,this.inputEl.style.OTransform=n},t.prototype.optionsStyle="font",t}()},{"../core/shapes":13,"./base":29}],29:[function(e,t,o){var n,i,a={}.hasOwnProperty;(i={}).Tool=n=function(){function e(){}return e.prototype.name=null,e.prototype.iconName=null,e.prototype.usesSimpleAPI=!0,e.prototype.begin=function(e,t,o){},e.prototype.continue=function(e,t,o){},e.prototype.end=function(e,t,o){},e.prototype.optionsStyle=null,e.prototype.didBecomeActive=function(e){},e.prototype.willBecomeInactive=function(e){},e}(),i.ToolWithStroke=function(e){function t(e){this.strokeWidth=e.opts.defaultStrokeWidth}return function(e,t){for(var o in t)a.call(t,o)&&(e[o]=t[o]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.optionsStyle="stroke-width",t.prototype.didBecomeActive=function(t){var i,o;return i=[],this.unsubscribe=function(){var e,t,o,n;for(n=[],t=0,o=i.length;t<o;t++)e=i[t],n.push(e());return n},i.push(t.on("setStrokeWidth",(o=this,function(e){return o.strokeWidth=e,t.trigger("toolDidUpdateOptions")})))},t.prototype.willBecomeInactive=function(e){return this.unsubscribe()},t}(),t.exports=i},{}]},{},[18])(18)}),window.TalkSlider=function(m){var e={},f="",p="",g="",t="",o="",n="",h=!1,v=100,a=100,i=document.getElementById(m.sliderContainer.id);i.classList.add("custom-tk-volume-slider-container"),m.sliderContainer&&"vertikal"===m.sliderContainer.direction&&i.classList.add("vertikal"),(p=document.createElement("div")).classList.add("custom-tk-rc-slider","custom-tk-slider","custom-tk-detection-device"),"vertikal"===m.sliderContainer.direction&&p.classList.add("vertikal"),(n=document.createElement("div")).classList.add("custom-tk-rc-slider-rail"),"vertikal"===m.sliderContainer.direction&&n.classList.add("vertikal"),(g=document.createElement("div")).classList.add("custom-tk-rc-slider-track"),"vertikal"===m.sliderContainer.direction&&g.classList.add("vertikal"),(t=document.createElement("div")).classList.add("custom-tk-rc-slider-step"),"vertikal"===m.sliderContainer.direction&&t.classList.add("vertikal"),(f=document.createElement("div")).classList.add("custom-tk-rc-slider-handle"),"vertikal"===m.sliderContainer.direction&&f.classList.add("vertikal"),(o=document.createElement("div")).classList.add("custom-tk-rc-slider-mark"),"vertikal"===m.sliderContainer.direction&&o.classList.add("vertikal"),p.appendChild(n),p.appendChild(g),p.appendChild(t),p.appendChild(f),p.appendChild(o),i.appendChild(p);var y=document,b=window,_=Math;return p.onmousedown=function(e){if(h=!0,"vertikal"===m.sliderContainer.direction){m.onBeforeChange&&m.onBeforeChange(a);var t=(e||b.event).clientY,o=p.offsetHeight;100<(a=_.round((p.getBoundingClientRect().bottom-t)/o*100))?a=100:a<0&&(a=0),f.style.bottom=a+"%",g.style.height=a+"%",p.onmouseup=function(e){return h&&m.onAfterChange&&m.onAfterChange(a),e&&(e.preventDefault(),e.stopPropagation()),!1}}else{m.onBeforeChange&&m.onBeforeChange(a);var n=(e||b.event).clientX,i=p.offsetWidth;100<(a=_.round((n-p.getBoundingClientRect().left)/i*100))?a=100:a<0&&(a=0),f.style.left=a+"%",g.style.width=a+"%",p.onmouseup=function(){h&&m.onAfterChange&&m.onAfterChange(a)}}e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},f.onclick=function(e){e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},f.onmousedown=function(e){var n=!1;if("vertikal"===m.sliderContainer.direction){m.onBeforeChange&&m.onBeforeChange(v);var i=(e||b.event).clientY,a=f.offsetTop,r=p.offsetHeight,s=f.offsetHeight,l=r-(h=r-s);document.onmousemove=function(e){var t=(e||b.event).clientY,o=_.min(h,_.max(-s,a+(t-i)));100<(v=100-_.round((o+l)/r*100))?v=100:v<0&&(v=0),f.style.bottom="calc(("+v+"%) - 3px)",g.style.height=v+"%",m.onChange&&m.onChange(v),b.getSelection?b.getSelection().removeAllRanges():y.selection.empty(),n=!0},document.onmouseup=function(){document.onmousemove=null,m.onAfterChange&&m.onAfterChange(v),document.onmouseup=null}}else{m.onBeforeChange&&n&&m.onBeforeChange(v);var c=(e||b.event).clientX,d=(a=f.offsetLeft,p.offsetWidth),u=f.offsetWidth,h=p.offsetWidth-this.offsetWidth;l=d-h;document.onmousemove=function(e){var t=(e||b.event).clientX,o=_.min(h,_.max(-u,a+(t-c)));100<(v=_.round((o+l)/d*100))?v=100:v<0&&(v=0),f.style.left=v+"%",g.style.width=v+"%",m.onChange&&m.onChange(v),b.getSelection?b.getSelection().removeAllRanges():y.selection.empty(),n=!0},document.onmouseup=function(){document.onmousemove=null,n&&m.onAfterChange&&m.onAfterChange(v),document.onmouseup=null}}e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},f.ontouchstart=function(e){if(h=!1,"vertikal"===m.sliderContainer.direction){m.onBeforeChange&&m.onBeforeChange(v);var n=(e||b.event).touches[0].clientY,i=f.offsetTop,a=p.offsetHeight,r=f.offsetHeight,s=a-(u=a-r);document.ontouchmove=function(e){var t=(e||b.event).touches[0].clientY,o=_.min(u,_.max(-r,i+(t-n)));100<(v=100-_.round((o+s)/a*100))?v=100:v<0&&(v=0),f.style.bottom="calc(("+v+"%) - 3px)",g.style.height=v+"%",m.onChange&&m.onChange(v),b.getSelection?b.getSelection().removeAllRanges():y.selection.empty()},document.ontouchend=function(){document.ontouchmove=null,m.onAfterChange&&m.onAfterChange(v),document.ontouchend=null}}else{m.onBeforeChange&&m.onBeforeChange(v);var l=(e||b.event).touches[0].clientX,c=(i=f.offsetLeft,p.offsetWidth),d=f.offsetWidth,u=p.offsetWidth-this.offsetWidth;s=c-u;f.ontouchmove=function(e){var t=(e||b.event).touches[0].clientX,o=_.min(u,_.max(-d,i+(t-l)));100<(v=_.round((o+s)/c*100))?v=100:v<0&&(v=0),f.style.left=v+"%",g.style.width=v+"%",m.onChange&&m.onChange(v),b.getSelection?b.getSelection().removeAllRanges():y.selection.empty()},document.ontouchend=function(){document.ontouchmove=null,m.onAfterChange&&m.onAfterChange(v),document.ontouchend=null}}e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},e.setProgress=function(e){void 0!==e&&("vertikal"===m.sliderContainer.direction?(f.style.bottom=e+"%",g.style.height=e+"%"):(f.style.left=e+"%",g.style.width=e+"%"))},e},window.TalkDrag=function(e,l){var c=this;if((l=l||{}).containerData=l.containerData||{},c.flag=!1,c.element=e,c.leftPercent=void 0!==l.containerData.left?l.containerData.left/100:0,c.topPercent=void 0!==l.containerData.top?l.containerData.top/100:0,c.disabled=void 0!==l.disabled&&l.disabled,"string"==typeof e&&(c.element=document.getElementById(e)),c.element)return void 0!==l.containerData.parentNodeID?(c.containerElement=l.containerData.parentNodeID,"string"==typeof l.containerData.parentNodeID&&(c.containerElement=document.getElementById(l.containerData.parentNodeID))):c.containerElement=c.element.parentNode,c.containerElement&&(c.containerElement.className=c.containerElement.className.replace("talk-cloud-drag-parent-container","")+" talk-cloud-drag-parent-container "),c.cur={x:0,y:0},c.updateDisabled=function(e){c.disabled=e},c.destroy=function(){window.removeEventListener("resize",c.resizeCallback,!1),c.element.removeEventListener("mousedown",c.mousedownOrTouchstartCallback,!1),c.element.removeEventListener("touchstart",c.mousedownOrTouchstartCallback,!1),c.element.removeEventListener("touchmove",c.mousemoveOrTouchmoveEventCallback,!1),c.element.removeEventListener("touchend",c.mouseupOrTouchendEventCallback,!1),document.documentElement.removeEventListener("mousemove",c.mousemoveOrTouchmoveEventCallback,!1),document.documentElement.removeEventListener("mouseup",c.mouseupOrTouchendEventCallback,!1)},c.resize=function(){c.element.style.left=(c.containerElement.offsetWidth-c.element.offsetWidth)*c.leftPercent+"px",c.element.style.top=(c.containerElement.offsetHeight-c.element.offsetHeight)*c.topPercent+"px"},c.setPosition=function(e,t){c.leftPercent=e/100,c.topPercent=t/100,c.element.style.left=(c.containerElement.offsetWidth-c.element.offsetWidth)*c.leftPercent+"px",c.element.style.top=(c.containerElement.offsetHeight-c.element.offsetHeight)*c.topPercent+"px"},c.down=function(e){var t;"mousedown"===e.type&&(document.documentElement.addEventListener("mousemove",c.mousemoveOrTouchmoveEventCallback,!1),document.documentElement.addEventListener("mouseup",c.mouseupOrTouchendEventCallback,!1)),c.element.setAttribute("talkDragState","onBeforeDrag"),c.containerElement&&c.containerElement.setAttribute("talkDragParentState","onBeforeDrag"),c.flag=!0,t=e.touches?e.touches[0]:e,c.cur.x=t.clientX,c.cur.y=t.clientY,c.dx=c.element.offsetLeft,c.dy=c.element.offsetTop,"mousedown"===e.type?l.onBeforeDrag&&l.onBeforeDrag(100*c.leftPercent,100*c.topPercent):"touchstart"===e.type&&(c.flag=!1,clearTimeout(c.downTimer),c.downTimer=setTimeout(function(){c.flag=!0,c.element.style.pointerEvents="none",c.element.style.boxShadow="0 0 0.2rem 0.05rem #222",c.element.style.transform="scale(1.05)",l.onBeforeDrag&&l.onBeforeDrag(100*c.leftPercent,100*c.topPercent)},500))},c.move=function(e){if("touchmove"===e.type){var t=Math.abs(e.touches[0].clientX-c.cur.x),o=Math.abs(e.touches[0].clientY-c.cur.y);40<=Math.hypot(t,o)&&(clearTimeout(c.downTimer),c.downTimer=void 0)}if(c.flag){var n;c.element.setAttribute("talkDragState","onDrag"),c.containerElement&&c.containerElement.setAttribute("talkDragParentState","onDrag"),n=e.touches?e.touches[0]:e,l.onDrag&&l.onDrag(100*c.leftPercent,100*c.topPercent);var i=c.containerElement.offsetWidth-c.element.offsetWidth,a=c.containerElement.offsetHeight-c.element.offsetHeight;c.nx=n.clientX-c.cur.x,c.ny=n.clientY-c.cur.y;var r=c.dx+c.nx,s=c.dy+c.ny;r=Math.min(Math.max(0,r),i),s=Math.min(Math.max(0,s),a);c.element.style.left=r+"px",c.element.style.top=s+"px",c.leftPercent=r/(c.containerElement.offsetWidth-c.element.offsetWidth),c.topPercent=s/(c.containerElement.offsetHeight-c.element.offsetHeight)}},c.end=function(e){"mouseup"===e.type&&(document.documentElement.removeEventListener("mousemove",c.mousemoveOrTouchmoveEventCallback,!1),document.documentElement.removeEventListener("mouseup",c.mouseupOrTouchendEventCallback,!1)),"touchend"===e.type&&(clearTimeout(c.downTimer),c.downTimer=void 0,c.flag=!1,c.element.style.pointerEvents="auto",c.element.style.boxShadow="0 0 0 0 #222",c.element.style.transform="scale(1)"),c.flag&&(c.element.setAttribute("talkDragState","onAfterDrag"),c.containerElement&&c.containerElement.setAttribute("talkDragParentState","onAfterDrag"),c.flag=!1,l.onAfterDrag&&l.onAfterDrag(100*c.leftPercent,100*c.topPercent))},c.resizeCallback=function(e){c.resize()},c.mousedownOrTouchstartCallback=function(e){if(c.flag||!c.disabled){try{c.down(e)}catch(e){console.error(e)}return!1}},c.mousemoveOrTouchmoveEventCallback=function(e){if(c.flag||!c.disabled){try{c.move(e)}catch(e){console.error(e)}return!1}},c.mouseupOrTouchendEventCallback=function(e){if(c.flag||!c.disabled){try{c.end(e)}catch(e){console.error(e)}return!1}},window.addEventListener("resize",c.resizeCallback,!1),c.element.addEventListener("mousedown",c.mousedownOrTouchstartCallback,!1),c.element.addEventListener("touchstart",c.mousedownOrTouchstartCallback,!1),c.element.addEventListener("touchmove",c.mousemoveOrTouchmoveEventCallback,!1),c.element.addEventListener("touchend",c.mouseupOrTouchendEventCallback,!1),c.element.setAttribute("talkDrag","true"),c.resize(),c;console.error("parameter elementId cannot find a node!")},function a(r,s,l){function c(t,e){if(!s[t]){if(!r[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(d)return d(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[t]={exports:{}};r[t][0].call(i.exports,function(e){return c(r[t][1][e]||e)},i,i.exports,a,r,s,l)}return s[t].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(o,e,t){(function(e){if(o("core-js/shim"),o("regenerator-runtime/runtime"),o("core-js/fn/regexp/escape"),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;function t(e,t,o){e[t]||Object.defineProperty(e,t,{writable:!0,configurable:!0,value:o})}t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"core-js/fn/regexp/escape":3,"core-js/shim":330,"regenerator-runtime/runtime":2}],2:[function(e,A,t){(function(e){!function(e){var l,t=Object.prototype,c=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",n=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag",r="object"==typeof A,s=e.regeneratorRuntime;if(s)r&&(A.exports=s);else{(s=e.regeneratorRuntime=r?A.exports:{}).wrap=b;var u="suspendedStart",h="suspendedYield",m="executing",f="completed",p={},d={};d[i]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(E([])));v&&v!==t&&c.call(v,i)&&(d=v);var y=S.prototype=w.prototype=Object.create(d);k.prototype=y.constructor=S,S.constructor=k,S[a]=k.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(y),e},s.awrap=function(e){return{__await:e}},I(P.prototype),P.prototype[n]=function(){return this},s.AsyncIterator=P,s.async=function(e,t,o,n){var i=new P(b(e,t,o,n));return s.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},I(y),y[a]="Generator",y[i]=function(){return this},y.toString=function(){return"[object Generator]"},s.keys=function(o){var n=[];for(var e in o)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in o)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=E,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var n=this;function e(e,t){return a.type="throw",a.arg=o,n.next=e,t&&(n.method="next",n.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var r=c.call(i,"catchLoc"),s=c.call(i,"finallyLoc");if(r&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(r){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;0<=o;--o){var n=this.tryEntries[o];if(n.tryLoc<=this.prev&&c.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t];if(o.finallyLoc===e)return this.complete(o.completion,o.afterLoc),T(o),p}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t];if(o.tryLoc===e){var n=o.completion;if("throw"===n.type){var i=n.arg;T(o)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,o){return this.delegate={iterator:E(e),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=l),p}}}function b(e,t,o,n){var a,r,s,l,i=t&&t.prototype instanceof w?t:w,c=Object.create(i.prototype),d=new D(n||[]);return c._invoke=(a=e,r=o,s=d,l=u,function(e,t){if(l===m)throw new Error("Generator is already running");if(l===f){if("throw"===e)throw t;return L()}for(s.method=e,s.arg=t;;){var o=s.delegate;if(o){var n=x(o,s);if(n){if(n===p)continue;return n}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(l===u)throw l=f,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);l=m;var i=_(a,r,s);if("normal"===i.type){if(l=s.done?f:h,i.arg===p)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(l=f,s.method="throw",s.arg=i.arg)}}),c}function _(e,t,o){try{return{type:"normal",arg:e.call(t,o)}}catch(e){return{type:"throw",arg:e}}}function w(){}function k(){}function S(){}function I(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function P(s){function l(e,t,o,n){var i=_(s[e],s,t);if("throw"!==i.type){var a=i.arg,r=a.value;return r&&"object"==typeof r&&c.call(r,"__await")?Promise.resolve(r.__await).then(function(e){l("next",e,o,n)},function(e){l("throw",e,o,n)}):Promise.resolve(r).then(function(e){a.value=e,o(a)},n)}n(i.arg)}var t;"object"==typeof e.process&&e.process.domain&&(l=e.process.domain.bind(l)),this._invoke=function(o,n){function e(){return new Promise(function(e,t){l(o,n,e,t)})}return t=t?t.then(e,e):e()}}function x(e,t){var o=e.iterator[t.method];if(o===l){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=l,x(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=_(o,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var i=n.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=l),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,n=function e(){for(;++o<t.length;)if(c.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=l,e.done=!0,e};return n.next=n}}return{next:L}}function L(){return{value:l,done:!0}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,o){e("../../modules/core.regexp.escape"),t.exports=e("../../modules/_core").RegExp.escape},{"../../modules/_core":25,"../../modules/core.regexp.escape":132}],4:[function(e,t,o){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],5:[function(e,t,o){var n=e("./_cof");t.exports=function(e,t){if("number"!=typeof e&&"Number"!=n(e))throw TypeError(t);return+e}},{"./_cof":20}],6:[function(e,t,o){var n=e("./_wks")("unscopables"),i=Array.prototype;null==i[n]&&e("./_hide")(i,n,{}),t.exports=function(e){i[n][e]=!0}},{"./_hide":44,"./_wks":130}],7:[function(e,t,o){var n=e("./_string-at")(!0);t.exports=function(e,t,o){return t+(o?n(e,t).length:1)}},{"./_string-at":107}],8:[function(e,t,o){t.exports=function(e,t,o,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(o+": incorrect invocation!");return e}},{}],9:[function(e,t,o){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":53}],10:[function(e,t,o){var c=e("./_to-object"),d=e("./_to-absolute-index"),u=e("./_to-length");t.exports=[].copyWithin||function(e,t){var o=c(this),n=u(o.length),i=d(e,n),a=d(t,n),r=2<arguments.length?arguments[2]:void 0,s=Math.min((void 0===r?n:d(r,n))-a,n-i),l=1;for(a<i&&i<a+s&&(l=-1,a+=s-1,i+=s-1);0<s--;)a in o?o[i]=o[a]:delete o[i],i+=l,a+=l;return o}},{"./_to-absolute-index":115,"./_to-length":119,"./_to-object":120}],11:[function(e,t,o){var s=e("./_to-object"),l=e("./_to-absolute-index"),c=e("./_to-length");t.exports=function(e){for(var t=s(this),o=c(t.length),n=arguments.length,i=l(1<n?arguments[1]:void 0,o),a=2<n?arguments[2]:void 0,r=void 0===a?o:l(a,o);i<r;)t[i++]=e;return t}},{"./_to-absolute-index":115,"./_to-length":119,"./_to-object":120}],12:[function(e,t,o){var n=e("./_for-of");t.exports=function(e,t){var o=[];return n(e,!1,o.push,o,t),o}},{"./_for-of":41}],13:[function(e,t,o){var l=e("./_to-iobject"),c=e("./_to-length"),d=e("./_to-absolute-index");t.exports=function(s){return function(e,t,o){var n,i=l(e),a=c(i.length),r=d(o,a);if(s&&t!=t){for(;r<a;)if((n=i[r++])!=n)return!0}else for(;r<a;r++)if((s||r in i)&&i[r]===t)return s||r||0;return!s&&-1}}},{"./_to-absolute-index":115,"./_to-iobject":118,"./_to-length":119}],14:[function(e,t,o){var b=e("./_ctx"),_=e("./_iobject"),w=e("./_to-object"),k=e("./_to-length"),n=e("./_array-species-create");t.exports=function(u,e){var h=1==u,m=2==u,f=3==u,p=4==u,g=6==u,v=5==u||g,y=e||n;return function(e,t,o){for(var n,i,a=w(e),r=_(a),s=b(t,o,3),l=k(r.length),c=0,d=h?y(e,l):m?y(e,0):void 0;c<l;c++)if((v||c in r)&&(i=s(n=r[c],c,a),u))if(h)d[c]=i;else if(i)switch(u){case 3:return!0;case 5:return n;case 6:return c;case 2:d.push(n)}else if(p)return!1;return g?-1:f||p?p:d}}},{"./_array-species-create":17,"./_ctx":27,"./_iobject":49,"./_to-length":119,"./_to-object":120}],15:[function(e,t,o){var d=e("./_a-function"),u=e("./_to-object"),h=e("./_iobject"),m=e("./_to-length");t.exports=function(e,t,o,n,i){d(t);var a=u(e),r=h(a),s=m(a.length),l=i?s-1:0,c=i?-1:1;if(o<2)for(;;){if(l in r){n=r[l],l+=c;break}if(l+=c,i?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;i?0<=l:l<s;l+=c)l in r&&(n=t(n,r[l],l,a));return n}},{"./_a-function":4,"./_iobject":49,"./_to-length":119,"./_to-object":120}],16:[function(e,t,o){var n=e("./_is-object"),i=e("./_is-array"),a=e("./_wks")("species");t.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},{"./_is-array":51,"./_is-object":53,"./_wks":130}],17:[function(e,t,o){var n=e("./_array-species-constructor");t.exports=function(e,t){return new(n(e))(t)}},{"./_array-species-constructor":16}],18:[function(e,t,o){var a=e("./_a-function"),r=e("./_is-object"),s=e("./_invoke"),l=[].slice,c={};t.exports=Function.bind||function(t){var o=a(this),n=l.call(arguments,1),i=function(){var e=n.concat(l.call(arguments));return this instanceof i?function(e,t,o){if(!(t in c)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";c[t]=Function("F,a","return new F("+n.join(",")+")")}return c[t](e,o)}(o,e.length,e):s(o,e,t)};return r(o.prototype)&&(i.prototype=o.prototype),i}},{"./_a-function":4,"./_invoke":48,"./_is-object":53}],19:[function(e,t,o){var i=e("./_cof"),a=e("./_wks")("toStringTag"),r="Arguments"==i(function(){return arguments}());t.exports=function(e){var t,o,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(o=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?o:r?i(t):"Object"==(n=i(t))&&"function"==typeof t.callee?"Arguments":n}},{"./_cof":20,"./_wks":130}],20:[function(e,t,o){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],21:[function(e,t,o){var r=e("./_object-dp").f,s=e("./_object-create"),l=e("./_redefine-all"),c=e("./_ctx"),d=e("./_an-instance"),u=e("./_for-of"),n=e("./_iter-define"),i=e("./_iter-step"),a=e("./_set-species"),h=e("./_descriptors"),m=e("./_meta").fastKey,f=e("./_validate-collection"),p=h?"_s":"size",g=function(e,t){var o,n=m(t);if("F"!==n)return e._i[n];for(o=e._f;o;o=o.n)if(o.k==t)return o};t.exports={getConstructor:function(e,a,o,n){var i=e(function(e,t){d(e,i,a,"_i"),e._t=a,e._i=s(null),e._f=void 0,e._l=void 0,e[p]=0,null!=t&&u(t,o,e[n],e)});return l(i.prototype,{clear:function(){for(var e=f(this,a),t=e._i,o=e._f;o;o=o.n)o.r=!0,o.p&&(o.p=o.p.n=void 0),delete t[o.i];e._f=e._l=void 0,e[p]=0},delete:function(e){var t=f(this,a),o=g(t,e);if(o){var n=o.n,i=o.p;delete t._i[o.i],o.r=!0,i&&(i.n=n),n&&(n.p=i),t._f==o&&(t._f=n),t._l==o&&(t._l=i),t[p]--}return!!o},forEach:function(e){f(this,a);for(var t,o=c(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.n:this._f;)for(o(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!g(f(this,a),e)}}),h&&r(i.prototype,"size",{get:function(){return f(this,a)[p]}}),i},def:function(e,t,o){var n,i,a=g(e,t);return a?a.v=o:(e._l=a={i:i=m(t,!0),k:t,v:o,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[p]++,"F"!==i&&(e._i[i]=a)),e},getEntry:g,setStrong:function(e,o,t){n(e,o,function(e,t){this._t=f(e,o),this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,o=e._l;o&&o.r;)o=o.p;return e._t&&(e._l=o=o?o.n:e._t._f)?i(0,"keys"==t?o.k:"values"==t?o.v:[o.k,o.v]):(e._t=void 0,i(1))},t?"entries":"values",!t,!0),a(o)}}},{"./_an-instance":8,"./_ctx":27,"./_descriptors":31,"./_for-of":41,"./_iter-define":57,"./_iter-step":59,"./_meta":67,"./_object-create":72,"./_object-dp":73,"./_redefine-all":92,"./_set-species":101,"./_validate-collection":127}],22:[function(e,t,o){var n=e("./_classof"),i=e("./_array-from-iterable");t.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},{"./_array-from-iterable":12,"./_classof":19}],23:[function(e,t,o){var r=e("./_redefine-all"),s=e("./_meta").getWeak,i=e("./_an-object"),l=e("./_is-object"),c=e("./_an-instance"),d=e("./_for-of"),n=e("./_array-methods"),u=e("./_has"),h=e("./_validate-collection"),a=n(5),m=n(6),f=0,p=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},v=function(e,t){return a(e.a,function(e){return e[0]===t})};g.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var o=v(this,e);o?o[1]=t:this.a.push([e,t])},delete:function(t){var e=m(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(e,o,n,i){var a=e(function(e,t){c(e,a,o,"_i"),e._t=o,e._i=f++,e._l=void 0,null!=t&&d(t,n,e[i],e)});return r(a.prototype,{delete:function(e){if(!l(e))return!1;var t=s(e);return!0===t?p(h(this,o)).delete(e):t&&u(t,this._i)&&delete t[this._i]},has:function(e){if(!l(e))return!1;var t=s(e);return!0===t?p(h(this,o)).has(e):t&&u(t,this._i)}}),a},def:function(e,t,o){var n=s(i(t),!0);return!0===n?p(e).set(t,o):n[e._i]=o,e},ufstore:p}},{"./_an-instance":8,"./_an-object":9,"./_array-methods":14,"./_for-of":41,"./_has":43,"./_is-object":53,"./_meta":67,"./_redefine-all":92,"./_validate-collection":127}],24:[function(e,t,o){var v=e("./_global"),y=e("./_export"),b=e("./_redefine"),_=e("./_redefine-all"),w=e("./_meta"),k=e("./_for-of"),S=e("./_an-instance"),I=e("./_is-object"),P=e("./_fails"),x=e("./_iter-detect"),C=e("./_set-to-string-tag"),T=e("./_inherit-if-required");t.exports=function(n,e,t,o,i,a){var r=v[n],s=r,l=i?"set":"add",c=s&&s.prototype,d={},u=function(e){var o=c[e];b(c,e,"delete"==e?function(e){return!(a&&!I(e))&&o.call(this,0===e?0:e)}:"has"==e?function(e){return!(a&&!I(e))&&o.call(this,0===e?0:e)}:"get"==e?function(e){return a&&!I(e)?void 0:o.call(this,0===e?0:e)}:"add"==e?function(e){return o.call(this,0===e?0:e),this}:function(e,t){return o.call(this,0===e?0:e,t),this})};if("function"==typeof s&&(a||c.forEach&&!P(function(){(new s).entries().next()}))){var h=new s,m=h[l](a?{}:-0,1)!=h,f=P(function(){h.has(1)}),p=x(function(e){new s(e)}),g=!a&&P(function(){for(var e=new s,t=5;t--;)e[l](t,t);return!e.has(-0)});p||(((s=e(function(e,t){S(e,s,n);var o=T(new r,e,s);return null!=t&&k(t,i,o[l],o),o})).prototype=c).constructor=s),(f||g)&&(u("delete"),u("has"),i&&u("get")),(g||m)&&u(l),a&&c.clear&&delete c.clear}else s=o.getConstructor(e,n,i,l),_(s.prototype,t),w.NEED=!0;return C(s,n),d[n]=s,y(y.G+y.W+y.F*(s!=r),d),a||o.setStrong(s,n,i),s}},{"./_an-instance":8,"./_export":35,"./_fails":37,"./_for-of":41,"./_global":42,"./_inherit-if-required":47,"./_is-object":53,"./_iter-detect":58,"./_meta":67,"./_redefine":93,"./_redefine-all":92,"./_set-to-string-tag":102}],25:[function(e,t,o){var n=t.exports={version:"2.6.2"};"number"==typeof __e&&(__e=n)},{}],26:[function(e,t,o){var n=e("./_object-dp"),i=e("./_property-desc");t.exports=function(e,t,o){t in e?n.f(e,t,i(0,o)):e[t]=o}},{"./_object-dp":73,"./_property-desc":91}],27:[function(e,t,o){var a=e("./_a-function");t.exports=function(n,i,e){if(a(n),void 0===i)return n;switch(e){case 1:return function(e){return n.call(i,e)};case 2:return function(e,t){return n.call(i,e,t)};case 3:return function(e,t,o){return n.call(i,e,t,o)}}return function(){return n.apply(i,arguments)}}},{"./_a-function":4}],28:[function(e,t,o){var n=e("./_fails"),i=Date.prototype.getTime,a=Date.prototype.toISOString,r=function(e){return 9<e?e:"0"+e};t.exports=n(function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-5e13-1))})||!n(function(){a.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),o=e.getUTCMilliseconds(),n=t<0?"-":9999<t?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+r(e.getUTCMonth()+1)+"-"+r(e.getUTCDate())+"T"+r(e.getUTCHours())+":"+r(e.getUTCMinutes())+":"+r(e.getUTCSeconds())+"."+(99<o?o:"0"+r(o))+"Z"}:a},{"./_fails":37}],29:[function(e,t,o){var n=e("./_an-object"),i=e("./_to-primitive");t.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(n(this),"number"!=e)}},{"./_an-object":9,"./_to-primitive":121}],30:[function(e,t,o){t.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},{}],31:[function(e,t,o){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":37}],32:[function(e,t,o){var n=e("./_is-object"),i=e("./_global").document,a=n(i)&&n(i.createElement);t.exports=function(e){return a?i.createElement(e):{}}},{"./_global":42,"./_is-object":53}],33:[function(e,t,o){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],34:[function(e,t,o){var s=e("./_object-keys"),l=e("./_object-gops"),c=e("./_object-pie");t.exports=function(e){var t=s(e),o=l.f;if(o)for(var n,i=o(e),a=c.f,r=0;i.length>r;)a.call(e,n=i[r++])&&t.push(n);return t}},{"./_object-gops":79,"./_object-keys":82,"./_object-pie":83}],35:[function(e,t,o){var p=e("./_global"),g=e("./_core"),v=e("./_hide"),y=e("./_redefine"),b=e("./_ctx"),_="prototype",w=function(e,t,o){var n,i,a,r,s=e&w.F,l=e&w.G,c=e&w.S,d=e&w.P,u=e&w.B,h=l?p:c?p[t]||(p[t]={}):(p[t]||{})[_],m=l?g:g[t]||(g[t]={}),f=m[_]||(m[_]={});for(n in l&&(o=t),o)a=((i=!s&&h&&void 0!==h[n])?h:o)[n],r=u&&i?b(a,p):d&&"function"==typeof a?b(Function.call,a):a,h&&y(h,n,a,e&w.U),m[n]!=a&&v(m,n,r),d&&f[n]!=a&&(f[n]=a)};p.core=g,w.F=1,w.G=2,w.S=4,w.P=8,w.B=16,w.W=32,w.U=64,w.R=128,t.exports=w},{"./_core":25,"./_ctx":27,"./_global":42,"./_hide":44,"./_redefine":93}],36:[function(e,t,o){var n=e("./_wks")("match");t.exports=function(t){var o=/./;try{"/./"[t](o)}catch(e){try{return o[n]=!1,!"/./"[t](o)}catch(e){}}return!0}},{"./_wks":130}],37:[function(e,t,o){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],38:[function(e,t,o){e("./es6.regexp.exec");var d=e("./_redefine"),u=e("./_hide"),h=e("./_fails"),m=e("./_defined"),f=e("./_wks"),p=e("./_regexp-exec"),g=f("species"),v=!h(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),y=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var o="ab".split(e);return 2===o.length&&"a"===o[0]&&"b"===o[1]}();t.exports=function(o,e,t){var n=f(o),a=!h(function(){var e={};return e[n]=function(){return 7},7!=""[o](e)}),i=a?!h(function(){var e=!1,t=/a/;return t.exec=function(){return e=!0,null},"split"===o&&(t.constructor={},t.constructor[g]=function(){return t}),t[n](""),!e}):void 0;if(!a||!i||"replace"===o&&!v||"split"===o&&!y){var r=/./[n],s=t(m,n,""[o],function(e,t,o,n,i){return t.exec===p?a&&!i?{done:!0,value:r.call(t,o,n)}:{done:!0,value:e.call(o,t,n)}:{done:!1}}),l=s[0],c=s[1];d(String.prototype,o,l),u(RegExp.prototype,n,2==e?function(e,t){return c.call(e,this,t)}:function(e){return c.call(e,this)})}}},{"./_defined":30,"./_fails":37,"./_hide":44,"./_redefine":93,"./_regexp-exec":95,"./_wks":130,"./es6.regexp.exec":227}],39:[function(e,t,o){var n=e("./_an-object");t.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"./_an-object":9}],40:[function(e,t,o){var f=e("./_is-array"),p=e("./_is-object"),g=e("./_to-length"),v=e("./_ctx"),y=e("./_wks")("isConcatSpreadable");t.exports=function e(t,o,n,i,a,r,s,l){for(var c,d,u=a,h=0,m=!!s&&v(s,l,3);h<i;){if(h in n){if(c=m?m(n[h],h,o):n[h],d=!1,p(c)&&(d=void 0!==(d=c[y])?!!d:f(c)),d&&0<r)u=e(t,o,c,g(c.length),u,r-1)-1;else{if(9007199254740991<=u)throw TypeError();t[u]=c}u++}h++}return u}},{"./_ctx":27,"./_is-array":51,"./_is-object":53,"./_to-length":119,"./_wks":130}],41:[function(e,t,o){var h=e("./_ctx"),m=e("./_iter-call"),f=e("./_is-array-iter"),p=e("./_an-object"),g=e("./_to-length"),v=e("./core.get-iterator-method"),y={},b={};(o=t.exports=function(e,t,o,n,i){var a,r,s,l,c=i?function(){return e}:v(e),d=h(o,n,t?2:1),u=0;if("function"!=typeof c)throw TypeError(e+" is not iterable!");if(f(c)){for(a=g(e.length);u<a;u++)if((l=t?d(p(r=e[u])[0],r[1]):d(e[u]))===y||l===b)return l}else for(s=c.call(e);!(r=s.next()).done;)if((l=m(s,d,r.value,t))===y||l===b)return l}).BREAK=y,o.RETURN=b},{"./_an-object":9,"./_ctx":27,"./_is-array-iter":50,"./_iter-call":55,"./_to-length":119,"./core.get-iterator-method":131}],42:[function(e,t,o){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],43:[function(e,t,o){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],44:[function(e,t,o){var n=e("./_object-dp"),i=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,o){return n.f(e,t,i(1,o))}:function(e,t,o){return e[t]=o,e}},{"./_descriptors":31,"./_object-dp":73,"./_property-desc":91}],45:[function(e,t,o){var n=e("./_global").document;t.exports=n&&n.documentElement},{"./_global":42}],46:[function(e,t,o){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":31,"./_dom-create":32,"./_fails":37}],47:[function(e,t,o){var a=e("./_is-object"),r=e("./_set-proto").set;t.exports=function(e,t,o){var n,i=t.constructor;return i!==o&&"function"==typeof i&&(n=i.prototype)!==o.prototype&&a(n)&&r&&r(e,n),e}},{"./_is-object":53,"./_set-proto":100}],48:[function(e,t,o){t.exports=function(e,t,o){var n=void 0===o;switch(t.length){case 0:return n?e():e.call(o);case 1:return n?e(t[0]):e.call(o,t[0]);case 2:return n?e(t[0],t[1]):e.call(o,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(o,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(o,t[0],t[1],t[2],t[3])}return e.apply(o,t)}},{}],49:[function(e,t,o){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":20}],50:[function(e,t,o){var n=e("./_iterators"),i=e("./_wks")("iterator"),a=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}},{"./_iterators":60,"./_wks":130}],51:[function(e,t,o){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":20}],52:[function(e,t,o){var n=e("./_is-object"),i=Math.floor;t.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},{"./_is-object":53}],53:[function(e,t,o){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],54:[function(e,t,o){var n=e("./_is-object"),i=e("./_cof"),a=e("./_wks")("match");t.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},{"./_cof":20,"./_is-object":53,"./_wks":130}],55:[function(e,t,o){var a=e("./_an-object");t.exports=function(t,e,o,n){try{return n?e(a(o)[0],o[1]):e(o)}catch(e){var i=t.return;throw void 0!==i&&a(i.call(t)),e}}},{"./_an-object":9}],56:[function(e,t,o){var n=e("./_object-create"),i=e("./_property-desc"),a=e("./_set-to-string-tag"),r={};e("./_hide")(r,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,o){e.prototype=n(r,{next:i(1,o)}),a(e,t+" Iterator")}},{"./_hide":44,"./_object-create":72,"./_property-desc":91,"./_set-to-string-tag":102,"./_wks":130}],57:[function(e,t,o){var b=e("./_library"),_=e("./_export"),w=e("./_redefine"),k=e("./_hide"),S=e("./_iterators"),I=e("./_iter-create"),P=e("./_set-to-string-tag"),x=e("./_object-gpo"),C=e("./_wks")("iterator"),T=!([].keys&&"next"in[].keys()),D="values",E=function(){return this};t.exports=function(e,t,o,n,i,a,r){I(o,t,n);var s,l,c,d=function(e){if(!T&&e in f)return f[e];switch(e){case"keys":case D:return function(){return new o(this,e)}}return function(){return new o(this,e)}},u=t+" Iterator",h=i==D,m=!1,f=e.prototype,p=f[C]||f["@@iterator"]||i&&f[i],g=p||d(i),v=i?h?d("entries"):g:void 0,y="Array"==t&&f.entries||p;if(y&&(c=x(y.call(new e)))!==Object.prototype&&c.next&&(P(c,u,!0),b||"function"==typeof c[C]||k(c,C,E)),h&&p&&p.name!==D&&(m=!0,g=function(){return p.call(this)}),b&&!r||!T&&!m&&f[C]||k(f,C,g),S[t]=g,S[u]=E,i)if(s={values:h?g:d(D),keys:a?g:d("keys"),entries:v},r)for(l in s)l in f||w(f,l,s[l]);else _(_.P+_.F*(T||m),t,s);return s}},{"./_export":35,"./_hide":44,"./_iter-create":56,"./_iterators":60,"./_library":61,"./_object-gpo":80,"./_redefine":93,"./_set-to-string-tag":102,"./_wks":130}],58:[function(e,t,o){var a=e("./_wks")("iterator"),r=!1;try{var n=[7][a]();n.return=function(){r=!0},Array.from(n,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!r)return!1;var o=!1;try{var n=[7],i=n[a]();i.next=function(){return{done:o=!0}},n[a]=function(){return i},e(n)}catch(e){}return o}},{"./_wks":130}],59:[function(e,t,o){t.exports=function(e,t){return{value:t,done:!!e}}},{}],60:[function(e,t,o){t.exports={}},{}],61:[function(e,t,o){t.exports=!1},{}],62:[function(e,t,o){var n=Math.expm1;t.exports=!n||22025.465794806718<n(10)||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:-1e-6<e&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},{}],63:[function(e,t,o){var a=e("./_math-sign"),n=Math.pow,r=n(2,-52),s=n(2,-23),l=n(2,127)*(2-s),c=n(2,-126);t.exports=Math.fround||function(e){var t,o,n=Math.abs(e),i=a(e);return n<c?i*(n/c/s+1/r-1/r)*c*s:l<(o=(t=(1+s/r)*n)-(t-n))||o!=o?i*(1/0):i*o}},{"./_math-sign":66}],64:[function(e,t,o){t.exports=Math.log1p||function(e){return-1e-8<(e=+e)&&e<1e-8?e-e*e/2:Math.log(1+e)}},{}],65:[function(e,t,o){t.exports=Math.scale||function(e,t,o,n,i){return 0===arguments.length||e!=e||t!=t||o!=o||n!=n||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-n)/(o-t)+n}},{}],66:[function(e,t,o){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],67:[function(e,t,o){var n=e("./_uid")("meta"),i=e("./_is-object"),a=e("./_has"),r=e("./_object-dp").f,s=0,l=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return l(Object.preventExtensions({}))}),d=function(e){r(e,n,{value:{i:"O"+ ++s,w:{}}})},u=t.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!l(e))return"F";if(!t)return"E";d(e)}return e[n].i},getWeak:function(e,t){if(!a(e,n)){if(!l(e))return!0;if(!t)return!1;d(e)}return e[n].w},onFreeze:function(e){return c&&u.NEED&&l(e)&&!a(e,n)&&d(e),e}}},{"./_fails":37,"./_has":43,"./_is-object":53,"./_object-dp":73,"./_uid":125}],68:[function(e,t,o){var a=e("./es6.map"),n=e("./_export"),i=e("./_shared")("metadata"),r=i.store||(i.store=new(e("./es6.weak-map"))),s=function(e,t,o){var n=r.get(e);if(!n){if(!o)return;r.set(e,n=new a)}var i=n.get(t);if(!i){if(!o)return;n.set(t,i=new a)}return i};t.exports={store:r,map:s,has:function(e,t,o){var n=s(t,o,!1);return void 0!==n&&n.has(e)},get:function(e,t,o){var n=s(t,o,!1);return void 0===n?void 0:n.get(e)},set:function(e,t,o,n){s(o,n,!0).set(e,t)},keys:function(e,t){var o=s(e,t,!1),n=[];return o&&o.forEach(function(e,t){n.push(t)}),n},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){n(n.S,"Reflect",e)}}},{"./_export":35,"./_shared":104,"./es6.map":162,"./es6.weak-map":269}],69:[function(e,t,o){var s=e("./_global"),l=e("./_task").set,c=s.MutationObserver||s.WebKitMutationObserver,d=s.process,u=s.Promise,h="process"==e("./_cof")(d);t.exports=function(){var o,n,i,e=function(){var e,t;for(h&&(e=d.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?i():n=void 0,e}}n=void 0,e&&e.enter()};if(h)i=function(){d.nextTick(e)};else if(!c||s.navigator&&s.navigator.standalone)if(u&&u.resolve){var t=u.resolve(void 0);i=function(){t.then(e)}}else i=function(){l.call(s,e)};else{var a=!0,r=document.createTextNode("");new c(e).observe(r,{characterData:!0}),i=function(){r.data=a=!a}}return function(e){var t={fn:e,next:void 0};n&&(n.next=t),o||(o=t,i()),n=t}}},{"./_cof":20,"./_global":42,"./_task":114}],70:[function(e,t,o){var i=e("./_a-function");function n(e){var o,n;this.promise=new e(function(e,t){if(void 0!==o||void 0!==n)throw TypeError("Bad Promise constructor");o=e,n=t}),this.resolve=i(o),this.reject=i(n)}t.exports.f=function(e){return new n(e)}},{"./_a-function":4}],71:[function(e,t,o){var h=e("./_object-keys"),m=e("./_object-gops"),f=e("./_object-pie"),p=e("./_to-object"),g=e("./_iobject"),i=Object.assign;t.exports=!i||e("./_fails")(function(){var e={},t={},o=Symbol(),n="abcdefghijklmnopqrst";return e[o]=7,n.split("").forEach(function(e){t[e]=e}),7!=i({},e)[o]||Object.keys(i({},t)).join("")!=n})?function(e,t){for(var o=p(e),n=arguments.length,i=1,a=m.f,r=f.f;i<n;)for(var s,l=g(arguments[i++]),c=a?h(l).concat(a(l)):h(l),d=c.length,u=0;u<d;)r.call(l,s=c[u++])&&(o[s]=l[s]);return o}:i},{"./_fails":37,"./_iobject":49,"./_object-gops":79,"./_object-keys":82,"./_object-pie":83,"./_to-object":120}],72:[function(n,e,t){var i=n("./_an-object"),a=n("./_object-dps"),r=n("./_enum-bug-keys"),s=n("./_shared-key")("IE_PROTO"),l=function(){},c="prototype",d=function(){var e,t=n("./_dom-create")("iframe"),o=r.length;for(t.style.display="none",n("./_html").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),d=e.F;o--;)delete d[c][r[o]];return d()};e.exports=Object.create||function(e,t){var o;return null!==e?(l[c]=i(e),o=new l,l[c]=null,o[s]=e):o=d(),void 0===t?o:a(o,t)}},{"./_an-object":9,"./_dom-create":32,"./_enum-bug-keys":33,"./_html":45,"./_object-dps":74,"./_shared-key":103}],73:[function(e,t,o){var n=e("./_an-object"),i=e("./_ie8-dom-define"),a=e("./_to-primitive"),r=Object.defineProperty;o.f=e("./_descriptors")?Object.defineProperty:function(e,t,o){if(n(e),t=a(t,!0),n(o),i)try{return r(e,t,o)}catch(e){}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(e[t]=o.value),e}},{"./_an-object":9,"./_descriptors":31,"./_ie8-dom-define":46,"./_to-primitive":121}],74:[function(e,t,o){var r=e("./_object-dp"),s=e("./_an-object"),l=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){s(e);for(var o,n=l(t),i=n.length,a=0;a<i;)r.f(e,o=n[a++],t[o]);return e}},{"./_an-object":9,"./_descriptors":31,"./_object-dp":73,"./_object-keys":82}],75:[function(t,e,o){e.exports=t("./_library")||!t("./_fails")(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete t("./_global")[e]})},{"./_fails":37,"./_global":42,"./_library":61}],76:[function(e,t,o){var n=e("./_object-pie"),i=e("./_property-desc"),a=e("./_to-iobject"),r=e("./_to-primitive"),s=e("./_has"),l=e("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;o.f=e("./_descriptors")?c:function(e,t){if(e=a(e),t=r(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},{"./_descriptors":31,"./_has":43,"./_ie8-dom-define":46,"./_object-pie":83,"./_property-desc":91,"./_to-iobject":118,"./_to-primitive":121}],77:[function(e,t,o){var n=e("./_to-iobject"),i=e("./_object-gopn").f,a={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){return r&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(e){return r.slice()}}(e):i(n(e))}},{"./_object-gopn":78,"./_to-iobject":118}],78:[function(e,t,o){var n=e("./_object-keys-internal"),i=e("./_enum-bug-keys").concat("length","prototype");o.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},{"./_enum-bug-keys":33,"./_object-keys-internal":81}],79:[function(e,t,o){o.f=Object.getOwnPropertySymbols},{}],80:[function(e,t,o){var n=e("./_has"),i=e("./_to-object"),a=e("./_shared-key")("IE_PROTO"),r=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},{"./_has":43,"./_shared-key":103,"./_to-object":120}],81:[function(e,t,o){var r=e("./_has"),s=e("./_to-iobject"),l=e("./_array-includes")(!1),c=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var o,n=s(e),i=0,a=[];for(o in n)o!=c&&r(n,o)&&a.push(o);for(;t.length>i;)r(n,o=t[i++])&&(~l(a,o)||a.push(o));return a}},{"./_array-includes":13,"./_has":43,"./_shared-key":103,"./_to-iobject":118}],82:[function(e,t,o){var n=e("./_object-keys-internal"),i=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,i)}},{"./_enum-bug-keys":33,"./_object-keys-internal":81}],83:[function(e,t,o){o.f={}.propertyIsEnumerable},{}],84:[function(e,t,o){var i=e("./_export"),a=e("./_core"),r=e("./_fails");t.exports=function(e,t){var o=(a.Object||{})[e]||Object[e],n={};n[e]=t(o),i(i.S+i.F*r(function(){o(1)}),"Object",n)}},{"./_core":25,"./_export":35,"./_fails":37}],85:[function(e,t,o){var l=e("./_object-keys"),c=e("./_to-iobject"),d=e("./_object-pie").f;t.exports=function(s){return function(e){for(var t,o=c(e),n=l(o),i=n.length,a=0,r=[];a<i;)d.call(o,t=n[a++])&&r.push(s?[t,o[t]]:o[t]);return r}}},{"./_object-keys":82,"./_object-pie":83,"./_to-iobject":118}],86:[function(e,t,o){var n=e("./_object-gopn"),i=e("./_object-gops"),a=e("./_an-object"),r=e("./_global").Reflect;t.exports=r&&r.ownKeys||function(e){var t=n.f(a(e)),o=i.f;return o?t.concat(o(e)):t}},{"./_an-object":9,"./_global":42,"./_object-gopn":78,"./_object-gops":79}],87:[function(e,t,o){var n=e("./_global").parseFloat,i=e("./_string-trim").trim;t.exports=1/n(e("./_string-ws")+"-0")!=-1/0?function(e){var t=i(String(e),3),o=n(t);return 0===o&&"-"==t.charAt(0)?-0:o}:n},{"./_global":42,"./_string-trim":112,"./_string-ws":113}],88:[function(e,t,o){var n=e("./_global").parseInt,i=e("./_string-trim").trim,a=e("./_string-ws"),r=/^[-+]?0[xX]/;t.exports=8!==n(a+"08")||22!==n(a+"0x16")?function(e,t){var o=i(String(e),3);return n(o,t>>>0||(r.test(o)?16:10))}:n},{"./_global":42,"./_string-trim":112,"./_string-ws":113}],89:[function(e,t,o){t.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},{}],90:[function(e,t,o){var n=e("./_an-object"),i=e("./_is-object"),a=e("./_new-promise-capability");t.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var o=a.f(e);return(0,o.resolve)(t),o.promise}},{"./_an-object":9,"./_is-object":53,"./_new-promise-capability":70}],91:[function(e,t,o){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],92:[function(e,t,o){var i=e("./_redefine");t.exports=function(e,t,o){for(var n in t)i(e,n,t[n],o);return e}},{"./_redefine":93}],93:[function(e,t,o){var a=e("./_global"),r=e("./_hide"),s=e("./_has"),l=e("./_uid")("src"),n="toString",i=Function[n],c=(""+i).split(n);e("./_core").inspectSource=function(e){return i.call(e)},(t.exports=function(e,t,o,n){var i="function"==typeof o;i&&(s(o,"name")||r(o,"name",t)),e[t]!==o&&(i&&(s(o,l)||r(o,l,e[t]?""+e[t]:c.join(String(t)))),e===a?e[t]=o:n?e[t]?e[t]=o:r(e,t,o):(delete e[t],r(e,t,o)))})(Function.prototype,n,function(){return"function"==typeof this&&this[l]||i.call(this)})},{"./_core":25,"./_global":42,"./_has":43,"./_hide":44,"./_uid":125}],94:[function(e,t,o){var i=e("./_classof"),a=RegExp.prototype.exec;t.exports=function(e,t){var o=e.exec;if("function"==typeof o){var n=o.call(e,t);if("object"!=typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==i(e))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},{"./_classof":19}],95:[function(e,t,o){var n,i,r=e("./_flags"),s=RegExp.prototype.exec,l=String.prototype.replace,a=s,c="lastIndex",d=(n=/a/,i=/b*/g,s.call(n,"a"),s.call(i,"a"),0!==n[c]||0!==i[c]),u=void 0!==/()??/.exec("")[1];(d||u)&&(a=function(e){var t,o,n,i,a=this;return u&&(o=new RegExp("^"+a.source+"$(?!\\s)",r.call(a))),d&&(t=a[c]),n=s.call(a,e),d&&n&&(a[c]=a.global?n.index+n[0].length:t),u&&n&&1<n.length&&l.call(n[0],o,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)}),n}),t.exports=a},{"./_flags":39}],96:[function(e,t,o){t.exports=function(t,o){var n=o===Object(o)?function(e){return o[e]}:o;return function(e){return String(e).replace(t,n)}}},{}],97:[function(e,t,o){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},{}],98:[function(e,t,o){var n=e("./_export"),r=e("./_a-function"),s=e("./_ctx"),l=e("./_for-of");t.exports=function(e){n(n.S,e,{from:function(e){var t,o,n,i,a=arguments[1];return r(this),(t=void 0!==a)&&r(a),null==e?new this:(o=[],t?(n=0,i=s(a,arguments[2],2),l(e,!1,function(e){o.push(i(e,n++))})):l(e,!1,o.push,o),new this(o))}})}},{"./_a-function":4,"./_ctx":27,"./_export":35,"./_for-of":41}],99:[function(e,t,o){var n=e("./_export");t.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},{"./_export":35}],100:[function(t,e,o){var n=t("./_is-object"),i=t("./_an-object"),a=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,o,n){try{(n=t("./_ctx")(Function.call,t("./_object-gopd").f(Object.prototype,"__proto__").set,2))(e,[]),o=!(e instanceof Array)}catch(e){o=!0}return function(e,t){return a(e,t),o?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:a}},{"./_an-object":9,"./_ctx":27,"./_is-object":53,"./_object-gopd":76}],101:[function(e,t,o){var n=e("./_global"),i=e("./_object-dp"),a=e("./_descriptors"),r=e("./_wks")("species");t.exports=function(e){var t=n[e];a&&t&&!t[r]&&i.f(t,r,{configurable:!0,get:function(){return this}})}},{"./_descriptors":31,"./_global":42,"./_object-dp":73,"./_wks":130}],102:[function(e,t,o){var n=e("./_object-dp").f,i=e("./_has"),a=e("./_wks")("toStringTag");t.exports=function(e,t,o){e&&!i(e=o?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},{"./_has":43,"./_object-dp":73,"./_wks":130}],103:[function(e,t,o){var n=e("./_shared")("keys"),i=e("./_uid");t.exports=function(e){return n[e]||(n[e]=i(e))}},{"./_shared":104,"./_uid":125}],104:[function(e,t,o){var n=e("./_core"),i=e("./_global"),a="__core-js_shared__",r=i[a]||(i[a]={});(t.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:e("./_library")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},{"./_core":25,"./_global":42,"./_library":61}],105:[function(e,t,o){var i=e("./_an-object"),a=e("./_a-function"),r=e("./_wks")("species");t.exports=function(e,t){var o,n=i(e).constructor;return void 0===n||null==(o=i(n)[r])?t:a(o)}},{"./_a-function":4,"./_an-object":9,"./_wks":130}],106:[function(e,t,o){var n=e("./_fails");t.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},{"./_fails":37}],107:[function(e,t,o){var l=e("./_to-integer"),c=e("./_defined");t.exports=function(s){return function(e,t){var o,n,i=String(c(e)),a=l(t),r=i.length;return a<0||r<=a?s?"":void 0:(o=i.charCodeAt(a))<55296||56319<o||a+1===r||(n=i.charCodeAt(a+1))<56320||57343<n?s?i.charAt(a):o:s?i.slice(a,a+2):n-56320+(o-55296<<10)+65536}}},{"./_defined":30,"./_to-integer":117}],108:[function(e,t,o){var n=e("./_is-regexp"),i=e("./_defined");t.exports=function(e,t,o){if(n(t))throw TypeError("String#"+o+" doesn't accept regex!");return String(i(e))}},{"./_defined":30,"./_is-regexp":54}],109:[function(e,t,o){var n=e("./_export"),i=e("./_fails"),r=e("./_defined"),s=/"/g,a=function(e,t,o,n){var i=String(r(e)),a="<"+t;return""!==o&&(a+=" "+o+'="'+String(n).replace(s,"&quot;")+'"'),a+">"+i+"</"+t+">"};t.exports=function(t,e){var o={};o[t]=e(a),n(n.P+n.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||3<e.split('"').length}),"String",o)}},{"./_defined":30,"./_export":35,"./_fails":37}],110:[function(e,t,o){var d=e("./_to-length"),u=e("./_string-repeat"),h=e("./_defined");t.exports=function(e,t,o,n){var i=String(h(e)),a=i.length,r=void 0===o?" ":String(o),s=d(t);if(s<=a||""==r)return i;var l=s-a,c=u.call(r,Math.ceil(l/r.length));return c.length>l&&(c=c.slice(0,l)),n?c+i:i+c}},{"./_defined":30,"./_string-repeat":111,"./_to-length":119}],111:[function(e,t,o){var i=e("./_to-integer"),a=e("./_defined");t.exports=function(e){var t=String(a(this)),o="",n=i(e);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;0<n;(n>>>=1)&&(t+=t))1&n&&(o+=t);return o}},{"./_defined":30,"./_to-integer":117}],112:[function(e,t,o){var r=e("./_export"),n=e("./_defined"),s=e("./_fails"),l=e("./_string-ws"),i="["+l+"]",a=RegExp("^"+i+i+"*"),c=RegExp(i+i+"*$"),d=function(e,t,o){var n={},i=s(function(){return!!l[e]()||"​"!="​"[e]()}),a=n[e]=i?t(u):l[e];o&&(n[o]=a),r(r.P+r.F*i,"String",n)},u=d.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(a,"")),2&t&&(e=e.replace(c,"")),e};t.exports=d},{"./_defined":30,"./_export":35,"./_fails":37,"./_string-ws":113}],113:[function(e,t,o){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],114:[function(e,t,o){var n,i,a,r=e("./_ctx"),s=e("./_invoke"),l=e("./_html"),c=e("./_dom-create"),d=e("./_global"),u=d.process,h=d.setImmediate,m=d.clearImmediate,f=d.MessageChannel,p=d.Dispatch,g=0,v={},y="onreadystatechange",b=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},_=function(e){b.call(e.data)};h&&m||(h=function(e){for(var t=[],o=1;arguments.length>o;)t.push(arguments[o++]);return v[++g]=function(){s("function"==typeof e?e:Function(e),t)},n(g),g},m=function(e){delete v[e]},"process"==e("./_cof")(u)?n=function(e){u.nextTick(r(b,e,1))}:p&&p.now?n=function(e){p.now(r(b,e,1))}:f?(a=(i=new f).port2,i.port1.onmessage=_,n=r(a.postMessage,a,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(n=function(e){d.postMessage(e+"","*")},d.addEventListener("message",_,!1)):n=y in c("script")?function(e){l.appendChild(c("script"))[y]=function(){l.removeChild(this),b.call(e)}}:function(e){setTimeout(r(b,e,1),0)}),t.exports={set:h,clear:m}},{"./_cof":20,"./_ctx":27,"./_dom-create":32,"./_global":42,"./_html":45,"./_invoke":48}],115:[function(e,t,o){var n=e("./_to-integer"),i=Math.max,a=Math.min;t.exports=function(e,t){return(e=n(e))<0?i(e+t,0):a(e,t)}},{"./_to-integer":117}],116:[function(e,t,o){var n=e("./_to-integer"),i=e("./_to-length");t.exports=function(e){if(void 0===e)return 0;var t=n(e),o=i(t);if(t!==o)throw RangeError("Wrong length!");return o}},{"./_to-integer":117,"./_to-length":119}],117:[function(e,t,o){var n=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(0<e?i:n)(e)}},{}],118:[function(e,t,o){var n=e("./_iobject"),i=e("./_defined");t.exports=function(e){return n(i(e))}},{"./_defined":30,"./_iobject":49}],119:[function(e,t,o){var n=e("./_to-integer"),i=Math.min;t.exports=function(e){return 0<e?i(n(e),9007199254740991):0}},{"./_to-integer":117}],120:[function(e,t,o){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":30}],121:[function(e,t,o){var i=e("./_is-object");t.exports=function(e,t){if(!i(e))return e;var o,n;if(t&&"function"==typeof(o=e.toString)&&!i(n=o.call(e)))return n;if("function"==typeof(o=e.valueOf)&&!i(n=o.call(e)))return n;if(!t&&"function"==typeof(o=e.toString)&&!i(n=o.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":53}],122:[function(e,t,o){if(e("./_descriptors")){var v=e("./_library"),y=e("./_global"),b=e("./_fails"),_=e("./_export"),w=e("./_typed"),n=e("./_typed-buffer"),h=e("./_ctx"),k=e("./_an-instance"),i=e("./_property-desc"),S=e("./_hide"),a=e("./_redefine-all"),r=e("./_to-integer"),I=e("./_to-length"),P=e("./_to-index"),s=e("./_to-absolute-index"),l=e("./_to-primitive"),c=e("./_has"),x=e("./_classof"),C=e("./_is-object"),m=e("./_to-object"),f=e("./_is-array-iter"),T=e("./_object-create"),D=e("./_object-gpo"),E=e("./_object-gopn").f,p=e("./core.get-iterator-method"),d=e("./_uid"),u=e("./_wks"),g=e("./_array-methods"),L=e("./_array-includes"),A=e("./_species-constructor"),M=e("./es6.array.iterator"),R=e("./_iterators"),W=e("./_iter-detect"),j=e("./_set-species"),N=e("./_array-fill"),O=e("./_array-copy-within"),V=e("./_object-dp"),F=e("./_object-gopd"),B=V.f,z=F.f,U=y.RangeError,H=y.TypeError,J=y.Uint8Array,K="ArrayBuffer",q="Shared"+K,G="BYTES_PER_ELEMENT",Y="prototype",X=Array[Y],Z=n.ArrayBuffer,$=n.DataView,Q=g(0),ee=g(2),te=g(3),oe=g(4),ne=g(5),ie=g(6),ae=L(!0),re=L(!1),se=M.values,le=M.keys,ce=M.entries,de=X.lastIndexOf,ue=X.reduce,he=X.reduceRight,me=X.join,fe=X.sort,pe=X.slice,ge=X.toString,ve=X.toLocaleString,ye=u("iterator"),be=u("toStringTag"),_e=d("typed_constructor"),we=d("def_constructor"),ke=w.CONSTR,Se=w.TYPED,Ie=w.VIEW,Pe="Wrong length!",xe=g(1,function(e,t){return Le(A(e,e[we]),t)}),Ce=b(function(){return 1===new J(new Uint16Array([1]).buffer)[0]}),Te=!!J&&!!J[Y].set&&b(function(){new J(1).set({})}),De=function(e,t){var o=r(e);if(o<0||o%t)throw U("Wrong offset!");return o},Ee=function(e){if(C(e)&&Se in e)return e;throw H(e+" is not a typed array!")},Le=function(e,t){if(!(C(e)&&_e in e))throw H("It is not a typed array constructor!");return new e(t)},Ae=function(e,t){return Me(A(e,e[we]),t)},Me=function(e,t){for(var o=0,n=t.length,i=Le(e,n);o<n;)i[o]=t[o++];return i},Re=function(e,t,o){B(e,t,{get:function(){return this._d[o]}})},We=function(e){var t,o,n,i,a,r,s=m(e),l=arguments.length,c=1<l?arguments[1]:void 0,d=void 0!==c,u=p(s);if(null!=u&&!f(u)){for(r=u.call(s),n=[],t=0;!(a=r.next()).done;t++)n.push(a.value);s=n}for(d&&2<l&&(c=h(c,arguments[2],2)),t=0,o=I(s.length),i=Le(this,o);t<o;t++)i[t]=d?c(s[t],t):s[t];return i},je=function(){for(var e=0,t=arguments.length,o=Le(this,t);e<t;)o[e]=arguments[e++];return o},Ne=!!J&&b(function(){ve.call(new J(1))}),Oe=function(){return ve.apply(Ne?pe.call(Ee(this)):Ee(this),arguments)},Ve={copyWithin:function(e,t){return O.call(Ee(this),e,t,2<arguments.length?arguments[2]:void 0)},every:function(e){return oe(Ee(this),e,1<arguments.length?arguments[1]:void 0)},fill:function(e){return N.apply(Ee(this),arguments)},filter:function(e){return Ae(this,ee(Ee(this),e,1<arguments.length?arguments[1]:void 0))},find:function(e){return ne(Ee(this),e,1<arguments.length?arguments[1]:void 0)},findIndex:function(e){return ie(Ee(this),e,1<arguments.length?arguments[1]:void 0)},forEach:function(e){Q(Ee(this),e,1<arguments.length?arguments[1]:void 0)},indexOf:function(e){return re(Ee(this),e,1<arguments.length?arguments[1]:void 0)},includes:function(e){return ae(Ee(this),e,1<arguments.length?arguments[1]:void 0)},join:function(e){return me.apply(Ee(this),arguments)},lastIndexOf:function(e){return de.apply(Ee(this),arguments)},map:function(e){return xe(Ee(this),e,1<arguments.length?arguments[1]:void 0)},reduce:function(e){return ue.apply(Ee(this),arguments)},reduceRight:function(e){return he.apply(Ee(this),arguments)},reverse:function(){for(var e,t=this,o=Ee(t).length,n=Math.floor(o/2),i=0;i<n;)e=t[i],t[i++]=t[--o],t[o]=e;return t},some:function(e){return te(Ee(this),e,1<arguments.length?arguments[1]:void 0)},sort:function(e){return fe.call(Ee(this),e)},subarray:function(e,t){var o=Ee(this),n=o.length,i=s(e,n);return new(A(o,o[we]))(o.buffer,o.byteOffset+i*o.BYTES_PER_ELEMENT,I((void 0===t?n:s(t,n))-i))}},Fe=function(e,t){return Ae(this,pe.call(Ee(this),e,t))},Be=function(e){Ee(this);var t=De(arguments[1],1),o=this.length,n=m(e),i=I(n.length),a=0;if(o<i+t)throw U(Pe);for(;a<i;)this[t+a]=n[a++]},ze={entries:function(){return ce.call(Ee(this))},keys:function(){return le.call(Ee(this))},values:function(){return se.call(Ee(this))}},Ue=function(e,t){return C(e)&&e[Se]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},He=function(e,t){return Ue(e,t=l(t,!0))?i(2,e[t]):z(e,t)},Je=function(e,t,o){return!(Ue(e,t=l(t,!0))&&C(o)&&c(o,"value"))||c(o,"get")||c(o,"set")||o.configurable||c(o,"writable")&&!o.writable||c(o,"enumerable")&&!o.enumerable?B(e,t,o):(e[t]=o.value,e)};ke||(F.f=He,V.f=Je),_(_.S+_.F*!ke,"Object",{getOwnPropertyDescriptor:He,defineProperty:Je}),b(function(){ge.call({})})&&(ge=ve=function(){return me.call(this)});var Ke=a({},Ve);a(Ke,ze),S(Ke,ye,ze.values),a(Ke,{slice:Fe,set:Be,constructor:function(){},toString:ge,toLocaleString:Oe}),Re(Ke,"buffer","b"),Re(Ke,"byteOffset","o"),Re(Ke,"byteLength","l"),Re(Ke,"length","e"),B(Ke,be,{get:function(){return this[Se]}}),t.exports=function(e,u,t,a){var h=e+((a=!!a)?"Clamped":"")+"Array",o="get"+e,r="set"+e,m=y[h],s=m||{},n=m&&D(m),i=!m||!w.ABV,l={},c=m&&m[Y],f=function(e,i){B(e,i,{get:function(){return e=i,(t=this._d).v[o](e*u+t.o,Ce);var e,t},set:function(e){return t=i,o=e,n=this._d,a&&(o=(o=Math.round(o))<0?0:255<o?255:255&o),void n.v[r](t*u+n.o,o,Ce);var t,o,n},enumerable:!0})};i?(m=t(function(e,t,o,n){k(e,m,h,"_d");var i,a,r,s,l=0,c=0;if(C(t)){if(!(t instanceof Z||(s=x(t))==K||s==q))return Se in t?Me(m,t):We.call(m,t);i=t,c=De(o,u);var d=t.byteLength;if(void 0===n){if(d%u)throw U(Pe);if((a=d-c)<0)throw U(Pe)}else if(d<(a=I(n)*u)+c)throw U(Pe);r=a/u}else r=P(t),i=new Z(a=r*u);for(S(e,"_d",{b:i,o:c,l:a,e:r,v:new $(i)});l<r;)f(e,l++)}),c=m[Y]=T(Ke),S(c,"constructor",m)):b(function(){m(1)})&&b(function(){new m(-1)})&&W(function(e){new m,new m(null),new m(1.5),new m(e)},!0)||(m=t(function(e,t,o,n){var i;return k(e,m,h),C(t)?t instanceof Z||(i=x(t))==K||i==q?void 0!==n?new s(t,De(o,u),n):void 0!==o?new s(t,De(o,u)):new s(t):Se in t?Me(m,t):We.call(m,t):new s(P(t))}),Q(n!==Function.prototype?E(s).concat(E(n)):E(s),function(e){e in m||S(m,e,s[e])}),m[Y]=c,v||(c.constructor=m));var d=c[ye],p=!!d&&("values"==d.name||null==d.name),g=ze.values;S(m,_e,!0),S(c,Se,h),S(c,Ie,!0),S(c,we,m),(a?new m(1)[be]==h:be in c)||B(c,be,{get:function(){return h}}),l[h]=m,_(_.G+_.W+_.F*(m!=s),l),_(_.S,h,{BYTES_PER_ELEMENT:u}),_(_.S+_.F*b(function(){s.of.call(m,1)}),h,{from:We,of:je}),G in c||S(c,G,u),_(_.P,h,Ve),j(h),_(_.P+_.F*Te,h,{set:Be}),_(_.P+_.F*!p,h,ze),v||c.toString==ge||(c.toString=ge),_(_.P+_.F*b(function(){new m(1).slice()}),h,{slice:Fe}),_(_.P+_.F*(b(function(){return[1,2].toLocaleString()!=new m([1,2]).toLocaleString()})||!b(function(){c.toLocaleString.call([1,2])})),h,{toLocaleString:Oe}),R[h]=p?d:g,v||p||S(c,ye,g)}}else t.exports=function(){}},{"./_an-instance":8,"./_array-copy-within":10,"./_array-fill":11,"./_array-includes":13,"./_array-methods":14,"./_classof":19,"./_ctx":27,"./_descriptors":31,"./_export":35,"./_fails":37,"./_global":42,"./_has":43,"./_hide":44,"./_is-array-iter":50,"./_is-object":53,"./_iter-detect":58,"./_iterators":60,"./_library":61,"./_object-create":72,"./_object-dp":73,"./_object-gopd":76,"./_object-gopn":78,"./_object-gpo":80,"./_property-desc":91,"./_redefine-all":92,"./_set-species":101,"./_species-constructor":105,"./_to-absolute-index":115,"./_to-index":116,"./_to-integer":117,"./_to-length":119,"./_to-object":120,"./_to-primitive":121,"./_typed":124,"./_typed-buffer":123,"./_uid":125,"./_wks":130,"./core.get-iterator-method":131,"./es6.array.iterator":143}],123:[function(e,t,o){var n=e("./_global"),i=e("./_descriptors"),a=e("./_library"),r=e("./_typed"),s=e("./_hide"),l=e("./_redefine-all"),c=e("./_fails"),d=e("./_an-instance"),u=e("./_to-integer"),h=e("./_to-length"),m=e("./_to-index"),f=e("./_object-gopn").f,p=e("./_object-dp").f,g=e("./_array-fill"),v=e("./_set-to-string-tag"),y="ArrayBuffer",b="DataView",_="prototype",w="Wrong index!",k=n[y],S=n[b],I=n.Math,P=n.RangeError,x=n.Infinity,C=k,T=I.abs,D=I.pow,E=I.floor,L=I.log,A=I.LN2,M="byteLength",R="byteOffset",W=i?"_b":"buffer",j=i?"_l":M,N=i?"_o":R;function O(e,t,o){var n,i,a,r=new Array(o),s=8*o-t-1,l=(1<<s)-1,c=l>>1,d=23===t?D(2,-24)-D(2,-77):0,u=0,h=e<0||0===e&&1/e<0?1:0;for((e=T(e))!=e||e===x?(i=e!=e?1:0,n=l):(n=E(L(e)/A),e*(a=D(2,-n))<1&&(n--,a*=2),2<=(e+=1<=n+c?d/a:d*D(2,1-c))*a&&(n++,a/=2),l<=n+c?(i=0,n=l):1<=n+c?(i=(e*a-1)*D(2,t),n+=c):(i=e*D(2,c-1)*D(2,t),n=0));8<=t;r[u++]=255&i,i/=256,t-=8);for(n=n<<t|i,s+=t;0<s;r[u++]=255&n,n/=256,s-=8);return r[--u]|=128*h,r}function V(e,t,o){var n,i=8*o-t-1,a=(1<<i)-1,r=a>>1,s=i-7,l=o-1,c=e[l--],d=127&c;for(c>>=7;0<s;d=256*d+e[l],l--,s-=8);for(n=d&(1<<-s)-1,d>>=-s,s+=t;0<s;n=256*n+e[l],l--,s-=8);if(0===d)d=1-r;else{if(d===a)return n?NaN:c?-x:x;n+=D(2,t),d-=r}return(c?-1:1)*n*D(2,d-t)}function F(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function B(e){return[255&e]}function z(e){return[255&e,e>>8&255]}function U(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function H(e){return O(e,52,8)}function J(e){return O(e,23,4)}function K(e,t,o){p(e[_],t,{get:function(){return this[o]}})}function q(e,t,o,n){var i=m(+o);if(i+t>e[j])throw P(w);var a=e[W]._b,r=i+e[N],s=a.slice(r,r+t);return n?s:s.reverse()}function G(e,t,o,n,i,a){var r=m(+o);if(r+t>e[j])throw P(w);for(var s=e[W]._b,l=r+e[N],c=n(+i),d=0;d<t;d++)s[l+d]=c[a?d:t-d-1]}if(r.ABV){if(!c(function(){k(1)})||!c(function(){new k(-1)})||c(function(){return new k,new k(1.5),new k(NaN),k.name!=y})){for(var Y,X=(k=function(e){return d(this,k),new C(m(e))})[_]=C[_],Z=f(C),$=0;Z.length>$;)(Y=Z[$++])in k||s(k,Y,C[Y]);a||(X.constructor=k)}var Q=new S(new k(2)),ee=S[_].setInt8;Q.setInt8(0,2147483648),Q.setInt8(1,2147483649),!Q.getInt8(0)&&Q.getInt8(1)||l(S[_],{setInt8:function(e,t){ee.call(this,e,t<<24>>24)},setUint8:function(e,t){ee.call(this,e,t<<24>>24)}},!0)}else k=function(e){d(this,k,y);var t=m(e);this._b=g.call(new Array(t),0),this[j]=t},S=function(e,t,o){d(this,S,b),d(e,k,b);var n=e[j],i=u(t);if(i<0||n<i)throw P("Wrong offset!");if(n<i+(o=void 0===o?n-i:h(o)))throw P("Wrong length!");this[W]=e,this[N]=i,this[j]=o},i&&(K(k,M,"_l"),K(S,"buffer","_b"),K(S,M,"_l"),K(S,R,"_o")),l(S[_],{getInt8:function(e){return q(this,1,e)[0]<<24>>24},getUint8:function(e){return q(this,1,e)[0]},getInt16:function(e){var t=q(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=q(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return F(q(this,4,e,arguments[1]))},getUint32:function(e){return F(q(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return V(q(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return V(q(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){G(this,1,e,B,t)},setUint8:function(e,t){G(this,1,e,B,t)},setInt16:function(e,t){G(this,2,e,z,t,arguments[2])},setUint16:function(e,t){G(this,2,e,z,t,arguments[2])},setInt32:function(e,t){G(this,4,e,U,t,arguments[2])},setUint32:function(e,t){G(this,4,e,U,t,arguments[2])},setFloat32:function(e,t){G(this,4,e,J,t,arguments[2])},setFloat64:function(e,t){G(this,8,e,H,t,arguments[2])}});v(k,y),v(S,b),s(S[_],r.VIEW,!0),o[y]=k,o[b]=S},{"./_an-instance":8,"./_array-fill":11,"./_descriptors":31,"./_fails":37,"./_global":42,"./_hide":44,"./_library":61,"./_object-dp":73,"./_object-gopn":78,"./_redefine-all":92,"./_set-to-string-tag":102,"./_to-index":116,"./_to-integer":117,"./_to-length":119,"./_typed":124}],124:[function(e,t,o){for(var n,i=e("./_global"),a=e("./_hide"),r=e("./_uid"),s=r("typed_array"),l=r("view"),c=!(!i.ArrayBuffer||!i.DataView),d=c,u=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");u<9;)(n=i[h[u++]])?(a(n.prototype,s,!0),a(n.prototype,l,!0)):d=!1;t.exports={ABV:c,CONSTR:d,TYPED:s,VIEW:l}},{"./_global":42,"./_hide":44,"./_uid":125}],125:[function(e,t,o){var n=0,i=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},{}],126:[function(e,t,o){var n=e("./_global").navigator;t.exports=n&&n.userAgent||""},{"./_global":42}],127:[function(e,t,o){var n=e("./_is-object");t.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},{"./_is-object":53}],128:[function(e,t,o){var n=e("./_global"),i=e("./_core"),a=e("./_library"),r=e("./_wks-ext"),s=e("./_object-dp").f;t.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:r.f(e)})}},{"./_core":25,"./_global":42,"./_library":61,"./_object-dp":73,"./_wks-ext":129}],129:[function(e,t,o){o.f=e("./_wks")},{"./_wks":130}],130:[function(e,t,o){var n=e("./_shared")("wks"),i=e("./_uid"),a=e("./_global").Symbol,r="function"==typeof a;(t.exports=function(e){return n[e]||(n[e]=r&&a[e]||(r?a:i)("Symbol."+e))}).store=n},{"./_global":42,"./_shared":104,"./_uid":125}],131:[function(e,t,o){var n=e("./_classof"),i=e("./_wks")("iterator"),a=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||a[n(e)]}},{"./_classof":19,"./_core":25,"./_iterators":60,"./_wks":130}],132:[function(e,t,o){var n=e("./_export"),i=e("./_replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(e){return i(e)}})},{"./_export":35,"./_replacer":96}],133:[function(e,t,o){var n=e("./_export");n(n.P,"Array",{copyWithin:e("./_array-copy-within")}),e("./_add-to-unscopables")("copyWithin")},{"./_add-to-unscopables":6,"./_array-copy-within":10,"./_export":35}],134:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(4);n(n.P+n.F*!e("./_strict-method")([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":14,"./_export":35,"./_strict-method":106}],135:[function(e,t,o){var n=e("./_export");n(n.P,"Array",{fill:e("./_array-fill")}),e("./_add-to-unscopables")("fill")},{"./_add-to-unscopables":6,"./_array-fill":11,"./_export":35}],136:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(2);n(n.P+n.F*!e("./_strict-method")([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":14,"./_export":35,"./_strict-method":106}],137:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(6),a="findIndex",r=!0;a in[]&&Array(1)[a](function(){r=!1}),n(n.P+n.F*r,"Array",{findIndex:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),e("./_add-to-unscopables")(a)},{"./_add-to-unscopables":6,"./_array-methods":14,"./_export":35}],138:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(5),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),n(n.P+n.F*a,"Array",{find:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),e("./_add-to-unscopables")("find")},{"./_add-to-unscopables":6,"./_array-methods":14,"./_export":35}],139:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(0),a=e("./_strict-method")([].forEach,!0);n(n.P+n.F*!a,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":14,"./_export":35,"./_strict-method":106}],140:[function(e,t,o){var h=e("./_ctx"),n=e("./_export"),m=e("./_to-object"),f=e("./_iter-call"),p=e("./_is-array-iter"),g=e("./_to-length"),v=e("./_create-property"),y=e("./core.get-iterator-method");n(n.S+n.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,o,n,i,a=m(e),r="function"==typeof this?this:Array,s=arguments.length,l=1<s?arguments[1]:void 0,c=void 0!==l,d=0,u=y(a);if(c&&(l=h(l,2<s?arguments[2]:void 0,2)),null==u||r==Array&&p(u))for(o=new r(t=g(a.length));d<t;d++)v(o,d,c?l(a[d],d):a[d]);else for(i=u.call(a),o=new r;!(n=i.next()).done;d++)v(o,d,c?f(i,l,[n.value,d],!0):n.value);return o.length=d,o}})},{"./_create-property":26,"./_ctx":27,"./_export":35,"./_is-array-iter":50,"./_iter-call":55,"./_iter-detect":58,"./_to-length":119,"./_to-object":120,"./core.get-iterator-method":131}],141:[function(e,t,o){var n=e("./_export"),i=e("./_array-includes")(!1),a=[].indexOf,r=!!a&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(r||!e("./_strict-method")(a)),"Array",{indexOf:function(e){return r?a.apply(this,arguments)||0:i(this,e,arguments[1])}})},{"./_array-includes":13,"./_export":35,"./_strict-method":106}],142:[function(e,t,o){var n=e("./_export");n(n.S,"Array",{isArray:e("./_is-array")})},{"./_export":35,"./_is-array":51}],143:[function(e,t,o){var n=e("./_add-to-unscopables"),i=e("./_iter-step"),a=e("./_iterators"),r=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=r(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,o=this._i++;return!e||o>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?o:"values"==t?e[o]:[o,e[o]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":6,"./_iter-define":57,"./_iter-step":59,"./_iterators":60,"./_to-iobject":118}],144:[function(e,t,o){var n=e("./_export"),i=e("./_to-iobject"),a=[].join;n(n.P+n.F*(e("./_iobject")!=Object||!e("./_strict-method")(a)),"Array",{join:function(e){return a.call(i(this),void 0===e?",":e)}})},{"./_export":35,"./_iobject":49,"./_strict-method":106,"./_to-iobject":118}],145:[function(e,t,o){var n=e("./_export"),i=e("./_to-iobject"),a=e("./_to-integer"),r=e("./_to-length"),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(l||!e("./_strict-method")(s)),"Array",{lastIndexOf:function(e){if(l)return s.apply(this,arguments)||0;var t=i(this),o=r(t.length),n=o-1;for(1<arguments.length&&(n=Math.min(n,a(arguments[1]))),n<0&&(n=o+n);0<=n;n--)if(n in t&&t[n]===e)return n||0;return-1}})},{"./_export":35,"./_strict-method":106,"./_to-integer":117,"./_to-iobject":118,"./_to-length":119}],146:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(1);n(n.P+n.F*!e("./_strict-method")([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":14,"./_export":35,"./_strict-method":106}],147:[function(e,t,o){var n=e("./_export"),i=e("./_create-property");n(n.S+n.F*e("./_fails")(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,o=new("function"==typeof this?this:Array)(t);e<t;)i(o,e,arguments[e++]);return o.length=t,o}})},{"./_create-property":26,"./_export":35,"./_fails":37}],148:[function(e,t,o){var n=e("./_export"),i=e("./_array-reduce");n(n.P+n.F*!e("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},{"./_array-reduce":15,"./_export":35,"./_strict-method":106}],149:[function(e,t,o){var n=e("./_export"),i=e("./_array-reduce");n(n.P+n.F*!e("./_strict-method")([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},{"./_array-reduce":15,"./_export":35,"./_strict-method":106}],150:[function(e,t,o){var n=e("./_export"),i=e("./_html"),c=e("./_cof"),d=e("./_to-absolute-index"),u=e("./_to-length"),h=[].slice;n(n.P+n.F*e("./_fails")(function(){i&&h.call(i)}),"Array",{slice:function(e,t){var o=u(this.length),n=c(this);if(t=void 0===t?o:t,"Array"==n)return h.call(this,e,t);for(var i=d(e,o),a=d(t,o),r=u(a-i),s=new Array(r),l=0;l<r;l++)s[l]="String"==n?this.charAt(i+l):this[i+l];return s}})},{"./_cof":20,"./_export":35,"./_fails":37,"./_html":45,"./_to-absolute-index":115,"./_to-length":119}],151:[function(e,t,o){var n=e("./_export"),i=e("./_array-methods")(3);n(n.P+n.F*!e("./_strict-method")([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":14,"./_export":35,"./_strict-method":106}],152:[function(e,t,o){var n=e("./_export"),i=e("./_a-function"),a=e("./_to-object"),r=e("./_fails"),s=[].sort,l=[1,2,3];n(n.P+n.F*(r(function(){l.sort(void 0)})||!r(function(){l.sort(null)})||!e("./_strict-method")(s)),"Array",{sort:function(e){return void 0===e?s.call(a(this)):s.call(a(this),i(e))}})},{"./_a-function":4,"./_export":35,"./_fails":37,"./_strict-method":106,"./_to-object":120}],153:[function(e,t,o){e("./_set-species")("Array")},{"./_set-species":101}],154:[function(e,t,o){var n=e("./_export");n(n.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":35}],155:[function(e,t,o){var n=e("./_export"),i=e("./_date-to-iso-string");n(n.P+n.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},{"./_date-to-iso-string":28,"./_export":35}],156:[function(e,t,o){var n=e("./_export"),i=e("./_to-object"),a=e("./_to-primitive");n(n.P+n.F*e("./_fails")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),o=a(t);return"number"!=typeof o||isFinite(o)?t.toISOString():null}})},{"./_export":35,"./_fails":37,"./_to-object":120,"./_to-primitive":121}],157:[function(e,t,o){var n=e("./_wks")("toPrimitive"),i=Date.prototype;n in i||e("./_hide")(i,n,e("./_date-to-primitive"))},{"./_date-to-primitive":29,"./_hide":44,"./_wks":130}],158:[function(e,t,o){var n=Date.prototype,i="Invalid Date",a=n.toString,r=n.getTime;new Date(NaN)+""!=i&&e("./_redefine")(n,"toString",function(){var e=r.call(this);return e==e?a.call(this):i})},{"./_redefine":93}],159:[function(e,t,o){var n=e("./_export");n(n.P,"Function",{bind:e("./_bind")})},{"./_bind":18,"./_export":35}],160:[function(e,t,o){var n=e("./_is-object"),i=e("./_object-gpo"),a=e("./_wks")("hasInstance"),r=Function.prototype;a in r||e("./_object-dp").f(r,a,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},{"./_is-object":53,"./_object-dp":73,"./_object-gpo":80,"./_wks":130}],161:[function(e,t,o){var n=e("./_object-dp").f,i=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in i||e("./_descriptors")&&n(i,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},{"./_descriptors":31,"./_object-dp":73}],162:[function(e,t,o){var n=e("./_collection-strong"),i=e("./_validate-collection");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(i(this,"Map"),0===e?0:e,t)}},n,!0)},{"./_collection":24,"./_collection-strong":21,"./_validate-collection":127}],163:[function(e,t,o){var n=e("./_export"),i=e("./_math-log1p"),a=Math.sqrt,r=Math.acosh;n(n.S+n.F*!(r&&710==Math.floor(r(Number.MAX_VALUE))&&r(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:94906265.62425156<e?Math.log(e)+Math.LN2:i(e-1+a(e-1)*a(e+1))}})},{"./_export":35,"./_math-log1p":64}],164:[function(e,t,o){var n=e("./_export"),i=Math.asinh;n(n.S+n.F*!(i&&0<1/i(0)),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},{"./_export":35}],165:[function(e,t,o){var n=e("./_export"),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},{"./_export":35}],166:[function(e,t,o){var n=e("./_export"),i=e("./_math-sign");n(n.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},{"./_export":35,"./_math-sign":66}],167:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},{"./_export":35}],168:[function(e,t,o){var n=e("./_export"),i=Math.exp;n(n.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},{"./_export":35}],169:[function(e,t,o){var n=e("./_export"),i=e("./_math-expm1");n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},{"./_export":35,"./_math-expm1":62}],170:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{fround:e("./_math-fround")})},{"./_export":35,"./_math-fround":63}],171:[function(e,t,o){var n=e("./_export"),l=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var o,n,i=0,a=0,r=arguments.length,s=0;a<r;)s<(o=l(arguments[a++]))?(i=i*(n=s/o)*n+1,s=o):i+=0<o?(n=o/s)*n:o;return s===1/0?1/0:s*Math.sqrt(i)}})},{"./_export":35}],172:[function(e,t,o){var n=e("./_export"),i=Math.imul;n(n.S+n.F*e("./_fails")(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(e,t){var o=+e,n=+t,i=65535&o,a=65535&n;return 0|i*a+((65535&o>>>16)*a+i*(65535&n>>>16)<<16>>>0)}})},{"./_export":35,"./_fails":37}],173:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},{"./_export":35}],174:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{log1p:e("./_math-log1p")})},{"./_export":35,"./_math-log1p":64}],175:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},{"./_export":35}],176:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{sign:e("./_math-sign")})},{"./_export":35,"./_math-sign":66}],177:[function(e,t,o){var n=e("./_export"),i=e("./_math-expm1"),a=Math.exp;n(n.S+n.F*e("./_fails")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},{"./_export":35,"./_fails":37,"./_math-expm1":62}],178:[function(e,t,o){var n=e("./_export"),i=e("./_math-expm1"),a=Math.exp;n(n.S,"Math",{tanh:function(e){var t=i(e=+e),o=i(-e);return t==1/0?1:o==1/0?-1:(t-o)/(a(e)+a(-e))}})},{"./_export":35,"./_math-expm1":62}],179:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{trunc:function(e){return(0<e?Math.floor:Math.ceil)(e)}})},{"./_export":35}],180:[function(e,t,o){var n=e("./_global"),i=e("./_has"),a=e("./_cof"),r=e("./_inherit-if-required"),d=e("./_to-primitive"),s=e("./_fails"),l=e("./_object-gopn").f,c=e("./_object-gopd").f,u=e("./_object-dp").f,h=e("./_string-trim").trim,m="Number",f=n[m],p=f,g=f.prototype,v=a(e("./_object-create")(g))==m,y="trim"in String.prototype,b=function(e){var t=d(e,!1);if("string"==typeof t&&2<t.length){var o,n,i,a=(t=y?t.trim():h(t,3)).charCodeAt(0);if(43===a||45===a){if(88===(o=t.charCodeAt(2))||120===o)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var r,s=t.slice(2),l=0,c=s.length;l<c;l++)if((r=s.charCodeAt(l))<48||i<r)return NaN;return parseInt(s,n)}}return+t};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(e){var t=arguments.length<1?0:e,o=this;return o instanceof f&&(v?s(function(){g.valueOf.call(o)}):a(o)!=m)?r(new p(b(t)),o,f):b(t)};for(var _,w=e("./_descriptors")?l(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;w.length>k;k++)i(p,_=w[k])&&!i(f,_)&&u(f,_,c(p,_));(f.prototype=g).constructor=f,e("./_redefine")(n,m,f)}},{"./_cof":20,"./_descriptors":31,"./_fails":37,"./_global":42,"./_has":43,"./_inherit-if-required":47,"./_object-create":72,"./_object-dp":73,"./_object-gopd":76,"./_object-gopn":78,"./_redefine":93,"./_string-trim":112,"./_to-primitive":121}],181:[function(e,t,o){var n=e("./_export");n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},{"./_export":35}],182:[function(e,t,o){var n=e("./_export"),i=e("./_global").isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},{"./_export":35,"./_global":42}],183:[function(e,t,o){var n=e("./_export");n(n.S,"Number",{isInteger:e("./_is-integer")})},{"./_export":35,"./_is-integer":52}],184:[function(e,t,o){var n=e("./_export");n(n.S,"Number",{isNaN:function(e){return e!=e}})},{"./_export":35}],185:[function(e,t,o){var n=e("./_export"),i=e("./_is-integer"),a=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return i(e)&&a(e)<=9007199254740991}})},{"./_export":35,"./_is-integer":52}],186:[function(e,t,o){var n=e("./_export");n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":35}],187:[function(e,t,o){var n=e("./_export");n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":35}],188:[function(e,t,o){var n=e("./_export"),i=e("./_parse-float");n(n.S+n.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},{"./_export":35,"./_parse-float":87}],189:[function(e,t,o){var n=e("./_export"),i=e("./_parse-int");n(n.S+n.F*(Number.parseInt!=i),"Number",{parseInt:i})},{"./_export":35,"./_parse-int":88}],190:[function(e,t,o){var n=e("./_export"),c=e("./_to-integer"),d=e("./_a-number-value"),u=e("./_string-repeat"),i=1..toFixed,a=Math.floor,r=[0,0,0,0,0,0],h="Number.toFixed: incorrect invocation!",m=function(e,t){for(var o=-1,n=t;++o<6;)n+=e*r[o],r[o]=n%1e7,n=a(n/1e7)},f=function(e){for(var t=6,o=0;0<=--t;)o+=r[t],r[t]=a(o/e),o=o%e*1e7},p=function(){for(var e=6,t="";0<=--e;)if(""!==t||0===e||0!==r[e]){var o=String(r[e]);t=""===t?o:t+u.call("0",7-o.length)+o}return t},g=function(e,t,o){return 0===t?o:t%2==1?g(e,t-1,o*e):g(e*e,t/2,o)};n(n.P+n.F*(!!i&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!e("./_fails")(function(){i.call({})})),"Number",{toFixed:function(e){var t,o,n,i,a=d(this,h),r=c(e),s="",l="0";if(r<0||20<r)throw RangeError(h);if(a!=a)return"NaN";if(a<=-1e21||1e21<=a)return String(a);if(a<0&&(s="-",a=-a),1e-21<a)if(o=(t=function(e){for(var t=0,o=e;4096<=o;)t+=12,o/=4096;for(;2<=o;)t+=1,o/=2;return t}(a*g(2,69,1))-69)<0?a*g(2,-t,1):a/g(2,t,1),o*=4503599627370496,0<(t=52-t)){for(m(0,o),n=r;7<=n;)m(1e7,0),n-=7;for(m(g(10,n,1),0),n=t-1;23<=n;)f(1<<23),n-=23;f(1<<n),m(1,1),f(2),l=p()}else m(0,o),m(1<<-t,0),l=p()+u.call("0",r);return l=0<r?s+((i=l.length)<=r?"0."+u.call("0",r-i)+l:l.slice(0,i-r)+"."+l.slice(i-r)):s+l}})},{"./_a-number-value":5,"./_export":35,"./_fails":37,"./_string-repeat":111,"./_to-integer":117}],191:[function(e,t,o){var n=e("./_export"),i=e("./_fails"),a=e("./_a-number-value"),r=1..toPrecision;n(n.P+n.F*(i(function(){return"1"!==r.call(1,void 0)})||!i(function(){r.call({})})),"Number",{toPrecision:function(e){var t=a(this,"Number#toPrecision: incorrect invocation!");return void 0===e?r.call(t):r.call(t,e)}})},{"./_a-number-value":5,"./_export":35,"./_fails":37}],192:[function(e,t,o){var n=e("./_export");n(n.S+n.F,"Object",{assign:e("./_object-assign")})},{"./_export":35,"./_object-assign":71}],193:[function(e,t,o){var n=e("./_export");n(n.S,"Object",{create:e("./_object-create")})},{"./_export":35,"./_object-create":72}],194:[function(e,t,o){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperties:e("./_object-dps")})},{"./_descriptors":31,"./_export":35,"./_object-dps":74}],195:[function(e,t,o){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":31,"./_export":35,"./_object-dp":73}],196:[function(e,t,o){var n=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},{"./_is-object":53,"./_meta":67,"./_object-sap":84}],197:[function(e,t,o){var n=e("./_to-iobject"),i=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function(e,t){return i(n(e),t)}})},{"./_object-gopd":76,"./_object-sap":84,"./_to-iobject":118}],198:[function(e,t,o){e("./_object-sap")("getOwnPropertyNames",function(){return e("./_object-gopn-ext").f})},{"./_object-gopn-ext":77,"./_object-sap":84}],199:[function(e,t,o){var n=e("./_to-object"),i=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return i(n(e))}})},{"./_object-gpo":80,"./_object-sap":84,"./_to-object":120}],200:[function(e,t,o){var n=e("./_is-object");e("./_object-sap")("isExtensible",function(t){return function(e){return!!n(e)&&(!t||t(e))}})},{"./_is-object":53,"./_object-sap":84}],201:[function(e,t,o){var n=e("./_is-object");e("./_object-sap")("isFrozen",function(t){return function(e){return!n(e)||!!t&&t(e)}})},{"./_is-object":53,"./_object-sap":84}],202:[function(e,t,o){var n=e("./_is-object");e("./_object-sap")("isSealed",function(t){return function(e){return!n(e)||!!t&&t(e)}})},{"./_is-object":53,"./_object-sap":84}],203:[function(e,t,o){var n=e("./_export");n(n.S,"Object",{is:e("./_same-value")})},{"./_export":35,"./_same-value":97}],204:[function(e,t,o){var n=e("./_to-object"),i=e("./_object-keys");e("./_object-sap")("keys",function(){return function(e){return i(n(e))}})},{"./_object-keys":82,"./_object-sap":84,"./_to-object":120}],205:[function(e,t,o){var n=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("preventExtensions",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},{"./_is-object":53,"./_meta":67,"./_object-sap":84}],206:[function(e,t,o){var n=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("seal",function(t){return function(e){return t&&n(e)?t(i(e)):e}})},{"./_is-object":53,"./_meta":67,"./_object-sap":84}],207:[function(e,t,o){var n=e("./_export");n(n.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":35,"./_set-proto":100}],208:[function(e,t,o){var n=e("./_classof"),i={};i[e("./_wks")("toStringTag")]="z",i+""!="[object z]"&&e("./_redefine")(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},{"./_classof":19,"./_redefine":93,"./_wks":130}],209:[function(e,t,o){var n=e("./_export"),i=e("./_parse-float");n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},{"./_export":35,"./_parse-float":87}],210:[function(e,t,o){var n=e("./_export"),i=e("./_parse-int");n(n.G+n.F*(parseInt!=i),{parseInt:i})},{"./_export":35,"./_parse-int":88}],211:[function(o,e,t){var n,i,a,r,s=o("./_library"),l=o("./_global"),c=o("./_ctx"),d=o("./_classof"),u=o("./_export"),h=o("./_is-object"),m=o("./_a-function"),f=o("./_an-instance"),p=o("./_for-of"),g=o("./_species-constructor"),v=o("./_task").set,y=o("./_microtask")(),b=o("./_new-promise-capability"),_=o("./_perform"),w=o("./_user-agent"),k=o("./_promise-resolve"),S="Promise",I=l.TypeError,P=l.process,x=P&&P.versions,C=x&&x.v8||"",T=l[S],D="process"==d(P),E=function(){},L=i=b.f,A=!!function(){try{var e=T.resolve(1),t=(e.constructor={})[o("./_wks")("species")]=function(e){e(E,E)};return(D||"function"==typeof PromiseRejectionEvent)&&e.then(E)instanceof t&&0!==C.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),M=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},R=function(d,o){if(!d._n){d._n=!0;var n=d._c;y(function(){for(var l=d._v,c=1==d._s,e=0,t=function(e){var t,o,n,i=c?e.ok:e.fail,a=e.resolve,r=e.reject,s=e.domain;try{i?(c||(2==d._h&&N(d),d._h=1),!0===i?t=l:(s&&s.enter(),t=i(l),s&&(s.exit(),n=!0)),t===e.promise?r(I("Promise-chain cycle")):(o=M(t))?o.call(t,a,r):a(t)):r(l)}catch(e){s&&!n&&s.exit(),r(e)}};n.length>e;)t(n[e++]);d._c=[],d._n=!1,o&&!d._h&&W(d)})}},W=function(a){v.call(l,function(){var e,t,o,n=a._v,i=j(a);if(i&&(e=_(function(){D?P.emit("unhandledRejection",n,a):(t=l.onunhandledrejection)?t({promise:a,reason:n}):(o=l.console)&&o.error&&o.error("Unhandled promise rejection",n)}),a._h=D||j(a)?2:1),a._a=void 0,i&&e.e)throw e.v})},j=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(t){v.call(l,function(){var e;D?P.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},O=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),R(t,!0))},V=function(e){var o,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw I("Promise can't be resolved itself");(o=M(e))?y(function(){var t={_w:n,_d:!1};try{o.call(e,c(V,t,1),c(O,t,1))}catch(e){O.call(t,e)}}):(n._v=e,n._s=1,R(n,!1))}catch(e){O.call({_w:n,_d:!1},e)}}};A||(T=function(e){f(this,T,S,"_h"),m(e),n.call(this);try{e(c(V,this,1),c(O,this,1))}catch(e){O.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=o("./_redefine-all")(T.prototype,{then:function(e,t){var o=L(g(this,T));return o.ok="function"!=typeof e||e,o.fail="function"==typeof t&&t,o.domain=D?P.domain:void 0,this._c.push(o),this._a&&this._a.push(o),this._s&&R(this,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new n;this.promise=e,this.resolve=c(V,e,1),this.reject=c(O,e,1)},b.f=L=function(e){return e===T||e===r?new a(e):i(e)}),u(u.G+u.W+u.F*!A,{Promise:T}),o("./_set-to-string-tag")(T,S),o("./_set-species")(S),r=o("./_core")[S],u(u.S+u.F*!A,S,{reject:function(e){var t=L(this);return(0,t.reject)(e),t.promise}}),u(u.S+u.F*(s||!A),S,{resolve:function(e){return k(s&&this===r?T:this,e)}}),u(u.S+u.F*!(A&&o("./_iter-detect")(function(e){T.all(e).catch(E)})),S,{all:function(e){var r=this,t=L(r),s=t.resolve,l=t.reject,o=_(function(){var n=[],i=0,a=1;p(e,!1,function(e){var t=i++,o=!1;n.push(void 0),a++,r.resolve(e).then(function(e){o||(o=!0,n[t]=e,--a||s(n))},l)}),--a||s(n)});return o.e&&l(o.v),t.promise},race:function(e){var t=this,o=L(t),n=o.reject,i=_(function(){p(e,!1,function(e){t.resolve(e).then(o.resolve,n)})});return i.e&&n(i.v),o.promise}})},{"./_a-function":4,"./_an-instance":8,"./_classof":19,"./_core":25,"./_ctx":27,"./_export":35,"./_for-of":41,"./_global":42,"./_is-object":53,"./_iter-detect":58,"./_library":61,"./_microtask":69,"./_new-promise-capability":70,"./_perform":89,"./_promise-resolve":90,"./_redefine-all":92,"./_set-species":101,"./_set-to-string-tag":102,"./_species-constructor":105,"./_task":114,"./_user-agent":126,"./_wks":130}],212:[function(e,t,o){var n=e("./_export"),a=e("./_a-function"),r=e("./_an-object"),s=(e("./_global").Reflect||{}).apply,l=Function.apply;n(n.S+n.F*!e("./_fails")(function(){s(function(){})}),"Reflect",{apply:function(e,t,o){var n=a(e),i=r(o);return s?s(n,t,i):l.call(n,t,i)}})},{"./_a-function":4,"./_an-object":9,"./_export":35,"./_fails":37,"./_global":42}],213:[function(e,t,o){var n=e("./_export"),s=e("./_object-create"),l=e("./_a-function"),c=e("./_an-object"),d=e("./_is-object"),i=e("./_fails"),u=e("./_bind"),h=(e("./_global").Reflect||{}).construct,m=i(function(){function e(){}return!(h(function(){},[],e)instanceof e)}),f=!i(function(){h(function(){})});n(n.S+n.F*(m||f),"Reflect",{construct:function(e,t){l(e),c(t);var o=arguments.length<3?e:l(arguments[2]);if(f&&!m)return h(e,t,o);if(e==o){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(u.apply(e,n))}var i=o.prototype,a=s(d(i)?i:Object.prototype),r=Function.apply.call(e,a,t);return d(r)?r:a}})},{"./_a-function":4,"./_an-object":9,"./_bind":18,"./_export":35,"./_fails":37,"./_global":42,"./_is-object":53,"./_object-create":72}],214:[function(e,t,o){var n=e("./_object-dp"),i=e("./_export"),a=e("./_an-object"),r=e("./_to-primitive");i(i.S+i.F*e("./_fails")(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,o){a(e),t=r(t,!0),a(o);try{return n.f(e,t,o),!0}catch(e){return!1}}})},{"./_an-object":9,"./_export":35,"./_fails":37,"./_object-dp":73,"./_to-primitive":121}],215:[function(e,t,o){var n=e("./_export"),i=e("./_object-gopd").f,a=e("./_an-object");n(n.S,"Reflect",{deleteProperty:function(e,t){var o=i(a(e),t);return!(o&&!o.configurable)&&delete e[t]}})},{"./_an-object":9,"./_export":35,"./_object-gopd":76}],216:[function(e,t,o){var n=e("./_export"),i=e("./_an-object"),a=function(e){this._t=i(e),this._i=0;var t,o=this._k=[];for(t in e)o.push(t)};e("./_iter-create")(a,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),n(n.S,"Reflect",{enumerate:function(e){return new a(e)}})},{"./_an-object":9,"./_export":35,"./_iter-create":56}],217:[function(e,t,o){var n=e("./_object-gopd"),i=e("./_export"),a=e("./_an-object");i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(a(e),t)}})},{"./_an-object":9,"./_export":35,"./_object-gopd":76}],218:[function(e,t,o){var n=e("./_export"),i=e("./_object-gpo"),a=e("./_an-object");n(n.S,"Reflect",{getPrototypeOf:function(e){return i(a(e))}})},{"./_an-object":9,"./_export":35,"./_object-gpo":80}],219:[function(e,t,o){var r=e("./_object-gopd"),s=e("./_object-gpo"),l=e("./_has"),n=e("./_export"),c=e("./_is-object"),d=e("./_an-object");n(n.S,"Reflect",{get:function e(t,o){var n,i,a=arguments.length<3?t:arguments[2];return d(t)===a?t[o]:(n=r.f(t,o))?l(n,"value")?n.value:void 0!==n.get?n.get.call(a):void 0:c(i=s(t))?e(i,o,a):void 0}})},{"./_an-object":9,"./_export":35,"./_has":43,"./_is-object":53,"./_object-gopd":76,"./_object-gpo":80}],220:[function(e,t,o){var n=e("./_export");n(n.S,"Reflect",{has:function(e,t){return t in e}})},{"./_export":35}],221:[function(e,t,o){var n=e("./_export"),i=e("./_an-object"),a=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return i(e),!a||a(e)}})},{"./_an-object":9,"./_export":35}],222:[function(e,t,o){var n=e("./_export");n(n.S,"Reflect",{ownKeys:e("./_own-keys")})},{"./_export":35,"./_own-keys":86}],223:[function(e,t,o){var n=e("./_export"),i=e("./_an-object"),a=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){i(e);try{return a&&a(e),!0}catch(e){return!1}}})},{"./_an-object":9,"./_export":35}],224:[function(e,t,o){var n=e("./_export"),i=e("./_set-proto");i&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},{"./_export":35,"./_set-proto":100}],225:[function(e,t,o){var l=e("./_object-dp"),c=e("./_object-gopd"),d=e("./_object-gpo"),u=e("./_has"),n=e("./_export"),h=e("./_property-desc"),m=e("./_an-object"),f=e("./_is-object");n(n.S,"Reflect",{set:function e(t,o,n){var i,a,r=arguments.length<4?t:arguments[3],s=c.f(m(t),o);if(!s){if(f(a=d(t)))return e(a,o,n,r);s=h(0)}if(u(s,"value")){if(!1===s.writable||!f(r))return!1;if(i=c.f(r,o)){if(i.get||i.set||!1===i.writable)return!1;i.value=n,l.f(r,o,i)}else l.f(r,o,h(0,n));return!0}return void 0!==s.set&&(s.set.call(r,n),!0)}})},{"./_an-object":9,"./_export":35,"./_has":43,"./_is-object":53,"./_object-dp":73,"./_object-gopd":76,"./_object-gpo":80,"./_property-desc":91}],226:[function(e,t,o){var n=e("./_global"),a=e("./_inherit-if-required"),i=e("./_object-dp").f,r=e("./_object-gopn").f,s=e("./_is-regexp"),l=e("./_flags"),c=n.RegExp,d=c,u=c.prototype,h=/a/g,m=/a/g,f=new c(h)!==h;if(e("./_descriptors")&&(!f||e("./_fails")(function(){return m[e("./_wks")("match")]=!1,c(h)!=h||c(m)==m||"/a/i"!=c(h,"i")}))){c=function(e,t){var o=this instanceof c,n=s(e),i=void 0===t;return!o&&n&&e.constructor===c&&i?e:a(f?new d(n&&!i?e.source:e,t):d((n=e instanceof c)?e.source:e,n&&i?l.call(e):t),o?this:u,c)};for(var p=function(t){t in c||i(c,t,{configurable:!0,get:function(){return d[t]},set:function(e){d[t]=e}})},g=r(d),v=0;g.length>v;)p(g[v++]);(u.constructor=c).prototype=u,e("./_redefine")(n,"RegExp",c)}e("./_set-species")("RegExp")},{"./_descriptors":31,"./_fails":37,"./_flags":39,"./_global":42,"./_inherit-if-required":47,"./_is-regexp":54,"./_object-dp":73,"./_object-gopn":78,"./_redefine":93,"./_set-species":101,"./_wks":130}],227:[function(e,t,o){var n=e("./_regexp-exec");e("./_export")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},{"./_export":35,"./_regexp-exec":95}],228:[function(e,t,o){e("./_descriptors")&&"g"!=/./g.flags&&e("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:e("./_flags")})},{"./_descriptors":31,"./_flags":39,"./_object-dp":73}],229:[function(e,t,o){var u=e("./_an-object"),h=e("./_to-length"),m=e("./_advance-string-index"),f=e("./_regexp-exec-abstract");e("./_fix-re-wks")("match",1,function(n,i,c,d){return[function(e){var t=n(this),o=null==e?void 0:e[i];return void 0!==o?o.call(e,t):new RegExp(e)[i](String(t))},function(e){var t=d(c,e,this);if(t.done)return t.value;var o=u(e),n=String(this);if(!o.global)return f(o,n);for(var i,a=o.unicode,r=[],s=o.lastIndex=0;null!==(i=f(o,n));){var l=String(i[0]);""===(r[s]=l)&&(o.lastIndex=m(n,h(o.lastIndex),a)),s++}return 0===s?null:r}]})},{"./_advance-string-index":7,"./_an-object":9,"./_fix-re-wks":38,"./_regexp-exec-abstract":94,"./_to-length":119}],230:[function(e,t,o){var I=e("./_an-object"),n=e("./_to-object"),P=e("./_to-length"),x=e("./_to-integer"),C=e("./_advance-string-index"),T=e("./_regexp-exec-abstract"),D=Math.max,E=Math.min,h=Math.floor,m=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g;e("./_fix-re-wks")("replace",2,function(i,a,w,k){return[function(e,t){var o=i(this),n=null==e?void 0:e[a];return void 0!==n?n.call(e,o,t):w.call(String(o),e,t)},function(e,t){var o=k(w,e,this,t);if(o.done)return o.value;var n=I(e),i=String(this),a="function"==typeof t;a||(t=String(t));var r=n.global;if(r){var s=n.unicode;n.lastIndex=0}for(var l=[];;){var c=T(n,i);if(null===c)break;if(l.push(c),!r)break;""===String(c[0])&&(n.lastIndex=C(i,P(n.lastIndex),s))}for(var d,u="",h=0,m=0;m<l.length;m++){c=l[m];for(var f=String(c[0]),p=D(E(x(c.index),i.length),0),g=[],v=1;v<c.length;v++)g.push(void 0===(d=c[v])?d:String(d));var y=c.groups;if(a){var b=[f].concat(g,p,i);void 0!==y&&b.push(y);var _=String(t.apply(void 0,b))}else _=S(f,i,p,g,y,t);h<=p&&(u+=i.slice(h,p)+_,h=p+f.length)}return u+i.slice(h)}];function S(a,r,s,l,c,e){var d=s+a.length,u=l.length,t=f;return void 0!==c&&(c=n(c),t=m),w.call(e,t,function(e,t){var o;switch(t.charAt(0)){case"$":return"$";case"&":return a;case"`":return r.slice(0,s);case"'":return r.slice(d);case"<":o=c[t.slice(1,-1)];break;default:var n=+t;if(0===n)return e;if(u<n){var i=h(n/10);return 0===i?e:i<=u?void 0===l[i-1]?t.charAt(1):l[i-1]+t.charAt(1):e}o=l[n-1]}return void 0===o?"":o})}})},{"./_advance-string-index":7,"./_an-object":9,"./_fix-re-wks":38,"./_regexp-exec-abstract":94,"./_to-integer":117,"./_to-length":119,"./_to-object":120}],231:[function(e,t,o){var l=e("./_an-object"),c=e("./_same-value"),d=e("./_regexp-exec-abstract");e("./_fix-re-wks")("search",1,function(n,i,r,s){return[function(e){var t=n(this),o=null==e?void 0:e[i];return void 0!==o?o.call(e,t):new RegExp(e)[i](String(t))},function(e){var t=s(r,e,this);if(t.done)return t.value;var o=l(e),n=String(this),i=o.lastIndex;c(i,0)||(o.lastIndex=0);var a=d(o,n);return c(o.lastIndex,i)||(o.lastIndex=i),null===a?-1:a.index}]})},{"./_an-object":9,"./_fix-re-wks":38,"./_regexp-exec-abstract":94,"./_same-value":97}],232:[function(e,t,o){var u=e("./_is-regexp"),b=e("./_an-object"),_=e("./_species-constructor"),w=e("./_advance-string-index"),k=e("./_to-length"),S=e("./_regexp-exec-abstract"),h=e("./_regexp-exec"),I=Math.min,m=[].push,n="split",f="length",p="lastIndex",P=!!function(){try{return new RegExp("x","y")}catch(e){}}();e("./_fix-re-wks")("split",2,function(i,a,g,v){var y;return y="c"=="abbc"[n](/(b)*/)[1]||4!="test"[n](/(?:)/,-1)[f]||2!="ab"[n](/(?:ab)*/)[f]||4!="."[n](/(.?)(.?)/)[f]||1<"."[n](/()()/)[f]||""[n](/.?/)[f]?function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!u(e))return g.call(o,e,t);for(var n,i,a,r=[],s=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,c=void 0===t?4294967295:t>>>0,d=new RegExp(e.source,s+"g");(n=h.call(d,o))&&!(l<(i=d[p])&&(r.push(o.slice(l,n.index)),1<n[f]&&n.index<o[f]&&m.apply(r,n.slice(1)),a=n[0][f],l=i,r[f]>=c));)d[p]===n.index&&d[p]++;return l===o[f]?!a&&d.test("")||r.push(""):r.push(o.slice(l)),r[f]>c?r.slice(0,c):r}:"0"[n](void 0,0)[f]?function(e,t){return void 0===e&&0===t?[]:g.call(this,e,t)}:g,[function(e,t){var o=i(this),n=null==e?void 0:e[a];return void 0!==n?n.call(e,o,t):y.call(String(o),e,t)},function(e,t){var o=v(y,e,this,t,y!==g);if(o.done)return o.value;var n=b(e),i=String(this),a=_(n,RegExp),r=n.unicode,s=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(P?"y":"g"),l=new a(P?n:"^(?:"+n.source+")",s),c=void 0===t?4294967295:t>>>0;if(0===c)return[];if(0===i.length)return null===S(l,i)?[i]:[];for(var d=0,u=0,h=[];u<i.length;){l.lastIndex=P?u:0;var m,f=S(l,P?i:i.slice(u));if(null===f||(m=I(k(l.lastIndex+(P?0:u)),i.length))===d)u=w(i,u,r);else{if(h.push(i.slice(d,u)),h.length===c)return h;for(var p=1;p<=f.length-1;p++)if(h.push(f[p]),h.length===c)return h;u=d=m}}return h.push(i.slice(d)),h}]})},{"./_advance-string-index":7,"./_an-object":9,"./_fix-re-wks":38,"./_is-regexp":54,"./_regexp-exec":95,"./_regexp-exec-abstract":94,"./_species-constructor":105,"./_to-length":119}],233:[function(t,e,o){t("./es6.regexp.flags");var n=t("./_an-object"),i=t("./_flags"),a=t("./_descriptors"),r="toString",s=/./[r],l=function(e){t("./_redefine")(RegExp.prototype,r,e,!0)};t("./_fails")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?l(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?i.call(e):void 0)}):s.name!=r&&l(function(){return s.call(this)})},{"./_an-object":9,"./_descriptors":31,"./_fails":37,"./_flags":39,"./_redefine":93,"./es6.regexp.flags":228}],234:[function(e,t,o){var n=e("./_collection-strong"),i=e("./_validate-collection");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,"Set"),e=0===e?0:e,e)}},n)},{"./_collection":24,"./_collection-strong":21,"./_validate-collection":127}],235:[function(e,t,o){e("./_string-html")("anchor",function(t){return function(e){return t(this,"a","name",e)}})},{"./_string-html":109}],236:[function(e,t,o){e("./_string-html")("big",function(e){return function(){return e(this,"big","","")}})},{"./_string-html":109}],237:[function(e,t,o){e("./_string-html")("blink",function(e){return function(){return e(this,"blink","","")}})},{"./_string-html":109}],238:[function(e,t,o){e("./_string-html")("bold",function(e){return function(){return e(this,"b","","")}})},{"./_string-html":109}],239:[function(e,t,o){var n=e("./_export"),i=e("./_string-at")(!1);n(n.P,"String",{codePointAt:function(e){return i(this,e)}})},{"./_export":35,"./_string-at":107}],240:[function(e,t,o){var n=e("./_export"),r=e("./_to-length"),s=e("./_string-context"),l="endsWith",c=""[l];n(n.P+n.F*e("./_fails-is-regexp")(l),"String",{endsWith:function(e){var t=s(this,e,l),o=1<arguments.length?arguments[1]:void 0,n=r(t.length),i=void 0===o?n:Math.min(r(o),n),a=String(e);return c?c.call(t,a,i):t.slice(i-a.length,i)===a}})},{"./_export":35,"./_fails-is-regexp":36,"./_string-context":108,"./_to-length":119}],241:[function(e,t,o){e("./_string-html")("fixed",function(e){return function(){return e(this,"tt","","")}})},{"./_string-html":109}],242:[function(e,t,o){e("./_string-html")("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},{"./_string-html":109}],243:[function(e,t,o){e("./_string-html")("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},{"./_string-html":109}],244:[function(e,t,o){var n=e("./_export"),a=e("./_to-absolute-index"),r=String.fromCharCode,i=String.fromCodePoint;n(n.S+n.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(e){for(var t,o=[],n=arguments.length,i=0;i<n;){if(t=+arguments[i++],a(t,1114111)!==t)throw RangeError(t+" is not a valid code point");o.push(t<65536?r(t):r(55296+((t-=65536)>>10),t%1024+56320))}return o.join("")}})},{"./_export":35,"./_to-absolute-index":115}],245:[function(e,t,o){var n=e("./_export"),i=e("./_string-context");n(n.P+n.F*e("./_fails-is-regexp")("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,1<arguments.length?arguments[1]:void 0)}})},{"./_export":35,"./_fails-is-regexp":36,"./_string-context":108}],246:[function(e,t,o){e("./_string-html")("italics",function(e){return function(){return e(this,"i","","")}})},{"./_string-html":109}],247:[function(e,t,o){var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,o=this._i;return o>=t.length?{value:void 0,done:!0}:(e=n(t,o),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":57,"./_string-at":107}],248:[function(e,t,o){e("./_string-html")("link",function(t){return function(e){return t(this,"a","href",e)}})},{"./_string-html":109}],249:[function(e,t,o){var n=e("./_export"),r=e("./_to-iobject"),s=e("./_to-length");n(n.S,"String",{raw:function(e){for(var t=r(e.raw),o=s(t.length),n=arguments.length,i=[],a=0;a<o;)i.push(String(t[a++])),a<n&&i.push(String(arguments[a]));return i.join("")}})},{"./_export":35,"./_to-iobject":118,"./_to-length":119}],250:[function(e,t,o){var n=e("./_export");n(n.P,"String",{repeat:e("./_string-repeat")})},{"./_export":35,"./_string-repeat":111}],251:[function(e,t,o){e("./_string-html")("small",function(e){return function(){return e(this,"small","","")}})},{"./_string-html":109}],252:[function(e,t,o){var n=e("./_export"),i=e("./_to-length"),a=e("./_string-context"),r="startsWith",s=""[r];n(n.P+n.F*e("./_fails-is-regexp")(r),"String",{startsWith:function(e){var t=a(this,e,r),o=i(Math.min(1<arguments.length?arguments[1]:void 0,t.length)),n=String(e);return s?s.call(t,n,o):t.slice(o,o+n.length)===n}})},{"./_export":35,"./_fails-is-regexp":36,"./_string-context":108,"./_to-length":119}],253:[function(e,t,o){e("./_string-html")("strike",function(e){return function(){return e(this,"strike","","")}})},{"./_string-html":109}],254:[function(e,t,o){e("./_string-html")("sub",function(e){return function(){return e(this,"sub","","")}})},{"./_string-html":109}],255:[function(e,t,o){e("./_string-html")("sup",function(e){return function(){return e(this,"sup","","")}})},{"./_string-html":109}],256:[function(e,t,o){e("./_string-trim")("trim",function(e){return function(){return e(this,3)}})},{"./_string-trim":112}],257:[function(e,t,o){var n=e("./_global"),r=e("./_has"),i=e("./_descriptors"),a=e("./_export"),s=e("./_redefine"),l=e("./_meta").KEY,c=e("./_fails"),d=e("./_shared"),u=e("./_set-to-string-tag"),h=e("./_uid"),m=e("./_wks"),f=e("./_wks-ext"),p=e("./_wks-define"),g=e("./_enum-keys"),v=e("./_is-array"),y=e("./_an-object"),b=e("./_is-object"),_=e("./_to-iobject"),w=e("./_to-primitive"),k=e("./_property-desc"),S=e("./_object-create"),I=e("./_object-gopn-ext"),P=e("./_object-gopd"),x=e("./_object-dp"),C=e("./_object-keys"),T=P.f,D=x.f,E=I.f,L=n.Symbol,A=n.JSON,M=A&&A.stringify,R="prototype",W=m("_hidden"),j=m("toPrimitive"),N={}.propertyIsEnumerable,O=d("symbol-registry"),V=d("symbols"),F=d("op-symbols"),B=Object[R],z="function"==typeof L,U=n.QObject,H=!U||!U[R]||!U[R].findChild,J=i&&c(function(){return 7!=S(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(e,t,o){var n=T(B,t);n&&delete B[t],D(e,t,o),n&&e!==B&&D(B,t,n)}:D,K=function(e){var t=V[e]=S(L[R]);return t._k=e,t},q=z&&"symbol"==typeof L.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof L},G=function(e,t,o){return e===B&&G(F,t,o),y(e),t=w(t,!0),y(o),r(V,t)?(o.enumerable?(r(e,W)&&e[W][t]&&(e[W][t]=!1),o=S(o,{enumerable:k(0,!1)})):(r(e,W)||D(e,W,k(1,{})),e[W][t]=!0),J(e,t,o)):D(e,t,o)},Y=function(e,t){y(e);for(var o,n=g(t=_(t)),i=0,a=n.length;i<a;)G(e,o=n[i++],t[o]);return e},X=function(e){var t=N.call(this,e=w(e,!0));return!(this===B&&r(V,e)&&!r(F,e))&&(!(t||!r(this,e)||!r(V,e)||r(this,W)&&this[W][e])||t)},Z=function(e,t){if(e=_(e),t=w(t,!0),e!==B||!r(V,t)||r(F,t)){var o=T(e,t);return!o||!r(V,t)||r(e,W)&&e[W][t]||(o.enumerable=!0),o}},$=function(e){for(var t,o=E(_(e)),n=[],i=0;o.length>i;)r(V,t=o[i++])||t==W||t==l||n.push(t);return n},Q=function(e){for(var t,o=e===B,n=E(o?F:_(e)),i=[],a=0;n.length>a;)!r(V,t=n[a++])||o&&!r(B,t)||i.push(V[t]);return i};z||(s((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=h(0<arguments.length?arguments[0]:void 0),o=function(e){this===B&&o.call(F,e),r(this,W)&&r(this[W],t)&&(this[W][t]=!1),J(this,t,k(1,e))};return i&&H&&J(B,t,{configurable:!0,set:o}),K(t)})[R],"toString",function(){return this._k}),P.f=Z,x.f=G,e("./_object-gopn").f=I.f=$,e("./_object-pie").f=X,e("./_object-gops").f=Q,i&&!e("./_library")&&s(B,"propertyIsEnumerable",X,!0),f.f=function(e){return K(m(e))}),a(a.G+a.W+a.F*!z,{Symbol:L});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)m(ee[te++]);for(var oe=C(m.store),ne=0;oe.length>ne;)p(oe[ne++]);a(a.S+a.F*!z,"Symbol",{for:function(e){return r(O,e+="")?O[e]:O[e]=L(e)},keyFor:function(e){if(!q(e))throw TypeError(e+" is not a symbol!");for(var t in O)if(O[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!z,"Object",{create:function(e,t){return void 0===t?S(e):Y(S(e),t)},defineProperty:G,defineProperties:Y,getOwnPropertyDescriptor:Z,getOwnPropertyNames:$,getOwnPropertySymbols:Q}),A&&a(a.S+a.F*(!z||c(function(){var e=L();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))})),"JSON",{stringify:function(e){for(var t,o,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(o=t=n[1],(b(t)||void 0!==e)&&!q(e))return v(t)||(t=function(e,t){if("function"==typeof o&&(t=o.call(this,e,t)),!q(t))return t}),n[1]=t,M.apply(A,n)}}),L[R][j]||e("./_hide")(L[R],j,L[R].valueOf),u(L,"Symbol"),u(Math,"Math",!0),u(n.JSON,"JSON",!0)},{"./_an-object":9,"./_descriptors":31,"./_enum-keys":34,"./_export":35,"./_fails":37,"./_global":42,"./_has":43,"./_hide":44,"./_is-array":51,"./_is-object":53,"./_library":61,"./_meta":67,"./_object-create":72,"./_object-dp":73,"./_object-gopd":76,"./_object-gopn":78,"./_object-gopn-ext":77,"./_object-gops":79,"./_object-keys":82,"./_object-pie":83,"./_property-desc":91,"./_redefine":93,"./_set-to-string-tag":102,"./_shared":104,"./_to-iobject":118,"./_to-primitive":121,"./_uid":125,"./_wks":130,"./_wks-define":128,"./_wks-ext":129}],258:[function(e,t,o){var n=e("./_export"),i=e("./_typed"),a=e("./_typed-buffer"),c=e("./_an-object"),d=e("./_to-absolute-index"),u=e("./_to-length"),r=e("./_is-object"),s=e("./_global").ArrayBuffer,h=e("./_species-constructor"),m=a.ArrayBuffer,f=a.DataView,l=i.ABV&&s.isView,p=m.prototype.slice,g=i.VIEW,v="ArrayBuffer";n(n.G+n.W+n.F*(s!==m),{ArrayBuffer:m}),n(n.S+n.F*!i.CONSTR,v,{isView:function(e){return l&&l(e)||r(e)&&g in e}}),n(n.P+n.U+n.F*e("./_fails")(function(){return!new m(2).slice(1,void 0).byteLength}),v,{slice:function(e,t){if(void 0!==p&&void 0===t)return p.call(c(this),e);for(var o=c(this).byteLength,n=d(e,o),i=d(void 0===t?o:t,o),a=new(h(this,m))(u(i-n)),r=new f(this),s=new f(a),l=0;n<i;)s.setUint8(l++,r.getUint8(n++));return a}}),e("./_set-species")(v)},{"./_an-object":9,"./_export":35,"./_fails":37,"./_global":42,"./_is-object":53,"./_set-species":101,"./_species-constructor":105,"./_to-absolute-index":115,"./_to-length":119,"./_typed":124,"./_typed-buffer":123}],259:[function(e,t,o){var n=e("./_export");n(n.G+n.W+n.F*!e("./_typed").ABV,{DataView:e("./_typed-buffer").DataView})},{"./_export":35,"./_typed":124,"./_typed-buffer":123}],260:[function(e,t,o){e("./_typed-array")("Float32",4,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":122}],261:[function(e,t,o){e("./_typed-array")("Float64",8,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":122}],262:[function(e,t,o){e("./_typed-array")("Int16",2,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":122}],263:[function(e,t,o){e("./_typed-array")("Int32",4,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":122}],264:[function(e,t,o){e("./_typed-array")("Int8",1,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":122}],265:[function(e,t,o){e("./_typed-array")("Uint16",2,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":122}],266:[function(e,t,o){e("./_typed-array")("Uint32",4,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":122}],267:[function(e,t,o){e("./_typed-array")("Uint8",1,function(n){return function(e,t,o){return n(this,e,t,o)}})},{"./_typed-array":122}],268:[function(e,t,o){e("./_typed-array")("Uint8",1,function(n){return function(e,t,o){return n(this,e,t,o)}},!0)},{"./_typed-array":122}],269:[function(e,t,o){var a,n=e("./_array-methods")(0),r=e("./_redefine"),i=e("./_meta"),s=e("./_object-assign"),l=e("./_collection-weak"),c=e("./_is-object"),d=e("./_fails"),u=e("./_validate-collection"),h="WeakMap",m=i.getWeak,f=Object.isExtensible,p=l.ufstore,g={},v=function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},y={get:function(e){if(c(e)){var t=m(e);return!0===t?p(u(this,h)).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(u(this,h),e,t)}},b=t.exports=e("./_collection")(h,v,y,l,!0,!0);d(function(){return 7!=(new b).set((Object.freeze||Object)(g),7).get(g)})&&(s((a=l.getConstructor(v,h)).prototype,y),i.NEED=!0,n(["delete","has","get","set"],function(n){var e=b.prototype,i=e[n];r(e,n,function(e,t){if(!c(e)||f(e))return i.call(this,e,t);this._f||(this._f=new a);var o=this._f[n](e,t);return"set"==n?this:o})}))},{"./_array-methods":14,"./_collection":24,"./_collection-weak":23,"./_fails":37,"./_is-object":53,"./_meta":67,"./_object-assign":71,"./_redefine":93,"./_validate-collection":127}],270:[function(e,t,o){var n=e("./_collection-weak"),i=e("./_validate-collection");e("./_collection")("WeakSet",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,"WeakSet"),e,!0)}},n,!1,!0)},{"./_collection":24,"./_collection-weak":23,"./_validate-collection":127}],271:[function(e,t,o){var n=e("./_export"),i=e("./_flatten-into-array"),a=e("./_to-object"),r=e("./_to-length"),s=e("./_a-function"),l=e("./_array-species-create");n(n.P,"Array",{flatMap:function(e){var t,o,n=a(this);return s(e),t=r(n.length),o=l(n,0),i(o,n,n,t,0,1,e,arguments[1]),o}}),e("./_add-to-unscopables")("flatMap")},{"./_a-function":4,"./_add-to-unscopables":6,"./_array-species-create":17,"./_export":35,"./_flatten-into-array":40,"./_to-length":119,"./_to-object":120}],272:[function(e,t,o){var n=e("./_export"),i=e("./_flatten-into-array"),a=e("./_to-object"),r=e("./_to-length"),s=e("./_to-integer"),l=e("./_array-species-create");n(n.P,"Array",{flatten:function(){var e=arguments[0],t=a(this),o=r(t.length),n=l(t,0);return i(n,t,t,o,0,void 0===e?1:s(e)),n}}),e("./_add-to-unscopables")("flatten")},{"./_add-to-unscopables":6,"./_array-species-create":17,"./_export":35,"./_flatten-into-array":40,"./_to-integer":117,"./_to-length":119,"./_to-object":120}],273:[function(e,t,o){var n=e("./_export"),i=e("./_array-includes")(!0);n(n.P,"Array",{includes:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}}),e("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":6,"./_array-includes":13,"./_export":35}],274:[function(e,t,o){var n=e("./_export"),i=e("./_microtask")(),a=e("./_global").process,r="process"==e("./_cof")(a);n(n.G,{asap:function(e){var t=r&&a.domain;i(t?t.bind(e):e)}})},{"./_cof":20,"./_export":35,"./_global":42,"./_microtask":69}],275:[function(e,t,o){var n=e("./_export"),i=e("./_cof");n(n.S,"Error",{isError:function(e){return"Error"===i(e)}})},{"./_cof":20,"./_export":35}],276:[function(e,t,o){var n=e("./_export");n(n.G,{global:e("./_global")})},{"./_export":35,"./_global":42}],277:[function(e,t,o){e("./_set-collection-from")("Map")},{"./_set-collection-from":98}],278:[function(e,t,o){e("./_set-collection-of")("Map")},{"./_set-collection-of":99}],279:[function(e,t,o){var n=e("./_export");n(n.P+n.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":22,"./_export":35}],280:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{clamp:function(e,t,o){return Math.min(o,Math.max(t,e))}})},{"./_export":35}],281:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},{"./_export":35}],282:[function(e,t,o){var n=e("./_export"),i=180/Math.PI;n(n.S,"Math",{degrees:function(e){return e*i}})},{"./_export":35}],283:[function(e,t,o){var n=e("./_export"),a=e("./_math-scale"),r=e("./_math-fround");n(n.S,"Math",{fscale:function(e,t,o,n,i){return r(a(e,t,o,n,i))}})},{"./_export":35,"./_math-fround":63,"./_math-scale":65}],284:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{iaddh:function(e,t,o,n){var i=e>>>0,a=o>>>0;return(t>>>0)+(n>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},{"./_export":35}],285:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{imulh:function(e,t){var o=+e,n=+t,i=65535&o,a=65535&n,r=o>>16,s=n>>16,l=(r*a>>>0)+(i*a>>>16);return r*s+(l>>16)+((i*s>>>0)+(65535&l)>>16)}})},{"./_export":35}],286:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{isubh:function(e,t,o,n){var i=e>>>0,a=o>>>0;return(t>>>0)-(n>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},{"./_export":35}],287:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},{"./_export":35}],288:[function(e,t,o){var n=e("./_export"),i=Math.PI/180;n(n.S,"Math",{radians:function(e){return e*i}})},{"./_export":35}],289:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{scale:e("./_math-scale")})},{"./_export":35,"./_math-scale":65}],290:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:0<e}})},{"./_export":35}],291:[function(e,t,o){var n=e("./_export");n(n.S,"Math",{umulh:function(e,t){var o=+e,n=+t,i=65535&o,a=65535&n,r=o>>>16,s=n>>>16,l=(r*a>>>0)+(i*a>>>16);return r*s+(l>>>16)+((i*s>>>0)+(65535&l)>>>16)}})},{"./_export":35}],292:[function(e,t,o){var n=e("./_export"),i=e("./_to-object"),a=e("./_a-function"),r=e("./_object-dp");e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__defineGetter__:function(e,t){r.f(i(this),e,{get:a(t),enumerable:!0,configurable:!0})}})},{"./_a-function":4,"./_descriptors":31,"./_export":35,"./_object-dp":73,"./_object-forced-pam":75,"./_to-object":120}],293:[function(e,t,o){var n=e("./_export"),i=e("./_to-object"),a=e("./_a-function"),r=e("./_object-dp");e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__defineSetter__:function(e,t){r.f(i(this),e,{set:a(t),enumerable:!0,configurable:!0})}})},{"./_a-function":4,"./_descriptors":31,"./_export":35,"./_object-dp":73,"./_object-forced-pam":75,"./_to-object":120}],294:[function(e,t,o){var n=e("./_export"),i=e("./_object-to-array")(!0);n(n.S,"Object",{entries:function(e){return i(e)}})},{"./_export":35,"./_object-to-array":85}],295:[function(e,t,o){var n=e("./_export"),l=e("./_own-keys"),c=e("./_to-iobject"),d=e("./_object-gopd"),u=e("./_create-property");n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,o,n=c(e),i=d.f,a=l(n),r={},s=0;a.length>s;)void 0!==(o=i(n,t=a[s++]))&&u(r,t,o);return r}})},{"./_create-property":26,"./_export":35,"./_object-gopd":76,"./_own-keys":86,"./_to-iobject":118}],296:[function(e,t,o){var n=e("./_export"),i=e("./_to-object"),a=e("./_to-primitive"),r=e("./_object-gpo"),s=e("./_object-gopd").f;e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__lookupGetter__:function(e){var t,o=i(this),n=a(e,!0);do{if(t=s(o,n))return t.get}while(o=r(o))}})},{"./_descriptors":31,"./_export":35,"./_object-forced-pam":75,"./_object-gopd":76,"./_object-gpo":80,"./_to-object":120,"./_to-primitive":121}],297:[function(e,t,o){var n=e("./_export"),i=e("./_to-object"),a=e("./_to-primitive"),r=e("./_object-gpo"),s=e("./_object-gopd").f;e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__lookupSetter__:function(e){var t,o=i(this),n=a(e,!0);do{if(t=s(o,n))return t.set}while(o=r(o))}})},{"./_descriptors":31,"./_export":35,"./_object-forced-pam":75,"./_object-gopd":76,"./_object-gpo":80,"./_to-object":120,"./_to-primitive":121}],298:[function(e,t,o){var n=e("./_export"),i=e("./_object-to-array")(!1);n(n.S,"Object",{values:function(e){return i(e)}})},{"./_export":35,"./_object-to-array":85}],299:[function(e,t,o){var n=e("./_export"),a=e("./_global"),r=e("./_core"),i=e("./_microtask")(),s=e("./_wks")("observable"),l=e("./_a-function"),c=e("./_an-object"),d=e("./_an-instance"),u=e("./_redefine-all"),h=e("./_hide"),m=e("./_for-of"),f=m.RETURN,p=function(e){return null==e?void 0:l(e)},g=function(e){var t=e._c;t&&(e._c=void 0,t())},v=function(e){return void 0===e._o},y=function(e){v(e)||(e._o=void 0,g(e))},b=function(t,e){c(t),this._c=void 0,this._o=t,t=new _(this);try{var o=e(t),n=o;null!=o&&("function"==typeof o.unsubscribe?o=function(){n.unsubscribe()}:l(o),this._c=o)}catch(e){return void t.error(e)}v(this)&&g(this)};b.prototype=u({},{unsubscribe:function(){y(this)}});var _=function(e){this._s=e};_.prototype=u({},{next:function(e){var t=this._s;if(!v(t)){var o=t._o;try{var n=p(o.next);if(n)return n.call(o,e)}catch(e){try{y(t)}finally{throw e}}}},error:function(e){var t=this._s;if(v(t))throw e;var o=t._o;t._o=void 0;try{var n=p(o.error);if(!n)throw e;e=n.call(o,e)}catch(e){try{g(t)}finally{throw e}}return g(t),e},complete:function(e){var t=this._s;if(!v(t)){var o=t._o;t._o=void 0;try{var n=p(o.complete);e=n?n.call(o,e):void 0}catch(e){try{g(t)}finally{throw e}}return g(t),e}}});var w=function(e){d(this,w,"Observable","_f")._f=l(e)};u(w.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(n){var i=this;return new(r.Promise||a.Promise)(function(e,t){l(n);var o=i.subscribe({next:function(e){try{return n(e)}catch(e){t(e),o.unsubscribe()}},error:t,complete:e})})}}),u(w,{from:function(e){var t="function"==typeof this?this:w,o=p(c(e)[s]);if(o){var n=c(o.call(e));return n.constructor===t?n:new t(function(e){return n.subscribe(e)})}return new t(function(t){var o=!1;return i(function(){if(!o){try{if(m(e,!1,function(e){if(t.next(e),o)return f})===f)return}catch(e){if(o)throw e;return void t.error(e)}t.complete()}}),function(){o=!0}})},of:function(){for(var e=0,t=arguments.length,n=new Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:w)(function(t){var o=!1;return i(function(){if(!o){for(var e=0;e<n.length;++e)if(t.next(n[e]),o)return;t.complete()}}),function(){o=!0}})}}),h(w.prototype,s,function(){return this}),n(n.G,{Observable:w}),e("./_set-species")("Observable")},{"./_a-function":4,"./_an-instance":8,"./_an-object":9,"./_core":25,"./_export":35,"./_for-of":41,"./_global":42,"./_hide":44,"./_microtask":69,"./_redefine-all":92,"./_set-species":101,"./_wks":130}],300:[function(e,t,o){var n=e("./_export"),i=e("./_core"),a=e("./_global"),r=e("./_species-constructor"),s=e("./_promise-resolve");n(n.P+n.R,"Promise",{finally:function(t){var o=r(this,i.Promise||a.Promise),e="function"==typeof t;return this.then(e?function(e){return s(o,t()).then(function(){return e})}:t,e?function(e){return s(o,t()).then(function(){throw e})}:t)}})},{"./_core":25,"./_export":35,"./_global":42,"./_promise-resolve":90,"./_species-constructor":105}],301:[function(e,t,o){var n=e("./_export"),i=e("./_new-promise-capability"),a=e("./_perform");n(n.S,"Promise",{try:function(e){var t=i.f(this),o=a(e);return(o.e?t.reject:t.resolve)(o.v),t.promise}})},{"./_export":35,"./_new-promise-capability":70,"./_perform":89}],302:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=n.key,r=n.set;n.exp({defineMetadata:function(e,t,o,n){r(e,t,i(o),a(n))}})},{"./_an-object":9,"./_metadata":68}],303:[function(e,t,o){var n=e("./_metadata"),a=e("./_an-object"),r=n.key,s=n.map,l=n.store;n.exp({deleteMetadata:function(e,t){var o=arguments.length<3?void 0:r(arguments[2]),n=s(a(t),o,!1);if(void 0===n||!n.delete(e))return!1;if(n.size)return!0;var i=l.get(t);return i.delete(o),!!i.size||l.delete(t)}})},{"./_an-object":9,"./_metadata":68}],304:[function(e,t,o){var a=e("./es6.set"),r=e("./_array-from-iterable"),n=e("./_metadata"),i=e("./_an-object"),s=e("./_object-gpo"),l=n.keys,c=n.key,d=function(e,t){var o=l(e,t),n=s(e);if(null===n)return o;var i=d(n,t);return i.length?o.length?r(new a(o.concat(i))):i:o};n.exp({getMetadataKeys:function(e){return d(i(e),arguments.length<2?void 0:c(arguments[1]))}})},{"./_an-object":9,"./_array-from-iterable":12,"./_metadata":68,"./_object-gpo":80,"./es6.set":234}],305:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=e("./_object-gpo"),r=n.has,s=n.get,l=n.key,c=function(e,t,o){if(r(e,t,o))return s(e,t,o);var n=a(t);return null!==n?c(e,n,o):void 0};n.exp({getMetadata:function(e,t){return c(e,i(t),arguments.length<3?void 0:l(arguments[2]))}})},{"./_an-object":9,"./_metadata":68,"./_object-gpo":80}],306:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=n.keys,r=n.key;n.exp({getOwnMetadataKeys:function(e){return a(i(e),arguments.length<2?void 0:r(arguments[1]))}})},{"./_an-object":9,"./_metadata":68}],307:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=n.get,r=n.key;n.exp({getOwnMetadata:function(e,t){return a(e,i(t),arguments.length<3?void 0:r(arguments[2]))}})},{"./_an-object":9,"./_metadata":68}],308:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=e("./_object-gpo"),r=n.has,s=n.key,l=function(e,t,o){if(r(e,t,o))return!0;var n=a(t);return null!==n&&l(e,n,o)};n.exp({hasMetadata:function(e,t){return l(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},{"./_an-object":9,"./_metadata":68,"./_object-gpo":80}],309:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=n.has,r=n.key;n.exp({hasOwnMetadata:function(e,t){return a(e,i(t),arguments.length<3?void 0:r(arguments[2]))}})},{"./_an-object":9,"./_metadata":68}],310:[function(e,t,o){var n=e("./_metadata"),i=e("./_an-object"),a=e("./_a-function"),r=n.key,s=n.set;n.exp({metadata:function(o,n){return function(e,t){s(o,n,(void 0!==t?i:a)(e),r(t))}}})},{"./_a-function":4,"./_an-object":9,"./_metadata":68}],311:[function(e,t,o){e("./_set-collection-from")("Set")},{"./_set-collection-from":98}],312:[function(e,t,o){e("./_set-collection-of")("Set")},{"./_set-collection-of":99}],313:[function(e,t,o){var n=e("./_export");n(n.P+n.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":22,"./_export":35}],314:[function(e,t,o){var n=e("./_export"),i=e("./_string-at")(!0);n(n.P,"String",{at:function(e){return i(this,e)}})},{"./_export":35,"./_string-at":107}],315:[function(e,t,o){var n=e("./_export"),i=e("./_defined"),a=e("./_to-length"),r=e("./_is-regexp"),s=e("./_flags"),l=RegExp.prototype,c=function(e,t){this._r=e,this._s=t};e("./_iter-create")(c,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),n(n.P,"String",{matchAll:function(e){if(i(this),!r(e))throw TypeError(e+" is not a regexp!");var t=String(this),o="flags"in l?String(e.flags):s.call(e),n=new RegExp(e.source,~o.indexOf("g")?o:"g"+o);return n.lastIndex=a(e.lastIndex),new c(n,t)}})},{"./_defined":30,"./_export":35,"./_flags":39,"./_is-regexp":54,"./_iter-create":56,"./_to-length":119}],316:[function(e,t,o){var n=e("./_export"),i=e("./_string-pad"),a=e("./_user-agent");n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padEnd:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0,!1)}})},{"./_export":35,"./_string-pad":110,"./_user-agent":126}],317:[function(e,t,o){var n=e("./_export"),i=e("./_string-pad"),a=e("./_user-agent");n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padStart:function(e){return i(this,e,1<arguments.length?arguments[1]:void 0,!0)}})},{"./_export":35,"./_string-pad":110,"./_user-agent":126}],318:[function(e,t,o){e("./_string-trim")("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},{"./_string-trim":112}],319:[function(e,t,o){e("./_string-trim")("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},{"./_string-trim":112}],320:[function(e,t,o){e("./_wks-define")("asyncIterator")},{"./_wks-define":128}],321:[function(e,t,o){e("./_wks-define")("observable")},{"./_wks-define":128}],322:[function(e,t,o){var n=e("./_export");n(n.S,"System",{global:e("./_global")})},{"./_export":35,"./_global":42}],323:[function(e,t,o){e("./_set-collection-from")("WeakMap")},{"./_set-collection-from":98}],324:[function(e,t,o){e("./_set-collection-of")("WeakMap")},{"./_set-collection-of":99}],325:[function(e,t,o){e("./_set-collection-from")("WeakSet")},{"./_set-collection-from":98}],326:[function(e,t,o){e("./_set-collection-of")("WeakSet")},{"./_set-collection-of":99}],327:[function(e,t,o){for(var n=e("./es6.array.iterator"),i=e("./_object-keys"),a=e("./_redefine"),r=e("./_global"),s=e("./_hide"),l=e("./_iterators"),c=e("./_wks"),d=c("iterator"),u=c("toStringTag"),h=l.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=i(m),p=0;p<f.length;p++){var g,v=f[p],y=m[v],b=r[v],_=b&&b.prototype;if(_&&(_[d]||s(_,d,h),_[u]||s(_,u,v),l[v]=h,y))for(g in n)_[g]||a(_,g,n[g],!0)}},{"./_global":42,"./_hide":44,"./_iterators":60,"./_object-keys":82,"./_redefine":93,"./_wks":130,"./es6.array.iterator":143}],328:[function(e,t,o){var n=e("./_export"),i=e("./_task");n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},{"./_export":35,"./_task":114}],329:[function(e,t,o){var n=e("./_global"),i=e("./_export"),a=e("./_user-agent"),r=[].slice,s=/MSIE .\./.test(a),l=function(i){return function(e,t){var o=2<arguments.length,n=!!o&&r.call(arguments,2);return i(o?function(){("function"==typeof e?e:Function(e)).apply(this,n)}:e,t)}};i(i.G+i.B+i.F*s,{setTimeout:l(n.setTimeout),setInterval:l(n.setInterval)})},{"./_export":35,"./_global":42,"./_user-agent":126}],330:[function(e,t,o){e("./modules/es6.symbol"),e("./modules/es6.object.create"),e("./modules/es6.object.define-property"),e("./modules/es6.object.define-properties"),e("./modules/es6.object.get-own-property-descriptor"),e("./modules/es6.object.get-prototype-of"),e("./modules/es6.object.keys"),e("./modules/es6.object.get-own-property-names"),e("./modules/es6.object.freeze"),e("./modules/es6.object.seal"),e("./modules/es6.object.prevent-extensions"),e("./modules/es6.object.is-frozen"),e("./modules/es6.object.is-sealed"),e("./modules/es6.object.is-extensible"),e("./modules/es6.object.assign"),e("./modules/es6.object.is"),e("./modules/es6.object.set-prototype-of"),e("./modules/es6.object.to-string"),e("./modules/es6.function.bind"),e("./modules/es6.function.name"),e("./modules/es6.function.has-instance"),e("./modules/es6.parse-int"),e("./modules/es6.parse-float"),e("./modules/es6.number.constructor"),e("./modules/es6.number.to-fixed"),e("./modules/es6.number.to-precision"),e("./modules/es6.number.epsilon"),e("./modules/es6.number.is-finite"),e("./modules/es6.number.is-integer"),e("./modules/es6.number.is-nan"),e("./modules/es6.number.is-safe-integer"),e("./modules/es6.number.max-safe-integer"),e("./modules/es6.number.min-safe-integer"),e("./modules/es6.number.parse-float"),e("./modules/es6.number.parse-int"),e("./modules/es6.math.acosh"),e("./modules/es6.math.asinh"),e("./modules/es6.math.atanh"),e("./modules/es6.math.cbrt"),e("./modules/es6.math.clz32"),e("./modules/es6.math.cosh"),e("./modules/es6.math.expm1"),e("./modules/es6.math.fround"),e("./modules/es6.math.hypot"),e("./modules/es6.math.imul"),e("./modules/es6.math.log10"),e("./modules/es6.math.log1p"),e("./modules/es6.math.log2"),e("./modules/es6.math.sign"),e("./modules/es6.math.sinh"),e("./modules/es6.math.tanh"),e("./modules/es6.math.trunc"),e("./modules/es6.string.from-code-point"),e("./modules/es6.string.raw"),e("./modules/es6.string.trim"),e("./modules/es6.string.iterator"),e("./modules/es6.string.code-point-at"),e("./modules/es6.string.ends-with"),e("./modules/es6.string.includes"),e("./modules/es6.string.repeat"),e("./modules/es6.string.starts-with"),e("./modules/es6.string.anchor"),e("./modules/es6.string.big"),e("./modules/es6.string.blink"),e("./modules/es6.string.bold"),e("./modules/es6.string.fixed"),e("./modules/es6.string.fontcolor"),e("./modules/es6.string.fontsize"),e("./modules/es6.string.italics"),e("./modules/es6.string.link"),e("./modules/es6.string.small"),e("./modules/es6.string.strike"),e("./modules/es6.string.sub"),e("./modules/es6.string.sup"),e("./modules/es6.date.now"),e("./modules/es6.date.to-json"),e("./modules/es6.date.to-iso-string"),e("./modules/es6.date.to-string"),e("./modules/es6.date.to-primitive"),e("./modules/es6.array.is-array"),e("./modules/es6.array.from"),e("./modules/es6.array.of"),e("./modules/es6.array.join"),e("./modules/es6.array.slice"),e("./modules/es6.array.sort"),e("./modules/es6.array.for-each"),e("./modules/es6.array.map"),e("./modules/es6.array.filter"),e("./modules/es6.array.some"),e("./modules/es6.array.every"),e("./modules/es6.array.reduce"),e("./modules/es6.array.reduce-right"),e("./modules/es6.array.index-of"),e("./modules/es6.array.last-index-of"),e("./modules/es6.array.copy-within"),e("./modules/es6.array.fill"),e("./modules/es6.array.find"),e("./modules/es6.array.find-index"),e("./modules/es6.array.species"),e("./modules/es6.array.iterator"),e("./modules/es6.regexp.constructor"),e("./modules/es6.regexp.exec"),e("./modules/es6.regexp.to-string"),e("./modules/es6.regexp.flags"),e("./modules/es6.regexp.match"),e("./modules/es6.regexp.replace"),e("./modules/es6.regexp.search"),e("./modules/es6.regexp.split"),e("./modules/es6.promise"),e("./modules/es6.map"),e("./modules/es6.set"),e("./modules/es6.weak-map"),e("./modules/es6.weak-set"),e("./modules/es6.typed.array-buffer"),e("./modules/es6.typed.data-view"),e("./modules/es6.typed.int8-array"),e("./modules/es6.typed.uint8-array"),e("./modules/es6.typed.uint8-clamped-array"),e("./modules/es6.typed.int16-array"),e("./modules/es6.typed.uint16-array"),e("./modules/es6.typed.int32-array"),e("./modules/es6.typed.uint32-array"),e("./modules/es6.typed.float32-array"),e("./modules/es6.typed.float64-array"),e("./modules/es6.reflect.apply"),e("./modules/es6.reflect.construct"),e("./modules/es6.reflect.define-property"),e("./modules/es6.reflect.delete-property"),e("./modules/es6.reflect.enumerate"),e("./modules/es6.reflect.get"),e("./modules/es6.reflect.get-own-property-descriptor"),e("./modules/es6.reflect.get-prototype-of"),e("./modules/es6.reflect.has"),e("./modules/es6.reflect.is-extensible"),e("./modules/es6.reflect.own-keys"),e("./modules/es6.reflect.prevent-extensions"),e("./modules/es6.reflect.set"),e("./modules/es6.reflect.set-prototype-of"),e("./modules/es7.array.includes"),e("./modules/es7.array.flat-map"),e("./modules/es7.array.flatten"),e("./modules/es7.string.at"),e("./modules/es7.string.pad-start"),e("./modules/es7.string.pad-end"),e("./modules/es7.string.trim-left"),e("./modules/es7.string.trim-right"),e("./modules/es7.string.match-all"),e("./modules/es7.symbol.async-iterator"),e("./modules/es7.symbol.observable"),e("./modules/es7.object.get-own-property-descriptors"),e("./modules/es7.object.values"),e("./modules/es7.object.entries"),e("./modules/es7.object.define-getter"),e("./modules/es7.object.define-setter"),e("./modules/es7.object.lookup-getter"),e("./modules/es7.object.lookup-setter"),e("./modules/es7.map.to-json"),e("./modules/es7.set.to-json"),e("./modules/es7.map.of"),e("./modules/es7.set.of"),e("./modules/es7.weak-map.of"),e("./modules/es7.weak-set.of"),e("./modules/es7.map.from"),e("./modules/es7.set.from"),e("./modules/es7.weak-map.from"),e("./modules/es7.weak-set.from"),e("./modules/es7.global"),e("./modules/es7.system.global"),e("./modules/es7.error.is-error"),e("./modules/es7.math.clamp"),e("./modules/es7.math.deg-per-rad"),e("./modules/es7.math.degrees"),e("./modules/es7.math.fscale"),e("./modules/es7.math.iaddh"),e("./modules/es7.math.isubh"),e("./modules/es7.math.imulh"),e("./modules/es7.math.rad-per-deg"),e("./modules/es7.math.radians"),e("./modules/es7.math.scale"),e("./modules/es7.math.umulh"),e("./modules/es7.math.signbit"),e("./modules/es7.promise.finally"),e("./modules/es7.promise.try"),e("./modules/es7.reflect.define-metadata"),e("./modules/es7.reflect.delete-metadata"),e("./modules/es7.reflect.get-metadata"),e("./modules/es7.reflect.get-metadata-keys"),e("./modules/es7.reflect.get-own-metadata"),e("./modules/es7.reflect.get-own-metadata-keys"),e("./modules/es7.reflect.has-metadata"),e("./modules/es7.reflect.has-own-metadata"),e("./modules/es7.reflect.metadata"),e("./modules/es7.asap"),e("./modules/es7.observable"),e("./modules/web.timers"),e("./modules/web.immediate"),e("./modules/web.dom.iterable"),t.exports=e("./modules/_core")},{"./modules/_core":25,"./modules/es6.array.copy-within":133,"./modules/es6.array.every":134,"./modules/es6.array.fill":135,"./modules/es6.array.filter":136,"./modules/es6.array.find":138,"./modules/es6.array.find-index":137,"./modules/es6.array.for-each":139,"./modules/es6.array.from":140,"./modules/es6.array.index-of":141,"./modules/es6.array.is-array":142,"./modules/es6.array.iterator":143,"./modules/es6.array.join":144,"./modules/es6.array.last-index-of":145,"./modules/es6.array.map":146,"./modules/es6.array.of":147,"./modules/es6.array.reduce":149,"./modules/es6.array.reduce-right":148,"./modules/es6.array.slice":150,"./modules/es6.array.some":151,"./modules/es6.array.sort":152,"./modules/es6.array.species":153,"./modules/es6.date.now":154,"./modules/es6.date.to-iso-string":155,"./modules/es6.date.to-json":156,"./modules/es6.date.to-primitive":157,"./modules/es6.date.to-string":158,"./modules/es6.function.bind":159,"./modules/es6.function.has-instance":160,"./modules/es6.function.name":161,"./modules/es6.map":162,"./modules/es6.math.acosh":163,"./modules/es6.math.asinh":164,"./modules/es6.math.atanh":165,"./modules/es6.math.cbrt":166,"./modules/es6.math.clz32":167,"./modules/es6.math.cosh":168,"./modules/es6.math.expm1":169,"./modules/es6.math.fround":170,"./modules/es6.math.hypot":171,"./modules/es6.math.imul":172,"./modules/es6.math.log10":173,"./modules/es6.math.log1p":174,"./modules/es6.math.log2":175,"./modules/es6.math.sign":176,"./modules/es6.math.sinh":177,"./modules/es6.math.tanh":178,"./modules/es6.math.trunc":179,"./modules/es6.number.constructor":180,"./modules/es6.number.epsilon":181,"./modules/es6.number.is-finite":182,"./modules/es6.number.is-integer":183,"./modules/es6.number.is-nan":184,"./modules/es6.number.is-safe-integer":185,"./modules/es6.number.max-safe-integer":186,"./modules/es6.number.min-safe-integer":187,"./modules/es6.number.parse-float":188,"./modules/es6.number.parse-int":189,"./modules/es6.number.to-fixed":190,"./modules/es6.number.to-precision":191,"./modules/es6.object.assign":192,"./modules/es6.object.create":193,"./modules/es6.object.define-properties":194,"./modules/es6.object.define-property":195,"./modules/es6.object.freeze":196,"./modules/es6.object.get-own-property-descriptor":197,"./modules/es6.object.get-own-property-names":198,"./modules/es6.object.get-prototype-of":199,"./modules/es6.object.is":203,"./modules/es6.object.is-extensible":200,"./modules/es6.object.is-frozen":201,"./modules/es6.object.is-sealed":202,"./modules/es6.object.keys":204,"./modules/es6.object.prevent-extensions":205,"./modules/es6.object.seal":206,"./modules/es6.object.set-prototype-of":207,"./modules/es6.object.to-string":208,"./modules/es6.parse-float":209,"./modules/es6.parse-int":210,"./modules/es6.promise":211,"./modules/es6.reflect.apply":212,"./modules/es6.reflect.construct":213,"./modules/es6.reflect.define-property":214,"./modules/es6.reflect.delete-property":215,"./modules/es6.reflect.enumerate":216,"./modules/es6.reflect.get":219,"./modules/es6.reflect.get-own-property-descriptor":217,"./modules/es6.reflect.get-prototype-of":218,"./modules/es6.reflect.has":220,"./modules/es6.reflect.is-extensible":221,"./modules/es6.reflect.own-keys":222,"./modules/es6.reflect.prevent-extensions":223,"./modules/es6.reflect.set":225,"./modules/es6.reflect.set-prototype-of":224,"./modules/es6.regexp.constructor":226,"./modules/es6.regexp.exec":227,"./modules/es6.regexp.flags":228,"./modules/es6.regexp.match":229,"./modules/es6.regexp.replace":230,"./modules/es6.regexp.search":231,"./modules/es6.regexp.split":232,"./modules/es6.regexp.to-string":233,"./modules/es6.set":234,"./modules/es6.string.anchor":235,"./modules/es6.string.big":236,"./modules/es6.string.blink":237,"./modules/es6.string.bold":238,"./modules/es6.string.code-point-at":239,"./modules/es6.string.ends-with":240,"./modules/es6.string.fixed":241,"./modules/es6.string.fontcolor":242,"./modules/es6.string.fontsize":243,"./modules/es6.string.from-code-point":244,"./modules/es6.string.includes":245,"./modules/es6.string.italics":246,"./modules/es6.string.iterator":247,"./modules/es6.string.link":248,"./modules/es6.string.raw":249,"./modules/es6.string.repeat":250,"./modules/es6.string.small":251,"./modules/es6.string.starts-with":252,"./modules/es6.string.strike":253,"./modules/es6.string.sub":254,"./modules/es6.string.sup":255,"./modules/es6.string.trim":256,"./modules/es6.symbol":257,"./modules/es6.typed.array-buffer":258,"./modules/es6.typed.data-view":259,"./modules/es6.typed.float32-array":260,"./modules/es6.typed.float64-array":261,"./modules/es6.typed.int16-array":262,"./modules/es6.typed.int32-array":263,"./modules/es6.typed.int8-array":264,"./modules/es6.typed.uint16-array":265,"./modules/es6.typed.uint32-array":266,"./modules/es6.typed.uint8-array":267,"./modules/es6.typed.uint8-clamped-array":268,"./modules/es6.weak-map":269,"./modules/es6.weak-set":270,"./modules/es7.array.flat-map":271,"./modules/es7.array.flatten":272,"./modules/es7.array.includes":273,"./modules/es7.asap":274,"./modules/es7.error.is-error":275,"./modules/es7.global":276,"./modules/es7.map.from":277,"./modules/es7.map.of":278,"./modules/es7.map.to-json":279,"./modules/es7.math.clamp":280,"./modules/es7.math.deg-per-rad":281,"./modules/es7.math.degrees":282,"./modules/es7.math.fscale":283,"./modules/es7.math.iaddh":284,"./modules/es7.math.imulh":285,"./modules/es7.math.isubh":286,"./modules/es7.math.rad-per-deg":287,"./modules/es7.math.radians":288,"./modules/es7.math.scale":289,"./modules/es7.math.signbit":290,"./modules/es7.math.umulh":291,"./modules/es7.object.define-getter":292,"./modules/es7.object.define-setter":293,"./modules/es7.object.entries":294,"./modules/es7.object.get-own-property-descriptors":295,"./modules/es7.object.lookup-getter":296,"./modules/es7.object.lookup-setter":297,"./modules/es7.object.values":298,"./modules/es7.observable":299,"./modules/es7.promise.finally":300,"./modules/es7.promise.try":301,"./modules/es7.reflect.define-metadata":302,"./modules/es7.reflect.delete-metadata":303,"./modules/es7.reflect.get-metadata":305,"./modules/es7.reflect.get-metadata-keys":304,"./modules/es7.reflect.get-own-metadata":307,"./modules/es7.reflect.get-own-metadata-keys":306,"./modules/es7.reflect.has-metadata":308,"./modules/es7.reflect.has-own-metadata":309,"./modules/es7.reflect.metadata":310,"./modules/es7.set.from":311,"./modules/es7.set.of":312,"./modules/es7.set.to-json":313,"./modules/es7.string.at":314,"./modules/es7.string.match-all":315,"./modules/es7.string.pad-end":316,"./modules/es7.string.pad-start":317,"./modules/es7.string.trim-left":318,"./modules/es7.string.trim-right":319,"./modules/es7.symbol.async-iterator":320,"./modules/es7.symbol.observable":321,"./modules/es7.system.global":322,"./modules/es7.weak-map.from":323,"./modules/es7.weak-map.of":324,"./modules/es7.weak-set.from":325,"./modules/es7.weak-set.of":326,"./modules/web.dom.iterable":327,"./modules/web.immediate":328,"./modules/web.timers":329}],331:[function(e,t,o){var n,i;n=this,i=function(){if("undefined"==typeof window||"undefined"==typeof navigator)return!1;var p,e,t,g,o,v,n,y,b,_,i=window.navigator.userAgent,a=void 0!==navigator.mimeTypes["application/pdf"],w=void 0!==window.Promise,r=!!(-1!==i.indexOf("irefox"))&&18<parseInt(i.split("rv:")[1].split(".")[0],10),k=/iphone|ipad|ipod/i.test(i.toLowerCase());return t=function(e){var t;try{t=new ActiveXObject(e)}catch(e){t=null}return t},e=function(){return!(!t("AcroPDF.PDF")&&!t("PDF.PdfCtrl"))},p=!k&&(r||a||function(){return!!(window.ActiveXObject||"ActiveXObject"in window)}()&&e()),g=function(e){var t,o="";if(e){for(t in e)e.hasOwnProperty(t)&&(o+=encodeURIComponent(t)+"="+encodeURIComponent(e[t])+"&");o&&(o=(o="#"+o).slice(0,o.length-1))}return o},o=function(e){"undefined"!=typeof console&&console.log&&console.log("[PDFObject] "+e)},v=function(e){return o(e),!1},y=function(e){var t=document.body;return"string"==typeof e?t=document.querySelector(e):"undefined"!=typeof jQuery&&e instanceof jQuery&&e.length?t=e.get(0):void 0!==e.nodeType&&1===e.nodeType&&(t=e),t},b=function(e,t,o,n,i){var a=n+"?file="+encodeURIComponent(t)+o,r="<div style='"+(k?"-webkit-overflow-scrolling: touch; overflow-y: scroll; ":"overflow: hidden; ")+"position: absolute; top: 0; right: 0; bottom: 0; left: 0;'><iframe  "+i+" src='"+a+"' style='border: none; width: 100%; height: 100%;' frameborder='0'></iframe></div>";return e.className+=" pdfobject-container",e.style.position="relative",e.style.overflow="auto",e.innerHTML=r,e.getElementsByTagName("iframe")[0]},_=function(e,t,o,n,i,a,r){var s="";return s=t&&t!==document.body?"width: "+i+"; height: "+a+";":"position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100%;",e.className+=" pdfobject-container",e.innerHTML="<embed "+r+" class='pdfobject' src='"+o+n+"' type='application/pdf' style='overflow: auto; "+s+"'/>",e.getElementsByTagName("embed")[0]},n=function(e,t,o){if("string"!=typeof e)return v("URL is not valid");t=void 0!==t&&t;var n,i=(o=void 0!==o?o:{}).id&&"string"==typeof o.id?"id='"+o.id+"'":"",a=!!o.page&&o.page,r=o.pdfOpenParams?o.pdfOpenParams:{},s=void 0===o.fallbackLink||o.fallbackLink,l=o.width?o.width:"100%",c=o.height?o.height:"100%",d="boolean"!=typeof o.assumptionMode||o.assumptionMode,u="boolean"==typeof o.forcePDFJS&&o.forcePDFJS,h=!!o.PDFJS_URL&&o.PDFJS_URL,m=y(t),f="";return m?(a&&(r.page=a),n=g(r),u&&h?b(m,e,n,h,i):p||d&&w&&!k?_(m,t,e,n,l,c,i):h?b(m,e,n,h,i):(s&&(f="string"==typeof s?s:"<p>This browser does not support inline PDFs. Please download the PDF to view it: <a href='[url]'>Download PDF</a></p>",m.innerHTML=f.replace(/\[url\]/g,e)),v("This browser does not support embedded PDFs"))):v("Target element cannot be determined")},{embed:function(e,t,o){return n(e,t,o)},pdfobjectversion:"2.1.1",supportsPDFs:p}},"function"==typeof define&&define.amd?define([],i):"object"==typeof t&&t.exports?t.exports=i():n.PDFObject=i()},{}],332:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TKWhiteBoardManager=void 0;var D=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),A=n(e("./utils/Global")),a=n(e("./utils/Constant")),M=n(e("./utils/Utils")),R=n(e("./utils/Configuration")),r=n(e("./intermediateLayer/WhiteboardIntermediateLayer")),l=n(e("./view/containers/WhiteboardView"));n(e("./view/containers/AudioPlayer")),n(e("./view/containers/VideoPlayer")),n(e("./view/containers/DocumentToolbar")),n(e("./view/containers/DocumentRemark"));function n(e){return e&&e.__esModule?e:{default:e}}function W(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}var h=function(){function n(e,t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.className="TKWhiteBoardManagerInner",this.isInner=o,this.room=e,this.sdkReceiveActionCommand=t,this.whiteboardViewMap=new Map,this.awitWhiteboardConfigrationMap=new Map,this.randomCreateExtendWhiteboardNumber=0,this.audioPlayerView=void 0,this.videoPlayerView=void 0,this.documentRemarkViewList={},this.documentToolbarViewList={},this.listernerBackupid=(new Date).getTime()+"_"+Math.random(),this.pureWhiteboardFileinfoList={},this.saveMsglistData={},this.savePubmsgData={},this._registerEvent(),this._addRoomEvent()}return i(n,[{key:"getVersion",value:function(){return a.default.WHITEBOARD_SDK_VERSION}},{key:"createMainWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,n=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];if("string"==typeof e){var o=e;if(!(e=document.getElementById(o)))return void L.Logger.warning("The node id cannot be found by node id, and createMainWhiteboard method cannot be performed , element id is "+o+".")}var a="default";L.Logger.debug("[whiteboarrd-sdk]createMainWhiteboard  parentNode and configration and receiveActionCommand:",e,t,i),this._createWhiteboard(e,a,t,function(){var e,t;n.documentToolbarViewList[a]&&n.documentToolbarViewList[a].receiveActionCommand&&(e=n.documentToolbarViewList[a]).receiveActionCommand.apply(e,arguments);n.documentRemarkViewList[a]&&n.documentRemarkViewList[a].receiveActionCommand&&(t=n.documentRemarkViewList[a]).receiveActionCommand.apply(t,arguments);if("function"==typeof i)if(n.isInner)i.apply(void 0,arguments);else{var o=arguments.length<=0?void 0:arguments[0];"viewStateUpdate"!==o&&"mediaPlayerNotice"!==o||i.apply(void 0,arguments)}});var r=this.whiteboardViewMap.get(a);if(r&&r.getConfigration().isLoadDocumentToolBar){var s=r.getConfigration().documentToolBarConfig.parentNode||r.getWhiteboardRootElement();this.createDocumentToolBar(s,r.getConfigration().documentToolBarConfig,a)}if(r&&r.getConfigration().isLoadDocumentRemark){var l=r.getConfigration().documentRemarkConfig.parentNode||r.getWhiteboardRootElement();this.createDocumentRemark(l,r.getConfigration().documentRemarkConfig,a)}if(r&&r.getConfigration().isLoadAudioPlayer){var c=r.getConfigration().audioPlayerConfig.parentNode||r.getWhiteboardRootElement();this.createAudioPlayer(c,r.getConfigration().audioPlayerConfig)}if(r&&r.getConfigration().isLoadVideoPlayer){var d=r.getConfigration().videoPlayerConfig.parentNode||r.getWhiteboardRootElement();this.createVideoPlayer(d,r.getConfigration().videoPlayerConfig)}this._executeSaveMsglistData(a),this._executeSavePubmsgData(a)}},{key:"createExtendWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,i=this,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=arguments[3];if(L.Logger.debug("[whiteboarrd-sdk]createExtendWhiteboard  parentNode  instanceId  configration and receiveActionCommand:",e,n,t,a),null!=n){if("string"==typeof e){var o=e;if(!(e=document.getElementById(o)))return void L.Logger.warning("The node id cannot be found by node id, and createExtendWhiteboard method cannot be performed , element id is "+o+".")}n||(this.randomCreateExtendWhiteboardNumber++,n="randomWhiteboard"+this.randomCreateExtendWhiteboardNumber),this._createWhiteboard(e,n,t,function(){var e,t;i.documentToolbarViewList[n]&&i.documentToolbarViewList[n].receiveActionCommand&&(e=i.documentToolbarViewList[n]).receiveActionCommand.apply(e,arguments);i.documentRemarkViewList[n]&&i.documentRemarkViewList[n].receiveActionCommand&&(t=i.documentRemarkViewList[n]).receiveActionCommand.apply(t,arguments);if("function"==typeof a)if(i.isInner)a.apply(void 0,arguments);else{var o=arguments.length<=0?void 0:arguments[0];"viewStateUpdate"!==o&&"mediaPlayerNotice"!==o||a.apply(void 0,arguments)}});var r=this.whiteboardViewMap.get(n);if(r&&r.getConfigration().isLoadDocumentToolBar&&r.getConfigration().hasExtendDocument){var s=r.getConfigration().documentToolBarConfig.parentNode||r.getWhiteboardRootElement();this.createDocumentToolBar(s,r.getConfigration().documentToolBarConfig,n)}if(r&&r.getConfigration().isLoadDocumentRemark&&r.getConfigration().hasExtendDocument){var l=r.getConfigration().documentRemarkConfig.parentNode||r.getWhiteboardRootElement();this.createDocumentRemark(l,r.getConfigration().documentRemarkConfig,n)}this._executeSaveMsglistData(n),this._executeSavePubmsgData(n)}}},{key:"destroyMainWhiteboard",value:function(){L.Logger.debug("[whiteboarrd-sdk]destroyMainWhiteboard");this._destroyWhiteboard("default")}},{key:"destroyExtendWhiteboard",value:function(e){L.Logger.debug("[whiteboarrd-sdk]destroyExtendWhiteboard  instanceId:",e),null!=e&&this._destroyWhiteboard(e)}},{key:"changeDocument",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"default";if("mobile"!==TK.SDKTYPE)if(null!=e&&null!=e){if(this.room&&this.whiteboardViewMap.has(o)){var n=this.whiteboardViewMap.get(o),i=void 0;if(0==e)i=this.pureWhiteboardFileinfoList[o];else{var a=this.room.getFileList(),r=!0,s=!1,l=void 0;try{for(var c,d=a[Symbol.iterator]();!(r=(c=d.next()).done);r=!0){var u=c.value;if(u.fileid==e){i=u;break}}}catch(e){s=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(s)throw l}}}if(i)if(/(mp3|mp4|webm)/g.test(i.filetype)){var h=i.swfpath,m=h.lastIndexOf("."),f=h.substring(m),p=h.replace(f,"-1"+f),g=A.default.nowUseDocAddress+p,v=/(mp4|webm)/g.test(i.filetype),y=n.getConfigration().mediaShareToID,b={source:"mediaFileList",filename:i.filename,fileid:i.fileid,pauseWhenOver:v&&n.getConfigration().mediaSharePauseWhenOver};this.startShareMedia(g,v,y,b)}else{var _=Number(i.fileprop),w=1===_||2===_,k=3===_,S=!w&&!k;if(w||k||S){S&&t>i.pagenum&&(t=i.pagenum),t<1&&(t=1);var I={name:"default"===o?"ShowPage":"ExtendShowPage",id:"default"===o?"DocumentFilePage_ShowPage":"DocumentFilePage_ExtendShowPage_"+o,toID:"__all",data:{sourceInstanceId:o,isGeneralFile:S,isMedia:!1,isDynamicPPT:w,isH5Document:k,action:"show",mediaType:"",filedata:{currpage:t,pptslide:w?t:1,pptstep:0,steptotal:0,fileid:i.fileid,pagenum:i.pagenum,filename:i.filename,filetype:i.filetype,isContentDocument:i.isContentDocument,swfpath:w||k?i.downloadpath:i.swfpath}},save:!0};this.receiveEventRoomPubmsg({type:"room-pubmsg",message:Object.deepAssign({},I)},o),n.getConfigration().synchronization&&n.getConfigration().isConnectedRoom&&this.pubMsg(I)}else L.Logger.info("[whiteboarrd-sdk]changeDocument:you open file type is not support , filetype is "+i.filetype+" , fileid is "+e+" , toPage is "+t+".")}else L.Logger.info("[whiteboarrd-sdk]changeDocument:you can't find the file by fileid , fileid is "+e+" , toPage is "+t+".")}}else L.Logger.error("changeDocument method parameter error: fileid can't be empty! ");else L.Logger.error("changeDocument method is not allowed in the mobile environment!")}},{key:"openRemoteDocument",value:function(e,t,o,n){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};if(!function(e,t,o,n){return i=e,1!=new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/).test(i)?(L.Logger.error("[whiteboarrd-sdk]openRemoteDocument: url invalid"),"function"==typeof n&&n("url invalid"),!1):-1==["generalDocument","dynamicPPT","h5Document","mediaFile"].indexOf(t)?(L.Logger.error("[whiteboarrd-sdk]openRemoteDocument: type invalid"),"function"==typeof n&&n("type invalid"),!1):!!o||(L.Logger.error("[whiteboarrd-sdk]openRemoteDocument: id is empty"),"function"==typeof n&&n("id is empty"),!1);var i}(e,o,t,n)||!this.room)return!1;if(this.whiteboardViewMap.has("default")){var a=this.whiteboardViewMap.get("default"),r="unknown",s="unknown";try{var l=e.split(/(\/|\\)/g);if(l&&1<l.length){var c=l[l.length-1];if(c&&"string"==typeof c){var d=c.split(".");d&&2==d.length&&(r=d[0],s=d[1])}}}catch(e){L.Logger.error("[whiteboarrd-sdk]openRemoteDocument err:",e)}if("mediaFile"===o){var u=a.getConfigration().mediaShareToID,h="unknown"===s?/(.mp4|.webm)/g.test(e):/(mp4|webm)/g.test(s),m={source:"mediaFileList",filename:r,fileid:t,pauseWhenOver:h&&a.getConfigration().mediaSharePauseWhenOver};this.startShareMedia(e,h,u,m)}else{var f={name:"ShowPage",id:"DocumentFilePage_ShowPage",toID:"__all",data:{isGeneralFile:"generalDocument"==o,isMedia:!1,isDynamicPPT:"dynamicPPT"==o,isH5Document:"h5Document"==o,action:"show",mediaType:"",filedata:{currpage:void 0!==i.toPage&&"number"==typeof i.toPage?i.toPage:1,pptslide:void 0!==i.toPage&&"number"==typeof i.toPage?i.toPage:1,pptstep:0,steptotal:0,fileid:t,pagenum:1,filename:r,filetype:s,isContentDocument:1,swfpath:e}},save:!0};this.receiveEventRoomPubmsg({type:"room-pubmsg",message:Object.deepAssign({},f)}),a.getConfigration().synchronization&&a.getConfigration().isConnectedRoom&&this.pubMsg(f)}}}},{key:"changeWhiteBoardConfigration",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o={};for(var n in e)R.default.commonWhiteboard.hasOwnProperty(n)&&(o[n]=e[n],delete e[n]);if(Object.keys(o).length&&this.changeCommonWhiteBoardConfigration(o),Object.keys(e).length){if(L.Logger.debug("[whiteboarrd-sdk]changeWhiteBoardConfigration  configration and instanceId:",e,t),this.whiteboardViewMap.has(t)?(this.awitWhiteboardConfigrationMap.has(t)&&this.awitWhiteboardConfigrationMap.delete(t),this.whiteboardViewMap.get(t).changeWhiteBoardConfigration(e)):this.awitWhiteboardConfigrationMap.has(t)?Object.deepAssign(this.awitWhiteboardConfigrationMap.get(t),e):this.awitWhiteboardConfigrationMap.set(t,Object.deepAssign({},R.default.defaultWhiteboard,R.default.commonWhiteboard,e)),void 0!==e.isLoadDocumentToolBar&&"default"===t||e.hasExtendDocument){var i=this.whiteboardViewMap.get(t);if(e.isLoadDocumentToolBar&&!this.documentToolbarViewList[t]){if(i){var a=i.getConfigration().documentToolBarConfig.parentNode||i.getWhiteboardRootElement();this.createDocumentToolBar(a,i.getConfigration().documentToolBarConfig,t)}}else!e.isLoadDocumentToolBar&&this.documentToolbarViewList[t]&&this.documentToolbarViewList[t].destroyView&&(this.documentToolbarViewList[t].destroyView(),this.documentToolbarViewList[t]=void 0)}if(void 0!==e.isLoadDocumentRemark&&"default"===t||e.hasExtendDocument){var r=this.whiteboardViewMap.get(t);if(e.isLoadDocumentRemark&&!this.documentRemarkViewList[t]){if(r){var s=r.getConfigration().documentRemarkConfig.parentNode||r.getWhiteboardRootElement();this.createDocumentRemark(s,r.getConfigration().documentRemarkConfig,t)}}else!e.isLoadDocumentRemark&&this.documentRemarkViewList[t]&&this.documentRemarkViewList[t].destroyView&&(this.documentRemarkViewList[t].destroyView(),this.documentRemarkViewList[t]=void 0)}if(void 0!==e.isLoadAudioPlayer&&"default"===t){var l=this.whiteboardViewMap.get(t);if(e.isLoadAudioPlayer&&!this.audioPlayerView){if(l){var c=l.getConfigration().audioPlayerConfig.parentNode||l.getWhiteboardRootElement();this.createAudioPlayer(c,l.getConfigration().audioPlayerConfig)}}else!e.isLoadAudioPlayer&&this.audioPlayerView&&this.audioPlayerView.destroyView&&(this.audioPlayerView.destroyView(),this.audioPlayerView=void 0)}if(void 0!==e.isLoadVideoPlayer&&"default"===t){var d=this.whiteboardViewMap.get(t);if(e.isLoadVideoPlayer&&!this.videoPlayerView){if(d){var u=d.getConfigration().videoPlayerConfig.parentNode||d.getWhiteboardRootElement();this.createVideoPlayer(u,d.getConfigration().videoPlayerConfig)}}else!e.isLoadVideoPlayer&&this.videoPlayerView&&this.videoPlayerView.destroyView&&(this.videoPlayerView.destroyView(),this.videoPlayerView=void 0)}if(void 0!==e.languageType&&("default"===t||e.hasExtendDocument)&&(this.documentToolbarViewList[t]&&this.documentToolbarViewList[t].setProps({languageType:e.languageType}),this.documentRemarkViewList[t]&&this.documentRemarkViewList[t].setProps({languageType:e.languageType})),void 0!==e.isMobile&&("default"===t||e.hasExtendDocument)&&(this.documentToolbarViewList[t]&&this.documentToolbarViewList[t].setProps({isMobile:e.isMobile}),this.documentRemarkViewList[t]&&this.documentRemarkViewList[t].setProps({isMobile:e.isMobile})),void 0!==e.canRemark&&("default"===t||e.hasExtendDocument)&&(this.documentToolbarViewList[t]&&this.documentToolbarViewList[t].setProps({canRemark:e.canRemark}),this.documentRemarkViewList[t]&&this.documentRemarkViewList[t].setProps({canRemark:e.canRemark})),void 0!==e.documentToolBarConfig&&("default"===t||e.hasExtendDocument)&&this.documentToolbarViewList[t]){if(e.documentToolBarConfig.hasOwnProperty("parentNode")&&"function"==typeof this.documentToolbarViewList[t].changeParentNode){var h=this.whiteboardViewMap.get(t),m=e.documentToolBarConfig.parentNode||(h?h.getWhiteboardRootElement():void 0);if("string"==typeof m){var f=m;if(!(m=document.getElementById(f)))return void L.Logger.warning("The node id cannot be found by node id, and  documentToolBarConfig.parentNode cannot update config, element id is "+f+".")}this.documentToolbarViewList[t].changeParentNode(m)}for(var p in e.documentToolBarConfig){var g=e.documentToolBarConfig[p];"object"===(void 0===g?"undefined":E(g))&&(e.documentToolBarConfig[p]=Object.deepAssign({},this.documentToolbarViewList[t].props[p],g))}this.documentToolbarViewList[t].setProps(Object.deepAssign({},e.documentToolBarConfig))}if(void 0!==e.documentRemarkConfig&&("default"===t||e.hasExtendDocument)&&this.documentRemarkViewList[t]){if(e.documentRemarkConfig.hasOwnProperty("parentNode")&&"function"==typeof this.documentRemarkViewList[t].changeParentNode){var v=this.whiteboardViewMap.get(t),y=e.documentRemarkConfig.parentNode||(v?v.getWhiteboardRootElement():void 0);if("string"==typeof y){var b=y;if(!(y=document.getElementById(b)))return void L.Logger.warning("The node id cannot be found by node id, and  documentRemarkConfig.parentNode cannot update config, element id is "+b+".")}this.documentRemarkViewList[t].changeParentNode(y)}for(var _ in e.documentRemarkConfig){var w=e.documentRemarkConfig[_];"object"===(void 0===w?"undefined":E(w))&&(e.documentRemarkConfig[_]=Object.deepAssign({},this.documentRemarkViewList[t].props[_],w))}this.documentRemarkViewList[t].setProps(Object.deepAssign({},e.documentRemarkConfig))}if(void 0!==e.audioPlayerConfig&&this.audioPlayerView){for(var k in e.audioPlayerConfig){var S=e.audioPlayerConfig[k];"object"===(void 0===S?"undefined":E(S))&&(e.audioPlayerConfig[k]=Object.deepAssign({},this.audioPlayerView.props[k],S))}this.audioPlayerView.setProps(Object.deepAssign({},e.audioPlayerConfig))}if(void 0!==e.videoPlayerConfig&&this.videoPlayerView){for(var I in e.videoPlayerConfig){var P=e.videoPlayerConfig[I];"object"===(void 0===P?"undefined":E(P))&&(e.videoPlayerConfig[I]=Object.deepAssign({},this.videoPlayerView.props[I],P))}this.videoPlayerView.setProps(Object.deepAssign({},e.videoPlayerConfig))}}}},{key:"noticeWhiteboardActionCommand",value:function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"default";(L.Logger.debug("[whiteboarrd-sdk]noticeWhiteboardActionCommand "),this.whiteboardViewMap.has(o))&&this.whiteboardViewMap.get(o).noticeWhiteboardActionCommand(e,t)}},{key:"changeCommonWhiteBoardConfigration",value:function(e){L.Logger.debug("[whiteboarrd-sdk]changeCommonWhiteBoardConfigration common configration:",e);var t=Object.deepAssign({},e);"object"===E(t.docAddress)&&(A.default.docAddress=e.docAddress,""===A.default.docAddressKey&&(A.default.docAddressKey=e.docAddress.hostname),A.default.protocol=t.docAddress.protocol,A.default.port=t.docAddress.port,t.docAddress=e.docAddress.protocol+"://"+e.docAddress.hostname+":"+e.docAddress.port),"object"===E(t.webAddress)&&(t.webAddress=e.webAddress.protocol+"://"+e.webAddress.hostname+":"+e.webAddress.port),t.backupDocAddressList&&Array.isArray(t.backupDocAddressList)&&(A.default.backupDocAddressList=e.backupDocAddressList,R.default.commonWhiteboard.backupDocAddressList=[]),Object.deepAssign(R.default.commonWhiteboard,t);var o=!0,n=!1,i=void 0;try{for(var a,r=this.awitWhiteboardConfigrationMap.values()[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;Object.deepAssign(s,t)}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}void 0===e.docAddress&&void 0===e.backupDocAddressList||(A.default.docAddressList=[A.default.docAddress].concat(W(A.default.backupDocAddressList),W(A.default.laterAddressList)),A.default.hasGetDocAddressIndexByLocalStorage?(A.default.localStorageDocAddressKey&&""===M.default.getItem(A.default.docAddressList,A.default.localStorageDocAddressKey)&&""===M.default.getItem(A.default.laterAddressList,A.default.localStorageDocAddressKey)&&(A.default.protocol&&A.default.port&&(A.default.laterAddressList=[{protocol:A.default.protocol,hostname:A.default.localStorageDocAddressKey,port:A.default.port}]),A.default.docAddressList=[A.default.docAddress].concat(W(A.default.backupDocAddressList),W(A.default.laterAddressList))),A.default.nowUseDocAddress=M.default.getItem(A.default.docAddressList,A.default.docAddressKey)||R.default.commonWhiteboard.docAddress):(A.default.nowUseDocAddress=M.default.getItem(A.default.docAddressList,A.default.docAddressKey)||R.default.commonWhiteboard.docAddress,this.getLocalStorageItem("tkDocAddressKey",function(e){A.default.hasGetDocAddressIndexByLocalStorage=(A.default.nowUseDocAddress=(e&&void 0!==e&&"string"==typeof e&&"undefined"!==e&&(A.default.docAddressKey=e,A.default.localStorageDocAddressKey=e),A.default.localStorageDocAddressKey&&""===M.default.getItem(A.default.docAddressList,A.default.localStorageDocAddressKey)&&""===M.default.getItem(A.default.laterAddressList,A.default.localStorageDocAddressKey)&&(A.default.protocol&&A.default.port&&(A.default.laterAddressList=[{protocol:A.default.protocol,hostname:A.default.localStorageDocAddressKey,port:A.default.port}]),A.default.docAddressList=[A.default.docAddress].concat(W(A.default.backupDocAddressList),W(A.default.laterAddressList))),M.default.getItem(A.default.docAddressList,A.default.docAddressKey)||R.default.commonWhiteboard.docAddress),!0)})));var l=!0,c=!1,d=void 0;try{for(var u,h=this.whiteboardViewMap[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var m=u.value,f=D(m,2),p=f[0],g=f[1];this.awitWhiteboardConfigrationMap.has(p)&&this.awitWhiteboardConfigrationMap.delete(p),g.changeWhiteBoardConfigration(t)}}catch(e){c=!0,d=e}finally{try{!l&&h.return&&h.return()}finally{if(c)throw d}}var v=!0,y=!1,b=void 0;try{for(var _,w=Object.values(this.documentToolbarViewList)[Symbol.iterator]();!(v=(_=w.next()).done);v=!0){var k=_.value;k&&k.setProps(Object.deepAssign({},t))}}catch(e){y=!0,b=e}finally{try{!v&&w.return&&w.return()}finally{if(y)throw b}}var S=!0,I=!1,P=void 0;try{for(var x,C=Object.values(this.documentRemarkViewList)[Symbol.iterator]();!(S=(x=C.next()).done);S=!0){var T=x.value;T&&T.setProps(Object.deepAssign({},t))}}catch(e){I=!0,P=e}finally{try{!S&&C.return&&C.return()}finally{if(I)throw P}}this.audioPlayerView&&this.audioPlayerView.setProps(Object.deepAssign({},t)),this.videoPlayerView&&this.videoPlayerView.setProps(Object.deepAssign({},t))}},{key:"addPage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]addPage "),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).addPage()}},{key:"nextPage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]nextPage "),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).nextPage()}},{key:"prevPage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]prevPage "),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).prevPage()}},{key:"skipPage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";L.Logger.debug("[whiteboarrd-sdk]skipPage  page :",e),"number"==typeof e?this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).skipPage(e):L.Logger.warning("skipPage page must is number!")}},{key:"nextStep",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]nextStep "),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).nextStep()}},{key:"prevStep",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]prevStep "),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).prevStep()}},{key:"enlargeWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]enlargeWhiteboard  instanceId:",e);this.executeZoomWhiteaord("zoom_big",e)}},{key:"narrowWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]narrowWhiteboard  instanceId:",e);this.executeZoomWhiteaord("zoom_small",e)}},{key:"clear",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]clear  instanceId:",e);this.executeWhiteboardAction("action_clear",e)}},{key:"undo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]undo  instanceId:",e);this.executeWhiteboardAction("action_undo",e)}},{key:"redo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]redo  instanceId:",e);this.executeWhiteboardAction("action_redo",e)}},{key:"fullScreen",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";if(L.Logger.debug("[whiteboarrd-sdk]fullScreen "),this.whiteboardViewMap.has(e)&&this.room){var t=this.whiteboardViewMap.get(e);if(t.getConfigration().isMobile)this.room.changeWebPageFullScreen&&this.room.changeWebPageFullScreen(!0);else{M.default.isFullScreenStatus()&&M.default.exitFullscreen();var o=t.getWhiteboardRootElement(),n=t.getConfigration().documentToolBarConfig.fullScreenElementId;n&&("string"==typeof n?document.getElementById(n)&&(o=document.getElementById(n)):o=n),M.default.launchFullscreen(o)}}}},{key:"exitFullScreen",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";(L.Logger.debug("[whiteboarrd-sdk]exitFullScreen "),this.whiteboardViewMap.has(e)&&this.room)&&(this.whiteboardViewMap.get(e).getConfigration().isMobile?this.room.changeWebPageFullScreen&&this.room.changeWebPageFullScreen(!1):M.default.exitFullscreen())}},{key:"updateWhiteboardSize",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]updateWhiteboardSize  instanceId:",e);var t={};if(this.whiteboardViewMap.has(e)){var o=this.whiteboardViewMap.get(e);o.resizeWhiteboardHandler(),t=o.getConfigration()}("default"===e||t.hasExtendDocument)&&this.documentRemarkViewList[e]&&M.default.isFunction(this.documentRemarkViewList[e].resize)&&this.documentRemarkViewList[e].resize(),("default"===e||t.hasExtendDocument)&&this.documentToolbarViewList[e]&&M.default.isFunction(this.documentToolbarViewList[e].resize)&&this.documentToolbarViewList[e].resize()}},{key:"updateAllWhiteboardSize",value:function(){L.Logger.debug("[whiteboarrd-sdk]updateAllWhiteboardSize ");var e=!0,t=!1,o=void 0;try{for(var n,i=this.whiteboardViewMap.keys()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;this.updateWhiteboardSize(a)}}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}}},{key:"resetWhiteboardData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]resetWhiteboardData  instanceId:",e),this.whiteboardViewMap.has(e)&&this.whiteboardViewMap.get(e).resetWhiteboardData()}},{key:"resetAllWhiteboardData",value:function(){L.Logger.debug("[whiteboarrd-sdk]resetAllWhiteboardData ");var e=!0,t=!1,o=void 0;try{for(var n,i=this.whiteboardViewMap.values()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){n.value.resetWhiteboardData()}}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}}},{key:"resetPureWhiteboardTotalPage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]resetPureWhiteboardTotalPage ");var t=this.pureWhiteboardFileinfoList[e]?this.pureWhiteboardFileinfoList[e].pagenum:1;this.pureWhiteboardFileinfoList[e]&&(this.pureWhiteboardFileinfoList[e].pagenum=1);var o=this.whiteboardViewMap.get(e);o&&M.default.isFunction(o.resetPureWhiteboardTotalPage)&&o.resetPureWhiteboardTotalPage(t)}},{key:"changeDynamicPptVolume",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";if(L.Logger.debug("[whiteboarrd-sdk]changeDynamicPptVolume volume:",e),"number"==typeof e&&this.whiteboardViewMap.has(t)){var o=this.whiteboardViewMap.get(t);e<0?e=0:100<e&&(e=100);var n={name:"default"===t?"PptVolumeControl":"ExtendPptVolumeControl",id:"default"===t?"PptVolumeControl":"PptVolumeControl_"+t,toID:"__allExceptSender",data:{sourceInstanceId:t,volume:e/100},save:!0};this.receiveEventRoomPubmsg({type:"room-pubmsg",message:n}),this.room.setPptAudioVolume&&this.room.setPptAudioVolume(e),o.getConfigration().pptVolumeSynchronization&&o.getConfigration().isConnectedRoom&&this.pubMsg(n)}}},{key:"openDocumentRemark",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";(L.Logger.debug("[whiteboarrd-sdk]openDocumentRemark "),this.whiteboardViewMap.has(e))&&this.whiteboardViewMap.get(e).changeDocumentRemarkState(!0)}},{key:"closeDocumentRemark",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";(L.Logger.debug("[whiteboarrd-sdk]closeDocumentRemark "),this.whiteboardViewMap.has(e))&&this.whiteboardViewMap.get(e).changeDocumentRemarkState(!1)}},{key:"executeWhiteboardAction",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";L.Logger.debug("[whiteboarrd-sdk]executeWhiteboardAction actionKey and\tinstanceId:",e,t),this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).executeWhiteboardAction(e)}},{key:"executeZoomWhiteaord",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";L.Logger.debug("[whiteboarrd-sdk]executeZoomWhiteaord \tzoomKey and\tinstanceId:",e,t),this.whiteboardViewMap.has(t)&&this.whiteboardViewMap.get(t).executeZoomWhiteaord(e)}},{key:"receiveEventRoomPubmsg",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomPubmsg \trecvEventData:",e),"string"==typeof e&&(e=JSON.parse(e));var t=e.message;if(this._isWhiteboardCorrelationSignalling(t.name))if("ShowPage"===t.name||"whiteboardMarkTool"===t.name||"NewPptTriggerActionClick"===t.name||"PptVolumeControl"===t.name||"H5DocumentAction"===t.name||"ExtendShowPage"===t.name||"ExtendWhiteboardMarkTool"===t.name||"ExtendH5DocumentAction"===t.name||"ExtendPptVolumeControl"===t.name||"ExtendNewPptTriggerActionClick"===t.name)"ShowPage"!==t.name&&"ExtendShowPage"!==t.name||("string"==typeof t.data&&(t.data=M.default.toJsonParse(t.data)),t.data.isGeneralFile&&t.data.filedata&&0==t.data.filedata.fileid&&("ShowPage"===t.name&&this.pureWhiteboardFileinfoList.default?t.data.filedata.pagenum=this.pureWhiteboardFileinfoList.default.pagenum:"ExtendShowPage"===t.name&&this.pureWhiteboardFileinfoList[t.data.sourceInstanceId]&&(t.data.filedata.pagenum=this.pureWhiteboardFileinfoList[t.data.sourceInstanceId].pagenum))),"ShowPage"===t.name||"whiteboardMarkTool"===t.name||"NewPptTriggerActionClick"===t.name||"PptVolumeControl"===t.name||"H5DocumentAction"===t.name?this.whiteboardViewMap.has("default")?this.whiteboardViewMap.get("default").receiveEventRoomPubmsg(e):this.savePubmsgData.default&&Array.isArray(this.savePubmsgData.default)?this.savePubmsgData.default.push(e):this.savePubmsgData.default=[e]:"ExtendShowPage"!==t.name&&"ExtendWhiteboardMarkTool"!==t.name&&"ExtendPptVolumeControl"!==t.name&&"ExtendH5DocumentAction"!==t.name&&"ExtendNewPptTriggerActionClick"!==t.name||t.data&&(this.whiteboardViewMap.has(t.data.sourceInstanceId)?this.whiteboardViewMap.get(t.data.sourceInstanceId).receiveEventRoomPubmsg(e):this.savePubmsgData[t.data.sourceInstanceId]&&Array.isArray(this.savePubmsgData[t.data.sourceInstanceId])?this.savePubmsgData[t.data.sourceInstanceId].push(e):this.savePubmsgData[t.data.sourceInstanceId]=[e]);else{var o=!0,n=!1,i=void 0;try{for(var a,r=this.whiteboardViewMap.values()[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){a.value.receiveEventRoomPubmsg(e)}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}}},{key:"receiveEventRoomConnected",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomConnected \trecvEventData:",e),this.saveMsglistData={},this.savePubmsgData={},this.resetAllWhiteboardData(),this.resetPureWhiteboardTotalPage();var t=e.message;this.receiveEventRoomMsglist(JSON.stringify({type:"room-msglist",message:t}))}},{key:"receiveEventRoomDisconnected",value:function(){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomDisconnected "),A.default.laterAddressList=[];var e=!(A.default.hasGetDocAddressIndexByLocalStorage=!1),t=!1,o=void 0;try{for(var n,i=this.whiteboardViewMap.values()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;a&&a.getConfigration()&&a.getConfigration().isDisconnectedClearWhiteboardData&&M.default.isFunction(a.resetWhiteboardData)&&a.resetWhiteboardData()}}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}}},{key:"receiveEventRoomDelmsg",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomDelmsg \trecvEventData:",e),"string"==typeof e&&(e=JSON.parse(e));var t=e.message;if(this._isWhiteboardCorrelationSignalling(t.name)&&"SharpsChange"!==t.name){var o=!0,n=!1,i=void 0;try{for(var a,r=this.whiteboardViewMap.values()[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){a.value.receiveEventRoomDelmsg(e)}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}}},{key:"receiveEventRoomMsglist",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomMsglist \trecvEventData:",e),"string"==typeof e&&(e=JSON.parse(e));var t={},o=e.message;for(var n in o)this._isWhiteboardCorrelationSignalling(o[n].name)&&(o[n].data&&"string"==typeof o[n].data&&(o[n].data=JSON.parse(o[n].data)),(null===t[o[n].name]||void 0===t[o[n].name])&&(t[o[n].name]=[]),t[o[n].name].push(o[n]));var i=!0,a=!1,r=void 0;try{for(var s,l=["ShowPage","whiteboardMarkTool","NewPptTriggerActionClick","PptVolumeControl","H5DocumentAction","ExtendShowPage","ExtendWhiteboardMarkTool","ExtendPptVolumeControl","ExtendH5DocumentAction","ExtendNewPptTriggerActionClick"][Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,d=t[c];if(("ShowPage"===c||"ExtendShowPage"===c)&&d&&d.length){var u=!0,h=!1,m=void 0;try{for(var f,p=d[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var g=f.value;"ShowPage"!==g.name&&"ExtendShowPage"!==g.name||("string"==typeof g.data&&(g.data=M.default.toJsonParse(g.data)),g.data.isGeneralFile&&g.data.filedata&&0==g.data.filedata.fileid&&("ShowPage"===g.name&&this.pureWhiteboardFileinfoList.default?g.data.filedata.pagenum=this.pureWhiteboardFileinfoList.default.pagenum:"ExtendShowPage"===g.name&&this.pureWhiteboardFileinfoList[g.data.sourceInstanceId]&&(g.data.filedata.pagenum=this.pureWhiteboardFileinfoList[g.data.sourceInstanceId].pagenum)))}}catch(e){h=!0,m=e}finally{try{!u&&p.return&&p.return()}finally{if(h)throw m}}}if(null!=d&&0<d.length)if("ShowPage"===c||"whiteboardMarkTool"===c||"NewPptTriggerActionClick"===c||"PptVolumeControl"===c||"H5DocumentAction"===c)this.whiteboardViewMap.has("default")?this.whiteboardViewMap.get("default").receiveEventRoomMsglist(c,d[d.length-1]):this.saveMsglistData.default&&Array.isArray(this.saveMsglistData.default)?this.saveMsglistData.default.push(d[d.length-1]):this.saveMsglistData.default=[d[d.length-1]];else if("ExtendShowPage"===c||"ExtendWhiteboardMarkTool"===c||"ExtendPptVolumeControl"===c||"ExtendH5DocumentAction"===c||"ExtendNewPptTriggerActionClick"===c){var v=!0,y=!1,b=void 0;try{for(var _,w=d[Symbol.iterator]();!(v=(_=w.next()).done);v=!0){var k=_.value;k.data&&(this.whiteboardViewMap.has(k.data.sourceInstanceId)?this.whiteboardViewMap.get(k.data.sourceInstanceId).receiveEventRoomMsglist(c,k):this.saveMsglistData[k.data.sourceInstanceId]&&Array.isArray(this.saveMsglistData[k.data.sourceInstanceId])?this.saveMsglistData[k.data.sourceInstanceId].push(k):this.saveMsglistData[k.data.sourceInstanceId]=[k])}}catch(e){y=!0,b=e}finally{try{!v&&w.return&&w.return()}finally{if(y)throw b}}}t[c]=null,delete t[c]}}catch(e){a=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw r}}}},{key:"reveiveEventRoomUsermediaorfilestateChanged",value:function(e){L.Logger.debug("[whiteboarrd-sdk]reveiveEventRoomUsermediaorfilestateChanged recvEventData:",e),this._forwardingStreamEvents("reveiveEventRoomUsermediaorfilestateChanged",e)}},{key:"reveiveEventRoomUsermediaorfileattributesUpdate",value:function(e){L.Logger.debug("[whiteboarrd-sdk]reveiveEventRoomUsermediaorfileattributesUpdate recvEventData:",e),this._forwardingStreamEvents("reveiveEventRoomUsermediaorfileattributesUpdate",e)}},{key:"receiveEventRoomErrorNotice",value:function(e){L.Logger.debug("[whiteboarrd-sdk]receiveEventRoomErrorNotice recvEventData:",e),this._forwardingStreamEvents("receiveEventRoomErrorNotice",e)}},{key:"reveiveEventRoomReceiveActionCommand",value:function(e){L.Logger.debug("[whiteboarrd-sdk]reveiveEventRoomReceiveActionCommand \trecvEventData:",e);var t=e.message,o=t.action,n=t.cmd;switch(o){case"transmitWindowSize":this._windowResizeCallback()}var i=!0,a=!1,r=void 0;try{for(var s,l=this.whiteboardViewMap.values()[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){s.value.reveiveEventRoomReceiveActionCommand(o,n)}}catch(e){a=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw r}}}},{key:"registerRoomDelegate",value:function(e,t){L.Logger.debug("[whiteboarrd-sdk]registerRoomDelegate \troom and  sdkReceiveActionCommand:",e,t),this.room=e,this.sdkReceiveActionCommand=t,this._addRoomEvent()}},{key:"getRoomDelegate",value:function(){return L.Logger.debug("[whiteboarrd-sdk]getRoomDelegate "),this.room}},{key:"hasRoomDelegate",value:function(){return L.Logger.debug("[whiteboarrd-sdk]hasRoomDelegate "),!!this.room}},{key:"sendActionCommandToSdk",value:function(e,t){L.Logger.debug("[whiteboarrd-sdk]sendActionCommandToSdk \taction and\tcmd:",e,t),this.sdkReceiveActionCommand&&"function"==typeof this.sdkReceiveActionCommand&&(void 0!==t&&!E(t)||Array.isArray(t)||(t=JSON.parse(JSON.stringify(t))),this.sdkReceiveActionCommand(e,t))}},{key:"pubMsg",value:function(e){L.Logger.debug("[whiteboarrd-sdk]pubMsg \tparams :",e),this.room&&this.room.pubMsg&&("string"==typeof e&&(e=JSON.parse(e)),e.data&&"object"===E(e.data)&&!Array.isArray(e.data)&&(e.data=JSON.stringify(e.data)),this.room.pubMsg(e))}},{key:"delMsg",value:function(e){L.Logger.debug("[whiteboarrd-sdk]delMsg params :",e),this.room&&this.room.delMsg&&(e.data&&"object"===E(e.data)&&!Array.isArray(e.data)&&(e.data=JSON.stringify(e.data)),this.room.delMsg(e))}},{key:"startShareMedia",value:function(e,t,o){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(L.Logger.debug("[whiteboarrd-sdk]startShareMedia url  isVideo  toID  and  attrs:",e,t,o,n),this.stopShareMedia(),this.stopShareLocalMedia(),this.room&&this.room.startShareMedia){var i=this.whiteboardViewMap.get("default");t&&i&&i.getConfigration()&&i.getConfigration().mediaSharePauseWhenOver&&(n.pauseWhenOver=i.getConfigration().mediaSharePauseWhenOver),i&&i.getConfigration()&&void 0!==i.getConfigration().myUserId&&!i.getConfigration().synchronization&&(o=i.getConfigration().myUserId),"mobile"!==TK.SDKTYPE?this.room.startShareMedia(e,t,function(e){L.Logger.warning("[whiteboard-sdk]startShareMedia fail , fail info:"+e)},{toID:o,attrs:n}):this.room.startShareMedia(e,t,o,n)}}},{key:"stopShareMedia",value:function(){L.Logger.debug("[whiteboarrd-sdk]stopShareMedia "),this.room&&this.room.stopShareMedia&&this.room.stopShareMedia()}},{key:"stopShareLocalMedia",value:function(){"mobile"!==TK.SDKTYPE&&this.room&&this.room.stopShareLocalMedia&&(L.Logger.debug("[whiteboarrd-sdk]stopShareLocalMedia "),this.room.stopShareLocalMedia())}},{key:"createAudioPlayer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(L.Logger.debug("[whiteboarrd-sdk]createAudioPlayer parentNode and config :",e,t),window.TalkAudioPlayer){if("string"==typeof e){var o=e;if(!(e=document.getElementById(o)))return void L.Logger.warning("The node id cannot be found by node id, and createAudioPlayer method cannot be performed , element id is "+o+".")}var n=this.whiteboardViewMap.get("default"),i=e||(n?n.getWhiteboardRootElement():document.body);this.audioPlayerView&&this.audioPlayerView.destroyView&&(this.audioPlayerView.destroyView(),this.audioPlayerView=void 0),this.audioPlayerView=new window.TalkAudioPlayer(i,"default",this,Object.deepAssign({},t,{languageType:n?n.getConfigration().languageType:"ch",isMobile:!!n&&n.getConfigration().isMobile},R.default.commonWhiteboard),n?n.getConfigration():void 0)}else L.Logger.error("The resource file for the audio player is not loaded and can't be executed with createAudioPlayer methods.")}},{key:"createVideoPlayer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(L.Logger.debug("[whiteboarrd-sdk]createVideoPlayer parentNode and config :",e,t),window.TalkVideoPlayer){if("string"==typeof e){var o=e;if(!(e=document.getElementById(o)))return void L.Logger.warning("The node id cannot be found by node id, and createVideoPlayer method cannot be performed , element id is "+o+".")}var n=this.whiteboardViewMap.get("default"),i=e||(n?n.getWhiteboardRootElement():document.body);this.videoPlayerView&&this.videoPlayerView.destroyView&&(this.videoPlayerView.destroyView(),this.videoPlayerView=void 0),this.videoPlayerView=new window.TalkVideoPlayer(i,"default",this,Object.deepAssign({},t,{languageType:n?n.getConfigration().languageType:"ch",isMobile:!!n&&n.getConfigration().isMobile},R.default.commonWhiteboard),n?n.getConfigration():void 0)}else L.Logger.error("The resource file for the audio player is not loaded and can't be executed with createVideoPlayer methods.")}},{key:"createDocumentRemark",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=arguments[2];if(L.Logger.debug("[whiteboarrd-sdk]createDocumentRemark parentNode and config :",e,t),window.TalkDocumentRemark){if("string"==typeof e){var n=e;if(!(e=document.getElementById(n)))return void L.Logger.warning("The node id cannot be found by node id, and createDocumentRemark method cannot be performed , element id is "+n+".")}var i=this.whiteboardViewMap.get(o),a=e||(i?i.getWhiteboardRootElement():document.body);if(this.documentRemarkViewList[o]&&this.documentRemarkViewList[o].destroyView&&(this.documentRemarkViewList[o].destroyView(),delete this.documentRemarkViewList[o]),this.documentRemarkViewList[o]=new window.TalkDocumentRemark(a,o,this,Object.deepAssign({},t,{languageType:i?i.getConfigration().languageType:"ch",isMobile:!!i&&i.getConfigration().isMobile,canRemark:!!i&&i.getConfigration().canRemark},R.default.commonWhiteboard),i?i.getConfigration():void 0),i){var r=this.getWhiteboardViewState(o);if(this.documentRemarkViewList[o]&&this.documentRemarkViewList[o].receiveActionCommand&&r&&Object.keys(r.page).length&&Object.keys(r.zoom).length){var s={viewState:r,updateViewState:{}};this.documentRemarkViewList[o].receiveActionCommand("viewStateUpdate",s)}}}else L.Logger.error("The resource file for the document tool bar is not loaded and can't be executed with createDocumentRemark methods.")}},{key:"createDocumentToolBar",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"default";if(L.Logger.debug("[whiteboarrd-sdk]createDocumentToolBar parentNode and config :",e,t),window.TalkDocumentToolbar){if("string"==typeof e){var n=e;if(!(e=document.getElementById(n)))return void L.Logger.warning("The node id cannot be found by node id, and createDocumentToolBar method cannot be performed , element id is "+n+".")}var i=this.whiteboardViewMap.get(o),a=e||(i?i.getWhiteboardRootElement():document.body);if(this.documentToolbarViewList[o]&&this.documentToolbarViewList[o].destroyView&&(this.documentToolbarViewList[o].destroyView(),delete this.documentToolbarViewList[o]),this.documentToolbarViewList[o]=new window.TalkDocumentToolbar(a,o,this,Object.deepAssign({},t,{languageType:i?i.getConfigration().languageType:"ch",isMobile:!!i&&i.getConfigration().isMobile,canRemark:!!i&&i.getConfigration().canRemark},R.default.commonWhiteboard),i?i.getConfigration():void 0),i){var r=this.getWhiteboardViewState(o);if(this.documentToolbarViewList[o]&&this.documentToolbarViewList[o].receiveActionCommand&&r&&Object.keys(r.page).length&&Object.keys(r.zoom).length){var s={viewState:r,updateViewState:{}};this.documentToolbarViewList[o].receiveActionCommand("viewStateUpdate",s)}}}else L.Logger.error("The resource file for the document tool bar is not loaded and can't be executed with createDocumentToolBar methods.")}},{key:"getWhiteboardViewState",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]getWhiteboardViewState ");var t=this.whiteboardViewMap.get(e);return t?t.getWhiteboardViewState():void 0}},{key:"getWhiteboardIntermediateLayerInstance",value:function(){return L.Logger.debug("[whiteboarrd-sdk]getWhiteboardIntermediateLayerInstance "),r.default}},{key:"switchDocAddress",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"default";if(L.Logger.debug("[whiteboarrd-sdk]call switchDocAddress method , docAddressKey is "+e),e&&"string"==typeof e){if(A.default.localStorageDocAddressKey=e,A.default.localStorageDocAddressKey&&""===M.default.getItem(A.default.docAddressList,A.default.localStorageDocAddressKey)&&""===M.default.getItem(A.default.laterAddressList,A.default.localStorageDocAddressKey)&&(A.default.protocol&&A.default.port&&(A.default.laterAddressList=[{protocol:A.default.protocol,hostname:A.default.localStorageDocAddressKey,port:A.default.port}]),A.default.docAddressList=[A.default.docAddress].concat(W(A.default.backupDocAddressList),W(A.default.laterAddressList))),A.default.docAddressKey!==e){var i=M.default.getItem(A.default.docAddressList,A.default.docAddressKey);A.default.docAddressKey=e,A.default.nowUseDocAddress=M.default.getItem(A.default.docAddressList,A.default.docAddressKey)||R.default.commonWhiteboard.docAddress,t&&this.setLocalStorageItem("tkDocAddressKey",A.default.docAddressKey);var a=this.whiteboardViewMap.get(n);a&&(a.reloadCurrentDocument(),a.sendActionCommand("docAddressUpdate",{docAddressList:[].concat(W(A.default.docAddressList)),docAddressKey:A.default.docAddressKey,oldDocAddress:i,nowDocAddress:A.default.docAddressList[A.default.docAddressKey]||R.default.commonWhiteboard.docAddress}))}else if(o){var r=this.whiteboardViewMap.get(n);r&&r.reloadCurrentDocument()}}else if(o){var s=this.whiteboardViewMap.get(n);s&&s.reloadCurrentDocument()}}},{key:"setLocalStorageItem",value:function(e,t){"mobile"===TK.SDKTYPE?this.room&&M.default.isFunction(this.room.setLocalStorageItem)&&this.room.setLocalStorageItem(e,t):M.default.setLocalStorageItem(e,t)}},{key:"getLocalStorageItem",value:function(e,t){if(M.default.isFunction(t))if("mobile"===TK.SDKTYPE){if(this.room&&M.default.isFunction(this.room.getLocalStorageItem))try{this.room.getLocalStorageItem(e,function(e){t(e)})}catch(e){L.Logger.error("[whiteboard-sdk]getLocalStorageItem error:",e)}}else t(M.default.getLocalStorageItem("tkDocAddressKey"))}},{key:"_executeSaveMsglistData",value:function(o){var n=this;this.saveMsglistData[o]&&this.whiteboardViewMap.get(o)&&(this.saveMsglistData[o].forEach(function(e,t){n.whiteboardViewMap.get(o).receiveEventRoomMsglist(e.name,e)}),delete this.saveMsglistData[o])}},{key:"_executeSavePubmsgData",value:function(o){var n=this;this.savePubmsgData[o]&&this.whiteboardViewMap.get(o)&&(this.savePubmsgData[o].forEach(function(e,t){n.whiteboardViewMap.get(o).receiveEventRoomPubmsg(e)}),delete this.savePubmsgData[o])}},{key:"_createWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3];if(L.Logger.debug("[whiteboarrd-sdk]_createWhiteboard  parentNode  instanceId  configration  and\treceiveActionCommand:",e,t,n,i),"string"==typeof e){var a=e;if(!(e=document.getElementById(a)))return void L.Logger.warning("The node id cannot be found by node id, and createWhiteboard method cannot be performed , element id is "+a+".")}this.pureWhiteboardFileinfoList[t]={fileid:0,companyid:"",filename:"whiteboard",uploaduserid:"",uploadusername:"",downloadpath:"",swfpath:"",filetype:"whiteboard",pagenum:1,dynamicppt:0,filecategory:0,fileprop:0};var r=void 0;this.awitWhiteboardConfigrationMap.has(t)?(r=this.awitWhiteboardConfigrationMap.get(t),this.awitWhiteboardConfigrationMap.delete(t)):r=Object.deepAssign({},R.default.defaultWhiteboard,R.default.commonWhiteboard);var s=Object.deepAssign({},r,n);this.whiteboardViewMap.has(t)&&this._destroyWhiteboard(t),this.whiteboardViewMap.set(t,new l.default(e,t,s,function(){"function"==typeof i&&i.apply(void 0,arguments)},this)),M.default.onElementResize(e,function(){o.updateWhiteboardSize(t)})}},{key:"_destroyWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";L.Logger.debug("[whiteboarrd-sdk]_destroyWhiteboard    instanceId  :",e),this.whiteboardViewMap.has(e)&&(this.whiteboardViewMap.get(e).destroyWhiteboardView(),this.whiteboardViewMap.delete(e)),this.awitWhiteboardConfigrationMap.has(e)&&this.awitWhiteboardConfigrationMap.delete(e)}},{key:"_isWhiteboardCorrelationSignalling",value:function(e){L.Logger.debug("[whiteboarrd-sdk]_isWhiteboardCorrelationSignalling    name  :",e);var t=!1;switch(e){case"ShowPage":case"ExtendShowPage":case"NewPptTriggerActionClick":case"ExtendNewPptTriggerActionClick":case"PptVolumeControl":case"ExtendPptVolumeControl":case"H5DocumentAction":case"ExtendH5DocumentAction":case"whiteboardMarkTool":case"ExtendWhiteboardMarkTool":t=!0}return t}},{key:"_windowResizeCallback",value:function(){var e=this;return L.Logger.debug("[whiteboarrd-sdk]_windowResizeCallback "),this.updateAllWhiteboardSize(),setTimeout(function(){e.updateAllWhiteboardSize(),setTimeout(function(){e.updateAllWhiteboardSize()},250)},50),!1}},{key:"_windowMessageCallback",value:function(e){L.Logger.debug("[whiteboarrd-sdk]_windowMessageCallback"),e=e||window.event;var t=!0,o=!1,n=void 0;try{for(var i,a=this.whiteboardViewMap.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.receiveWindowMessageEvent(e)}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}var r=!0,s=!1,l=void 0;try{for(var c,d=Object.values(this.documentToolbarViewList)[Symbol.iterator]();!(r=(c=d.next()).done);r=!0){var u=c.value;u&&u.receiveWindowMessageEvent(e)}}catch(e){s=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(s)throw l}}return!1}},{key:"_documentKeydownCallback",value:function(e){var t=this;switch(L.Logger.debug("[whiteboarrd-sdk]_documentKeydownCallback"),(e=e||window.event).keyCode){case 27:M.default.isFullScreenStatus()&&M.default.exitFullscreen()}var o=function(){if(!A.default.isSkipPageing&&t.whiteboardViewMap.has("default")&&t.whiteboardViewMap.get("default").getConfigration().isUseKeyboardPage&&!t.whiteboardViewMap.get("default").isWhiteboardTextEditing())switch(e.keyCode){case 37:t.whiteboardViewMap.get("default").prevPage();break;case 38:t.whiteboardViewMap.get("default").prevStep();break;case 39:t.whiteboardViewMap.get("default").nextPage();break;case 40:t.whiteboardViewMap.get("default").nextStep()}};return clearTimeout(this.documentKeydownTimer),this.documentKeydownDateTime&&500<(new Date).getTime()-this.documentKeydownDateTime?o():this.documentKeydownTimer=setTimeout(function(){o()},300),this.documentKeydownDateTime=(new Date).getTime(),!1}},{key:"_documentFullscreenchangeCallback",value:function(e){var t=this;L.Logger.debug("[whiteboarrd-sdk]_documentFullscreenchangeCallback");var o=!0,n=!1,i=void 0;try{for(var a,r=this.whiteboardViewMap.values()[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;if(M.default.isFullScreenStatus()){var l=s.getWhiteboardRootElement(),c=s.getConfigration().documentToolBarConfig.fullScreenElementId;c&&("string"==typeof c?document.getElementById(c)&&(l=document.getElementById(c)):l=c),M.default.getFullscreenElement()&&M.default.getFullscreenElement().id===l.id?s.changeFullScreenState(!0):s.changeFullScreenState(!1)}else s.changeFullScreenState(!1)}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}return this.videoPlayerView&&this.videoPlayerView.receiveEventFullScreenChange&&this.videoPlayerView.receiveEventFullScreenChange(e),this.updateAllWhiteboardSize(),setTimeout(function(){t.updateAllWhiteboardSize(),setTimeout(function(){t.updateAllWhiteboardSize()},250)},50),!1}},{key:"_registerEvent",value:function(){var e=this;L.Logger.debug("[whiteboarrd-sdk]_registerEvent");M.default.addEvent(window,"resize",this._windowResizeCallback.bind(this)),M.default.addEvent(window,"message",this._windowMessageCallback.bind(this)),M.default.addEvent(document,"keyup",this._documentKeydownCallback.bind(this)),M.default.addFullscreenchange(this._documentFullscreenchangeCallback.bind(this));var t,o,n,i=((n=o=t=void 0)!==document.hidden?(t="hidden",n="visibilitychange",o="visibilityState"):void 0!==document.mozHidden?(t="mozHidden",n="mozvisibilitychange",o="mozVisibilityState"):void 0!==document.msHidden?(t="msHidden",n="msvisibilitychange",o="msVisibilityState"):void 0!==document.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange",o="webkitVisibilityState"),{hidden:t,state:o,visibilityChange:n}),a=i.state,r=i.visibilityChange;M.default.addEvent(document,r,function(){if("visible"===document[a])return e.updateAllWhiteboardSize(),setTimeout(function(){e.updateAllWhiteboardSize(),setTimeout(function(){e.updateAllWhiteboardSize()},250)},50),!1},!1)}},{key:"_addRoomEvent",value:function(){L.Logger.debug("[whiteboarrd-sdk]_addRoomEvent"),this.room&&(this.room.removeBackupListerner&&this.room.removeBackupListerner(this.listernerBackupid),this.room.addEventListener("room-receiveActionCommand",this.reveiveEventRoomReceiveActionCommand.bind(this),this.listernerBackupid),this.room.addEventListener("room-pubmsg",this.receiveEventRoomPubmsg.bind(this),this.listernerBackupid),this.room.addEventListener("room-delmsg",this.receiveEventRoomDelmsg.bind(this),this.listernerBackupid),this.room.addEventListener("room-connected",this.receiveEventRoomConnected.bind(this),this.listernerBackupid),this.room.addEventListener("room-disconnected",this.receiveEventRoomDisconnected.bind(this),this.listernerBackupid),this.room.addEventListener("room-msglist",this.receiveEventRoomMsglist.bind(this),this.listernerBackupid),this.room.addEventListener("room-usermediastate-changed",this.reveiveEventRoomUsermediaorfilestateChanged.bind(this),this.listernerBackupid),this.room.addEventListener("room-userfilestate-changed",this.reveiveEventRoomUsermediaorfilestateChanged.bind(this),this.listernerBackupid),this.room.addEventListener("room-usermediaattributes-update",this.reveiveEventRoomUsermediaorfileattributesUpdate.bind(this),this.listernerBackupid),this.room.addEventListener("room-userfileattributes-update",this.reveiveEventRoomUsermediaorfileattributesUpdate.bind(this),this.listernerBackupid),this.room.addEventListener("room-error-notice",this.receiveEventRoomErrorNotice.bind(this),this.listernerBackupid))}},{key:"_forwardingStreamEvents",value:function(e,t){L.Logger.debug("[whiteboarrd-sdk]_forwardingStreamEvents handlerName and recvEventData:",e,t),this.audioPlayerView&&this.audioPlayerView[e]&&M.default.isFunction(this.audioPlayerView[e])&&this.audioPlayerView[e](t),this.videoPlayerView&&this.videoPlayerView[e]&&M.default.isFunction(this.videoPlayerView[e])&&this.videoPlayerView[e](t)}}]),n}(),m=["createMainWhiteboard","destroyMainWhiteboard","createExtendWhiteboard","destroyExtendWhiteboard","changeWhiteBoardConfigration","addPage","nextPage","prevPage","skipPage","nextStep","prevStep","enlargeWhiteboard","narrowWhiteboard","clear","undo","redo","fullScreen","exitFullScreen","resetWhiteboardData","updateWhiteboardSize","updateAllWhiteboardSize","resetAllWhiteboardData","resetPureWhiteboardTotalPage","changeDynamicPptVolume","openDocumentRemark","closeDocumentRemark","getWhiteboardIntermediateLayerInstance","changeCommonWhiteBoardConfigration","registerRoomDelegate","changeDocument","stopShareLocalMedia","switchDocAddress","getVersion","openRemoteDocument","noticeWhiteboardActionCommand"],f=["createMainWhiteboard","destroyMainWhiteboard","changeDocument","changeWhiteBoardConfigration","addPage","nextPage","prevPage","skipPage","nextStep","prevStep","enlargeWhiteboard","narrowWhiteboard","clear","undo","redo","fullScreen","exitFullScreen","resetWhiteboardData","registerRoomDelegate","changeCommonWhiteBoardConfigration","getVersion","openRemoteDocument","noticeWhiteboardActionCommand"];function s(e,t,o){var n={className:"TKWhiteBoardManager"},i=new h(e,t,o),a=o?m:f,r=function(e){n[e]=function(){return i[e].apply(i,arguments)}},s=!0,l=!1,c=void 0;try{for(var d,u=a[Symbol.iterator]();!(s=(d=u.next()).done);s=!0){r(d.value)}}catch(e){l=!0,c=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw c}}return n}window.TKWhiteBoardManager=s,o.TKWhiteBoardManager=s,o.default=s},{"./intermediateLayer/WhiteboardIntermediateLayer":335,"./utils/Configuration":336,"./utils/Constant":337,"./utils/Global":339,"./utils/Utils":343,"./view/containers/AudioPlayer":349,"./view/containers/DocumentRemark":350,"./view/containers/DocumentToolbar":351,"./view/containers/VideoPlayer":353,"./view/containers/WhiteboardView":354}],333:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var _=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}();var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultProductionOptions={synchronizationDynamicPpt:!0,dynamicPptActionClick:!0,maxForceReloadNumber:10,forceReloadInterval:6e4,languageType:"ch"},this.dynamicPptInstanceIDPrefix="dynamicPpt_",this.dynamicPptInstanceDefaultID="dynamicPpt_default",this.dynamicPptInstanceStore={},this.uniqueDynamicPpt=!1,this.specialDynamicPptInstanceIDPrefix="specialDynamicPptInstanceIDPrefix_"}return n(e,[{key:"productionDynamicPpt",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.dynamicPptElementId,n=t.productionOptions,i=void 0===n?{}:n,a=t.handler,r=void 0===a?{}:a,s=t.id;if(o){var l=this._getDynamicPptInstanceID(s),c=this.getDynamicPptInstanceByID(l);if(c)return L.Logger.error("The production dynamicPpt(dynamicPptInstanceID:"+l+") fails, the dynamicPpt already exists!"),c;c={},i=Object.deepAssign({},this.defaultProductionOptions,i);var d=document.getElementById(o);if(!d)return L.Logger.error("DynamicPpt elements do not exist , element id is:"+o+"!"),c;var u=document.createElement("div"),h=o+"_dynamicPptInstance";u.className="dynamicPpt-instance-element",u.id=h,u.style.width="100%",u.style.height="100%";var m=document.createElement("iframe"),f=o+"_dynamicPptIframe";m.className="dynamicPpt-iframe-element",m.id=f,m.name=o+"_dynamicPptIframeName",m.allowFullScreen=!0,m.frameborder=0,m.scrolling="no",m.allow="autoplay",m.width="100%",m.height="100%",m.style.width="100%",m.style.height="100%",m.style.border="none",m.style.padding="0",m.style.margin="0",u.appendChild(m);var p=document.createElement("div"),g=o+"_dynamicPptLoading";p.className="dynamicPpt-loading-element talkcloud-loading",p.id=g;var v=document.createElement("span");v.className="tk-loading-reload-number",v.style.display="none",p.appendChild(v),u.appendChild(p);var y=document.createElement("div"),b=o+"_dynamicPptAction";return y.className="dynamicPpt-action-element talkcloud-action",y.style.width="100%",y.style.height="100%",y.style.zIndex=98,y.style.display=i.dynamicPptActionClick?"none":"block",y.style.position="absolute",y.style.top="0",y.style.left="0",y.id=b,u.appendChild(y),u.appendChild(y),d.appendChild(u),(this.dynamicPptInstanceStore[l]=c).dynamicPptInstanceID=l,c.handler={},c.handler.sendSignallingToServer=r.sendSignallingToServer,c.handler.delSignallingToServer=r.delSignallingToServer,c.handler.receiveActionCommandCallback=r.receiveActionCommandCallback,c.dynamicPptElementId=o,c.dynamicPptElement=d,c.dynamicPptInstanceElementId=h,c.dynamicPptInstanceElement=u,c.dynamicPptIframeElementId=f,c.dynamicPptIframeElement=m,c.dynamicPptLoadingElementId=g,c.dynamicPptLoadingElement=p,c.dynamicPptReloadNumberElement=v,c.dynamicPptActionElementId=b,c.dynamicPptActionElement=y,c.id=s,c.remoteData={},c.awitExecutePostMessageArray=[],c.dynamicPptActionJson={},c.associatedMsgID=i.associatedMsgID,c.associatedUserID=i.associatedUserID,c.synchronizationDynamicPpt=i.synchronizationDynamicPpt,c.dynamicPptActionClick=i.dynamicPptActionClick,c.forceReloadNumber=0,c.maxForceReloadNumber=i.maxForceReloadNumber,c.forceReloadInterval=i.forceReloadInterval,c.isShowReloadFileTip=i.isShowReloadFileTip,c.languageType=i.languageType,c.againreconnectNum=0,i.againreconnectElementParentNode&&(c.againreconnectElementParentNode=i.againreconnectElementParentNode),c.dynamicPptIframeElement.onload=function(){clearTimeout(c.forceReloadNumberTimer),c.forceReloadNumberTimer=null,c.iframeSrc&&!c.isLoadFinished&&c.forceReloadNumber<c.maxForceReloadNumber&&e._iframeReloadMonitor(c,"dynamicPptLoaded")},c}L.Logger.error("dynamicPptElementId is required!")}},{key:"destroyDynamicPptInstance",value:function(e){var t=this.getDynamicPptInstanceByID(e);t?this._destroyDynamicPptInstance(t):L.Logger.error("[destroy]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"receiveWindowMessageEvent",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?t.source===o.dynamicPptIframeElement.contentWindow&&this._receiveWindowMessageEvent(e,o,t):L.Logger.error("[receiveWindowMessageEvent]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"changeDynamicPptSize",value:function(e){var t=this,o=this.getDynamicPptInstanceByID(e);if(o){var n={action:"resizeHandler",width:o.dynamicPptElement.clientWidth,height:o.dynamicPptElement.clientHeight};this._postMessage(o,n),setTimeout(function(){var e={action:"resizeHandler",width:o.dynamicPptElement.clientWidth,height:o.dynamicPptElement.clientHeight};t._postMessage(o,e)},250)}else L.Logger.error("[changeDynamicPptSize]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"hasDynamicPptById",value:function(e){var t=this.getDynamicPptInstanceByID(e);return null!=t}},{key:"setDynamicPptIframeSrc",value:function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},a=this.getDynamicPptInstanceByID(e);if(a){var r="";a.isLoadFinished=!1,a.awitExecutePostMessageArray.length=0,clearTimeout(a.forceReloadNumberTimer),a.forceReloadNumberTimer=null,a.forceReloadNumber=i.forceReloadNumber||0;var s=n.fileid,l=n.pptslide,c=n.pptstep;if(a.playback=i.playback,a.againreconnectElement&&(a.againreconnectElement.parentNode&&a.againreconnectElement.parentNode.removeChild(a.againreconnectElement),a.againreconnectElement=void 0),s==a.fileid&&t&&i.isAgainreconnect||(a.againreconnectNum=0),a.fileid=s,a.awitJumpToAnimPptslide=l,a.awitJumpToAnimPptstep=c,t){r=t;var d=!1,u=!0,h=!1,m=void 0;try{for(var f,p=Object.entries(o)[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var g=f.value,v=_(g,2),y=v[0],b=v[1];null!=b&&(d?r+="&"+y+"="+b:(d=!0,r+=(/\?/g.test(r)?"&":"?")+y+"="+b))}}catch(e){h=!0,m=e}finally{try{!u&&p.return&&p.return()}finally{if(h)throw m}}a.iframeSrc=r,this._showLoading(a),this._iframeReloadMonitor(a,"setDynamicPptIframeSrc")}else a.iframeSrc=r;i.isAgainreconnect&&(a.dynamicPptIframeElement.src=""),a.dynamicPptIframeElement.src=r,L.Logger.debug("set dynamic ppt src:",r)}else L.Logger.error("[setDynamicPptIframeSrc]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"getIframeSrc",value:function(e){var t=this.getDynamicPptInstanceByID(e);if(t)return t.iframeSrc;L.Logger.error("[getIframeSrc]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"jumpToAnimation",value:function(e,t,o,n,i,a){var r=this.getDynamicPptInstanceByID(e);r?this._jumpToAnimation(r,t,o,n,i,a):L.Logger.error("[jumpToAnimation]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"nextSlide",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?o.isLoadFinished?o.remoteData&&o.remoteData.pptslide>=o.remoteData.pptslidesCount?L.Logger.warning("[nextPage]dynamic ppt is on the last page , cannot execute nextPage method."):this._postMessage(o,{action:"gotoNextSlide",autoStart:t}):L.Logger.info("[nextPage]dynamic ppt is not load finished  , cannot execute nextPage method"):L.Logger.error("[nextPage]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"prevSlide",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?o.isLoadFinished?o.remoteData&&o.remoteData.pptslide<=1?L.Logger.warning("[prevPage]dynamic ppt is  on page 1 , cannot execute prevPage method."):this._postMessage(o,{action:"gotoPreviousSlide",autoStart:t}):L.Logger.info("[prevPage]dynamic ppt is not load finished  , cannot execute prevPage method"):L.Logger.error("[prevPage]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"nextStep",value:function(e){var t=this.getDynamicPptInstanceByID(e);t?t.isLoadFinished?this._postMessage(t,{action:"gotoNextStep"}):L.Logger.info("[nextStep]dynamic ppt is not load finished  , cannot execute nextStep method"):L.Logger.error("[nextStep]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"prevStep",value:function(e){var t=this.getDynamicPptInstanceByID(e);t?t.isLoadFinished?this._postMessage(t,{action:"gotoPreviousStep"}):L.Logger.info("[prevStep]dynamic ppt is not load finished  , cannot execute prevStep method"):L.Logger.error("[prevStep]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"updateDynamicPptProperty",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?(void 0!==t.associatedMsgID&&(o.associatedMsgID=t.associatedMsgID),void 0!==t.associatedUserID&&(o.associatedUserID=t.associatedUserID),void 0!==t.synchronizationDynamicPpt&&(o.synchronizationDynamicPpt=t.synchronizationDynamicPpt,this._postMessage(o,{action:"changePublishDynamicPptMediaPermission_video",publishDynamicPptMediaPermission_video:o.synchronizationDynamicPpt})),void 0!==t.dynamicPptActionClick&&(o.dynamicPptActionClick=t.dynamicPptActionClick,o.dynamicPptActionElement.style.display=o.dynamicPptActionClick?"none":"block",this._postMessage(o,{action:"changeDynamicPptActionClick",dynamicPptActionClick:o.dynamicPptActionClick})),void 0!==t.canPage&&this._postMessage(o,{action:"changeNewpptPagingPage",newpptPagingPage:t.canPage}),void 0!==t.isShowReloadFileTip&&(o.isShowReloadFileTip=t.isShowReloadFileTip),void 0!==t.languageType&&(o.languageType=t.languageType,this._isShowReloadFileShowReloadNumber(o),o.againreconnectElement&&this._setAgainreconnectInfo(o))):L.Logger.error("[updateDynamicPptProperty]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"postMessageDynamicPptTriggerAction",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);if(o){var n=t.slide,i=t.fileid;o.fileid!=i||o.remoteData.pptslide!==n+1?(o.dynamicPptActionJson[n+1]=o.dynamicPptActionJson[n+1]||[],o.dynamicPptActionJson[n+1].push(t)):this._postMessage(o,t)}else L.Logger.error("[postMessageDynamicPptTriggerAction]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"postMessage",value:function(e,t){var o=this.getDynamicPptInstanceByID(e);o?this._postMessage(o,t):L.Logger.error("[postMessage]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"isLoadFinished",value:function(e){var t=this.getDynamicPptInstanceByID(e);if(t)return t.isLoadFinished;L.Logger.error("[isLoadFinished]There are no dynamic ppt Numbers that belong to id "+e)}},{key:"getDynamicPptInstanceByID",value:function(e){var t=this._getDynamicPptInstanceID(e);return this.dynamicPptInstanceStore[t]}},{key:"_jumpToAnimation",value:function(e,t,o,n,i,a){e.isLoadFinished&&(e.remoteData.pptslide>e.remoteData.pptslidesCount||e.remoteData.pptslide<1)&&(e.remoteData.pptslide>e.remoteData.pptslidesCount&&(t=e.remoteData.pptslidesCount,e.remoteData.pptslide=e.remoteData.pptslidesCount),e.remoteData.pptslide<1&&(t=1,e.remoteData.pptslide=1),e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("dynamicPptSlideChange",{id:e.id,updateFileData:{pptslide:e.remoteData.pptslide,pptstep:e.remoteData.pptstep,currpage:e.remoteData.pptslide,steptotal:e.remoteData.pptstepTotal,fileid:e.fileid,pagenum:e.remoteData.pptslidesCount}}));var r={action:"jumpToAnim",data:{slide:t,step:o,timeOffset:i,autoStart:a,initiative:n}};this._postMessage(e,r)}},{key:"_postMessage",value:function(e,t){if(e.isLoadFinished)try{if(e.dynamicPptIframeElement&&e.dynamicPptIframeElement.src){var o={source:"tk_dynamicPPT",data:t};o=JSON.stringify(o),e.dynamicPptIframeElement&&e.dynamicPptIframeElement.contentWindow&&e.dynamicPptIframeElement.contentWindow.postMessage&&(L.Logger.debug("[_postMessage]dynamic ppt postMessage instanceId is "+e.id+",sendData:"+o),e.dynamicPptIframeElement.contentWindow.postMessage(o,"*"))}}catch(e){L.Logger.error("[_postMessage] dynamic ppt postMessage error:",e)}else e.awitExecutePostMessageArray.push(t)}},{key:"_showLoading",value:function(e){e.dynamicPptLoadingElement.style.display="block",this._isShowReloadFileShowReloadNumber(e)}},{key:"_hideLoading",value:function(e){e.dynamicPptLoadingElement.style.display="none",this._isShowReloadFileShowReloadNumber(e)}},{key:"_getDynamicPptInstanceID",value:function(e){var t=this.uniqueDynamicPpt||null==e?this.dynamicPptInstanceDefaultID:this.dynamicPptInstanceIDPrefix+e;e&&"string"==typeof e&&(new RegExp(this.specialDynamicPptInstanceIDPrefix,"g").test(e)&&(t=e));return t}},{key:"_destroyDynamicPptInstance",value:function(e){var t=e.dynamicPptInstanceID,o=e.dynamicPptElement;o?o.innerHTML="":L.Logger.warning("[destroy] dynamicPpt elements do not exist , element id is:"+e.dynamicPptElementId+"!");var n=!0,i=!1,a=void 0;try{for(var r,s=Object.keys(e)[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value;e[l]=null,delete e[l]}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}this.dynamicPptInstanceStore[t]=null,delete this.dynamicPptInstanceStore[t]}},{key:"_receiveWindowMessageEvent",value:function(e,t,o){var n=this;if(o.data){var i=void 0,a=void 0;try{i=(a=JSON.parse(o.data)).data}catch(e){return void L.Logger.warning("dynamic ppt receive iframe message data can't be converted to JSON , iframe data:",o.data)}if(a&&"tk_dynamicPPT"===a.source){L.Logger.debug("[dynamicPpt]receive remote iframe data form "+o.origin+":",o);switch(i.action){case"initEvent":this._handleIframeMessage_initEvent(t,i);break;case"slideChangeEvent":case"stepChangeEvent":this._handleIframeMessage_slideOrStepChangeEvent(t,i,i.action);break;case"autoPlayVideoInNewPpt":this._handleIframeMessage_autoPlayVideoInNewPpt(t,i);break;case"clinetAudioPlayer":this._handleIframeMessage_autoPlayAudioInNative(t,i);break;case"clickNewpptTriggerEvent":this._handleIframeMessage_clickNewpptTriggerEvent(e,t,i);break;case"allVideoAndAudio":case"clickLink":break;case"againReconnect":if(L.Logger.warning("[dynamic ppt]again reconnect info from dynamic ppt inner, again reconnect number is "+t.againreconnectNum),t.againreconnectNum++,t.againreconnectNum<=1)t.handler&&t.handler.receiveActionCommandCallback&&t.handler.receiveActionCommandCallback("reloadCurrentDocument",{id:t.id,iframeSrc:t.iframeSrc,fileid:t.fileid,forceReloadNumber:t.forceReloadNumber,isAgainreconnect:!0});else{if(t.againreconnectElement&&t.againreconnectElement.parentNode&&t.againreconnectElement.parentNode.removeChild(t.againreconnectElement),t.playback)return;t.againreconnectElement=document.createElement("div"),t.againreconnectElement.className="againreconnect-container";var r=document.createElement("div");r.className="againreconnect-box";var s=document.createElement("span");s.className="top-box title";var l=document.createElement("span");l.className="middle-box point-icon";var c=document.createElement("span");c.className="bottom-box ok-container";var d=document.createElement("button");d.className="ok-btn",d.onclick=function(){n._postMessage(t,{action:"userTriggerAudio"}),t.againreconnectElement&&t.againreconnectElement.parentNode&&t.againreconnectElement.parentNode.removeChild(t.againreconnectElement),t.againreconnectElement=void 0},d.ontouchend=function(){n._postMessage(t,{action:"userTriggerAudio"}),t.againreconnectElement&&t.againreconnectElement.parentNode&&t.againreconnectElement.parentNode.removeChild(t.againreconnectElement),t.againreconnectElement=void 0},c.appendChild(d),r.appendChild(s),r.appendChild(l),r.appendChild(c),t.againreconnectElement.appendChild(r),(t.againreconnectElementParentNode||t.dynamicPptInstanceElement).appendChild(t.againreconnectElement),this._setAgainreconnectInfo(t)}}}}}},{key:"_handleIframeMessage_initEvent",value:function(e,t){if(clearTimeout(e.forceReloadNumberTimer),e.forceReloadNumberTimer=null,e.remoteData.pptview=t.view,e.remoteData.pptslidesCount=t.slidesCount,e.remoteData.pptslide=t.slide+1,e.remoteData.pptstep=t.step,e.remoteData.pptstepTotal=t.stepTotal,e.handler&&e.handler.receiveActionCommandCallback&&(e.handler.receiveActionCommandCallback("dynamicPptSlideChange",{id:e.id,updateFileData:{pptslide:e.remoteData.pptslide,pptstep:e.remoteData.pptstep,currpage:e.remoteData.pptslide,steptotal:e.remoteData.pptstepTotal,fileid:e.fileid,pagenum:e.remoteData.pptslidesCount}}),e.handler.receiveActionCommandCallback("updateWhiteboardWatermarkImageScale",{id:e.id,scale:e.remoteData.pptview.width/e.remoteData.pptview.height}),e.handler.receiveActionCommandCallback("dynamicPptLoadEnd",{id:e.id,scale:e.remoteData.pptview.width/e.remoteData.pptview.height,reloadNumber:e.forceReloadNumber,success:!0})),e.isLoadFinished||(e.isLoadFinished=!0,void 0!==e.awitJumpToAnimPptslide&&(this._jumpToAnimation(e,e.awitJumpToAnimPptslide,e.awitJumpToAnimPptstep),e.awitJumpToAnimPptslide=void 0,e.awitJumpToAnimPptstep=void 0,delete e.awitJumpToAnimPptslide,delete e.awitJumpToAnimPptstep)),e.awitExecutePostMessageArray&&0<e.awitExecutePostMessageArray.length){var o=!0,n=!1,i=void 0;try{for(var a,r=e.awitExecutePostMessageArray[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;this._postMessage(e,s)}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}e.awitExecutePostMessageArray.length=0,this._hideLoading(e)}},{key:"_handleIframeMessage_slideOrStepChangeEvent",value:function(e,t,o){if(e.remoteData.pptslide=t.slide+1,e.remoteData.pptstep=t.step,e.remoteData.pptstepTotal=t.stepTotal,e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("slideChangeEvent"===o?"dynamicPptSlideChange":"dynamicPptStepChange",{id:e.id,updateFileData:{pptslide:e.remoteData.pptslide,pptstep:e.remoteData.pptstep,currpage:e.remoteData.pptslide,steptotal:e.remoteData.pptstepTotal,fileid:e.fileid,pagenum:e.remoteData.pptslidesCount}}),0<Object.keys(e.dynamicPptActionJson).length&&e.dynamicPptActionJson[e.remoteData.pptslide]&&0!==e.dynamicPptActionJson[e.remoteData.pptslide].length){var n=!0,i=!1,a=void 0;try{for(var r,s=e.dynamicPptActionJson[e.remoteData.pptslide][Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value;this._postMessage(e,l)}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}e.dynamicPptActionJson[e.remoteData.pptslide].length=0,delete e.dynamicPptActionJson[e.remoteData.pptslide]}t.externalData&&t.externalData.initiative&&(this._sendSignalling_ShowPage(e,{data:{action:"slideChangeEvent"===o?"slide":"step"}}),e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("closeAllSelectBox",{id:e.id}))}},{key:"_handleIframeMessage_autoPlayVideoInNewPpt",value:function(e,t){if(e.handler&&e.handler.receiveActionCommandCallback){var o=t.isvideo,n=t.url,i=t.fileid,a={id:e.id,url:n,video:o,audio:!0,attributes:{source:"dynamicPPT",filename:"",fileid:i}};e.handler.receiveActionCommandCallback("publishDymanicPptNetworkMedia",a)}}},{key:"_handleIframeMessage_autoPlayAudioInNative",value:function(e,t){if(e.handler&&e.handler.receiveActionCommandCallback){var o=t.isPlay,n=t.url,i=t.fileid,a=function(e,t){var o={};for(var n in e)0<=t.indexOf(n)||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}(t,["isPlay","url","fileid"]),r={id:e.id,url:n,isPlay:o,audio:!0,attributes:{source:"dynamicPPT",filename:"",fileid:i,type:"audio",other:a,currentPage:e.remoteData.pptslide}};e.handler.receiveActionCommandCallback("publishDymanicPptNetworkAudio",r)}}},{key:"_handleIframeMessage_clickNewpptTriggerEvent",value:function(e,t,o){o.externalData&&o.externalData.initiative&&(o.fileid=t.fileid,o.sourceInstanceId=e,this._sendSignallingToServer(t,{name:"default"===e?"NewPptTriggerActionClick":"ExtendNewPptTriggerActionClick",id:"default"===e?"NewPptTriggerActionClick":"NewPptTriggerActionClick_"+e,toID:"__allExceptSender",data:o}),t.handler&&t.handler.receiveActionCommandCallback&&t.handler.receiveActionCommandCallback("closeAllSelectBox",{id:t.id}))}},{key:"_sendSignallingToServer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.name,n=t.id,i=t.toID,a=void 0===i?"__all":i,r=t.data,s=t.do_not_save,l=t.expiresabs,c=t.associatedMsgID,d=t.associatedUserID;e.handler&&e.handler.sendSignallingToServer&&(c=c||e.associatedMsgID,d=d||e.associatedUserID,e.handler.sendSignallingToServer(o,n,a,r,s,l,c,d))}},{key:"_iframeReloadMonitor",value:function(e,t){var o=this;clearTimeout(e.forceReloadNumberTimer),e.forceReloadNumberTimer=null,e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber<e.maxForceReloadNumber&&(e.forceReloadNumberTimer=setTimeout(function(){e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber<e.maxForceReloadNumber&&(e.forceReloadNumber++,o._isShowReloadFileShowReloadNumber(e),e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("reloadDynamicPptIframeSrc",{id:e.id,iframeSrc:e.iframeSrc,source:t,fileid:e.fileid,forceReloadNumber:e.forceReloadNumber}))},e.forceReloadInterval)),e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber>=e.maxForceReloadNumber&&e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("reloadDynamicPptFail",{id:e.id,forceReloadNumber:e.maxForceReloadNumber,success:!1})}},{key:"_sendSignalling_ShowPage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("sendSignalling_ShowPage",{id:e.id,updatePubmsgData:t})}},{key:"_isShowReloadFileShowReloadNumber",value:function(e){e.dynamicPptReloadNumberElement.style.display=e.isShowReloadFileTip&&e.forceReloadNumber?"inline-table":"none";var t="当前网络不稳定，正在尝试重新打开课件……第"+e.forceReloadNumber+"次";switch(e.languageType){case"tw":t="當前網絡不穩定，正在嘗試重新打開課件……第"+e.forceReloadNumber+"次";break;case"en":t="The network is unstable , Trying to reopen the courseware ..."+e.forceReloadNumber;break;case"ja":t="ネットが不安定です、教材を開きなおしています"+e.forceReloadNumber+"次"}e.dynamicPptReloadNumberElement.innerHTML=t||""}},{key:"_setAgainreconnectInfo",value:function(e){if(e.againreconnectElement){var t=e.againreconnectElement.getElementsByClassName("top-box")[0],o=e.againreconnectElement.getElementsByClassName("ok-btn")[0];if(t||o){var n="加载有点慢......",i="点此继续";switch(e.languageType){case"tw":n="加載有點慢......",i="點此繼續";break;case"en":n="Loading a bit slow...",i="Click to continue";break;case"ja":n="インストールに時間がかかっています。...",i="続行する"}t&&(t.innerHTML=n),o&&(o.innerHTML=i)}}}}]),e}());o.default=i},{}],334:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var y=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}();var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultProductionOptions={synchronizationH5Document:!0,h5DocumentActionClick:!0,maxForceReloadNumber:10,forceReloadInterval:6e4,languageType:"ch"},this.h5DocumentInstanceIDPrefix="h5Document_",this.h5DocumentInstanceDefaultID="h5Document_default",this.h5DocumentInstanceStore={},this.uniqueH5Document=!1,this.specialH5DocumentInstanceIDPrefix="specialH5DocumentInstanceIDPrefix_"}return n(e,[{key:"productionH5Document",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=t.h5DocumentElementId,n=t.productionOptions,i=void 0===n?{}:n,a=t.handler,r=void 0===a?{}:a,s=t.id;if(o){var l=this._getH5DocumentInstanceID(s),c=this.getH5DocumentInstanceByID(l);if(c)return L.Logger.error("The production h5Document(h5DocumentInstanceID:"+l+") fails, the h5Document already exists!"),c;c={},i=Object.deepAssign({},this.defaultProductionOptions,i);var d=document.getElementById(o);if(!d)return L.Logger.error("H5Document elements do not exist , element id is:"+o+"!"),c;var u=document.createElement("div"),h=o+"_h5DocumentInstance";u.className="h5Document-instance-element",u.id=h,u.style.width="100%",u.style.height="100%";var m=document.createElement("iframe"),f=o+"_h5DocumentIframe";m.className="h5Document-iframe-element",m.id=f,m.name=o+"_h5DocumentIframeName",m.allowFullScreen=!0,m.allow="autoplay",m.frameborder=0,m.scrolling="no",m.width="100%",m.height="100%",m.style.width="100%",m.style.height="100%",m.style.border="none",m.style.padding="0",m.style.margin="0",u.appendChild(m);var p=document.createElement("div"),g=o+"_h5DocumentLoading";p.className="h5Document-loading-element talkcloud-loading",p.id=g;var v=document.createElement("span");v.className="tk-loading-reload-number",v.style.display="none",p.appendChild(v),u.appendChild(p);var y=document.createElement("div"),b=o+"_h5DocumentAction";return y.className="h5Document-action-element talkcloud-action",y.style.width="100%",y.style.height="100%",y.style.zIndex=98,y.style.display=i.h5DocumentActionClick?"none":"block",y.style.position="absolute",y.style.top="0",y.style.left="0",y.id=b,u.appendChild(y),u.appendChild(y),d.appendChild(u),(this.h5DocumentInstanceStore[l]=c).h5DocumentInstanceID=l,c.handler={},c.handler.sendSignallingToServer=r.sendSignallingToServer,c.handler.delSignallingToServer=r.delSignallingToServer,c.handler.receiveActionCommandCallback=r.receiveActionCommandCallback,c.h5DocumentElementId=o,c.h5DocumentElement=d,c.h5DocumentInstanceElementId=h,c.h5DocumentInstanceElement=u,c.h5DocumentIframeElementId=f,c.h5DocumentIframeElement=m,c.h5DocumentLoadingElementId=g,c.h5DocumentLoadingElement=p,c.h5DocumentReloadNumberElement=v,c.h5DocumentActionElementId=b,c.h5DocumentActionElement=y,c.id=s,c.awitExecutePostMessageArray=[],c.h5DocumentActionJson={},c.associatedMsgID=i.associatedMsgID,c.associatedUserID=i.associatedUserID,c.synchronizationH5Document=i.synchronizationH5Document,c.h5DocumentActionClick=i.h5DocumentActionClick,c.forceReloadNumber=0,c.maxForceReloadNumber=i.maxForceReloadNumber,c.forceReloadInterval=i.forceReloadInterval,c.isShowReloadFileTip=i.isShowReloadFileTip,c.languageType=i.languageType,c.h5DocumentIframeElement.onload=function(){clearTimeout(c.forceReloadNumberTimer),c.forceReloadNumberTimer=null,c.iframeSrc&&!c.isLoadFinished&&c.forceReloadNumber<c.maxForceReloadNumber&&e._iframeReloadMonitor(c,"h5DocumentLoaded")},c}L.Logger.error("h5DocumentElementId is required!")}},{key:"destroyH5DocumentInstance",value:function(e){var t=this.getH5DocumentInstanceByID(e);t?this._destroyH5DocumentInstance(t):L.Logger.error("[destroy]There are no h5 document Numbers that belong to id "+e)}},{key:"receiveWindowMessageEvent",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);o?t.source===o.h5DocumentIframeElement.contentWindow&&this._receiveWindowMessageEvent(e,o,t):L.Logger.error("[receiveWindowMessageEvent]There are no h5 document Numbers that belong to id "+e)}},{key:"hasH5DocumentById",value:function(e){var t=this.getH5DocumentInstanceByID(e);return null!=t}},{key:"setH5DocumentIframeSrc",value:function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},a=this.getH5DocumentInstanceByID(e);if(a){var r="";a.isLoadFinished=!1,a.isReceivePagenum=!1,clearTimeout(a.h5DocumentActionTimer),a.awitExecutePostMessageArray.length=0,clearTimeout(a.forceReloadNumberTimer),a.forceReloadNumberTimer=null,a.forceReloadNumber=i.forceReloadNumber||0;var s=n.fileid;if(a.fileid=s,t){r=t;var l=!1,c=!0,d=!1,u=void 0;try{for(var h,m=Object.entries(o)[Symbol.iterator]();!(c=(h=m.next()).done);c=!0){var f=h.value,p=y(f,2),g=p[0],v=p[1];l?r+="&"+g+"="+v:(l=!0,r+=(/\?/g.test(r)?"&":"?")+g+"="+v)}}catch(e){d=!0,u=e}finally{try{!c&&m.return&&m.return()}finally{if(d)throw u}}a.iframeSrc=r,this._showLoading(a),this._iframeReloadMonitor(a,"setH5DocumentIframeSrc")}else a.iframeSrc=r,this._hideLoading(a);a.h5DocumentIframeElement.src=r,L.Logger.debug("set h5 document src:",r)}else L.Logger.error("[setH5DocumentIframeSrc]There are no h5 document Numbers that belong to id "+e)}},{key:"getIframeSrc",value:function(e){var t=this.getH5DocumentInstanceByID(e);if(t)return t.iframeSrc;L.Logger.error("[getIframeSrc]There are no h5 document Numbers that belong to id "+e)}},{key:"jumpToPage",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);o?this._jumpToPage(o,t):L.Logger.error("[jumpToPage]There are no h5 document Numbers that belong to id "+e)}},{key:"nextPage",value:function(e){var t=this.getH5DocumentInstanceByID(e);if(t)if(t.isLoadFinished){var o=this._getWhiteboardFiledata(t);if(o&&o.currpage>=o.pagenum)L.Logger.warning("[nextPage]h5 document is on the last page , cannot execute nextPage method.");else{var n={currpage:o.currpage+1};this._postMessage(t,{method:"onJumpPage",toPage:n.currpage}),this._saveFiledataAndLoadCurrpageWhiteboardData(t,n),this._sendSignalling_ShowPage(t)}}else L.Logger.info("[nextPage]h5 document is not load finished  , cannot execute nextPage method");else L.Logger.error("[nextPage]There are no h5 document Numbers that belong to id "+e)}},{key:"prevPage",value:function(e){var t=this.getH5DocumentInstanceByID(e);if(t)if(t.isLoadFinished){var o=this._getWhiteboardFiledata(t);if(o&&o.currpage<=1)L.Logger.warning("[nextPage]h5 document is on page 1, cannot execute prevPage method.");else{var n={currpage:o.currpage-1};this._postMessage(t,{method:"onJumpPage",toPage:n.currpage}),this._saveFiledataAndLoadCurrpageWhiteboardData(t,n),this._sendSignalling_ShowPage(t)}}else L.Logger.info("[prevPage]h5 document is not load finished  , cannot execute prevPage method");else L.Logger.error("[nextPage]There are no h5 document Numbers that belong to id "+e)}},{key:"skipPage",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);if(o)if(o.isLoadFinished){var n=this._getWhiteboardFiledata(o);n&&t>n.pagenum&&(L.Logger.info("[skipPage]h5 document skip to page exceeds the maximum number of pages , change skip page  to 5(max page number)."),t=n.pagenum),t<1&&(L.Logger.info("[skipPage]h5 document skip to page less than the minimum page , change skip page  to 1(min page number)."),t=1),this._saveFiledataAndLoadCurrpageWhiteboardData(o,{currpage:t}),this._jumpToPage(o,t),this._sendSignalling_ShowPage(o)}else L.Logger.info("[skipPage]h5 document is not load finished  , cannot execute skipPage method");else L.Logger.error("[skipPage]There are no h5 document Numbers that belong to id "+e)}},{key:"updateH5DocumentProperty",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);o?(void 0!==t.associatedMsgID&&(o.associatedMsgID=t.associatedMsgID),void 0!==t.associatedUserID&&(o.associatedUserID=t.associatedUserID),void 0!==t.synchronizationH5Document&&(o.synchronizationH5Document=t.synchronizationH5Document),void 0!==t.h5DocumentActionClick&&(o.h5DocumentActionClick=t.h5DocumentActionClick,o.h5DocumentActionElement.style.display=o.h5DocumentActionClick?"none":"block"),void 0!==t.isShowReloadFileTip&&(o.isShowReloadFileTip=t.isShowReloadFileTip),void 0!==t.languageType&&(o.languageType=t.languageType,this._isShowReloadFileShowReloadNumber(o))):L.Logger.error("[updateH5DocumentProperty]There are no h5 document Numbers that belong to id "+e)}},{key:"postMessageH5DocumentTriggerAction",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);if(o){var n=this._getWhiteboardFiledata(o);!t||null==t.fileid||void 0===t.currpage||n.fileid==t.fileid&&n.currpage===t.currpage?this._postMessage(o,t):(o.h5DocumentActionJson[t.currpage]=o.h5DocumentActionJson[t.currpage]||[],o.h5DocumentActionJson[t.currpage].push(t))}else L.Logger.error("[postMessageH5DocumentTriggerAction]There are no h5 document Numbers that belong to id "+e)}},{key:"postMessage",value:function(e,t){var o=this.getH5DocumentInstanceByID(e);o?this._postMessage(o,t):L.Logger.error("[postMessage]There are no h5 document Numbers that belong to id "+e)}},{key:"isLoadFinished",value:function(e){var t=this.getH5DocumentInstanceByID(e);if(t)return t.isLoadFinished;L.Logger.error("[isLoadFinished]There are no h5 document Numbers that belong to id "+e)}},{key:"getH5DocumentInstanceByID",value:function(e){var t=this._getH5DocumentInstanceID(e);return this.h5DocumentInstanceStore[t]}},{key:"_jumpToPage",value:function(e,t){if(e.isLoadFinished){var o=this._getWhiteboardFiledata(e),n=!1,i=t;if(o&&(o.currpage>o.pagenum&&(o.currpage=o.pagenum,n=!0,t=o.currpage),o.currpage<1&&(o.currpage=1,n=!0,t=o.currpage),i=o.currpage),n){var a={};n&&(a.currpage=i),this._saveFiledataAndLoadCurrpageWhiteboardData(e,a)}if(null!=t&&!isNaN(t)){var r={method:"onJumpPage",toPage:t};this._postMessage(e,r)}}}},{key:"_postMessage",value:function(e,t){if(e.isLoadFinished)try{if(e.h5DocumentIframeElement&&e.h5DocumentIframeElement.src){var o=t;o=JSON.stringify(o),e.h5DocumentIframeElement&&e.h5DocumentIframeElement.contentWindow&&e.h5DocumentIframeElement.contentWindow.postMessage&&(L.Logger.debug("[_postMessage]h5 document postMessage instanceId is "+e.id+",sendData:"+o),e.h5DocumentIframeElement.contentWindow.postMessage(o,"*"))}}catch(e){L.Logger.error("[_postMessage] h5 document postMessage error:",e)}else e.awitExecutePostMessageArray.push(t)}},{key:"_showLoading",value:function(e){e.h5DocumentLoadingElement.style.display="block",this._isShowReloadFileShowReloadNumber(e)}},{key:"_hideLoading",value:function(e){e.h5DocumentLoadingElement.style.display="none",this._isShowReloadFileShowReloadNumber(e)}},{key:"_getH5DocumentInstanceID",value:function(e){var t=this.uniqueH5Document||null==e?this.h5DocumentInstanceDefaultID:this.h5DocumentInstanceIDPrefix+e;e&&"string"==typeof e&&(new RegExp(this.specialH5DocumentInstanceIDPrefix,"g").test(e)&&(t=e));return t}},{key:"_destroyH5DocumentInstance",value:function(e){var t=e.h5DocumentInstanceID,o=e.h5DocumentElement;o?o.innerHTML="":L.Logger.warning("[destroy] h5Document elements do not exist , element id is:"+e.h5DocumentElementId+"!");var n=!0,i=!1,a=void 0;try{for(var r,s=Object.keys(e)[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value;e[l]=null,delete e[l]}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}this.h5DocumentInstanceStore[t]=null,delete this.h5DocumentInstanceStore[t]}},{key:"_receiveWindowMessageEvent",value:function(e,t,o){if(o.data){var n=void 0;try{n=JSON.parse(o.data)}catch(e){return void L.Logger.warning("h5 document receive iframe message data can't be converted to JSON , iframe data:",o.data)}if(n.method||"tk_h5Document"===n.source){L.Logger.debug("[h5Document]receive remote iframe data form "+o.origin+":",o);switch(n.method){case"onLoadComplete":this._handleIframeMessage_onLoadComplete(t,n);break;case"onPagenum":this._handleIframeMessage_onPagenum(t,n);break;case"onFileMessage":this._handleIframeMessage_onFileMessage(e,t,n);break;case"onJumpPage":if(!n.toPage||"number"!=typeof n.toPage)return void L.Logger.warning("h5 document toPage is not a number , toPage:",n.toPage);t.handler.receiveActionCommandCallback("h5DocumentOnJumpPage",{id:t.id,toPage:n.toPage})}}}}},{key:"_handleIframeMessage_onLoadComplete",value:function(r,e){var s=this;if(clearTimeout(r.forceReloadNumberTimer),r.forceReloadNumberTimer=null,r.handler&&r.handler.receiveActionCommandCallback&&(r.handler.receiveActionCommandCallback("updateWhiteboardWatermarkImageScale",{id:r.id,scale:e.coursewareRatio||16/9}),r.handler.receiveActionCommandCallback("h5DocumentLoadEnd",{id:r.id,scale:e.coursewareRatio||16/9,reloadNumber:r.forceReloadNumber,success:!0})),!r.isLoadFinished&&(r.isLoadFinished=!0,r.isReceivePagenum)){var l=this._getWhiteboardFiledata(r);l&&(this._jumpToPage(r,l.currpage),clearTimeout(r.h5DocumentActionTimer),r.h5DocumentActionTimer=setTimeout(function(){if(r.isLoadFinished&&(l=s._getWhiteboardFiledata(r),0<Object.keys(r.h5DocumentActionJson).length&&r.h5DocumentActionJson[l.currpage]&&0!==r.h5DocumentActionJson[l.currpage].length)){var e=!0,t=!1,o=void 0;try{for(var n,i=r.h5DocumentActionJson[l.currpage][Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;s._postMessage(r,a)}}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}r.h5DocumentActionJson[l.currpage].length=0,delete r.h5DocumentActionJson[l.currpage]}},100))}if(r.awitExecutePostMessageArray&&0<r.awitExecutePostMessageArray.length){var t=!0,o=!1,n=void 0;try{for(var i,a=r.awitExecutePostMessageArray[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var c=i.value;this._postMessage(r,c)}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}}r.awitExecutePostMessageArray.length=0,this._hideLoading(r)}},{key:"_handleIframeMessage_onPagenum",value:function(r,e){var s=this,t=e.totalPages,o=!1,n=1,l=this._getWhiteboardFiledata(r);l&&(l.pagenum=t,l.currpage>l.pagenum&&(l.currpage=l.pagenum,o=!0),l.currpage<1&&(l.currpage=1,o=!0),n=l.currpage);var i={pagenum:t};o&&(i.currpage=n),o?this._saveFiledataAndLoadCurrpageWhiteboardData(r,i):this._updateWhiteboardFiledata(r,i),r.isLoadFinished&&!r.isReceivePagenum&&(l=this._getWhiteboardFiledata(r))&&(this._jumpToPage(r,l.currpage),clearTimeout(r.h5DocumentActionTimer),r.h5DocumentActionTimer=setTimeout(function(){if(r.isLoadFinished&&(l=s._getWhiteboardFiledata(r),0<Object.keys(r.h5DocumentActionJson).length&&r.h5DocumentActionJson[l.currpage]&&0!==r.h5DocumentActionJson[l.currpage].length)){var e=!0,t=!1,o=void 0;try{for(var n,i=r.h5DocumentActionJson[l.currpage][Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;s._postMessage(r,a)}}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}r.h5DocumentActionJson[l.currpage].length=0,delete r.h5DocumentActionJson[l.currpage]}},100)),r.isReceivePagenum=!0}},{key:"_handleIframeMessage_onFileMessage",value:function(e,t,o){o.sourceInstanceId=e,this._sendSignallingToServer(t,{name:"default"===e?"H5DocumentAction":"ExtendH5DocumentAction",id:"default"===e?"H5DocumentAction":"H5DocumentAction_"+e,toID:"__allExceptSender",data:o}),t.handler&&t.handler.receiveActionCommandCallback&&t.handler.receiveActionCommandCallback("closeAllSelectBox",{id:t.id})}},{key:"_sendSignallingToServer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.name,n=t.id,i=t.toID,a=void 0===i?"__all":i,r=t.data,s=t.do_not_save,l=t.expiresabs,c=t.associatedMsgID,d=t.associatedUserID;e.handler&&e.handler.sendSignallingToServer&&(c=c||e.associatedMsgID,d=d||e.associatedUserID,e.handler.sendSignallingToServer(o,n,a,r,s,l,c,d))}},{key:"_getWhiteboardFiledata",value:function(e){var t=void 0;return e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("getWhiteboardFiledata",{id:e.id,callback:function(e){t=e}}),t}},{key:"_saveFiledataAndLoadCurrpageWhiteboardData",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("saveFiledataAndLoadCurrpageWhiteboardData",{id:e.id,updateFileData:t})}},{key:"_updateWhiteboardFiledata",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("updateWhiteboardFiledata",{id:e.id,updateFileData:t})}},{key:"_iframeReloadMonitor",value:function(e,t){var o=this;clearTimeout(e.forceReloadNumberTimer),e.forceReloadNumberTimer=null,e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber<e.maxForceReloadNumber&&(e.forceReloadNumberTimer=setTimeout(function(){e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber<e.maxForceReloadNumber&&(e.forceReloadNumber++,o._isShowReloadFileShowReloadNumber(e),e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("reloadH5DocumentIframeSrc",{id:e.id,iframeSrc:e.iframeSrc,source:t,fileid:e.fileid,forceReloadNumber:e.forceReloadNumber}))},e.forceReloadInterval)),e.iframeSrc&&!e.isLoadFinished&&e.forceReloadNumber>=e.maxForceReloadNumber&&e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("h5DocumentReloadFail",{id:e.id,reloadNumber:e.forceReloadNumber,success:!1})}},{key:"_sendSignalling_ShowPage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.handler&&e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("sendSignalling_ShowPage",{id:e.id,updatePubmsgData:t})}},{key:"_isShowReloadFileShowReloadNumber",value:function(e){e.h5DocumentReloadNumberElement.style.display=e.isShowReloadFileTip&&e.forceReloadNumber?"inline-table":"none";var t="当前网络不稳定，正在尝试重新打开课件……第"+e.forceReloadNumber+"次";switch(e.languageType){case"tw":t="當前網絡不穩定，正在嘗試重新打開課件……第"+e.forceReloadNumber+"次";break;case"en":t="The network is unstable , Trying to reopen the courseware ..."+e.forceReloadNumber;break;case"en":t="ネットが不安定です、教材を開きなおしています"+e.forceReloadNumber+"次"}e.h5DocumentReloadNumberElement.innerHTML=t||""}}]),e}());o.default=i},{}],335:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n,y=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=e("pdfobject"),c=(n=a)&&n.__esModule?n:{default:n};if(window.PDFObject=c.default,window.L&&window.L.Logger&&window.L.Logger.debug&&window.L.Logger.trace&&window.L.Logger.info&&window.L.Logger.warning&&window.L.Logger.error||(window.L=window.L||{},window.L.Logger=window.L.Logger||{},window.L.Logger.debug=window.L.Logger.debug||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug.apply(console,e)},window.L.Logger.trace=window.L.Logger.trace||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.trace.apply(console,e)},window.L.Logger.info=window.L.Logger.info||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.info.apply(console,e)},window.L.Logger.warning=window.L.Logger.warning||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e)},window.L.Logger.error=window.L.Logger.error||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,e)}),!(Object&&Object.shallowAssign&&Object&&Object.customAssign)){var r=function(t){try{return Object.assign.apply(Object.assign,arguments)}catch(e){var o=void 0;try{o=Array.isArray(t)?t.slice(0):JSON.parse(JSON.stringify(t))}catch(e){o=t}for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i&&"object"===(void 0===i?"undefined":f(i)))for(var a in i)o[a]=i[a]}if("object"===(void 0===o?"undefined":f(o)))for(var r in o)t[r]=o[r];return t}};Object&&Object.shallowAssign||(Object.shallowAssign=r),Object&&Object.customAssign||(Object.customAssign=r)}Object&&Object.deepAssign||(Object.deepAssign=function(t){var o=void 0;if("object"!==(void 0===t?"undefined":f(t))||Array.isArray(t))o="object"===(void 0===t?"undefined":f(t))&&Array.isArray(t)?t.slice(0):t;else try{o=JSON.parse(JSON.stringify(t))}catch(e){o=t}for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n&&"object"===(void 0===n?"undefined":f(n)))for(var i in n)void 0===o[i]?"object"===f(n[i])?Array.isArray(n[i])?o[i]=n[i].slice(0):o[i]=JSON.parse(JSON.stringify(n[i])):o[i]=n[i]:"object"===f(n[i])?o[i]=Object.deepAssign(Array.isArray(n[i])?[]:{},"object"===f(o[i])?o[i]:Array.isArray(n[i])?[]:{},n[i]):o[i]=n[i]}if("object"===(void 0===o?"undefined":f(o)))for(var a in o)t[a]=o[a];return t}),String.prototype.colorHex=function(){if(/^(rgb|RGB)/.test(this)){for(var e=this.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),t="#",o=0;o<e.length;o++){var n=Number(e[o]).toString(16);"0"===n&&(n+=n),t+=n}return 7!==t.length&&(t=this),t}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(this))return this;var i=this.replace(/#/,"").split("");if(6===i.length)return this;if(3===i.length){for(var a="#",r=0;r<i.length;r+=1)a+=i[r]+i[r];return a}},String.prototype.colorRgb=function(){var e=this.toLowerCase();if(e&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){if(4===e.length){for(var t="#",o=1;o<4;o+=1)t+=e.slice(o,o+1).concat(e.slice(o,o+1));e=t}for(var n=[],i=1;i<7;i+=2)n.push(parseInt("0x"+e.slice(i,i+2)));return"RGB("+n.join(",")+")"}return e};var s=function(e,t,o,n){n=null!=n&&null!=n&&n,e.addEventListener?e.addEventListener(t,o,n):e.attachEvent?e.attachEvent("on"+t,o):e["on"+t]=o},p=function(e,t,o,n){e.addEventListener?e.removeEventListener(t,o,n):e.attachEvent?e.detachEvent("on"+t,o):e["on"+t]=null},l=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.whiteboardToolsInfo={primaryColor:"#000000",secondaryColor:"#ffffff",backgroundColor:"#ffffff",pencilWidth:5,shapeWidth:5,eraserWidth:15,fontSize:18,fontFamily:"微软雅黑",fontStyle:"normal",fontWeight:"normal"},this.defaultProductionOptions={whiteboardClear:!0,defaultWhiteboardScale:16/9,whiteboardMagnification:1,containerWidthAndHeight:{width:0,height:0},minHeight:void 0,rotateDeg:0,baseWhiteboardWidth:960,proprietaryTools:!1,deawPermission:!0,tempDeawPermission:!0,saveRedoStack:!0,saveUndoStack:!0,remindContentTime:3e3,showShapeAuthor:!1,showMyselfRemindContent:!1,isOnlyUndoRedoClearMyselfShape:!1,synchronizationWhiteboard:!0},this.whiteboardInstanceIDPrefix="whiteboard_",this.whiteboardInstanceDefaultID="whiteboard_default",this.whiteboardInstanceStore={},this.whiteboardThumbnailStore={},this.uniqueWhiteboard=!1,this.minMagnification=1,this.maxMagnification=3,this.historyPenTool=void 0,this.historyShapeTool=void 0,this.useWhiteboardTool={tool_pencil:!1,tool_highlighter:!1,tool_line:!1,tool_arrow:!1,tool_dashed:!1,tool_eraser:!1,tool_text:!1,tool_rectangle:!1,tool_rectangle_empty:!1,tool_ellipse:!1,tool_ellipse_empty:!1,tool_polygon:!1,tool_eyedropper:!1,tool_selectShape:!1,tool_mouse:!1,tool_laser:!1,action_undo:!1,action_redo:!1,action_clear:!1,zoom_big:!1,zoom_small:!1,zoom_default:!1},this.specialWhiteboardInstanceIDPrefix="specialWhiteboardInstanceIDPrefix_",this.awaitSaveToWhiteboardInstanceSignallingArray=[],this.commonActiveTool="tool_pencil",this.basicTemplateWhiteboardSignallingList={}}return i(e,[{key:"getSpecialWhiteboardInstanceIDPrefix",value:function(){return this.specialWhiteboardInstanceIDPrefix}},{key:"setUniqueWhiteboard",value:function(e){this.uniqueWhiteboard=e}},{key:"activeCommonWhiteboardTool",value:function(e){/^tool_/.test(e)&&(this.commonActiveTool=e);var t=!0,o=!1,n=void 0;try{for(var i,a=Object.values(this.whiteboardInstanceStore)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var r=i.value;if(!r.proprietaryTools){var s=r.id;this.activeWhiteboardTool(e,s)}}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}}},{key:"updateCommonWhiteboardToolsInfo",value:function(e){e&&"object"===(void 0===e?"undefined":f(e))&&Object.deepAssign(this.whiteboardToolsInfo,e)}},{key:"getWhiteboardDefaultFiledata",value:function(e){var t={fileid:0,currpage:1,pagenum:1,filetype:"whiteboard",filename:"whiteboard",swfpath:"",pptslide:1,pptstep:0,steptotal:0};return e&&"object"===(void 0===e?"undefined":f(e))&&Object.deepAssign(t,e),t}},{key:"handlerPubmsg_SharpsChange",value:function(e){if(e){e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),this._saveBasicTemplateWhiteboardSignallingData(e,"pubmsg");var t=e.data.whiteboardID,o=this._getWhiteboardInstanceById(t);if(!o)return e.source="pubmsg",void this.awaitSaveToWhiteboardInstanceSignallingArray.push(e);if(e&&null!=e.data&&("shapeSaveEvent"===e.data.eventType||"clearEvent"===e.data.eventType||"redoEvent"===e.data.eventType||"laserMarkEvent"===e.data.eventType))if(e.source="pubmsg","laserMarkEvent"===e.data.eventType)this._receiveSnapshot(e,o);else{var n=e.id.substring(e.id.lastIndexOf("###_")+4);if(n){var i=n.split("_");n=i[0]+"_"+i[1]+"_"+i[2];var a=i[1],r=i[2],s=this.getWhiteboardFiledata(t);s.fileid==a&&s.currpage==r&&(this._receiveSnapshot(e,o),e.remindContent=e.data&&e.data.nickname||e.remindContent,o.showShapeAuthor&&e.remindContent&&e.fromID!=o.myselfId&&this._handlerShowRemoteRemindContentFromPubmsgData(o,e)),(null===o.waitingProcessShapeData[n]||void 0===o.waitingProcessShapeData[n])&&(o.waitingProcessShapeData[n]=[]),o.waitingProcessShapeData[n].push(e)}}}}},{key:"preloadWhiteboardImg",value:function(t,e){if(t){var o=new Image;o.onload=function(){e&&"function"==typeof e&&e()},o.onerror=function(e){L.Logger.error("preload img  fail , img url is "+t)},o.src=t}else L.Logger.warning("preload img url is not esixt!")}},{key:"productionWhiteboard",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.whiteboardElementId,o=e.thumbnailId,n=e.productionOptions,i=void 0===n?{}:n,a=e.handler,r=void 0===a?{}:a,s=e.id,l=this;if(t){var c=l._getWhiteboardInstanceID(s),d=l._getWhiteboardInstanceByID(c);if(d)return L.Logger.error("The production whiteboard(whiteboardInstanceID:"+c+") fails, the whiteboard already exists!"),d;d={};var u=document.getElementById(t);if(!u)return L.Logger.error("Whiteboard elements do not exist , element id is:"+t+"!"),d;var h=document.createElement("div"),m=t+"_whiteboardInstance";return h.className="whiteboard-instance-element",h.id=m,u.appendChild(h),i=Object.deepAssign({},l.defaultProductionOptions,i),(l.whiteboardInstanceStore[c]=d).filedata=i.filedata||this.getWhiteboardDefaultFiledata({fileid:"whiteboard_default"===c?0:s}),d.baseWhiteboardWidth=i.baseWhiteboardWidth,d.whiteboardInstanceID=c,d.parcelAncestorElementId=i.parcelAncestorElementId,d.isBaseboard=i.isBaseboard,d.needLooadBaseboard=i.needLooadBaseboard,d.dependenceBaseboardWhiteboardID=i.dependenceBaseboardWhiteboardID,d.defaultWhiteboardScale=i.defaultWhiteboardScale,d.watermarkImageScale=i.defaultWhiteboardScale,d.whiteboardMagnification=i.whiteboardMagnification,d.remindContentTime=i.remindContentTime,d.showShapeAuthor=i.showShapeAuthor,d.showMyselfRemindContent=i.showMyselfRemindContent,d.associatedMsgID=i.associatedMsgID,d.associatedUserID=i.associatedUserID,d.proprietaryTools=i.proprietaryTools,d.minHeight=i.minHeight,d.rotateDeg=i.rotateDeg,d.deawPermission=i.deawPermission,d.tempDeawPermission=i.tempDeawPermission,d.nickname=i.nickname,d.userid=i.userid,d.insertPictureRule=i.insertPictureRule||"default",d.synchronizationWhiteboard=i.synchronizationWhiteboard,d.whiteboardToolsInfo=Object.deepAssign({},l.whiteboardToolsInfo),i.primaryColor&&(d.whiteboardToolsInfo.primaryColor=i.primaryColor),i.secondaryColor&&(d.whiteboardToolsInfo.secondaryColor=i.secondaryColor),i.backgroundColor&&(d.whiteboardToolsInfo.backgroundColor=i.backgroundColor),i.pencilWidth&&(d.whiteboardToolsInfo.pencilWidth=i.pencilWidth),i.shapeWidth&&(d.whiteboardToolsInfo.shapeWidth=i.shapeWidth),i.eraserWidth&&(d.whiteboardToolsInfo.eraserWidth=i.eraserWidth),i.fontSize&&(d.whiteboardToolsInfo.fontSize=i.fontSize),i.fontFamily&&(d.whiteboardToolsInfo.fontFamily=i.fontFamily),i.fontStyle&&(d.whiteboardToolsInfo.fontStyle=i.fontStyle),i.fontWeight&&(d.whiteboardToolsInfo.fontWeight=i.fontWeight),d.saveRedoStack=i.saveRedoStack,d.saveUndoStack=i.saveUndoStack,d.imageThumbnailId=i.imageThumbnailId,d.imageThumbnailTipContent=i.imageThumbnailTipContent,d.registerWhiteboardToolsList={},d.stackStorage={},d.handler={},d.handler.sendSignallingToServer=r.sendSignallingToServer,d.handler.delSignallingToServer=r.delSignallingToServer,d.handler.resizeWhiteboardSizeCallback=r.resizeWhiteboardSizeCallback,d.handler.noticeUpdateToolDescCallback=r.noticeUpdateToolDescCallback,d.handler.noticeUpdateWhiteboardFiledataCallback=r.noticeUpdateWhiteboardFiledataCallback,d.handler.whiteboardWatermarkImageOnloadCallback=r.whiteboardWatermarkImageOnloadCallback,d.handler.whiteboardWatermarkImageOnFailureCallback=r.whiteboardWatermarkImageOnFailureCallback,d.handler.receiveActionCommandCallback=r.receiveActionCommandCallback,d.active=!0,d.containerWidthAndHeight=i.containerWidthAndHeight,d.useImgOriginalSizeToContainerWidthAndHeight=i.useImgOriginalSizeToContainerWidthAndHeight,d.myselfId=i.myselfId,d.isOnlyUndoRedoClearMyselfShape=i.isOnlyUndoRedoClearMyselfShape,d.historyPenTool=this.historyPenTool,d.historyShapeTool=this.historyShapeTool,d.useToolKey=i.useToolKey,d.waitingProcessShapeData={},d.whiteboardElementId=t,d.whiteboardElement=u,d.whiteboardInstanceElementId=m,d.whiteboardInstanceElement=h,d.id=s,d.thumbnailId=o,d.lc=window.LC.init(d.whiteboardInstanceElement),d.lc.backingScale=1,d.lc.setColor("primary",d.whiteboardToolsInfo.primaryColor),d.lc.setColor("secondary",d.whiteboardToolsInfo.secondaryColor),d.lc.setColor("background",d.whiteboardToolsInfo.backgroundColor),d.lc.setWatermarkImageToLcBackground(!1),d.lc.setZoom(1),d.lc.setPan(0,0),d.lc.on("shapeSave",l._handlerShapeSaveEvent.bind(l,d)),d.lc.on("sendUndo",l._handlerUndoEvent.bind(l,d)),d.lc.on("sendRedo",l._handlerRedoEvent.bind(l,d)),d.lc.on("sendClear",l._handlerClearEvent.bind(l,d)),d.lc.on("drawingChange",this._handlerDrawingChangeEvent.bind(l,d)),d.activeTool=void 0,d.lc.myselfId=d.myselfId,d.lc.isOnlyUndoRedoClearMyselfShape=d.isOnlyUndoRedoClearMyselfShape,i.whiteboardClear&&l.clearWhiteboardAllDataById(s),l._changeWhiteboardDeawPermission(d.deawPermission,d),l._changeWhiteboardTemporaryDeawPermission(d.tempDeawPermission,d),l._saveAwaitSaveToWhiteboardInstanceSignallingToWhiteboardInstance(d),l.activeWhiteboardTool(d.proprietaryTools?d.useToolKey?d.useToolKey:"tool_pencil":l.commonActiveTool,s),l._zoomIsDisable(d),l._actionIsDisable(d),l._noticeUpdateToolDesc(d),l._resizeWhiteboardHandler(d),l._noticeNpdateWhiteboardToolsInfo(d),d}L.Logger.error("whiteboardElementId is required!")}},{key:"changeWhiteboardExclusiveAttribute",value:function(e,t){if(t&&"object"===(void 0===t?"undefined":f(t))){var o=this._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[changeWhiteboardExclusiveAttribute]There are no white board Numbers that belong to id "+e);for(var n in t)o.hasOwnProperty(n)&&(o[n]=t[n],"myselfId"===n||"isOnlyUndoRedoClearMyselfShape"===n?o.lc&&(o.lc[n]=o[n]):"defaultWhiteboardScale"===n?o.currentWatermarkImageUrl||(o.watermarkImageScale=o.defaultWhiteboardScale,o.lc.watermarkImage=null,this._resizeWhiteboardHandler(o)):"insertPictureRule"===n&&this._resizeWhiteboardHandler(o))}}},{key:"updateImageThumbnailId",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?(o.imageThumbnailId=t,this._saveImageBase64ToImageThumbnail(o)):L.Logger.error("[updateImageThumbnailId]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardSaveRedoStackAndSaveUndoStack",value:function(e,t){var o=t.saveRedoStack,n=t.saveUndoStack,i=this._getWhiteboardInstanceById(e);i?(i.saveRedoStack=void 0!==o?o:i.saveRedoStack,i.saveUndoStack=void 0!==n?n:i.saveUndoStack):L.Logger.error("[updateSaveRedoStackAndSaveUndoStack]There are no white board Numbers that belong to id "+e)}},{key:"updateIsBaseboard",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.isBaseboard=t:L.Logger.error("[updateIsBaseboard]There are no white board Numbers that belong to id "+e)}},{key:"updateDependenceBaseboardWhiteboardID",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.dependenceBaseboardWhiteboardID=t:L.Logger.error("[updateDependenceBaseboardWhiteboardID]There are no white board Numbers that belong to id "+e)}},{key:"updateShowRemindContent",value:function(e,t,o){var n=this._getWhiteboardInstanceById(e);n?(n.showShapeAuthor=t||n.showShapeAuthor,n.showMyselfRemindContent=o||n.showMyselfRemindContent):L.Logger.error("[updateShowRemindContent]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardAssociatedMsgID",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.associatedMsgID=t:L.Logger.error("[updateWhiteboardAssociatedMsgID]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardAssociatedUserID",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.associatedUserID=t:L.Logger.error("[updateWhiteboardAssociatedUserID]There are no white board Numbers that belong to id "+e)}},{key:"hasWhiteboardById",value:function(e){var t=this._getWhiteboardInstanceById(e);return null!=t}},{key:"clearWhiteboardAllDataById",value:function(e){var t=this._getWhiteboardInstanceById(e);t?this._clearWhiteboardAllDataByInstance(t):L.Logger.error("[clear]There are no white board Numbers that belong to id "+e)}},{key:"productionSpecialId",value:function(e){return this.specialWhiteboardInstanceIDPrefix+e}},{key:"destroyWhiteboardInstance",value:function(e){var t=this._getWhiteboardInstanceById(e);t?this._destroyWhiteboardInstance(t):L.Logger.error("[destroy]There are no white board Numbers that belong to id "+e)}},{key:"clearRedoAndUndoStack",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?this._clearRedoAndUndoStack(o,t):L.Logger.error("[clearRedoAndUndoStack]There are no white board Numbers that belong to id "+e)}},{key:"resetDedaultWhiteboardMagnification",value:function(e){var t=this._getWhiteboardInstanceById(e);t?(t.whiteboardMagnification=this.defaultProductionOptions.whiteboardMagnification,this._zoomIsDisable(t),this._resizeWhiteboardHandler(t)):L.Logger.error("[resetDedaultWhiteboardMagnification]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardMagnification",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?o.whiteboardMagnification=t:L.Logger.error("[updateWhiteboardMagnification]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardWatermarkImageScale",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.defaultProductionOptions.watermarkImageScale,o=this._getWhiteboardInstanceById(e);o?this._updateWhiteboardWatermarkImageScale(o,t):L.Logger.error("[updateWhiteboardWatermarkImageScale]There are no white board Numbers that belong to id "+e)}},{key:"getFileExt",value:function(e){if(""!=e)return"."+e.replace(/.+\./,"")}},{key:"setWhiteboardWatermarkImage",value:function(e,o){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=t.resetDedaultWhiteboardMagnification,i=void 0===n||n,a=t.loadSucceedCallback,r=t.loadFailureCallback,s=this;L.Logger.debug("[setWhiteboardWatermarkImage]setWhiteboardWatermarkImage watermarkImageUrl:"+o);var l=s._getWhiteboardInstanceById(e);if(l)if(l.currentWatermarkImageUrl=o,i&&s.resetDedaultWhiteboardMagnification(e),o){if(s.showWhiteboardCanvasBackground(e),s._showWhiteboardLoading(l),".pdf"==s.getFileExt(o)&&c.default.supportsPDFs&&window.PDFObject)return l.lc.setPdf(o,function(){s._hideWhiteboardLoading(l)}),!1;clearTimeout(l.setWhiteboardWatermarkImageTimer),l.setWhiteboardWatermarkImageTimer=setTimeout(function(){var t=new Image;t.onload=function(){if(l.currentWatermarkImageUrl){var e=t.width/t.height;l.useImgOriginalSizeToContainerWidthAndHeight&&(l.containerWidthAndHeight={width:t.width,height:t.height}),l.lc.setWatermarkImage(t),s._resizeWhiteboardByScale(l,{watermarkImage:t,watermarkImageScale:e}),l.handler.whiteboardWatermarkImageOnloadCallback&&"function"==typeof l.handler.whiteboardWatermarkImageOnloadCallback&&l.handler.whiteboardWatermarkImageOnloadCallback({width:t.width,height:t.height})}else l.lc.watermarkImage=null,s._resizeWhiteboardHandler(l);s._hideWhiteboardLoading(l),a&&"function"==typeof a&&a(o)},t.onerror=function(e){L.Logger.error("img load fail , img url is "+o),r&&"function"==typeof r&&r(o),l&&l.handler&&l.handler.whiteboardWatermarkImageOnFailureCallback&&l.currentWatermarkImageUrl&&l.currentWatermarkImageUrl===o&&l.handler.whiteboardWatermarkImageOnFailureCallback(o)},t.src=o},150)}else s.hideWhiteboardCanvasBackground(e),l.lc.watermarkScale=1,s._resizeWhiteboardByScale(l,{isChangeWatermarkScale:!1}),s._hideWhiteboardLoading(l),l.lc.watermarkImage=null,l.lc.customCanvasBackgroundElement.style.backgroundImage="";else L.Logger.error("[setWhiteboardWatermarkImage]There are no white board Numbers that belong to id "+e)}},{key:"resizeWhiteboardHandler",value:function(e){if(void 0===e){var t=!0,o=!1,n=void 0;try{for(var i,a=Object.values(this.whiteboardInstanceStore)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var r=i.value;this._resizeWhiteboardHandler(r)}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}}else{var s=this._getWhiteboardInstanceById(e);if(!s)return void L.Logger.error("[resizeWhiteboardHandler]There are no white board Numbers that belong to id "+e);this._resizeWhiteboardHandler(s)}}},{key:"updateContainerWidthAndHeight",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.width,n=t.height,i=this._getWhiteboardInstanceById(e);i?void 0!==o&&void 0!==n?(i.containerWidthAndHeight={width:o,height:n},this._resizeWhiteboardHandler(i)):L.Logger.error("[updateContainerWidthAndHeight]width or height is not exist , [width:"+o+" , height:"+n+"]!"):L.Logger.error("[updateContainerWidthAndHeight]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboardCanvasBackground",value:function(e){var t=this._getWhiteboardInstanceById(e);t?t.lc&&t.lc.backgroundCanvas&&(t.lc.backgroundCanvas.style.display="none",t.lc.customCanvasBackgroundElement.style.display="none"):L.Logger.error("[hideWhiteboardCanvasBackground]There are no white board Numbers that belong to id "+e)}},{key:"showWhiteboardCanvasBackground",value:function(e){var t=this._getWhiteboardInstanceById(e);t?t.lc&&t.lc.backgroundCanvas&&(t.lc.backgroundCanvas.style.display="",t.lc.customCanvasBackgroundElement.style.display=""):L.Logger.error("[showWhiteboardCanvasBackground]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboard",value:function(e){var t=this._getWhiteboardInstanceById(e);t&&t.whiteboardElement&&(t.whiteboardElement.style.display="none")}},{key:"showWhiteboard",value:function(e){var t=this._getWhiteboardInstanceById(e);t&&t.whiteboardElement&&(t.whiteboardElement.style.display="block")}},{key:"updateTextFont",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.fontSize,n=t.fontFamily,i=t.fontStyle,a=t.fontWeight,r=this._getWhiteboardInstanceById(e);r?(r.whiteboardToolsInfo.fontSize=void 0!==o?o:r.whiteboardToolsInfo.fontSize,r.whiteboardToolsInfo.fontFamily=void 0!==n?n:r.whiteboardToolsInfo.fontFamily,r.whiteboardToolsInfo.fontStyle=void 0!==i?i:r.whiteboardToolsInfo.fontStyle,r.whiteboardToolsInfo.fontWeight=void 0!==a?a:r.whiteboardToolsInfo.fontWeight,this._noticeNpdateWhiteboardToolsInfo(r),this._updateTextFont(r)):L.Logger.error("[updateTextFont]There are no white board Numbers that belong to id "+e)}},{key:"updateEraserWidth",value:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).eraserWidth,o=this._getWhiteboardInstanceById(e);o?(o.whiteboardToolsInfo.eraserWidth=void 0!==t?t:o.whiteboardToolsInfo.eraserWidth,this._noticeNpdateWhiteboardToolsInfo(o),this._updateEraserWidth(o)):L.Logger.error("[updateEraserWidth]There are no white board Numbers that belong to id "+e)}},{key:"updatePencilWidth",value:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).pencilWidth,o=this._getWhiteboardInstanceById(e);o?(o.whiteboardToolsInfo.pencilWidth=void 0!==t?t:o.whiteboardToolsInfo.pencilWidth,this._noticeNpdateWhiteboardToolsInfo(o),this._updatePencilWidth(o)):L.Logger.error("[updatePencilWidth]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardToolsInfo",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?t&&"object"===(void 0===t?"undefined":f(t))&&(Object.deepAssign(o.whiteboardToolsInfo,t),this._noticeNpdateWhiteboardToolsInfo(o)):L.Logger.error("[updateWhiteboardToolsInfo]There are no white board Numbers that belong to id "+e)}},{key:"updateShapeWidth",value:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).shapeWidth,o=this._getWhiteboardInstanceById(e);o?(o.whiteboardToolsInfo.shapeWidth=void 0!==t?t:o.whiteboardToolsInfo.shapeWidth,this._noticeNpdateWhiteboardToolsInfo(o),this._updateShapeWidth(o)):L.Logger.error("[uploadShapeWidth]There are no white board Numbers that belong to id "+e)}},{key:"updateColor",value:function(e,t){if(t&&"object"===(void 0===t?"undefined":f(t))){var o=this._getWhiteboardInstanceById(e);if(!o)return void L.Logger.error("[updateColor]There are no white board Numbers that belong to id "+e);var n={},i=!0,a=!1,r=void 0;try{for(var s,l=Object.entries(t)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,d=y(c,2),u=d[0],h=d[1],m=u.replace(/Color/g,"");n[m]=h,o.whiteboardToolsInfo[m+"Color"]=h,this._noticeNpdateWhiteboardToolsInfo(o)}}catch(e){a=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw r}}this._updateColor(o,n)}}},{key:"getActiveTool",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return t.activeTool;L.Logger.error("[getActiveTool]There are no white board Numbers that belong to id "+e)}},{key:"activeWhiteboardTool",value:function(e,t){var o=this;if(void 0!==o.useWhiteboardTool[e])if(null!=t){var n=o._getWhiteboardInstanceById(t);if(n)if(/^tool_/.test(e)){if("tool_pencil"===e||"tool_highlighter"===e||"tool_line"===e||"tool_arrow"===e||"tool_dashed"===e?n.historyPenTool=e:"tool_rectangle"!==e&&"tool_rectangle_empty"!==e&&"tool_ellipse"!==e&&"tool_ellipse_empty"!==e&&"tool_polygon"!==e||(n.historyShapeTool=e),n.activeTool=e,o._setWhiteboardTools(e,n),o._handlerActiveToolLaser(e,n),"tool_text"===e?o._updateTextFont(n):"tool_eraser"===e?o._updateEraserWidth(n):"tool_pencil"===e||"tool_highlighter"===e||"tool_line"===e||"tool_arrow"==e||"tool_dashed"===e?o._updatePencilWidth(n):"tool_rectangle"!==e&&"tool_rectangle_empty"!==e&&"tool_ellipse"!==e&&"tool_ellipse_empty"!==e&&"tool_polygon"!==e||o._updateShapeWidth(n),"tool_ellipse_empty"===e||"tool_rectangle_empty"===e?n.lc.setColor("secondary","transparent"):"tool_rectangle"===e||"tool_ellipse"===e||"tool_polygon"===e?n.lc.setColor("secondary",n.whiteboardToolsInfo.primaryColor):n.lc.setColor("secondary",n.whiteboardToolsInfo.secondaryColor),"tool_highlighter"===e){var i=n.whiteboardToolsInfo.primaryColor.colorRgb().toLowerCase().replace("rgb","rgba").replace(")",",0.5)");n.lc.setColor("primary",i)}else n.lc.setColor("primary",n.whiteboardToolsInfo.primaryColor);n.handler.receiveActionCommandCallback&&n.handler.receiveActionCommandCallback("changeWhiteboardActiveTool",{id:n.id,activeTool:n.activeTool}),this._toolIsUse(n)}else if(/^action_/.test(e)){if("action_undo"===e){var a=n.isOnlyUndoRedoClearMyselfShape&&n.myselfId?n.myselfId:void 0;n.synchronizationWhiteboard?n.lc.sendUndo(a):n.lc.undo()}else if("action_redo"===e){var r=n.isOnlyUndoRedoClearMyselfShape&&n.myselfId?n.myselfId:void 0;n.synchronizationWhiteboard?n.lc.sendRedo(r):n.lc.redo()}else if("action_clear"===e){var s=n.isOnlyUndoRedoClearMyselfShape&&n.myselfId?n.myselfId:void 0;n.synchronizationWhiteboard?n.lc.sendClear(s):n.lc.clear()}o._actionIsDisable(n)}else/^zoom_/.test(e)&&("zoom_big"===e?n.whiteboardMagnification<o.maxMagnification&&(n.whiteboardMagnification+=.5):"zoom_small"===e?n.whiteboardMagnification>o.minMagnification&&(n.whiteboardMagnification-=.5):"zoom_default"===e&&(n.whiteboardMagnification=o.defaultProductionOptions.whiteboardMagnification),n.whiteboardMagnification>o.maxMagnification?n.whiteboardMagnification=o.maxMagnification:n.whiteboardMagnification<o.minMagnification&&(n.whiteboardMagnification=o.minMagnification),o._zoomIsDisable(n),o._resizeWhiteboardHandler(n));else L.Logger.error("[activeWhiteboardTool]There are no white board Numbers that belong to id "+t)}else L.Logger.error("[activeWhiteboardTool]id is undefined or null ");else L.Logger.error("The whiteboard does not have the "+e+" tool!")}},{key:"useHistoryPenTool",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t){var o=t.historyPenTool||"tool_pencil";this.activeWhiteboardTool(o,e)}else L.Logger.error("[useHistoryPenTool]There are no white board Numbers that belong to id "+e)}},{key:"useHistoryShapeTool",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t){var o=t.historyShapeTool||"tool_rectangle";this.activeWhiteboardTool(o,e)}else L.Logger.error("[useHistoryShapeTool]There are no white board Numbers that belong to id "+e)}},{key:"changeWhiteboardTemporaryDeawPermission",value:function(e,t){var o=void 0;void 0!==t&&(o=this._getWhiteboardInstanceById(t)),o?this._changeWhiteboardTemporaryDeawPermission(e,o):L.Logger.error("[changeWhiteboardTemporaryDeawPermission]There are no white board Numbers that belong to id "+t)}},{key:"updateWhiteboardProperty",value:function(e,t){var o=this;if(t&&"object"===(void 0===t?"undefined":f(t))){var n=this._getWhiteboardInstanceById(e);if(!n)return void L.Logger.error("[updateWhiteboardProperty]There are no white board Numbers that belong to id "+e);if(void 0!==t.deawPermission&&o.changeWhiteboardDeawPermission(t.deawPermission,e),void 0!==t.showShapeAuthor&&o.changeWhiteboardExclusiveAttribute(e,{showShapeAuthor:t.showShapeAuthor}),void 0!==t.myselfId&&o.changeWhiteboardExclusiveAttribute(e,{myselfId:t.myselfId}),void 0!==t.isOnlyUndoRedoClearMyselfShape&&o.changeWhiteboardExclusiveAttribute(e,{isOnlyUndoRedoClearMyselfShape:t.isOnlyUndoRedoClearMyselfShape}),void 0!==t.nickname&&o.changeWhiteboardExclusiveAttribute(e,{nickname:t.nickname}),void 0!==t.primary||void 0!==t.secondary||void 0!==t.background||void 0!==t.primaryColor||void 0!==t.secondaryColor||void 0!==t.backgroundColor){var i={};for(var a in t)"primary"!==a&&"secondary"!==a&&"background"!==a&&"primaryColor"!==a&&"secondaryColor"!==a&&"backgroundColor"!==a||(i[a]=t[a]);o.updateColor(e,i)}if(void 0!==t.synchronizationWhiteboard&&o.changeWhiteboardExclusiveAttribute(e,{synchronizationWhiteboard:t.synchronizationWhiteboard}),void 0!==t.defaultWhiteboardScale&&o.changeWhiteboardExclusiveAttribute(e,{defaultWhiteboardScale:t.defaultWhiteboardScale}),void 0!==t.associatedMsgID&&o.updateWhiteboardAssociatedMsgID(e,t.associatedMsgID),void 0!==t.associatedUserID&&o.updateWhiteboardAssociatedUserID(e,t.associatedUserID),void 0!==t.pencilWidth||void 0!==t.shapeWidth||void 0!==t.eraserWidth||void 0!==t.fontSize||void 0!==t.fontFamily){var r={};void 0!==t.pencilWidth&&(r.pencilWidth=Number(t.pencilWidth)),void 0!==t.shapeWidth&&(r.shapeWidth=Number(t.shapeWidth)),void 0!==t.eraserWidth&&(r.eraserWidth=Number(t.eraserWidth)),void 0!==t.fontSize&&(r.fontSize=Number(t.fontSize)),void 0!==t.fontFamily&&(r.fontFamily=t.fontFamily),this.updateWhiteboardToolsInfo(e,r),void 0===t.fontSize&&void 0===t.fontFamily||this.updateTextFont(e),void 0!==t.pencilWidth&&("tool_pencil"!==n.activeTool&&"tool_highlighter"!==n.activeTool&&"tool_line"!==n.activeTool&&"tool_arrow"!==n.activeTool&&"tool_dashed"!==n.activeTool||this.updatePencilWidth(e)),void 0!==t.shapeWidth&&("tool_rectangle"!==n.activeTool&&"tool_rectangle_empty"!==n.activeTool&&"tool_ellipse"!==n.activeTool&&"tool_ellipse_empty"!==n.activeTool&&"tool_polygon"!==n.activeTool||this.updateShapeWidth(e)),void 0!==t.eraserWidth&&"tool_eraser"===n.activeTool&&this.updateEraserWidth(e)}void 0!==t.insertPictureRule&&o.changeWhiteboardExclusiveAttribute(e,{insertPictureRule:t.insertPictureRule})}}},{key:"changeWhiteboardDeawPermission",value:function(e,t){var o=void 0;void 0!==t&&(o=this._getWhiteboardInstanceById(t)),o?this._changeWhiteboardDeawPermission(e,o):L.Logger.error("[changeWhiteboardDeawPermission]There are no white board Numbers that belong to id "+t)}},{key:"registerWhiteboardTools",value:function(e,t){if(t&&"object"===(void 0===t?"undefined":f(t))){var o=this._getWhiteboardInstanceById(e);if(o){var n={},i=!0,a=!1,r=void 0;try{for(var s,l=Object.entries(t)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,d=y(c,2),u=d[0],h=d[1];void 0!==this.useWhiteboardTool[u]?(n[u]=this._productionToolDesc(u,h),this.useWhiteboardTool[u]=!0):L.Logger.warning("The whiteboard does not have the "+u+" tool!")}}catch(e){a=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw r}}o.registerWhiteboardToolsList=n,o.isRegisterWhiteboardTool=!0,this._zoomIsDisable(o),this._zoomIsDisable(o),this._noticeUpdateToolDesc(o)}else L.Logger.error("[registerWhiteboardTools]There are no white board Numbers that belong to id "+e)}else L.Logger.error("[initWhiteboardTools] tools desc cannot be empty and type json!")}},{key:"hasWhiteboardFiledata",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return!!(t.filedata&&"object"===f(t.filedata)&&0<Object.keys(t.filedata).length);L.Logger.error("[hasWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"updateWhiteboardFiledata",value:function(e,t){var o=this._getWhiteboardInstanceById(e);o?this._updateWhiteboardFiledata(o,t):L.Logger.error("[updateWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"getRegisterWhiteboardToolsList",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return Object.deepAssign({},t.registerWhiteboardToolsList);L.Logger.error("[getRegisterWhiteboardToolsList]There are no white board Numbers that belong to id "+e)}},{key:"getWhiteboardFiledata",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return"number"!=typeof t.filedata.currpage&&(t.filedata.currpage=Number(t.filedata.currpage)),"number"!=typeof t.filedata.pagenum&&(t.filedata.pagenum=Number(t.filedata.pagenum)),"number"!=typeof t.filedata.pptslide&&(t.filedata.pptslide=Number(t.filedata.pptslide)),"number"!=typeof t.filedata.pptstep&&(t.filedata.pptstep=Number(t.filedata.pptstep)),"number"!=typeof t.filedata.steptotal&&(t.filedata.steptotal=Number(t.filedata.steptotal)),Object.deepAssign({},t.filedata);L.Logger.error("[getWhiteboardFiledata]There are no white board Numbers that belong to id "+e)}},{key:"clearWhiteboardDataByFileidAndCurrpage",value:function(e,t,o){var n=this._getWhiteboardInstanceById(e);n?null!=t&&null!==o&&(n.waitingProcessShapeData["SharpsChange_"+t+"_"+o]=void 0,n.stackStorage["redoStack_"+t+"_"+o]=void 0,n.stackStorage["undoStack_"+t+"_"+o]=void 0,delete n.waitingProcessShapeData["SharpsChange_"+t+"_"+o],delete n.stackStorage["redoStack_"+t+"_"+o],delete n.stackStorage["undoStack_"+t+"_"+o]):L.Logger.error("[clearWhiteboardDataByFileidAndCurrpage]There are no white board Numbers that belong to id "+e)}},{key:"loadCurrpageWhiteboard",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.loadRedoStack,n=void 0===o||o,i=t.callback,a=this._getWhiteboardInstanceById(e);if(a){this._clearRedoAndUndoStack(a),this._basicTemplateWhiteboardSignallingListToWhiteboardInstance(a);var r=a.filedata,s=r.fileid,l=r.currpage;if(void 0===a.waitingProcessShapeData||null===a.waitingProcessShapeData)a.waitingProcessShapeData={};else{var c=a.waitingProcessShapeData["SharpsChange_"+s+"_"+l];null!=c&&0<c.length&&this._batchReceiveSnapshot(c,a)}if(n){var d=a.stackStorage["redoStack_"+s+"_"+l];d&&0<d.length&&(a.lc.redoStack=d)}this._actionIsDisable(a),i&&"function"==typeof i&&i()}else L.Logger.error("[loadCurrpageWhiteboard]There are no white board Numbers that belong to id "+e)}},{key:"saveWhiteboardStackToStorage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.saveRedoStack,n=t.saveUndoStack,i=this._getWhiteboardInstanceById(e);if(i){o=void 0!==o?o:i.saveRedoStack,n=void 0!==n?n:i.saveUndoStack;var a=this.getWhiteboardFiledata(e),r=a.fileid,s=a.currpage;o&&(i.stackStorage["redoStack_"+r+"_"+s]=i.lc.redoStack.slice(0))}else L.Logger.error("[saveWhiteboardStackToStorage]There are no white board Numbers that belong to id "+e)}},{key:"showWhiteboardLoading",value:function(e){var t=this._getWhiteboardInstanceById(e);t?this._showWhiteboardLoading(t):L.Logger.error("[showWhiteboardLoading]There are no white board Numbers that belong to id "+e)}},{key:"hideWhiteboardLoading",value:function(e){var t=this._getWhiteboardInstanceById(e);t?this._hideWhiteboardLoading(t):L.Logger.error("[showWhiteboardLoading]There are no white board Numbers that belong to id "+e)}},{key:"isWhiteboardTextEditing",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return"Text"==t.lc.tool.name.toString()&&"editing"==t.lc.tool.currentShapeState;L.Logger.error("[isWhiteboardTextEditing]There are no white board Numbers that belong to id "+e)}},{key:"checkWhiteboardCanvasSize",value:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).isResize,o=void 0!==t&&t,n=this._getWhiteboardInstanceById(e);if(n)return n.lc&&n.lc.canvas?(0===n.lc.canvas.width||0===n.lc.canvas.height)&&(o&&this._resizeWhiteboardHandler(n),!0):void 0;L.Logger.error("[checkWhiteboardCanvasSize]There are no white board Numbers that belong to id "+e)}},{key:"downCanvasImageToLocalFile",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"png",o=this._getWhiteboardInstanceById(e);if(o){var n=this._convertCanvasToImageBase64(o,t);!function(e,t){var o=document.createElementNS("http://www.w3.org/1999/xhtml","a");o.href=e,o.download=t;var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(n)}(n=n.replace("image/"+t.toLocaleLowerCase().replace(/jpg/i,"jpeg").match(/png|jpeg|bmp|gif/)[0],"image/octet-stream"),(o.nickname?o.nickname+"_":"")+o.id+"_"+(new Date).getTime()+"."+t)}else L.Logger.error("[downCanvasImageToLocalFile]There are no white board Numbers that belong to id "+e)}},{key:"getWhiteboardToolsInfo",value:function(e){var t=this._getWhiteboardInstanceById(e);if(t)return Object.deepAssign({},t.whiteboardToolsInfo);L.Logger.error("[getWhiteboardToolsInfo]There are no white board Numbers that belong to id "+e)}},{key:"_clearRedoAndUndoStack",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.clear,n=void 0===o||o,i=t.redo,a=void 0===i||i,r=t.undo,s=void 0===r||r,l=this;n&&l._clearLc(e,{triggerEvent:!1}),a&&l._clearLcRedoStack(e),s&&l._clearLcUndoStack(e),l._actionIsDisable(e),setTimeout(function(){l._resizeWhiteboardHandler(e)},0)}},{key:"_updateWhiteboardFiledata",value:function(e,t){t&&"object"===(void 0===t?"undefined":f(t))&&(void 0!==t.currpage&&(t.currpage=Number(t.currpage)),void 0!==t.pagenum&&(t.pagenum=Number(t.pagenum)),void 0!==t.pptslide&&(t.pptslide=Number(t.pptslide)),void 0!==t.pptstep&&(t.pptstep=Number(t.pptstep)),void 0!==t.steptotal&&(t.steptotal=Number(t.steptotal)),Object.deepAssign(e.filedata,t),e&&e.handler&&e.handler.noticeUpdateWhiteboardFiledataCallback&&e.handler&&e.handler.noticeUpdateWhiteboardFiledataCallback&&e.handler.noticeUpdateWhiteboardFiledataCallback(e.filedata))}},{key:"_batchReceiveSnapshot",value:function(n,i){var a=this;Array.isArray(n)?(n.forEach(function(e,t){var o=!0;t===n.length-1&&(o=!1),a._handlerRemoteDataToWhiteboard(e,o,i)}),a._actionIsDisable(i)):L.Logger.error("shapesArray must be an array!")}},{key:"_receiveSnapshot",value:function(e,t){this._handlerRemoteDataToWhiteboard(e,!1,t),this._actionIsDisable(t)}},{key:"_handlerRemoteDataToWhiteboard",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=arguments[2];if(e.data&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),null!=e.data&&null!=e.data.eventType)if("delmsg"===e.source)switch(e.data.eventType){case"shapeSaveEvent":case"clearEvent":case"undoEvent":e.data.actionName&&"AddShapeAction"===e.data.actionName?(o.lc.undo(!1,e.data.shapeId),this._removeRemindContentByElementId(o,"whiteboard_remind_"+e.data.shapeId)):e.data.actionName&&"ClearAction"===e.data.actionName&&o.lc.undo(!1,e.data.clearActionId)}else switch(e.data.eventType){case"shapeSaveEvent":if(o&&o.lc&&o.lc.undoStack&&0<o.lc.undoStack.length)for(var n=!1,i=o.lc.undoStack.length-1;0<=i;i--){var a=o.lc.undoStack[i];switch(a.actionName){case"AddShapeAction":a.shapeId===e.data.shapeId&&(a.undo&&a.undo(),o.lc.undoStack.splice(i,1),n=!0)}if(n)break}e.data&&e.data.data&&e.data.data.data&&(e.data.data=window.LC.JSONToShape(e.data.data)),o.lc.saveShape(e.data.data,!1,null,t,e.fromID,e.seq);break;case"undoEvent":e.data.actionName&&"AddShapeAction"===e.data.actionName?(o.lc.undo(!1,e.data.shapeId),this._removeRemindContentByElementId(o,"whiteboard_remind_"+e.data.shapeId)):e.data.actionName&&"ClearAction"===e.data.actionName&&o.lc.undo(!1,e.data.clearActionId);break;case"redoEvent":if(e.data.actionName&&"AddShapeAction"===e.data.actionName){for(var r=!0,s=o.lc.undoStack.length-1;0<=s;s--)if(e.data.shapeId===o.lc.undoStack[s].shapeId){r=!1;break}if(r){for(var l=!1,c=o.lc.redoStack.length-1;0<=c;c--)if(e.data.shapeId===o.lc.redoStack[c].shapeId){l=!0;break}if(l)o.lc.redo(!1,e.data.shapeId);else{e.data&&e.data.data&&e.data.data.data&&(e.data.data=window.LC.JSONToShape(e.data.data));var d=e.data.otherInfo,u=void 0===d?{authorUserId:e.fromID,seq:e.seq}:d;o.lc.saveShape(e.data.data,!1,null,t,u.authorUserId,u.seq)}}}else if(e.data.actionName&&"ClearAction"===e.data.actionName){for(var h=!0,m=o.lc.undoStack.length-1;0<=m;m--)if(e.data.clearActionId===o.lc.undoStack[m].id){h=!1;break}if(h){for(var f=!1,p=o.lc.redoStack.length-1;0<=p;p--)if(e.data.clearActionId===o.lc.redoStack[p].id){f=!0;break}if(f)o.lc.redo(!1,e.data.clearActionId),this._removeAllRemindContent(o);else{var g=e.data.otherInfo,v=void 0===g?{authorUserId:e.fromID,toAuthorUserId:void 0,seq:e.seq}:g;o.lc.clear(!1,e.data.clearActionId,v.authorUserId,v.toAuthorUserId,v.seq),this._removeAllRemindContent(o)}}}break;case"clearEvent":o.lc.clear(!1,e.data.clearActionId,e.fromID,e.data.toAuthorUserId,e.seq),this._removeAllRemindContent(o);break;case"laserMarkEvent":var y=o.lc.containerEl.parentNode.getElementsByClassName("laser-mark")[0];switch(e.data.actionName){case"show":y.style.display="block";break;case"hide":y.style.display="none";break;case"move":if(e.data&&e.data.laser){var b=e.data.laser.left,_=e.data.laser.top;y.style.left=b+"%",y.style.top=_+"%"}}}}},{key:"_productionToolDesc",value:function(e,t){return{toolKey:e,disabled:!1}}},{key:"_noticeUpdateToolDesc",value:function(e){e&&e.isRegisterWhiteboardTool&&e.handler&&e.handler.noticeUpdateToolDescCallback&&e.handler.noticeUpdateToolDescCallback(e.registerWhiteboardToolsList)}},{key:"_updateToolDesc",value:function(e,t,o){if(e.registerWhiteboardToolsList[t]){var n=!0,i=!1,a=void 0;try{for(var r,s=Object.entries(o)[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var l=r.value,c=y(l,2),d=c[0],u=c[1];void 0!==e.registerWhiteboardToolsList[t][d]&&(e.registerWhiteboardToolsList[t][d]=u)}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}}var h=!0,m=!1,f=void 0;try{for(var p,g=Object.keys(e.registerWhiteboardToolsList)[Symbol.iterator]();!(h=(p=g.next()).done);h=!0){var v=p.value;/tool_/g.test(v)?e.registerWhiteboardToolsList[v].isUse=v===e.activeTool:/zoom_/g.test(v)&&(e.registerWhiteboardToolsList[v].zoom=e.whiteboardMagnification)}}catch(e){m=!0,f=e}finally{try{!h&&g.return&&g.return()}finally{if(m)throw f}}}},{key:"_batchUpdateToolDesc",value:function(e,t){if(Array.isArray(t)){var o=!0,n=!1,i=void 0;try{for(var a,r=t[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;Array.isArray(s)&&this._updateToolDesc(e,s[0],s[1])}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}else L.Logger.error("updateDescArray must be an array , whiteboard id is "+e.id+"!")}},{key:"_setWhiteboardTools",value:function(o,e){var n=this;n._automaticTraverseWhiteboardInstance(e,function(e){var t=n._productionToolByCore(o,e);e.lc.setTool(t)})}},{key:"_productionToolByCore",value:function(e,t){var o=void 0;if(void 0===this.useWhiteboardTool[e])return L.Logger.error("The whiteboard does not have the "+e+" tool!"),o;switch(e){case"tool_pencil":case"tool_highlighter":o=new window.LC.tools.Pencil(t.lc);break;case"tool_line":o=new window.LC.tools.Line(t.lc);break;case"tool_arrow":(o=new window.LC.tools.Line(t.lc)).hasEndArrow=!0;break;case"tool_dashed":(o=new window.LC.tools.Line(t.lc)).isDashed=!0;break;case"tool_eraser":o=new window.LC.tools.Eraser(t.lc);break;case"tool_text":o=new window.LC.tools.Text(t.lc);break;case"tool_rectangle":case"tool_rectangle_empty":o=new window.LC.tools.Rectangle(t.lc);break;case"tool_ellipse":case"tool_ellipse_empty":o=new window.LC.tools.Ellipse(t.lc);break;case"tool_polygon":o=new window.LC.tools.Polygon(t.lc);break;case"tool_eyedropper":o=new window.LC.tools.Eyedropper(t.lc);break;case"tool_selectShape":o=new window.LC.tools.SelectShape(t.lc);break;case"tool_mouse":case"tool_laser":o=t.lc.tool;break;default:L.Logger.warning("Tool "+e+" is not created in the whiteboard core layer!"),o=t.lc.tool}return o}},{key:"_getWhiteboardInstanceID",value:function(e){var t=this.uniqueWhiteboard||null==e?this.whiteboardInstanceDefaultID:this.whiteboardInstanceIDPrefix+e;e&&"string"==typeof e&&(new RegExp(this.specialWhiteboardInstanceIDPrefix,"g").test(e)&&(t=e));return t}},{key:"_getWhiteboardInstanceById",value:function(e){var t=this._getWhiteboardInstanceID(e);return this.whiteboardInstanceStore[t]}},{key:"_getWhiteboardInstanceByID",value:function(e){return this.whiteboardInstanceStore[e]}},{key:"_resizeWhiteboardByScale",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.watermarkImage,n=t.isChangeCanvas,i=void 0===n||n,a=t.isChangeWatermarkScale,r=void 0===a||a,s=t.watermarkImageScale;s=void 0!==s?s:e.watermarkImageScale;var l=e.lc;if(l){var c=e.whiteboardElement,d=e.whiteboardInstanceElement,u=e.containerWidthAndHeight.width,h=e.containerWidthAndHeight.height;if(e.parcelAncestorElementId){var m=document.getElementById(e.parcelAncestorElementId);m&&(u=m.clientWidth,h=m.clientHeight)}var f={},p={},g=0,v=0,y=0,b=0;if(p.height=(p.width=(p.marginLeft=h*s<u?(g=Math.round(h*s*e.whiteboardMagnification),v=Math.round(h*e.whiteboardMagnification),"relativeOriginalSize"===e.insertPictureRule&&o&&o.width<u&&o.height<h&&(g=o.width,v=o.height),c.style.width=g+"px",c.style.height=v+"px",d.style.width=g+"px",d.style.height=v+"px",void 0!==e.minHeight&&null!==e.minHeight&&(y=e.minHeight*s,b=e.minHeight,c.style.minWidth=y+"px",c.style.minHeight=b+"px",d.style.minWidth=y+"px",d.style.minHeight=b+"px",p.minWidth=y+"px",p.minHegiht=b+"px"),p.top="0%",p.left="50%",p.marginTop="0px",-g/2+"px"):(g=Math.round(u*e.whiteboardMagnification),v=Math.round(u/s*e.whiteboardMagnification),"relativeOriginalSize"===e.insertPictureRule&&o&&o.width<u&&o.height<h&&(g=o.width,v=o.height),c.style.width=g+"px",c.style.height=v+"px",d.style.width=g+"px",d.style.height=v+"px",void 0!==e.minHeight&&null!==e.minHeight&&(y=e.minHeight*s,b=e.minHeight,c.style.minWidth=y+"px",c.style.minHeight=b+"px",d.style.minWidth=y+"px",d.style.minHeight=b+"px",p.minWidth=y+"px",p.minHegiht=b+"px"),p.top="50%",p.left="0%",p.marginTop=-v/2+"px","0px"),g+"px"),v+"px"),i){l.respondToSizeChange();var _=d.clientWidth,w=d.clientHeight,k=(_+w)/(e.baseWhiteboardWidth+e.baseWhiteboardWidth*s);if(l.setZoom(k),l.setPan(0,0),r&&o){var S=(_/o.width+w/o.height)/2;"relativeOriginalSize"===e.insertPictureRule&&o&&o.width<u&&o.height<h&&(S=1),l.watermarkScale=S,l.setWatermarkImage(o)}}f.style=p,f.addClassName=1<e.whiteboardMagnification?"custom-scroll-bar":"",f.loadScrollBar=1<e.whiteboardMagnification,e.handler&&e.handler.resizeWhiteboardSizeCallback&&"function"==typeof e.handler.resizeWhiteboardSizeCallback?e.handler.resizeWhiteboardSizeCallback(f):f=null}}},{key:"_clearWhiteboardAllDataByInstance",value:function(e){var t=this;e?(e.lc.clear(!1),e.lc.redoStack.length=0,e.lc.undoStack.length=0,e.stackStorage={},e.waitingProcessShapeData={},this._removeAllRemindContent(e),setTimeout(function(){t._resizeWhiteboardHandler(e)},0)):L.Logger.error("[_clear]The whiteboard instance does not exist!")}},{key:"_resizeWhiteboardHandler",value:function(e){if(e&&e.lc){var t=e.lc.watermarkImage;if(t&&t.src){var o=t.width/t.height;this._resizeWhiteboardByScale(e,{watermarkImage:t,watermarkImageScale:o})}else this._resizeWhiteboardByScale(e,{isChangeWatermarkScale:!1});this._updateAllRemindContent(e)}}},{key:"_updateWhiteboardWatermarkImageScale",value:function(e,t){e.watermarkImageScale=t,this._resizeWhiteboardHandler(e)}},{key:"_productionWhiteboardRemindContent",value:function(e,t,o,n,i){var a=this;if(e&&n)try{if(e&&e.lc&&e.lc.containerEl.parentNode&&"function"==typeof e.lc.drawingCoordsToClientCoords){var r=e.lc.drawingCoordsToClientCoords(t,o);if(r){var s=document.createElement("span");s.className="remind-content",s.style.position="absolute",s.style.left=r.x+"px",s.style.top=r.y+"px",s.innerHTML=n;var l=i?"whiteboard_remind_"+i:"whiteboard_remind_"+(new Date).getTime();s.setAttribute("data-position-x",t),s.setAttribute("data-position-y",o),s.setAttribute("id",l),e.lc.containerEl.parentNode.appendChild(s),setTimeout(function(){a._removeRemindContentByElementId(e,l),s=null},e.remindContentTime)}}}catch(e){L.Logger.error("productionWhiteboardRemindContent error:",e)}}},{key:"_updateAllRemindContent",value:function(e){try{if(e.lc&&e.lc.containerEl.parentNode){var t=e.lc.containerEl.parentNode.getElementsByClassName("remind-content");if(t&&0<t.length)for(var o=0;o<t.length;o++){var n=t[o],i=Number(n.getAttribute("data-position-x")),a=Number(n.getAttribute("data-position-y")),r=e.lc.drawingCoordsToClientCoords(i,a);n.style.left=r.x+"px",n.style.top=r.y+"px"}}}catch(e){L.Logger.error("updateAllRemindContent error:",e)}}},{key:"_removeRemindContentByElementId",value:function(e,t){if(e&&e.lc&&e.lc.containerEl.parentNode){var o=document.getElementById(t);o&&(o.innerHTML="",e.lc.containerEl.parentNode.removeChild(o),o=null)}}},{key:"_removeAllRemindContent",value:function(e){if(e&&e.lc&&e.lc.containerEl.parentNode)try{if(e.lc&&e.lc.containerEl.parentNode){var t=e.lc.containerEl.parentNode.getElementsByClassName("remind-content");if(t&&0<t.length)for(var o=t.length-1;0<=o;o--){var n=t[o];n.innerHTML="",e.lc.containerEl.parentNode.removeChild(n),n=null}}}catch(e){L.Logger.error("removeAllRemindContent error:",e)}}},{key:"_handlerShapeSaveEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"shapeSaveEvent",t),this._actionIsDisable(e)}},{key:"_handlerUndoEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"undoEvent",t),this._actionIsDisable(e)}},{key:"_handlerRedoEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"redoEvent",t),this._actionIsDisable(e)}},{key:"_handlerClearEvent",value:function(e,t){this._sendWhiteboardMessageToSignallingServer(e,"clearEvent",t),this._actionIsDisable(e)}},{key:"_handlerDrawingChangeEvent",value:function(e){this._saveImageBase64ToImageThumbnail(e)}},{key:"_saveImageBase64ToImageThumbnail",value:function(e){if(e.imageThumbnailId){var t=document.getElementById(e.imageThumbnailId);if(t&&"img"===t.nodeName.toLowerCase()){var o=this._convertCanvasToImageBase64(e,"jpg");t.src=o,e.imageThumbnailTipContent&&document.getElementById(e.imageThumbnailId+"_imageDescribe")?document.getElementById(e.imageThumbnailId+"_imageDescribe").innerHTML=e.imageThumbnailTipContent:e.nickname&&document.getElementById(e.imageThumbnailId+"_imageDescribe")&&(document.getElementById(e.imageThumbnailId+"_imageDescribe").innerHTML=e.nickname)}}}},{key:"_destroyWhiteboardInstance",value:function(e){clearTimeout(e.noticeUpdateToolDescTimer),clearTimeout(e.laserTimer),clearTimeout(e.setWhiteboardWatermarkImageTimer),this.basicTemplateWhiteboardSignallingList[e.id]&&(this.basicTemplateWhiteboardSignallingList[e.id]=null,delete this.basicTemplateWhiteboardSignallingList[e.id]),this._clearWhiteboardAllDataByInstance(e);var t=e.whiteboardInstanceID,o=e.whiteboardElement;e.lc&&"function"==typeof e.lc.teardown&&e.lc.teardown(),o?o.innerHTML="":L.Logger.warning("[destroy] whiteboard elements do not exist , element id is:"+e.whiteboardElementId+"!");var n=e.thumbnailId?document.getElementById(e.thumbnailId):void 0;n&&(n.innerHTML="");var i=!0,a=!1,r=void 0;try{for(var s,l=Object.keys(e)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;e[c]=null,delete e[c]}}catch(e){a=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw r}}this.whiteboardInstanceStore[t]=null,delete this.whiteboardInstanceStore[t]}},{key:"_clearLc",value:function(e){(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).triggerEvent;e&&e.lc?(e.lc.clear(!1),this._removeAllRemindContent(e)):L.Logger.warning("clear whiteboard is not exist!")}},{key:"_clearLcRedoStack",value:function(e){e&&e.lc?e.lc.redoStack.length=0:L.Logger.warning("clearRedoStack whiteboard is not exist!")}},{key:"_clearLcUndoStack",value:function(e){e&&e.lc?e.lc.undoStack.length=0:L.Logger.warning("clearUndoStack whiteboard is not exist!")}},{key:"_showWhiteboardLoading",value:function(e){e.lc.loadingElement&&(e.lc.loadingElement.style.display="block")}},{key:"_hideWhiteboardLoading",value:function(e){e.lc.loadingElement&&(e.lc.loadingElement.style.display="none")}},{key:"_changeWhiteboardTemporaryDeawPermission",value:function(n,e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.lc;if(t.isTmpDrawAble!==n){t.isTmpDrawAble=n;var o=t.containerEl.parentNode.getElementsByClassName("temporary-draw-permission")[0];t.isTmpDrawAble?(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" yes"):(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" no")}})}},{key:"_changeWhiteboardDeawPermission",value:function(n,e){this._automaticTraverseWhiteboardInstance(e,function(e){e.deawPermission=n;var t=e.lc;if(t.isDrawAble!==n){t.isDrawAble=n;var o=t.containerEl.parentNode.getElementsByClassName("draw-permission")[0];t.isDrawAble?(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" yes"):(o.className=o.className.replace(/( yes| no)/g,""),o.className+=" no")}})}},{key:"_handlerActiveToolLaser",value:function(e,t){var m=this;m._automaticTraverseWhiteboardInstance(t,function(d){var t=d.lc.containerEl.parentNode,u=t.getElementsByClassName("temporary-draw-permission")[0],h=t.getElementsByClassName("laser-mark")[0];"tool_laser"===e?(p(u,"mousemove",d._laserEventHandler_mousemove),p(t,"mouseenter",d._laserEventHandler_mouseenter),p(t,"mouseleave",d._laserEventHandler_mouseleave),d._laserEventHandler_mousemove=function(e){if("tool_laser"!==d.activeTool)return m._sendWhiteboardMessageToSignallingServer(d,"laserMarkEvent",{action:{actionName:"hide"}}),h.style.display="none",p(u,"mousemove",d._laserEventHandler_mousemove),!1;var t=e.pageX,o=e.pageY,n=u.getBoundingClientRect(),i=void 0,a=void 0,r=u.clientWidth,s=u.clientHeight;switch(d.rotateDeg){case 0:i=t-n.left,a=o-n.top;break;case 90:i=o-n.top,a=s-(t-n.left);break;case 180:i=r-(t-n.left),a=s-(o-n.top);break;case 270:i=r-(o-n.top),a=t-n.left;break;default:i=t-n.left,a=o-n.top}var l=i/r*100,c=a/s*100;return h.style.left=l+"%",h.style.top=c+"%",clearTimeout(d.laserTimer),d.laserTimer=setTimeout(function(){if(d.laserPosition&&(.3<Math.abs(l-d.laserPosition.left)||.3<Math.abs(c-d.laserPosition.top))){var e={laser:{left:l,top:c},action:{actionName:"move"}};d.laserPosition=e.laser,m._sendWhiteboardMessageToSignallingServer(d,"laserMarkEvent",e)}},100),!1},d._laserEventHandler_mouseenter=function(e){return"tool_laser"!==d.activeTool?(m._sendWhiteboardMessageToSignallingServer(d,"laserMarkEvent",{action:{actionName:"hide"}}),h.style.display="none",p(t,"mouseenter",d._laserEventHandler_mouseenter),!1):(m._sendWhiteboardMessageToSignallingServer(d,"laserMarkEvent",{action:{actionName:"show"}}),!(h.style.display="block"))},d._laserEventHandler_mouseleave=function(e){return m._sendWhiteboardMessageToSignallingServer(d,"laserMarkEvent",{action:{actionName:"hide"}}),h.style.display="none","tool_laser"!==d.activeTool&&p(t,"mouseleave",d._laserEventHandler_mouseleave),!1},m._changeWhiteboardTemporaryDeawPermission(!1,d),d.selectLaserTool=!0,p(u,"mousemove",d._laserEventHandler_mousemove),p(t,"mouseenter",d._laserEventHandler_mouseenter),p(t,"mouseleave",d._laserEventHandler_mouseleave),u.className=u.className.replace(/ cursor-none/g,""),u.className+=" cursor-none",d.laserPosition=d.laserPosition||{left:0,top:0},s(u,"mousemove",d._laserEventHandler_mousemove),s(t,"mouseenter",d._laserEventHandler_mouseenter),s(t,"mouseleave",d._laserEventHandler_mouseleave)):(m._changeWhiteboardTemporaryDeawPermission("tool_mouse"!==e,d),p(u,"mousemove",d._laserEventHandler_mousemove),p(t,"mouseenter",d._laserEventHandler_mouseenter),p(t,"mouseleave",d._laserEventHandler_mouseleave),u.className=u.className.replace(/ cursor-none/g,""),h.style.display="none",d.selectLaserTool&&(m._sendWhiteboardMessageToSignallingServer(d,"laserMarkEvent",{action:{actionName:"hide"}}),d.selectLaserTool=!1))})}},{key:"_sendSignallingToServer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.idPrefix,n=t.data,i=t.name,a=t.assignId,r=t.do_not_save,s=t.expiresabs,l=t.associatedMsgID,c=t.associatedUserID;if(e){if(e.handler&&e.handler.sendSignallingToServer&&"function"==typeof e.handler.sendSignallingToServer){var d=e.filedata,u=d.currpage,h=d.fileid;if(void 0===u||void 0===h)return void L.Logger.error("[_sendSignallingToServer]whiteboardInstance.filedata do not contain  currpage or fileid , [ currpage , fileid ]is ["+u+","+h+"]!");n&&"string"==typeof n&&(n=JSON.parse(n)),n.whiteboardID=e.id,n.isBaseboard=e.isBaseboard,n.nickname=e.nickname,void 0!==e.dependenceBaseboardWhiteboardID&&(n.dependenceBaseboardWhiteboardID=e.dependenceBaseboardWhiteboardID),l=l||e.associatedMsgID,c=c||e.associatedUserID;var m=a||o+"###_"+i+"_"+h+"_"+u,f="__allExceptSender";"shapeSaveEvent"!==n.eventType&&"undoEvent"!==n.eventType&&"redoEvent"!==n.eventType&&"clearEvent"!==n.eventType||(f="__all");var p=Object.deepAssign({},n);"__all"!==f&&this._saveBasicTemplateWhiteboardSignallingData({name:i,id:m,toID:f,data:p,do_not_save:r,expiresabs:s,associatedMsgID:l,associatedUserID:c},"pubmsg"),e.handler.sendSignallingToServer(i,m,f,n,r,s,l,c)}}else L.Logger.error("[_sendSignallingToServer]whiteboardInstance is not exist!")}},{key:"_delSignallingToServer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.idPrefix,n=t.data,i=t.name,a=t.assignId;if(e){if(e.handler&&e.handler.delSignallingToServer&&"function"==typeof e.handler.delSignallingToServer){var r=e.filedata,s=r.currpage,l=r.fileid;if(void 0===s||void 0===l)return void L.Logger.error("[_delSignallingToServer]whiteboardInstance.filedata do not contain  currpage or fileid , [ currpage , fileid ]is ["+s+","+l+"]!");n.whiteboardID=e.id,n.isBaseboard=e.isBaseboard,void 0!==e.dependenceBaseboardWhiteboardID&&(n.dependenceBaseboardWhiteboardID=e.dependenceBaseboardWhiteboardID);var c=a||o+"###_"+i+"_"+l+"_"+s,d="__allExceptSender";"shapeSaveEvent"!==n.eventType&&"undoEvent"!==n.eventType&&"redoEvent"!==n.eventType&&"clearEvent"!==n.eventType||(d="__all");var u=Object.deepAssign({},n);"__all"!==d&&this._saveBasicTemplateWhiteboardSignallingData({name:i,id:c,toID:d,data:u},"delmsg"),e.handler.delSignallingToServer(i,c,d,n)}}else L.Logger.error("[_delSignallingToServer]whiteboardInstance is not exist!")}},{key:"_sendWhiteboardMessageToSignallingServer",value:function(e,t,o){var n=void 0,i=void 0,a=void 0,r=void 0,s=void 0,l=void 0,c=void 0;switch(t){case"shapeSaveEvent":if(null!=(l=window.LC.shapeToJSON(o.shape))&&null!=l.className&&("LinePath"==l.className||"ErasedLinePath"==l.className))l.data.smoothedPointCoordinatePairs=null,delete l.data.smoothedPointCoordinatePairs,l.data.pointCoordinatePairs.forEach(function(e){e[0]=Math.round(e[0]),e[1]=Math.round(e[1])});c={eventType:t,actionName:o.action.actionName,shapeId:o.shapeId,data:l},n=o.shapeId,i=c,a="SharpsChange",s=r=void 0,this._sendSignallingToServer(e,{idPrefix:n,data:i,name:a,assignId:r,do_not_save:s});break;case"undoEvent":if("AddShapeAction"===o.action.actionName){var d=o.action.shapeId;n=d,i=c={eventType:t,actionName:o.action.actionName,shapeId:d},a="SharpsChange",r=void 0,this._delSignallingToServer(e,{idPrefix:n,data:i,name:a,assignId:r})}else if("ClearAction"===o.action.actionName){var u=o.action.id;n=u,i=c={eventType:t,actionName:o.action.actionName,clearActionId:u},a="SharpsChange",r=void 0,this._delSignallingToServer(e,{idPrefix:n,data:i,name:a,assignId:r})}break;case"redoEvent":if("AddShapeAction"===o.action.actionName){if(null!=(l=window.LC.shapeToJSON(o.action.shape))&&null!=l.className&&("LinePath"==l.className||"ErasedLinePath"==l.className))l.data.smoothedPointCoordinatePairs=null,delete l.data.smoothedPointCoordinatePairs,l.data.pointCoordinatePairs.forEach(function(e){e[0]=Math.round(e[0]),e[1]=Math.round(e[1])});var h=o.action.shapeId,m={authorUserId:o.action.authorUserId,seq:o.action.seq},f=h,p=c={eventType:t,actionName:o.action.actionName,shapeId:h,data:l,otherInfo:m};this._sendSignallingToServer(e,{idPrefix:f,data:p,name:"SharpsChange",assignId:void 0,do_not_save:void 0})}else if("ClearAction"===o.action.actionName){var g=o.action.id,v={authorUserId:o.action.authorUserId,seq:o.action.seq,toAuthorUserId:o.action.toAuthorUserId};n=g,i=c={eventType:t,actionName:o.action.actionName,clearActionId:g,otherInfo:v},a="SharpsChange",s=r=void 0,this._sendSignallingToServer(e,{idPrefix:n,data:i,name:a,assignId:r,do_not_save:s})}break;case"clearEvent":var y=o.clearActionId;n=y,i=c={eventType:t,actionName:o.action.actionName,clearActionId:y},a="SharpsChange",s=r=void 0,e&&e.isOnlyUndoRedoClearMyselfShape&&e.myselfId&&(c.toAuthorUserId=e.myselfId),this._sendSignallingToServer(e,{idPrefix:n,data:i,name:a,assignId:r,do_not_save:s});break;case"laserMarkEvent":c={eventType:t,actionName:o.action.actionName},o&&o.laser&&(c.laser=o.laser),n="laserMarkEvent",i=c,a="SharpsChange",s=!(r=void 0),this._sendSignallingToServer(e,{idPrefix:n,data:i,name:a,assignId:r,do_not_save:s})}}},{key:"_updateTextFont",value:function(e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.whiteboardToolsInfo.fontSize,o=e.whiteboardToolsInfo.fontFamily,n=e.whiteboardToolsInfo.fontStyle,i=e.whiteboardToolsInfo.fontWeight,a=e.lc.tool;"Text"===a.name&&(a.font=n+" "+i+" "+t+"px "+o)})}},{key:"_updateEraserWidth",value:function(e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.whiteboardToolsInfo.eraserWidth;e.lc.trigger("setStrokeWidth",t)})}},{key:"_updatePencilWidth",value:function(e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.whiteboardToolsInfo.pencilWidth;e.lc.trigger("setStrokeWidth",t)})}},{key:"_updateShapeWidth",value:function(e){this._automaticTraverseWhiteboardInstance(e,function(e){var t=e.whiteboardToolsInfo.shapeWidth;e.lc.trigger("setStrokeWidth",t)})}},{key:"_updateColor",value:function(e,l){if(l&&"object"===(void 0===l?"undefined":f(l))){this._automaticTraverseWhiteboardInstance(e,function(e){var t=!0,o=!1,n=void 0;try{for(var i,a=Object.keys(l)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var r=i.value.replace(/Color/g,"");if(e.lc.setColor(r,e.whiteboardToolsInfo[r+"Color"]),"primary"!==r&&"secondary"!==r||"tool_rectangle"!==e.activeTool&&"tool_rectangle_empty"!==e.activeTool&&"tool_ellipse"!==e.activeTool&&"tool_ellipse_empty"!==e.activeTool&&"tool_polygon"!==e.activeTool||("tool_ellipse_empty"===e.activeTool||"tool_rectangle_empty"===e.activeTool?e.lc.setColor("secondary","transparent"):e.lc.setColor("secondary",e.whiteboardToolsInfo.primaryColor)),"primary"===r&&"tool_highlighter"===e.activeTool){var s=e.whiteboardToolsInfo[r+"Color"].colorRgb().toLowerCase().replace("rgb","rgba").replace(")",",0.5)");e.lc.setColor(r,s)}}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}})}}},{key:"_actionIsDisable",value:function(e){var n=this;n._automaticTraverseWhiteboardInstance(e,function(e){if(e.active){if(0===e.lc.shapes.length)n._batchUpdateToolDesc(e,[["action_clear",{disabled:!0}],["tool_eraser",{disabled:!0}],["tool_eyedropper",{disabled:!0}]]),n._noticeUpdateToolDesc(e);else{var t=[["action_clear",{disabled:!1}],["tool_eraser",{disabled:!1}],["tool_eyedropper",{disabled:!1}]];if(e.isOnlyUndoRedoClearMyselfShape&&e.myselfId){t=[["action_clear",{disabled:!0}],["tool_eraser",{disabled:!0}],["tool_eyedropper",{disabled:!0}]];for(var o=0;o<e.lc.shapes.length;o++)if(e.lc.shapes[o].authorUserId==e.myselfId){t=[["action_clear",{disabled:!1}],["tool_eraser",{disabled:!1}],["tool_eyedropper",{disabled:!1}]];break}}n._batchUpdateToolDesc(e,t),n._noticeUpdateToolDesc(e)}e.lc.canRedo()?n._updateToolDesc(e,"action_redo",{disabled:!1}):n._updateToolDesc(e,"action_redo",{disabled:!0}),n._noticeUpdateToolDesc(e),e.lc.canUndo()?n._updateToolDesc(e,"action_undo",{disabled:!1}):n._updateToolDesc(e,"action_undo",{disabled:!0}),n._noticeUpdateToolDesc(e)}})}},{key:"_zoomIsDisable",value:function(e){var t=this;t._automaticTraverseWhiteboardInstance(e,function(e){e.active&&(e.whiteboardMagnification<=t.minMagnification?t._batchUpdateToolDesc(e,[["zoom_small",{disabled:!0}],["zoom_default",{disabled:!0}]]):t._batchUpdateToolDesc(e,[["zoom_small",{disabled:!1}],["zoom_default",{disabled:!1}]]),t._noticeUpdateToolDesc(e),e.whiteboardMagnification>=t.maxMagnification?t._updateToolDesc(e,"zoom_big",{disabled:!0}):t._updateToolDesc(e,"zoom_big",{disabled:!1}),t._noticeUpdateToolDesc(e))})}},{key:"_toolIsUse",value:function(e){var t=!0,o=!1,n=void 0;try{for(var i,a=Object.keys(e.registerWhiteboardToolsList)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var r=i.value;/tool_/g.test(r)?e.registerWhiteboardToolsList[r].isUse=r===e.activeTool:/zoom_/g.test(r)&&(e.registerWhiteboardToolsList[r].zoom=e.whiteboardMagnification)}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}this._noticeUpdateToolDesc(e)}},{key:"_automaticTraverseWhiteboardInstance",value:function(e,t){if(e)t&&"function"==typeof t&&t(e);else{var o=!0,n=!1,i=void 0;try{for(var a,r=Object.values(this.whiteboardInstanceStore)[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;t&&"function"==typeof t&&t(s)}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}}},{key:"_saveAwaitSaveToWhiteboardInstanceSignallingToWhiteboardInstance",value:function(e){for(var t=!1,o=0;o<this.awaitSaveToWhiteboardInstanceSignallingArray.length;o++){var n=this.awaitSaveToWhiteboardInstanceSignallingArray[o];if(n.data&&"string"==typeof n.data&&(n.data=JSON.parse(n.data)),n.data.whiteboardID===e.id){var i=n.id.substring(n.id.lastIndexOf("###_")+4);if(i){var a=i.split("_");i=a[0]+"_"+a[1]+"_"+a[2],e.waitingProcessShapeData[i]||(e.waitingProcessShapeData[i]=[]),e.waitingProcessShapeData[i].push(n),t=!0,this.awaitSaveToWhiteboardInstanceSignallingArray.splice(o,1,null)}}}if(t)for(var r=this.awaitSaveToWhiteboardInstanceSignallingArray.length-1;0<=r;r--)null===this.awaitSaveToWhiteboardInstanceSignallingArray[r]&&this.awaitSaveToWhiteboardInstanceSignallingArray.splice(r,1)}},{key:"_basicTemplateWhiteboardSignallingListToWhiteboardInstance",value:function(e){e.needLooadBaseboard&&!e.isBaseboard&&void 0!==e.dependenceBaseboardWhiteboardID&&!e.isHandleBasicTemplateWhiteboardSignallingList&&e.id!==e.dependenceBaseboardWhiteboardID&&this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID]&&Array.isArray(this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID])&&(this._batchReceiveSnapshot(this.basicTemplateWhiteboardSignallingList[e.dependenceBaseboardWhiteboardID],e),e.isHandleBasicTemplateWhiteboardSignallingList=!0)}},{key:"_convertCanvasToImage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"png";if(e&&e.lc&&e.lc.canvas){var o=e.lc.canvas,n=new Image;return n.src=o.toDataURL("image/"+t),n}}},{key:"_convertCanvasToImageBase64",value:function(e,t){if(e&&e.lc&&e.lc.canvas)return e.lc.canvas.toDataURL("image/"+t)}},{key:"_saveBasicTemplateWhiteboardSignallingData",value:function(e,t){e&&e.data&&e.data.isBaseboard&&void 0!==e.data.whiteboardID&&(e.source=t,this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID]=this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID]||[],this.basicTemplateWhiteboardSignallingList[e.data.whiteboardID].push(e))}},{key:"_handlerShowRemoteRemindContentFromPubmsgData",value:function(e,t){var o=void 0,n=void 0,i=void 0;if("pubmsg"===t.source&&t.data&&"shapeSaveEvent"===t.data.eventType)if("LinePath"==t.data.data.className){var a=t.data.data.points.length;0<a&&(o=t.data.data.points[a-1].x,n=t.data.data.points[a-1].y,i=t.remindContent),this._productionWhiteboardRemindContent(e,o,n,i,t.data.shapeId)}else"Rectangle"==t.data.data.className||"Ellipse"==t.data.data.className?(0<t.data.data.width&&0<t.data.data.height?(o=t.data.data.x+t.data.data.width,n=t.data.data.y):0<t.data.data.width&&t.data.data.height<0?(o=t.data.data.x+t.data.data.width,n=t.data.data.y+t.data.data.height):t.data.data.width<0&&t.data.data.height<0?(o=t.data.data.x,n=t.data.data.y+t.data.data.height):t.data.data.width<0&&0<t.data.data.height&&(o=t.data.data.x,n=t.data.data.y),i=t.remindContent,this._productionWhiteboardRemindContent(e,o,n,i,t.data.shapeId)):"Text"==t.data.data.className?(o=t.data.data.x+t.data.data.renderer.metrics.width,n=t.data.data.y+20*t.data.data.renderer.metricses.length,i=t.remindContent,this._productionWhiteboardRemindContent(e,o,n,i,t.data.shapeId)):"Line"==t.data.data.className&&(o=t.data.data.x2,n=t.data.data.y2,i=t.remindContent,this._productionWhiteboardRemindContent(e,o,n,i,t.data.shapeId))}},{key:"_noticeNpdateWhiteboardToolsInfo",value:function(e){e.handler&&"function"==typeof e.handler.receiveActionCommandCallback&&e.handler.receiveActionCommandCallback("updateWhiteboardToolsInfo",{id:e.id,whiteboardToolsInfo:Object.deepAssign({},e.whiteboardToolsInfo)})}}]),e}());o.default=l},{pdfobject:331}],336:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n={};n.commonWhiteboard={webAddress:/http:/.test(window.location.protocol)?"http://global.talk-cloud.net:80":"https://global.talk-cloud.net:443",docAddress:/http:/.test(window.location.protocol)?"http://global.talk-cloud.net:80":"https://global.talk-cloud.net:443",backupDocAddressList:[],myUserId:void 0,myRole:void 0,myName:void 0,isConnectedRoom:!1,isPlayback:!1,deviceType:void 0,clientType:void 0},n.defaultWhiteboard={sendH5DocumentRoomInfo:{},isBackEvent:!1,hasExtendDocument:!1,showpageNotice:!1,loadDynamicPptView:!0,loadH5DocumentView:!0,isMobile:!1,mediaShareToID:void 0,associatedMsgID:void 0,associatedUserID:void 0,clientMediaShare:!1,mediaSharePauseWhenOver:!1,isLoadAudioPlayer:!0,isLoadVideoPlayer:!0,isLoadDocumentRemark:!0,canRemark:!1,secondaryColor:"#ffffff",initWhiteboardProductionOptions:{},documentToolBarConfig:{parentNode:void 0,isDrag:!0,isLoadFullScreen:!0,isLoadRemark:!1,isLoadVolume:!1,initDragPosition:{left:50,top:98},fullScreenElementId:void 0},documentRemarkConfig:{parentNode:void 0,isDrag:!0,initDragPosition:{left:50,top:98}},whiteboardToolBarConfig:{parentNode:void 0,isDrag:!0,pencilWidthScale:1,eraserWidthScale:2,initDragPosition:{left:2,top:2},loadWhiteboardTools:{mouse:!0,laser:!0,pen:!0,text:!0,shape:!0,eraser:!0,clear:!0,undo:!0,redo:!0,setting:!0}},isShowReloadFileTip:!0,pptVolumeSynchronization:!1,insertPictureRule:"default",languageType:"ch",rootBackgroundColor:"transparent",primaryColor:"#000000",backgroundColor:"#ffffff",pencilWidth:5,shapeWidth:5,eraserWidth:15,fontSize:18,fontFamily:"微软雅黑",showShapeAuthor:!1,synchronization:!0,isOnlyUndoRedoClearMyselfShape:!1,canDraw:!0,canPage:!0,addPage:!0,actionClick:!0,defaultWhiteboardScale:16/9,isUseKeyboardPage:!0,isLoadDocumentToolBar:!0,isLoadWhiteboardToolBar:!0,isDisconnectedClearWhiteboardData:!1,isNativePlayAudio:!1,audioPlayerConfig:{parentNode:void 0,controlCallback:{play:void 0,pause:void 0},isLoadControl:!0,controlPermissions:{hasPlayOrPause:!0,hasChangeProgress:!0,hasClose:!0}},videoPlayerConfig:{parentNode:void 0,controlCallback:{play:void 0,pause:void 0},isLoadControl:!0,controlPermissions:{hasPlayOrPause:!0,hasChangeProgress:!0,hasClose:!0}}},o.default=n},{}],337:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),window.WhiteboardGlobalShare=window.WhiteboardGlobalShare||{};var n={WHITEBOARD_SDK_VERSION:"v2.1.0",WHITEBOARD_SDK_TIME:"2018102313",dynamicPptVersions:2017091401,remoteDynamicPptUpdateTime:2018042223,dynamicPptDebugLog:!1};console.info("[whiteboard-sdk]whiteboard sdk version is "+n.WHITEBOARD_SDK_VERSION+" , update time is "+n.WHITEBOARD_SDK_TIME),o.default=n},{}],338:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var I=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"createElement",value:function(e,t,o,n,i){var a=document.createElement(e);if(void 0!==t&&a.setAttribute("id",t),void 0!==o&&(a.className=o),n&&"object"===(void 0===n?"undefined":P(n))){var r=!0,s=!1,l=void 0;try{for(var c,d=Object.entries(n)[Symbol.iterator]();!(r=(c=d.next()).done);r=!0){var u=c.value,h=I(u,2),m=h[0],f=h[1];a.style[m]=f}}catch(e){s=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(s)throw l}}}if(i&&"object"===(void 0===i?"undefined":P(i))){var p=!0,g=!1,v=void 0;try{for(var y,b=Object.entries(i)[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var _=y.value,w=I(_,2),k=w[0],S=w[1];a.setAttribute(k,S)}}catch(e){g=!0,v=e}finally{try{!p&&b.return&&b.return()}finally{if(g)throw v}}}return a}},{key:"appendChild",value:function(e,t){try{e&&t&&e.appendChild&&e.appendChild(t)}catch(e){L.Logger.error("[sdk-whiteboard]DoomUtils.appendChild error ",e)}}},{key:"removeChild",value:function(e,t){try{e&&(t&&t.removeChild?t.removeChild(e):e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e))}catch(e){L.Logger.error("[sdk-whiteboard]DoomUtils.removeChild error ",e)}}},{key:"removeAllChild",value:function(e){e&&(e.innerHTML="")}},{key:"hasClass",value:function(e,t){return!(!e||"string"!=typeof t)&&(new RegExp(" "+t+" ").test(e.className)||new RegExp(" "+t).test(e.className)||new RegExp(t+" ").test(e.className))}},{key:"resetClass",value:function(e,t){e&&"string"==typeof t&&(e.className=" "+t)}},{key:"addClass",value:function(e,t){if(e)if("string"==typeof t)e.className?e.className=e.className.replace(new RegExp(" "+t,"g"),"").replace(new RegExp(t+" ","g"),"")+" "+t:e.className=" "+t;else if(Array.isArray(t)){var o=!0,n=!1,i=void 0;try{for(var a,r=t[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;e.className?e.className=e.className.replace(new RegExp(" "+s,"g"),"").replace(new RegExp(s+" ","g"),"")+" "+s:e.className=" "}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}}},{key:"removeClass",value:function(e,t){if(e)if("string"==typeof t)e.className?e.className=e.className.replace(new RegExp(" "+t,"g"),"").replace(new RegExp(t+" ","g"),""):e.className=" ";else if(Array.isArray(t)){var o=!0,n=!1,i=void 0;try{for(var a,r=t[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value;e.className?e.className=e.className.replace(new RegExp(" "+s,"g"),"").replace(new RegExp(s+" ","g"),""):e.className=" "}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}}},{key:"updateStyle",value:function(e,t){if(e&&t&&"object"===(void 0===t?"undefined":P(t))){var o=!0,n=!1,i=void 0;try{for(var a,r=Object.entries(t)[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value,l=I(s,2),c=l[0],d=l[1];e.style[c]=d}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}}}},{key:"show",value:function(e){if(Array.isArray(e)){var t=!0,o=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var r=i.value;this.updateStyle(r,{display:""})}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}}else this.updateStyle(e,{display:""})}},{key:"hide",value:function(e){if(Array.isArray(e)){var t=!0,o=!1,n=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var r=i.value;this.updateStyle(r,{display:"none"})}}catch(e){o=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw n}}}else this.updateStyle(e,{display:"none"})}}]),e}();o.default=new i},{}],339:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("./Utils"),a=(n=i)&&n.__esModule?n:{default:n};var r={newpptVersions:2017091401,remoteNewpptUpdateTime:2018032113,isSkipPageing:!1,isPlayVideoing:!1};r.allDocumentRemarkInfoMap=new Map,r.docAddress=/http:/.test(window.location.protocol)?"http://global.talk-cloud.net:80":"https://global.talk-cloud.net:443",r.laterAddressList=[],r.backupDocAddressList=[],r.docAddressList=[],r.hasGetDocAddressIndexByLocalStorage=!1,r.docAddressKey="",r.localStorageDocAddressKey="",r.nowUseDocAddress=a.default.getItem(r.docAddressList,r.docAddressKey),r.showPageFromId=void 0,r.extendShowPageFromId=void 0,r.protocol="",r.port="",window.WBGlobal=r,o.default=r},{"./Utils":343}],340:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n=new Map;n.set("ch",{documentToolbar:{prevPage:"上一页",nextPage:"下一页",prevStep:"上一页",nextStep:"下一页",addPage:"加页",enlargeWhiteboard:"放大",narrowWhiteboard:"缩小",pptVolume:"音量",onRemark:"打开备注",offRemark:"关闭备注",onGeneralDocumentFullScreen:"绘制区域全屏",offGeneralDocumentFullScreen:"绘制区域取消全屏",onDynamicPPTFullScreen:"PPT全屏",offDynamicPPTFullScreen:"PPT取消全屏",onH5DocumentFullScreen:"H5课件全屏",offH5DocumentFullScreen:"H5课件取消全屏"},whiteboardToolbar:{fontFamily:{title:"文字样式",options:{Msyh:"微软雅黑",Ming:"宋体",Arial:"Arial"}},fontSizeText:"号",pencilWidthTitle:"线条宽度",eraserWidthTitle:"橡皮擦大小",toolTextList:{tool_mouse:"鼠标",tool_laser:"激光笔",penList:"笔",tool_pencil:"铅笔",tool_highlighter:"荧光笔",tool_line:"线条",tool_arrow:"箭头",tool_text:"文字",shapeList:"形状",tool_rectangle_empty:"空心矩形",tool_rectangle:"矩形",tool_ellipse_empty:"空心椭圆",tool_ellipse:"椭圆",tool_eraser:"橡皮檫",action_undo:"撤销",action_redo:"恢复",action_clear:"清屏",settingList:"更多设置"}},documentRemark:{name:"备注",closeTitle:"关闭备注"}}),n.set("tw",{documentToolbar:{prevPage:"上壹頁",nextPage:"下壹頁",prevStep:"上壹頁",nextStep:"下壹頁",addPage:"加頁",enlargeWhiteboard:"放大",narrowWhiteboard:"縮小",pptVolume:"音量",onRemark:"打開備註",offRemark:"關閉備註",onGeneralDocumentFullScreen:"繪制區域全屏",offGeneralDocumentFullScreen:"繪制區域取消全屏",onDynamicPPTFullScreen:"PPT全屏",offDynamicPPTFullScreen:"PPT取消全屏",onH5DocumentFullScreen:"H5課件全屏",offH5DocumentFullScreen:"H5課件取消全屏"},whiteboardToolbar:{fontFamily:{title:"文字樣式",options:{Msyh:"微軟雅黑",Ming:"宋體",Arial:"Arial"}},fontSizeText:"號",pencilWidthTitle:"線條寬度",eraserWidthTitle:"橡皮擦大小",toolTextList:{tool_mouse:"鼠標",tool_laser:"激光筆",penList:"筆",tool_pencil:"鉛筆",tool_highlighter:"熒光筆",tool_line:"線條",tool_arrow:"箭頭",tool_text:"文字",shapeList:"形狀",tool_rectangle_empty:"空心矩形",tool_rectangle:"矩形",tool_ellipse_empty:"空心橢圓",tool_ellipse:"橢圓",tool_eraser:"橡皮檫",action_undo:"撤銷",action_redo:"恢復",action_clear:"清屏",settingList:"更多設置"}},documentRemark:{name:"備註",closeTitle:"關閉備註"}}),n.set("en",{documentToolbar:{prevPage:"Previous Page",nextPage:"Next Page",prevStep:"Previous Page",nextStep:"Next Page",addPage:"Add Page",enlargeWhiteboard:"Zoom In",narrowWhiteboard:"Zoom Out",pptVolume:"Volume",onRemark:"Open Courseware Remarks",offRemark:"Close Courseware Remarks",onGeneralDocumentFullScreen:"Full Screen of Drawing Area",offGeneralDocumentFullScreen:"Cancel Full Screen of Drawing Area",onDynamicPPTFullScreen:"Full Screen  of PPT",offDynamicPPTFullScreen:"Cancel Full Screen  of PPT",onH5DocumentFullScreen:"Full Screen  of Courseware",offH5DocumentFullScreen:"Cancel Full Screen  of Courseware"},whiteboardToolbar:{fontFamily:{title:"Font Format",options:{Msyh:"Microsoft YaHei",Ming:"SimSun",Arial:"Arial"}},fontSizeText:"Font",pencilWidthTitle:"Line Width",eraserWidthTitle:"Eraser Size",toolTextList:{tool_mouse:"Mouse",tool_laser:"Laser Pen",penList:"Pen",tool_pencil:"Pencil",tool_highlighter:"Highlighter",tool_line:"Line",tool_arrow:"Arrow",tool_text:"Text Input",shapeList:"Shape",tool_rectangle_empty:"Square",tool_rectangle:"Solid Square",tool_ellipse_empty:"Circle",tool_ellipse:"Solid Circle",tool_eraser:"Eraser",action_undo:"Undo",action_redo:"Recover",action_clear:"Clear Screen",settingList:"More"}},documentRemark:{name:"Courseware Remarks",closeTitle:"Close Courseware Remarks"}}),n.set("ja",{documentToolbar:{prevPage:"前のページ",nextPage:"次のページ",prevStep:"前のページ",nextStep:"次のページ",addPage:"ページを追加する",enlargeWhiteboard:"拡大",narrowWhiteboard:"縮小",pptVolume:"ボリューム",onRemark:"備考を開く",offRemark:"備考を閉じる",onGeneralDocumentFullScreen:"描画領域全画面",offGeneralDocumentFullScreen:"手書き部分全画面表示の終了",onDynamicPPTFullScreen:"PPT全画面",offDynamicPPTFullScreen:"PPT全画面表示の終了",onH5DocumentFullScreen:"h5教材全画面",offH5DocumentFullScreen:"H5教材全画面の終了"},whiteboardToolbar:{fontFamily:{title:"フォント様式",options:{Msyh:"Microsoft　Yahei",Ming:"宋体",Arial:"Arial"}},fontSizeText:"番号",pencilWidthTitle:"線の太さ",eraserWidthTitle:"消しゴムの大きさ",toolTextList:{tool_mouse:"マウス",tool_laser:"レーザーペン",penList:"鉛筆",tool_pencil:"鉛筆",tool_highlighter:"蛍光ペン",tool_line:"線",tool_arrow:"矢印",tool_text:"文字",shapeList:"形状",tool_rectangle_empty:"長方形（塗りつぶしなし）",tool_rectangle:"長方形",tool_ellipse_empty:"楕円（塗りつぶしなし）",tool_ellipse:"楕円",tool_eraser:"消しゴム",action_undo:"キャンセル",action_redo:"元に戻す",action_clear:"クリア",settingList:"詳細設定"}},documentRemark:{name:"備考",closeTitle:"关闭备注"}}),o.default=n},{}],341:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=e("./Utils"),r=(n=a)&&n.__esModule?n:{default:n};var s=window.Log||{error:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.error.apply(console,e)},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.log.apply(console,e)},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.info.apply(console,e)},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.warn.apply(console,e)},warning:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.warn.apply(console,e)},trace:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.trace.apply(console,e)},debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(void 0!==L.Logger.panel){for(var o="",n=0;n<e.length;n++)o+="object"===i(e[n])?r.default.toJsonStringify(e[n]):e[n];L.Logger.panel.value=L.Logger.panel.value+"\n"+o}console.debug.apply(console,e)}};window.Log=s,o.default=s},{"./Utils":343}],342:[function(e,t,o){var n,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=void 0,i=function(){function i(e){return e||null}function a(e,t,o,n){var i,a,r=["then","catch","always"].reduce(function(t,o){return t[o]=function(e){return t[o]=e,t},t},{}),s=new XMLHttpRequest,l=function(e,t,o){if("get"!==o.toLowerCase()||!t)return e;var n=d(t),i=-1<e.indexOf("?")?"&":"?";return e+i+n}(t,o,e);return s.open(e,l,!0),s.withCredentials=n.hasOwnProperty("withCredentials"),function(t,o){e=o=o||{},Object.keys(e).some(function(e){return"content-type"===e.toLowerCase()})||(o["Content-Type"]="application/x-www-form-urlencoded");var e;Object.keys(o).forEach(function(e){o[e]&&t.setRequestHeader(e,o[e])})}(s,n.headers),s.addEventListener("readystatechange",(i=r,a=s,function e(){a.readyState===a.DONE&&(a.removeEventListener("readystatechange",e,!1),i.always.apply(i,c(a)),200<=a.status&&a.status<300?i.then.apply(i,c(a)):i.catch.apply(i,c(a)))}),!1),s.send(d(o)),r.abort=function(){return s.abort()},r}function c(t){var o;try{o=JSON.parse(t.responseText)}catch(e){o=t.responseText}return[o,t]}function d(e){return t=e,"[object Object]"===Object.prototype.toString.call(t)?(n=e,Object.keys(n).reduce(function(e,t){var o=e?e+"&":"";return o+r(t)+"="+r(n[t])},"")):e;var n,t}function r(e){return encodeURIComponent(e)}return function(n){return(n=n||{}).baseUrl=n.baseUrl||"",n.method&&n.url?a(n.method,n.baseUrl+n.url,i(n.data),n):["get","post","put","delete"].reduce(function(e,o){return e[o]=function(e,t){return a(o,n.baseUrl+e,i(t),n)},e},{})}},"function"==typeof define&&define.amd?define("ajax",i):"object"===(void 0===o?"undefined":a(o))?o=t.exports=i():n.ajax=i()},{}],343:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var m=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var a=function(e){return"object"===(void 0===e?"undefined":f(e))&&"[object object]"===Object.prototype.toString.call(e).toLowerCase()&&!e.length};if(!(Object&&Object.shallowAssign&&Object&&Object.customAssign)){var i=function(t){try{return Object.assign.apply(Object.assign,arguments)}catch(e){for(var o=t,n=1;n<arguments.length;n++){var i=arguments[n];if(i&&"object"===(void 0===i?"undefined":f(i)))for(var a in i)o[a]=i[a]}return t}};Object&&Object.shallowAssign||(Object.shallowAssign=i),Object&&Object.customAssign||(Object.customAssign=i)}Object&&Object.deepAssign||(Object.deepAssign=function(e){for(var t=e,o=1;o<arguments.length;o++){var n=arguments[o];if(n&&"object"===(void 0===n?"undefined":f(n)))for(var i in n)void 0===t[i]?"object"===f(n[i])&&(Array.isArray(n[i])||a(n[i]))?t[i]=Object.deepAssign(Array.isArray(n[i])?[]:{},n[i]):t[i]=n[i]:"object"===f(n[i])&&(Array.isArray(n[i])||a(n[i]))?t[i]=Object.deepAssign(Array.isArray(n[i])?[]:{},"object"===f(t[i])?t[i]:Array.isArray(n[i])?[]:{},n[i]):t[i]=n[i]}return e});var p=!1;try{var r=Object.defineProperty({},"passive",{get:function(){p={passive:!0}}});window.addEventListener("test",null,r)}catch(e){console.error("[whiteboarrd-sdk]passiveEvents err:",e)}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"addEvent",value:function(t,o,e){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];try{t.addEventListener?t.addEventListener(o,e,n):t.attachEvent?t.attachEvent("on"+o,e):t["on"+o]=e}catch(e){L.Logger.error("add dom event fail , event type is "+o+" , element:",t)}}},{key:"removeEvent",value:function(t,o,e,n){try{t.addEventListener?t.removeEventListener(o,e,n):t.attachEvent?t.detachEvent("on"+o,e):t["on"+o]=null}catch(e){L.Logger.error("remove dom event fail , event type is "+o+" , element:",t)}}},{key:"isEmptyJson",value:function(e){return 0===Object.keys(e).length}},{key:"isFullScreenStatus",value:function(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen||!1}},{key:"launchFullscreen",value:function(e){e&&(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen())}},{key:"exitFullscreen",value:function(){document.exitFullScreen?document.exitFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():element.msExitFullscreen&&element.msExitFullscreen()}},{key:"getFullscreenElement",value:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement}},{key:"addFullscreenchange",value:function(e){this.addEvent(document,"fullscreenchange",e,!1),this.addEvent(document,"webkitfullscreenchange",e,!1),this.addEvent(document,"mozfullscreenchange",e,!1),this.addEvent(document,"MSFullscreenChange",e,!1),this.addEvent(document,"msfullscreenchange",e,!1),this.addEvent(document,"fullscreeneventchange",e,!1)}},{key:"removeFullscreenchange",value:function(e){this.removeEvent(document,"fullscreenchange",e,!1),this.removeEvent(document,"webkitfullscreenchange",e,!1),this.removeEvent(document,"mozfullscreenchange",e,!1),this.removeEvent(document,"MSFullscreenChange",e,!1),this.removeEvent(document,"msfullscreenchange",e,!1),this.removeEvent(document,"fullscreeneventchange",e,!1)}},{key:"shallowCompareJson",value:function(e,t){return e===t}},{key:"deepCompareJson",value:function(e,t){if("object"!==(void 0===e?"undefined":f(e))||Array.isArray(e)||"object"!==(void 0===e?"undefined":f(e))||Array.isArray(e))return L.Logger.warning("deepCompareJson arguments must is json!"),e===t;var o=Object.deepAssign({},t),n=!0,i=!0,a=!1,r=void 0;try{for(var s,l=Object.entries(e)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,d=m(c,2),u=d[0],h=d[1];if(!o.hasOwnProperty(u)){n=!1;break}if(h!==o[u]){n=!1,delete o[u];break}delete o[u]}}catch(e){a=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw r}}return n&&!Object.keys(o).length}},{key:"isFunction",value:function(e){return"function"==typeof e}},{key:"isJson",value:function(e){return"object"===(void 0===e?"undefined":f(e))&&"[object object]"===Object.prototype.toString.call(e).toLowerCase()&&!e.length}},{key:"setLocalStorageItem",value:function(e,t){try{window.localStorage?window.localStorage.setItem?window.localStorage.setItem(e,t):L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage.setItem , key is "+e+" , value is "+t+"!"):this.isPrintNotSupportLocalStorage||(this.isPrintNotSupportLocalStorage=!0,L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage!"))}catch(e){this.isPrintNotSupportLocalStorage||(this.isPrintNotSupportLocalStorage=!0,L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage , error info:",e))}}},{key:"getLocalStorageItem",value:function(e){try{return window.localStorage?window.localStorage.getItem?window.localStorage.getItem(e):(L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage.getItem , key is "+e+" !"),""):(this.isPrintNotSupportLocalStorage||(this.isPrintNotSupportLocalStorage=!0,L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage!")),"")}catch(e){return this.isPrintNotSupportLocalStorage||(this.isPrintNotSupportLocalStorage=!0,L.Logger.warning("[whiteboard-sdk]Browser does not support localStorage , error info:",e)),""}}},{key:"toJsonStringify",value:function(e){if(!e)return e;try{if(!a(e))return e;var t=JSON.stringify(e);t&&(e=t)}catch(e){}return e}},{key:"toJsonParse",value:function(e){if(!e)return e;try{if("string"!=typeof e)return e;var t=JSON.parse(e);t&&(e=t)}catch(e){}return e}},{key:"getPcSDKVersion",value:function(){return TK&&TK.getSdkVersion&&TK.getSdkVersion()?Number(TK.getSdkVersion().replace(/./g,"").replace(/v/g,"")):0}},{key:"getItem",value:function(o,n,e){var t,i,a,r=void 0,s=void 0;if(Array.isArray(o))return r=o.find(function(e,t){return s=t+1===o.length?-1:t,e.hostname===n}),e?s&&!isNaN(s)&&o[s+1]?o[s+1].hostname:"":r&&r.protocol&&r.hostname&&r.port?(t=r.protocol,i=r.hostname,a=r.port,t+"://"+i+":"+a):""}},{key:"onElementResize",value:function(e,t){try{if(!(e instanceof HTMLElement))throw new TypeError("Parameter 1 is not instance of 'HTMLElement'.");if(/^(area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr|script|style|textarea|title)$/i.test(e.tagName))throw new TypeError("Unsupported tag type. Change the tag or wrap it in a supported tag(e.g. div).");if("function"!=typeof t)throw new TypeError("Parameter 2 is not of type 'function'.");var o=e.offsetWidth||1,n=e.offsetHeight||1,i=1e4*o,a=1e4*n,r=document.createElement("div");r.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;z-index=-10000;overflow:hidden;visibility:hidden;";var s=r.cloneNode(!1),l=document.createElement("div");l.style.cssText="transition:0s;animation:none;";var c=l.cloneNode(!1);l.style.width=i+"px",l.style.height=a+"px",c.style.width="250%",c.style.height="250%",r.appendChild(l),s.appendChild(c),e.appendChild(r),e.appendChild(s),r.offsetParent!==e&&(e.style.position="relative"),r.scrollTop=s.scrollTop=a,r.scrollLeft=s.scrollLeft=i;var d=0,u=0,h=function(){d===o&&u===n||(o=d,n=u,t())},m=function(){d=e.offsetWidth||1,u=e.offsetHeight||1,d===o&&u===n||requestAnimationFrame(h),r.scrollTop=s.scrollTop=a,r.scrollLeft=s.scrollLeft=i};r.addEventListener("scroll",m,p),s.addEventListener("scroll",m,p)}catch(e){L.Logger.error("[whiteboarrd-sdk]onElementResize err:",e)}}}]),e}();o.default=new s},{}],344:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),e("babel-polyfill"),e("./utils/Log");var n,i=e("./TKWhiteBoardManager"),a=(n=i)&&n.__esModule?n:{default:n};o.default=a.default},{"./TKWhiteBoardManager":332,"./utils/Log":341,"babel-polyfill":1}],345:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),i=a(e("../components/TalkcloudReact")),f=a(e("../../utils/DomUtils")),s=a(e("../../utils/Utils"));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,n));return i.parentNode=e,i.instanceId=t,i.whiteBoardManagerInstance=o,i.elements={},i.videoDumb=void 0,i._createElements(),i._connectElements(),i.render(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.default),n(a,[{key:"shouldComponentUpdateProps",value:function(e){if(e.streamInfo!==this.props.streamInfo&&e.streamInfo&&this.props.streamInfo&&e.streamInfo.attributes&&this.props.streamInfo.attributes){var t=!1,o=!0,n=!1,i=void 0;try{for(var a,r=Object.entries(this.props.streamInfo.attributes)[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value,l=u(s,2),c=l[0],d=l[1];if("position"!==c&&d!==e.streamInfo.attributes[c]){t=!0;break}}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}if(e.streamInfo.attributes.position!==this.props.streamInfo.attributes.position&&!t)return!0}return!1}},{key:"componentDidUpdateProps",value:function(e){var t=this;if(e.streamInfo!==this.props.streamInfo){var o=void 0===e.streamInfo&&this.props.streamInfo,n=!this.props.streamInfo,i=e.streamInfo&&this.props.streamInfo&&e.streamInfo.attributes&&this.props.streamInfo.attributes&&e.streamInfo.attributes.position!==this.props.streamInfo.attributes.position;if(o||n||i){var a=(new Date).getTime();!this.updateTime||500<a-this.updateTime?(this.updateTime=a,clearTimeout(this._updateProgressTimer),this._updateProgress()):(clearTimeout(this._updateProgressTimer),this._updateProgressTimer=setTimeout(function(){a=(new Date).getTime(),t.updateTime=a,t._updateProgress()},750))}}e.volume!==this.props.volume&&this.volumeSlider&&"function"==typeof this.volumeSlider.setProgress&&r(this.volumeSlider.setProgress(this.props.volume)),e.muteVolume!==this.props.muteVolume&&this.volumeSlider&&"function"==typeof this.volumeSlider.setProgress&&r(this.volumeSlider.setProgress(this.props.muteVolume?0:this.props.volume)),e.isPlayback!==this.props.isPlayback&&(this.props.isPlayback?f.default.addClass(this.elements.mediaTotalControlElement,"tk-playback"):f.default.removeClass(this.elements.mediaTotalControlElement,"tk-playback")),(e.myUserId!==this.props.myUserId||e.streamInfo!==this.props.streamInfo&&!e.streamInfo&&this.props.streamInfo)&&this._updateControlByPermissions(),s.default.deepCompareJson(e.controlPermissions,this.props.controlPermissions)&&this._updateControlByPermissions()}},{key:"destroyView",value:function(){for(var e in f.default.removeChild(this.elements.mediaTotalControlElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"playOrPauseClick",value:function(){"function"==typeof this.props.onPlayOrPauseClick&&this.props.onPlayOrPauseClick()}},{key:"closeClick",value:function(){"function"==typeof this.props.onCloseClick&&this.props.onCloseClick()}},{key:"fullScreenClick",value:function(){"function"==typeof this.props.onFullScreenClick&&this.props.onFullScreenClick()}},{key:"volumeMuteClick",value:function(){"function"==typeof this.props.onVolumeMuteClick&&this.props.onVolumeMuteClick()}},{key:"_formatTime",value:function(e){var t=parseInt(e/60),o=Math.round(e%60);return 60===o&&(t+=1,o=0),0===parseInt(t/10)&&(t="0"+t),0===parseInt(o/10)&&(o="0"+o),t+":"+o}},{key:"_createElements",value:function(){this.elements.mediaTotalControlElement=f.default.createElement("article",this.instanceId+(this.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+"TalkMediaPlayerTotalControl","talkcloud-sdk-whiteboard tk-media-player  tk-media-player-total-control "+(this.props.isVideoPlayer?"video-player-control-container ":"audio-player-control-container ")+(this.props.isPlayback?"tk-playback ":" "))}},{key:"_connectElements",value:function(){var t=this;f.default.appendChild(this.parentNode,this.elements.mediaTotalControlElement);var e=(this.props.streamInfo||{}).attributes,o=void 0===e?{}:e,n=o.filename,i=void 0===n?"":n,a=o.position,r=void 0===a?0:a,s=o.duration,l=void 0===s?0:s,c=o.pause;this.elements.mediaTotalControlElement&&(this.elements.mediaTotalControlElement.innerHTML=' \n                <article class="media-player-box clear-float " >\n                    <span class="media-player-icon add-fl '+(c?"play":"pause")+'" ></span>\n                    <div class="media-player-control-container add-fl clear-float"> \n                        <button  class="play-pause-btn add-cursor-pointer add-fl '+(c?"play":"pause")+'"  ></button>\n                        <div class="media-player-info-container add-fl"> \n                            <div class="media-player-name-time-container clear-float"> \n                                <span class="media-player-name add-fl add-nowrap" >'+i+'</span>\n                                <span class="media-player-time-container add-fr" > \n                                    <em class="curr-time" >'+this._formatTime(r/1e3)+'</em> / <em class="total-time" >'+this._formatTime(l/1e3)+'</em>\n                                </span>\n                            </div>\n                            <div class="media-player-progress-container" id="'+this.instanceId+(this.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+'MediaPlayerProgressBar" >                              \n                            </div>\n                        </div>\n                        <div class="volume-info-container add-fl clear-float" > \n                            <button  class="volume-icon add-cursor-pointer add-fl" ></button>\n                            <div class="volume-bar-container add-fl"  id="'+this.instanceId+(this.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+'MediaPlayerVolumeBar" ></div>\n                        </div>\n                        <button  class="close-btn add-cursor-pointer add-fl" ></button>\n                        <button  class="full-screen-btn add-cursor-pointer add-fl" ></button>\n                    </div>\n                </article> \n            ',this.elements.playPauseBtnElement=this.elements.mediaTotalControlElement.getElementsByClassName("play-pause-btn")[0],this.elements.playPauseIconElement=this.elements.mediaTotalControlElement.getElementsByClassName("media-player-icon")[0],this.elements.volumeMuteBtnElement=this.elements.mediaTotalControlElement.getElementsByClassName("volume-icon")[0],this.elements.closeBtnElement=this.elements.mediaTotalControlElement.getElementsByClassName("close-btn")[0],this.elements.fullScreenBtnElement=this.elements.mediaTotalControlElement.getElementsByClassName("full-screen-btn")[0],this.elements.filenameElement=this.elements.mediaTotalControlElement.getElementsByClassName("media-player-name")[0],this.elements.currTimeElement=this.elements.mediaTotalControlElement.getElementsByClassName("curr-time")[0],this.elements.totalTimeElement=this.elements.mediaTotalControlElement.getElementsByClassName("total-time")[0],this.elements.mediaPlayerProgressElement=this.elements.mediaTotalControlElement.getElementsByClassName("media-player-progress-container")[0],this.elements.playPauseBtnElement.onclick=this.playOrPauseClick.bind(this),this.elements.volumeMuteBtnElement.onclick=this.volumeMuteClick.bind(this),this.elements.closeBtnElement.onclick=this.closeClick.bind(this),this.elements.fullScreenBtnElement.onclick=this.fullScreenClick.bind(this),window.TalkSlider&&(this.progressSlider=new window.TalkSlider({sliderContainer:{id:t.instanceId+(t.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+"MediaPlayerProgressBar",direction:"horizontal"},onBeforeChange:function(e){t.mediaPlayerProgressSlidering=!0},onAfterChange:function(e){t.mediaPlayerProgressSlidering=!1,"function"==typeof t.props.onChangeProgress&&t.props.onChangeProgress(e),t._updateProgress(),t.tempStopUpdatePosition=!0,setTimeout(function(){t.tempStopUpdatePosition=!1},500)}}),this.volumeSlider=new window.TalkSlider({sliderContainer:{id:t.instanceId+(t.props.isVideoPlayer?"VideoPlayer":"MediaPlayer")+"MediaPlayerVolumeBar",direction:"horizontal"},onAfterChange:function(e){"function"==typeof t.props.onChangeVolume&&t.props.onChangeVolume(e)}})),this._updateControlByPermissions())}},{key:"_updateControlByPermissions",value:function(){var e=!1,t=this.props.streamInfo||{},o=t.streamType,n=t.userid;"file"===o&&n!=this.props.myUserId&&(e=!0),f.default.updateStyle(this.elements.playPauseBtnElement,{display:!this.props.controlPermissions.hasPlayOrPause||e?"none":""}),this.elements.playPauseBtnElement.disabled=!this.props.controlPermissions.hasPlayOrPause||e,f.default.updateStyle(this.elements.closeBtnElement,{display:this.props.controlPermissions.hasClose?"":"none"}),this.elements.closeBtnElement.disabled=!this.props.controlPermissions.hasClose,this.progressSlider&&s.default.isFunction(this.progressSlider.updateDisabled)&&this.progressSlider.updateDisabled(!this.props.controlPermissions.hasChangeProgress||e),!this.props.controlPermissions.hasChangeProgress||e?f.default.addClass(this.elements.mediaPlayerProgressElement,"disabled"):f.default.removeClass(this.elements.mediaPlayerProgressElement,"disabled")}},{key:"_updateProgress",value:function(){if(this.props.streamInfo&&!this.mediaPlayerProgressSlidering&&!this.tempStopUpdatePosition&&this.progressSlider&&"function"==typeof this.progressSlider.setProgress){var e=0,t=this.props.streamInfo&&this.props.streamInfo.attributes?this.props.streamInfo.attributes:{},o=t.position,n=void 0===o?0:o,i=t.duration,a=void 0===i?0:i;0!==a&&(e=n/a*100,isNaN(e)&&(e=0)),e<0?e=0:100<e&&(e=100),this.elements.currTimeElement.innerHTML=this._formatTime(n/1e3),this.progressSlider.setProgress(e)}}},{key:"render",value:function(){var e=this.props,t=e.streamInfo,o=void 0===t?{}:t,n=e.muteVolume,i=e.isFullScreen,a=o.attributes,r=void 0===a?{}:a,s=r.filename,l=void 0===s?"":s,c=r.position,d=void 0===c?0:c,u=r.duration,h=void 0===u?0:u,m=r.pause;this.elements.filenameElement.innerHTML=l,this.elements.currTimeElement.innerHTML=this._formatTime(d/1e3),this.elements.totalTimeElement.innerHTML=this._formatTime(h/1e3),m?(f.default.removeClass(this.elements.playPauseBtnElement,"pause"),f.default.addClass(this.elements.playPauseBtnElement,"play"),f.default.removeClass(this.elements.playPauseIconElement,"pause"),f.default.addClass(this.elements.playPauseIconElement,"play")):(f.default.removeClass(this.elements.playPauseBtnElement,"play"),f.default.addClass(this.elements.playPauseBtnElement,"pause"),f.default.removeClass(this.elements.playPauseIconElement,"play"),f.default.addClass(this.elements.playPauseIconElement,"pause")),n?f.default.addClass(this.elements.volumeMuteBtnElement,"mute"):f.default.removeClass(this.elements.volumeMuteBtnElement,"mute"),i?f.default.addClass(this.elements.fullScreenBtnElement,"yes"):f.default.removeClass(this.elements.fullScreenBtnElement,"yes")}}]),a}();o.default=l},{"../../utils/DomUtils":338,"../../utils/Utils":343,"../components/TalkcloudReact":347}],346:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),a=n(e("./TalkcloudReact")),c=n(e("../../utils/DomUtils"));function n(e){return e&&e.__esModule?e:{default:e}}var r=function(e){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return o.parentNode=e,o.elements={},o.state={extendShow:!1},o.listDirection="down",o._createConnectElements(),o.render(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),i(n,[{key:"componentDidUpdateState",value:function(e){e.extendShow!==this.state.extendShow&&this._noticeSelectExtendListShowOrHide(this.state.extendShow)}},{key:"componentDidUpdateProps",value:function(e){if(e.selectOptions!==this.state.selectOptions){var t=this.props,o=t.optionClassName,n=t.selectOptions,i=void 0===n?[]:n,a=t.disabled,r=t.currentValue;c.default.removeAllChild(this.elements.selectListViewElement);for(var s=0;s<i.length;s++){var l=c.default.createElement("li",void 0,"select-option "+(o||" ")+(r===i[s].value?" selected":" "));l.innerHTML=i[s].value,l.onclick=a?void 0:this.optionOnClick.bind(this,i[s].value,s),c.default.appendChild(this.elements.selectListViewElement,l)}}}},{key:"destroyView",value:function(){for(var e in c.default.removeChild(this.elements.selectViewRootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"forceHideSelectExtendList",value:function(){this.setState({extendShow:!1})}},{key:"currentTextOnClick",value:function(e){return this.props.disabled||(this.setState({extendShow:!this.state.extendShow}),e&&(e.preventDefault(),e.stopPropagation())),!1}},{key:"optionOnClick",value:function(e,t,o){return this.props.disabled||(e!==this.props.currentValue&&this.props.onChange&&"function"==typeof this.props.onChange&&this.props.onChange(e,t),this.setState({extendShow:!1}),o&&(o.preventDefault(),o.stopPropagation())),!1}},{key:"selectContainerOnMouseLeave",value:function(e){return this.setState({extendShow:!1}),e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"_noticeSelectExtendListShowOrHide",value:function(e){this.props.noticeSelectExtendListShowOrHide&&"function"==typeof this.props.noticeSelectExtendListShowOrHide&&this.props.noticeSelectExtendListShowOrHide(e)}},{key:"_getRect",value:function(e){var t=e.getBoundingClientRect(),o=document.documentElement.clientTop,n=document.documentElement.clientLeft;return{top:t.top-o,bottom:t.bottom-o,left:t.left-n,right:t.right-n,width:t.width,height:t.height}}},{key:"_createConnectElements",value:function(){this.elements.selectViewRootElement=c.default.createElement("article",this.props.id,void 0,{}),this.elements.currentSelectTextElement=c.default.createElement("button",void 0,void 0,{}),this.elements.arrowElement=c.default.createElement("span"),this.elements.arrowElement.innerHTML='<em class="arrow "></em>',this.elements.selectListViewElement=c.default.createElement("ol"),c.default.appendChild(this.elements.selectViewRootElement,this.elements.currentSelectTextElement),c.default.appendChild(this.elements.selectViewRootElement,this.elements.arrowElement),c.default.appendChild(this.elements.selectViewRootElement,this.elements.selectListViewElement),c.default.appendChild(this.parentNode,this.elements.selectViewRootElement),this.elements.currentSelectTextElement.onclick=this.currentTextOnClick.bind(this),this.elements.selectViewRootElement.onmouseleave=this.selectContainerOnMouseLeave.bind(this)}},{key:"render",value:function(){var e=this.props,t=e.className,o=e.disabled,n=e.currentValue,i=void 0===n?"":n;if(c.default.updateStyle(this.elements.selectListViewElement,{display:o?"none":this.state.extendShow?"block":"none"}),this.listDirection=this.props.listDirection||this.listDirection,c.default.resetClass(this.elements.selectViewRootElement,"talkcloud-sdk-whiteboard  select-root tk-select-container clear-float "+(o?" disabled ":"  ")+(t||"")+(o?" hideExtendList":this.state.extendShow?" showExtendList":" hideExtendList")),c.default.resetClass(this.elements.currentSelectTextElement,"talkcloud-sdk-whiteboard  select-btn current-select-text-btn current-select-text "+(o?"disabled ":" ")),c.default.resetClass(this.elements.arrowElement,"arrow-container "+(o?"disabled ":" ")),c.default.resetClass(this.elements.selectListViewElement,"select-extend-list-container "+(this.props.isMobile?" ":"custom-scroll-bar")+(o?" disabled ":"  ")+(o?" hide":this.state.extendShow?" show":" hide")),o?this.elements.currentSelectTextElement.setAttribute("disabled","true"):this.elements.currentSelectTextElement.removeAttribute("disabled"),this.elements.currentSelectTextElement.value=i,this.elements.currentSelectTextElement.innerText=i,this.props.parentNode&&this.state.extendShow&&!this.props.disabled&&!this.props.listDirection){var a=this._getRect(this.props.parentNode),r=this._getRect(this.elements.selectListViewElement);r.top-a.top>a.height-r.height+5?this.listDirection="up":this.listDirection="down",c.default.removeClass(this.elements.selectViewRootElement,["down","up"]),c.default.removeClass(this.elements.selectListViewElement,["down","up"]),c.default.addClass(this.elements.selectViewRootElement,this.listDirection),c.default.addClass(this.elements.selectListViewElement,this.listDirection)}else c.default.removeClass(this.elements.selectViewRootElement,["down","up"]),c.default.removeClass(this.elements.selectListViewElement,["down","up"]),c.default.addClass(this.elements.selectViewRootElement,this.listDirection),c.default.addClass(this.elements.selectListViewElement,this.listDirection)}}]),n}();o.default=r},{"../../utils/DomUtils":338,"./TalkcloudReact":347}],347:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}();var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"object"!==(void 0===e?"undefined":n(e))||Array.isArray(e)?this.props={}:this.props=Object.shallowAssign({},e),this.state="object"!==n(this.state)||Array.isArray(this.state)?{}:this.state}return i(t,[{key:"setState",value:function(e){var t=Object.deepAssign({},this.state);Object.shallowAssign(this.state,e);var o=!1;this.shouldComponentUpdateState&&"function"==typeof this.shouldComponentUpdateState&&(o=this.shouldComponentUpdateState(t)),!o&&this.render&&"function"==typeof this.render&&this.render(),this.componentDidUpdateState&&"function"==typeof this.componentDidUpdateState&&this.componentDidUpdateState(t)}},{key:"setProps",value:function(e){var t=Object.deepAssign({},this.props);Object.shallowAssign(this.props,e);var o=!1;this.shouldComponentUpdateProps&&"function"==typeof this.shouldComponentUpdateProps&&(o=this.shouldComponentUpdateProps(t)),!o&&this.render&&"function"==typeof this.render&&this.render(),this.componentDidUpdateProps&&"function"==typeof this.componentDidUpdateProps&&this.componentDidUpdateProps(t)}}]),t}();o.default=a},{}],348:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),i=a(e("./TalkcloudReact")),r=a(e("../../utils/DomUtils"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,n));return i.parentNode=e,i.instanceId=t,i.whiteBoardManagerInstance=o,i.elements={},i.userid=i.props.streamInfo?i.props.streamInfo.userid:void 0,i.streamType=i.props.streamInfo?i.props.streamInfo.streamType:void 0,i._createElements(),i._connectElements(),i._playAV(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.default),n(a,[{key:"componentDidUpdateProps",value:function(e){this.props.volume===e.volume&&this.props.muteVolume===e.muteVolume||this._changeVolume(this.props.muteVolume?0:this.props.volume)}},{key:"destroyView",value:function(){for(var e in this._unplayAV(),r.default.removeChild(this.elements.rootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"getElementId",value:function(){return this.elements.rootElement.id}},{key:"_changeVolume",value:function(e){if(void 0!==e&&"number"==typeof e&&this.props.streamInfo&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()){var t=this.props.streamInfo||{},o=t.userid,n=t.streamType;this.whiteBoardManagerInstance.getRoomDelegate().setVolume&&this.whiteBoardManagerInstance.getRoomDelegate().setVolume(o,n,e)}}},{key:"_createElements",value:function(){var e=(this.props.streamInfo||{}).userid;this.elements.rootElement=r.default.createElement("div",this.props.videoDumbElementIdPrefix+e,"tk-audio-or-video-player  tk-audio-player-video-dumb")}},{key:"_connectElements",value:function(){r.default.appendChild(this.parentNode,this.elements.rootElement)}},{key:"_playAV",value:function(){if(this.props.streamInfo&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.elements.rootElement&&this.elements.rootElement.id){var e=this.props.streamInfo||{},t=e.userid;e.video,e.audio;switch(e.streamType){case"media":if(this.whiteBoardManagerInstance.getRoomDelegate().playRemoteMedia){var o=this.elements.rootElement.id;this.whiteBoardManagerInstance.getRoomDelegate().playRemoteMedia(t,o)}break;case"file":if(this.whiteBoardManagerInstance.getRoomDelegate().playRemoteMediaFile){var n=this.elements.rootElement.id;this.whiteBoardManagerInstance.getRoomDelegate().playRemoteMediaFile(t,n)}}}this._changeVolume(this.props.muteVolume?0:this.props.volume)}},{key:"_unplayAV",value:function(){if(this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate())switch(this.streamType){case"media":this.whiteBoardManagerInstance.getRoomDelegate().unplayRemoteMedia&&this.whiteBoardManagerInstance.getRoomDelegate().unplayRemoteMedia(this.userid);break;case"file":this.whiteBoardManagerInstance.getRoomDelegate().unplayRemoteMediaFile&&this.whiteBoardManagerInstance.getRoomDelegate().unplayRemoteMediaFile(this.userid)}}},{key:"render",value:function(){}}]),a}();o.default=s},{"../../utils/DomUtils":338,"./TalkcloudReact":347}],349:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TalkAudioPlayer=void 0;var n,i=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),a=e("./MediaPlayer"),r=(n=a)&&n.__esModule?n:{default:n};var s=function(e){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t,o,n,i,!1))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,r.default),i(a,[{key:"reveiveEventRoomUsermediaorfilestateChanged",value:function(e){var t=e.message,o=t.type,n=t.userId,i=t.attributes,a=void 0===i?{}:i,r=t.published;if(("media"===o||"file"===o)&&a.audio&&!a.video)if(r){this.setState({streamInfo:void 0}),this.setState({streamInfo:{userid:n,streamType:o,audio:a.audio,video:a.video,attributes:a}}),n===this.props.myUserId&&"file"===o&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()&&(this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().pauseShareMediaFile(!1),this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().seekMediaFile(0));var s=a.pause;this.sendMediaPlayerNoticeActionCommand("start",e),this.sendMediaPlayerNoticeActionCommand(s?"pause":"play",e)}else this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("end",e)}},{key:"reveiveEventRoomUsermediaorfileattributesUpdate",value:function(e){var t=e.message,o=t.type,n=t.attributes,i=void 0===n?{}:n,a=t.updateAttributes,r=void 0===a?{}:a;"media"!==o&&"file"!==o||!i.audio||i.video||this.state.streamInfo&&(this.setState({streamInfo:Object.deepAssign({},this.state.streamInfo,{attributes:r})}),void 0!==r.pause&&this.sendMediaPlayerNoticeActionCommand(r.pause?"pause":"play",e))}},{key:"receiveEventRoomErrorNotice",value:function(e){switch(e.errorCode){case TK.ERROR_NOTICE.SHARE_MEDIA_FAILURE:case TK.ERROR_NOTICE.SHARE_FILE_FAILURE:this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("startShareMediaFail",e);break;case TK.ERROR_NOTICE.STOP_MEDIA_FAILURE:case TK.ERROR_NOTICE.STOP_FILE_FAILURE:this.sendMediaPlayerNoticeActionCommand("stopShareMediaFail",e);break;case TK.ERROR_NOTICE.SUBSCRIBE_MEDIA_FAILURE:case TK.ERROR_NOTICE.SUBSCRIBE_FILE_FAILURE:this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("subscribeShareMediaFail",e);break;case TK.ERROR_NOTICE.UNSUBSCRIBE_MEDIA_FAILURE:case TK.ERROR_NOTICE.UNSUBSCRIBE_FILE_FAILURE:this.sendMediaPlayerNoticeActionCommand("unsubscribeShareMediaFail",e)}}},{key:"sendMediaPlayerNoticeActionCommand",value:function(e,t){var o=t.message,n=o.type,i=o.userId,a=o.attributes,r=void 0===a?{}:a;if(("media"===n||"file"===n)&&r.audio&&!r.video&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.whiteboardViewMap&&this.whiteBoardManagerInstance.whiteboardViewMap.has("default")){var s=this.whiteBoardManagerInstance.whiteboardViewMap.get("default");if(s&&s.sendActionCommand){var l,c={playerType:"audioPlayer",userid:i,streamType:n,audio:r.audio,video:r.video,attributes:r,isDynamicPptVideo:!1};l=Object.deepAssign({type:e,fileid:c.attributes.fileid},c),s.sendActionCommand("mediaPlayerNotice",l)}}}}]),a}();window.TalkAudioPlayer=s,o.TalkAudioPlayer=s,o.default=s},{"./MediaPlayer":352}],350:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TalkDocumentRemark=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),a=r(e("../components/TalkcloudReact")),c=r(e("../../utils/DomUtils")),d=r(e("../../utils/Utils")),u=r(e("../../utils/Global")),s=r(e("../../utils/Language")),l=r(e("../../utils/TalkAjax"));function r(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n));return a.parentNode=e,a.instanceId=t,a.whiteBoardManagerInstance=o,a.configration=i,a.elements={},a.documentRemarkTalkDrag=void 0,a.ajaxRequestingList={},a.state={autoOpenRemark:!0,updateState:!1,viewState:{tool:{},action:{},zoom:{},page:{},documentType:"generalDocument",fileid:0,dynamicPptVolume:100,fullScreen:!1,remark:!1,other:{primaryColor:a.configration.primaryColor,secondaryColor:a.configration.secondaryColor,backgroundColor:a.configration.backgroundColor,pencilWidth:a.configration.pencilWidth,shapeWidth:a.configration.shapeWidth,eraserWidth:a.configration.eraserWidth,fontSize:a.configration.fontSize,fontFamily:a.configration.fontFamily}}},a._createConnectElements(),a._updateLanguage(),a.render(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.default),i(r,[{key:"componentDidUpdateState",value:function(e){this.state.autoOpenRemark&&e.viewState.fileid==this.state.viewState.fileid&&0!=this.state.viewState.fileid&&e.viewState.page.currentPage!==this.state.viewState.page.currentPage&&this.whiteBoardManagerInstance&&d.default.isFunction(this.whiteBoardManagerInstance.openDocumentRemark)&&this.whiteBoardManagerInstance.openDocumentRemark(this.instanceId),e.viewState.fileid!=this.state.viewState.fileid&&(this.state.autoOpenRemark&&0!=this.state.viewState.fileid&&this.whiteBoardManagerInstance&&d.default.isFunction(this.whiteBoardManagerInstance.openDocumentRemark)&&this.whiteBoardManagerInstance.openDocumentRemark(this.instanceId),this._ajaxDocumentRemark()),e.viewState.remark!==this.state.viewState.remark&&this._ajaxDocumentRemark()}},{key:"componentDidUpdateProps",value:function(e){if(e.languageType!==this.props.languageType&&this._updateLanguage(),e.isDrag!==this.props.isDrag&&(this.props.isDrag?this._addTalkDrag():this.documentRemarkTalkDrag&&"function"==typeof this.documentRemarkTalkDrag.destroy&&(this.documentRemarkTalkDrag.destroy(),this.documentRemarkTalkDrag=void 0)),!d.default.deepCompareJson(e.initDragPosition,this.props.initDragPosition)&&this.documentRemarkTalkDrag&&"function"==typeof this.documentRemarkTalkDrag.setPosition){var t=this.props.initDragPosition||{},o=t.left,n=void 0===o?50:o,i=t.top,a=void 0===i?100:i;this.documentRemarkTalkDrag.setPosition(n,a)}}},{key:"changeParentNode",value:function(e){e&&(c.default.removeChild(this.elements.remarkViewRootElement,this.parentNode),this.parentNode=e,c.default.appendChild(this.parentNode,this.elements.remarkViewRootElement))}},{key:"destroyView",value:function(){for(var e in c.default.removeChild(this.elements.remarkViewRootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"resize",value:function(){this.documentRemarkTalkDrag&&d.default.isFunction(this.documentRemarkTalkDrag.resizeCallback)&&this.documentRemarkTalkDrag.resizeCallback()}},{key:"receiveActionCommand",value:function(e,t){switch("object"!==(void 0===t?"undefined":n(t))||Array.isArray(t)||(t=Object.deepAssign({},t)),L.Logger.debug("[DocumentRemark]receive whiteboard view action command（action,cmd）:",e,t),e){case"viewStateUpdate":this.setState({viewState:t.viewState})}}},{key:"closeDocumentRemarkOnClick",value:function(){this.whiteBoardManagerInstance&&d.default.isFunction(this.whiteBoardManagerInstance.closeDocumentRemark)&&this.whiteBoardManagerInstance.closeDocumentRemark(this.instanceId)}},{key:"_createConnectElements",value:function(){this.elements.remarkViewRootElement=c.default.createElement("div",this.instanceId+"TalkcloudRemark","talkcloud-sdk-whiteboard "+this.instanceId+" talk-cloud-remark-container remark-container",{position:"absolute",left:0,top:0,display:"none",zIndex:3}),this.elements.remarkViewRootElement.innerHTML='\n            <div class="remark-head"> \n                <span class="name"></span>\n                <button class="close"></button>\n            </div>\n            <div class="content-container"> \n                <span class="content-text  custom-scroll-bar" >  </span>\n            </div>\n        ',c.default.appendChild(this.parentNode,this.elements.remarkViewRootElement),this.elements.remarkNameElement=this.elements.remarkViewRootElement.getElementsByClassName("name")[0],this.elements.remarkCloseElement=this.elements.remarkViewRootElement.getElementsByClassName("close")[0],this.elements.remarkContentElement=this.elements.remarkViewRootElement.getElementsByClassName("content-text")[0],this.elements.remarkCloseElement.onclick=this.closeDocumentRemarkOnClick.bind(this),this._addTalkDrag()}},{key:"_updateLanguage",value:function(){var e=this.props.languageType,t=void 0===e?"ch":e;"ch"!==t&&"tw"!==t&&"en"!==t&&"ja"!==t&&(t="ch");var o=s.default.get(t).documentRemark,n=o.name,i=o.closeTitle;this.elements.remarkNameElement.innerHTML=n,this.elements.remarkCloseElement.setAttribute("title",i)}},{key:"_addTalkDrag",value:function(){window.TalkDrag&&this.elements.remarkViewRootElement&&(this.documentRemarkTalkDrag&&"function"==typeof this.documentRemarkTalkDrag.destroy&&(this.documentRemarkTalkDrag.destroy(),this.documentRemarkTalkDrag=void 0),this.documentRemarkTalkDrag=new window.TalkDrag(this.elements.remarkViewRootElement,{containerData:{left:50,top:90}}))}},{key:"_ajaxDocumentRemark",value:function(){var i=this,e=this.state.viewState,t=e.remark,a=e.fileid,r=this,o=!1;this.ajaxRequestingList["documentRemark_"+a]&&(new Date).getTime()-this.ajaxRequestingList["documentRemark_"+a].requestTime<5e3&&(o=!0),this.props.isConnectedRoom&&!o&&this.props.canRemark&&t&&0!=a&&!u.default.allDocumentRemarkInfoMap.has("documentRemark_"+a)&&(this.ajaxRequestingList["documentRemark_"+a]&&this.ajaxRequestingList["documentRemark_"+a].ajaxXhr&&d.default.isFunction(this.ajaxRequestingList["documentRemark_"+a].ajaxXhr.abort)&&this.ajaxRequestingList["documentRemark_"+a].ajaxXhr.abort(),this.ajaxRequestingList["documentRemark_"+a]={requestTime:(new Date).getTime(),ajaxXhr:void 0},this.ajaxRequestingList["documentRemark_"+a].ajaxXhr=(0,l.default)().post(this.props.webAddress+"/ClientAPI/getfileremark?ts="+(new Date).getTime(),{fileid:a}).then(function(e){if(i.ajaxRequestingList["documentRemark_"+a]=void 0,delete i.ajaxRequestingList["documentRemark_"+a],e&&0===e.result)for(var t in e){var o=e[t];if("result"!==t&&o&&d.default.isJson(o)){u.default.allDocumentRemarkInfoMap.has("documentRemark_"+o.fileid)||u.default.allDocumentRemarkInfoMap.set("documentRemark_"+o.fileid,{});var n=u.default.allDocumentRemarkInfoMap.get("documentRemark_"+o.fileid);n&&(n[o.fileid+"_"+o.pageid]=o.remark),i.whiteBoardManagerInstance&&i.whiteBoardManagerInstance.whiteboardViewMap&&i.whiteBoardManagerInstance.whiteboardViewMap.get(r.instanceId)&&d.default.isFunction(i.whiteBoardManagerInstance.whiteboardViewMap.get(r.instanceId).forceViewStateUpdate)&&i.whiteBoardManagerInstance.whiteboardViewMap.get(r.instanceId).forceViewStateUpdate()}}i.setState({updateState:!i.state.updateState})}).catch(function(e,t){L.Logger.error("ajax request fail  error info( response, xhr ):",e,t),i.ajaxRequestingList["documentRemark_"+a]=void 0,delete i.ajaxRequestingList["documentRemark_"+a],i.setState({updateState:!i.state.updateState})}))}},{key:"render",value:function(){var e=this.state.viewState,t=e.remark,o=e.fileid,n=e.page,i=(void 0===n?{}:n).currentPage,a=void 0===i?1:i,r=u.default.allDocumentRemarkInfoMap.get("documentRemark_"+o),s=this.props.canRemark&&t&&0!=o&&r&&r[o+"_"+a],l=!this.isShow&&s;this.isShow=s,c.default.updateStyle(this.elements.remarkViewRootElement,{display:s?"block":"none"}),s&&r&&r[o+"_"+a]&&(this.elements.remarkContentElement.innerHTML=r[o+"_"+a]),l&&this.documentRemarkTalkDrag&&d.default.isFunction(this.documentRemarkTalkDrag.resizeCallback)&&this.documentRemarkTalkDrag.resizeCallback()}}]),r}();window.TalkDocumentRemark=h,o.TalkDocumentRemark=h,o.default=h},{"../../utils/DomUtils":338,"../../utils/Global":339,"../../utils/Language":340,"../../utils/TalkAjax":342,"../../utils/Utils":343,"../components/TalkcloudReact":347}],351:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TalkDocumentToolbar=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),a=r(e("../components/TalkcloudReact")),I=r(e("../../utils/DomUtils")),s=r(e("../../utils/Utils")),l=r(e("../components/Select")),P=r(e("../../utils/Language")),c=r(e("../../utils/Global"));function r(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,n));return a.parentNode=e,a.instanceId=t,a.whiteBoardManagerInstance=o,a.configration=i,a.elements={},a.elementsViewClass={},a.documentToolbarTalkDrag=void 0,a.state={updateState:!1,dynamicPptAVSize:0,tempDisabledDrag:!1,viewState:{tool:{},action:{},zoom:{},page:{},documentType:"generalDocument",fileid:0,dynamicPptVolume:100,fullScreen:!1,remark:!1,remarkText:"",other:{primaryColor:a.configration.primaryColor,secondaryColor:a.configration.secondaryColor,backgroundColor:a.configration.backgroundColor,pencilWidth:a.configration.pencilWidth,shapeWidth:a.configration.shapeWidth,eraserWidth:a.configration.eraserWidth,fontSize:a.configration.fontSize,fontFamily:a.configration.fontFamily}}},a._createConnectElements(),a._updateSelectInfo(),a._updateLanguage(),a.render(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,a.default),n(r,[{key:"componentDidUpdateState",value:function(e){if(e.viewState!==this.state.viewState){var t=e.viewState.page.currentPage===this.state.viewState.page.currentPage,o=e.viewState.page.totalPage===this.state.viewState.page.totalPage,n=e.viewState.page.skipPage&&this.state.viewState.page.skipPage?s.default.deepCompareJson(e.viewState.page.skipPage,this.state.viewState.page.skipPage):e.viewState.page.skipPage===this.state.viewState.page.skipPage;t&&o&&n||(this._isShowRemarkBtn(),this._updateSelectInfo()),e.viewState.fileid==this.state.viewState.fileid&&e.viewState.remarkText===this.state.viewState.remarkText||this._isShowRemarkBtn(),e.viewState.dynamicPptVolume!==this.state.viewState.dynamicPptVolume&&!this.pageVolumeSlidering&&this.pageVolumeSlider&&"function"==typeof this.pageVolumeSlider.setProgress&&this.pageVolumeSlider.setProgress(this.state.viewState.dynamicPptVolume)}e.tempDisabledDrag!==this.state.tempDisabledDrag&&this.documentToolbarTalkDrag&&i(this.documentToolbarTalkDrag.updateDisabled)&&this.documentToolbarTalkDrag.updateDisabled(this.state.tempDisabledDrag),e.viewState.documentType===this.state.viewState.documentType&&e.viewState.fullScreen===this.state.viewState.fullScreen&&e.viewState.remark===this.state.viewState.remark||this._updateLanguage(),e.updateState!==this.state.updateState&&this._isShowRemarkBtn()}},{key:"componentDidUpdateProps",value:function(e){if(e.languageType!==this.props.languageType&&this._updateLanguage(),e.isMobile!==this.props.isMobile&&(this.elements.skipPageCurrpageElement.setAttribute("contenteditable",!this.props.isMobile),this.props.isMobile?I.default.addClass(this.elements.documentToolbarViewRootElement,"app-mobile"):I.default.removeClass(this.elements.documentToolbarViewRootElement,"app-mobile"),this.elementsViewClass.selectPageView&&this.elementsViewClass.selectPageView.setProps({isMobile:this.props.isMobile})),e.isDrag!==this.props.isDrag&&(this.props.isDrag?this._addTalkDrag():this.documentToolbarTalkDrag&&"function"==typeof this.documentToolbarTalkDrag.destroy&&(this.documentToolbarTalkDrag.destroy(),this.documentToolbarTalkDrag=void 0)),!s.default.deepCompareJson(e.initDragPosition,this.props.initDragPosition)&&this.documentToolbarTalkDrag&&"function"==typeof this.documentToolbarTalkDrag.setPosition){var t=this.props.initDragPosition||{},o=t.left,n=void 0===o?50:o,i=t.top,a=void 0===i?100:i;this.documentToolbarTalkDrag.setPosition(n,a)}e.isLoadRemark===this.props.isLoadRemark&&e.canRemark===this.props.canRemark||!this.elements.remarkElement||this._isShowRemarkBtn(),e.isLoadFullScreen!==this.props.isLoadFullScreen&&this.elements.fullScreenElement&&I.default.updateStyle(this.elements.fullScreenElement,{display:this.props.isLoadFullScreen?"":"none"})}},{key:"resize",value:function(){this.documentToolbarTalkDrag&&s.default.isFunction(this.documentToolbarTalkDrag.resizeCallback)&&this.documentToolbarTalkDrag.resizeCallback()}},{key:"forceRender",value:function(){this.setState({updateState:!this.state.updateState})}},{key:"changeParentNode",value:function(e){e&&(I.default.removeChild(this.elements.documentToolbarViewRootElement,this.parentNode),this.parentNode=e,I.default.appendChild(this.parentNode,this.elements.documentToolbarViewRootElement))}},{key:"destroyView",value:function(){var e=!0,t=!1,o=void 0;try{for(var n,i=Object.values(this.elementsViewClass)[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;a&&a.destroyView&&a.destroyView()}}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}for(var r in this.elementsViewClass={},I.default.removeChild(this.elements.documentToolbarViewRootElement,this.parentNode),this.elements)this.elements[r]=void 0,delete this.elements[r]}},{key:"receiveActionCommand",value:function(e,t){switch("object"!==(void 0===t?"undefined":i(t))||Array.isArray(t)||(t=Object.deepAssign({},t)),L.Logger.debug("[DocumentToolbar]receive whiteboard view action command（action,cmd）:",e,t),e){case"closeAllSelectBox":I.default.removeClass(this.elements.volumeElement,"open");break;case"viewStateUpdate":this.setState({viewState:t.viewState})}}},{key:"changeSelectPageOnChange",value:function(e){this.skipPage(e)}},{key:"changeSelectPageNoticeSelectExtendListShowOrHide",value:function(e){this.setState({tempDisabledDrag:e})}},{key:"prevPage",value:function(){switch(this.state.viewState.documentType){case"dynamicPPT":this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.prevStep(this.instanceId);break;default:this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.prevPage(this.instanceId)}return!1}},{key:"nextPage",value:function(){switch(this.state.viewState.documentType){case"dynamicPPT":this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.nextStep(this.instanceId);break;default:this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.nextPage(this.instanceId)}return!1}},{key:"addPage",value:function(){return this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.addPage(this.instanceId),!1}},{key:"fullScreen",value:function(){return this.whiteBoardManagerInstance&&(this.state.viewState.fullScreen?this.whiteBoardManagerInstance.exitFullScreen(this.instanceId):this.whiteBoardManagerInstance.fullScreen(this.instanceId)),!1}},{key:"openDynamicPptVolumeOnClick",value:function(){return I.default.hasClass(this.elements.volumeElement,"open")?I.default.removeClass(this.elements.volumeElement,"open"):I.default.addClass(this.elements.volumeElement,"open"),!1}},{key:"closeDynamicPptVolumeOnMouseLeave",value:function(){return I.default.removeClass(this.elements.volumeElement,"open"),!1}},{key:"openOrCloseRemarkOnClick",value:function(){var e=this.state.viewState.remark;this.whiteBoardManagerInstance&&(e?this.whiteBoardManagerInstance.closeDocumentRemark(this.instanceId):this.whiteBoardManagerInstance.openDocumentRemark(this.instanceId))}},{key:"changeDynamicPptVolume",value:function(e){this.whiteBoardManagerInstance&&"function"==typeof this.whiteBoardManagerInstance.changeDynamicPptVolume&&this.whiteBoardManagerInstance.changeDynamicPptVolume(e,this.instanceId)}},{key:"skipPage",value:function(e){return"number"==typeof(e=Number(e))&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.skipPage(e,this.instanceId),!1}},{key:"sendActionCommand",value:function(e,t){if(this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.whiteboardViewMap&&this.whiteBoardManagerInstance.whiteboardViewMap.has(this.instanceId)){var o=this.whiteBoardManagerInstance.whiteboardViewMap.get(this.instanceId);o&&o.sendActionCommand&&o.sendActionCommand(e,t)}}},{key:"changePageOnFocus",value:function(e){return c.default.isSkipPageing=!0,e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"changePageOnClick",value:function(){return this.elements.skipPageCurrpageElement.setAttribute("contenteditable",!this.props.isMobile),this.elements.skipPageCurrpageElement.focus(),event&&(event.preventDefault(),event.stopPropagation()),!1}},{key:"changePageOnBlur",value:function(e){return c.default.isSkipPageing=!1,this._changePage(),e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"changePageOnKeyDown",value:function(e){switch(e.keyCode){case 13:return this.elements.skipPageCurrpageElement&&"function"==typeof this.elements.skipPageCurrpageElement.blur?(this.elements.skipPageCurrpageElement.setAttribute("contenteditable",!1),this.elements.skipPageCurrpageElement.blur()):this._changePage(),e&&(e.preventDefault(),e.stopPropagation()),!1}}},{key:"enlargeWhiteboard",value:function(){return this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.enlargeWhiteboard(this.instanceId),!1}},{key:"narrowWhiteboard",value:function(){return this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.narrowWhiteboard(this.instanceId),!1}},{key:"receiveWindowMessageEvent",value:function(t){var e={};if(this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.whiteboardViewMap.has(this.instanceId)&&(e=this.whiteBoardManagerInstance.whiteboardViewMap.get(this.instanceId)),t.data){var o=void 0,n=void 0;try{o=(n=JSON.parse(t.data)).data}catch(e){return void L.Logger.warning("document tool bar receive iframe message data can't be converted to JSON , iframe data:",t.data)}if("tk_dynamicPPT"===n.source&&e.getDynamicPptInstanceByID&&"function"==typeof e.getDynamicPptInstanceByID&&e.getDynamicPptInstanceByID().dynamicPptIframeElement&&t.source===e.getDynamicPptInstanceByID().dynamicPptIframeElement.contentWindow){L.Logger.debug("[document tool bar]receive remote iframe data form "+t.origin+":",t);switch(o.action){case"allVideoAndAudio":this.setState({dynamicPptAVSize:void 0!==o.allVideoAndAudioLength?o.allVideoAndAudioLength:0})}}}}},{key:"stopEvent",value:function(e){return e&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"_changePage",value:function(){var e=Number(this.elements.skipPageCurrpageElement.innerHTML),t=this.state.viewState.page,o=void 0===t?{}:t,n=o.totalPage,i=void 0===n?1:n,a=o.currentPage,r=void 0===a?1:a;if("number"!=typeof e||isNaN(e)){var s={type:"pageTypeNotNumber",currentPage:r,totalPage:i,toPage:this.elements.skipPageCurrpageElement.innerHTML};this.sendActionCommand("skipPageFailureBouncedNotice",s),this.elements.skipPageCurrpageElement.innerHTML=r}else{if(e===r)return;if(e<1||i<e){var l={type:"overPageRange",currentPage:r,totalPage:i,toPage:e};this.sendActionCommand("skipPageFailureBouncedNotice",l),this.elements.skipPageCurrpageElement.innerHTML=r}else this.skipPage(e)}}},{key:"_createConnectElements",value:function(){var t=this;this.elements.documentToolbarViewRootElement=I.default.createElement("article",this.instanceId+"DocumentToolViewRoot","talkcloud-sdk-whiteboard "+this.instanceId+" document-toolbar-root "+(this.props.isMobile?"app-mobile ":" "),{zIndex:5}),this.elements.previousPageElement=I.default.createElement("button",this.instanceId+"TalkcloudPreviousPage","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn previous-page-btn",{}),this.elements.skipPageElement=I.default.createElement("div",this.instanceId+"TalkcloudSkipPage","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-select skip-page-select",{}),this.elements.nextPageElement=I.default.createElement("button",this.instanceId+"TalkcloudNextPage","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn next-page-btn",{}),this.elements.addPageElement=I.default.createElement("button",this.instanceId+"TalkcloudAddPage","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn add-page-btn",{display:"none"}),this.elements.fullScreenElement=I.default.createElement("button",this.instanceId+"TalkcloudFullScreen","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn full-screen-btn",{display:this.props.isLoadFullScreen?"":"none"}),this.elements.volumeElement=I.default.createElement("button",this.instanceId+"TalkcloudVolume","talkcloud-sdk-whiteboard "+this.instanceId+" document-toolbar-btn volume-btn",{display:this.props.isLoadVolume?"":"none"}),this.elements.remarkElement=I.default.createElement("button",this.instanceId+"TalkcloudRemark","talkcloud-sdk-whiteboard "+this.instanceId+" document-toolbar-btn remark-btn",{display:this.props.isLoadRemark&&this.props.canRemark?"":"none"}),this.elements.enlargeWhiteboardElement=I.default.createElement("button",this.instanceId+"TalkcloudZoomBig","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn zoom-big-btn",{}),this.elements.narrowWhiteboardElement=I.default.createElement("button",this.instanceId+"TalkcloudZoomSmall","talkcloud-sdk-whiteboard  "+this.instanceId+" document-toolbar-btn zoom-small-btn",{}),this.elements.volumeElement.innerHTML='\n            <span class="volume-slider-container" onclick="return false;" id="'+this.instanceId+'PageVolumeSlider" ></span>\n        ',this.elements.skipPageElement.innerHTML='\n            <div class="page-info-container" > \n                <span contenteditable="'+!this.props.isMobile+'" class="curr-page">1</span><em>/</em><span class="total-page">1</span>\n            </div>\n        ',this.elements.skipPageCurrpageElement=this.elements.skipPageElement.getElementsByClassName("curr-page")[0],this.elements.skipPageTotalpageElement=this.elements.skipPageElement.getElementsByClassName("total-page")[0],this.elements.skipPageCurrpageElement.oninput=function(e){var t=e.target.innerHTML;(!Number(t)||5<t.length)&&(e.target.innerHTML=t.substr(0,5))},this.elements.skipPageCurrpageElement.onclick=this.changePageOnClick.bind(this),this.elements.skipPageCurrpageElement.onfocus=this.changePageOnFocus.bind(this),this.elements.skipPageCurrpageElement.onblur=this.changePageOnBlur.bind(this),this.elements.skipPageCurrpageElement.onkeydown=this.changePageOnKeyDown.bind(this),this.elements.previousPageElement.onclick=this.prevPage.bind(this),this.elements.nextPageElement.onclick=this.nextPage.bind(this),this.elements.addPageElement.onclick=this.addPage.bind(this),this.elements.fullScreenElement.onclick=this.fullScreen.bind(this),this.elements.volumeElement.onclick=this.openDynamicPptVolumeOnClick.bind(this),this.elements.volumeElement.getElementsByClassName("volume-slider-container")[0].onclick=this.stopEvent.bind(this),this.elements.volumeElement.onmouseleave=this.closeDynamicPptVolumeOnMouseLeave.bind(this),this.elements.remarkElement.onclick=this.openOrCloseRemarkOnClick.bind(this),this.elements.enlargeWhiteboardElement.onclick=this.enlargeWhiteboard.bind(this),this.elements.narrowWhiteboardElement.onclick=this.narrowWhiteboard.bind(this),this.elementsViewClass.selectPageView=new l.default(this.elements.skipPageElement,{parentNode:this.parentNode,isMobile:this.props.isMobile,onChange:this.changeSelectPageOnChange.bind(this),noticeSelectExtendListShowOrHide:this.changeSelectPageNoticeSelectExtendListShowOrHide.bind(this)}),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.previousPageElement),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.skipPageElement),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.nextPageElement),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.addPageElement),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.enlargeWhiteboardElement),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.narrowWhiteboardElement),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.fullScreenElement),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.volumeElement),I.default.appendChild(this.elements.documentToolbarViewRootElement,this.elements.remarkElement),I.default.appendChild(this.parentNode,this.elements.documentToolbarViewRootElement),window.TalkSlider&&(this.pageVolumeSlider=new window.TalkSlider({sliderContainer:{id:t.instanceId+"PageVolumeSlider",direction:"vertikal"},onBeforeChange:function(e){t.pageVolumeSlidering=!0},onAfterChange:function(e){t.pageVolumeSlidering=!1,t.changeDynamicPptVolume(e)}})),this._addTalkDrag()}},{key:"_addTalkDrag",value:function(){if(this.props.isDrag&&window.TalkDrag&&this.elements.documentToolbarViewRootElement){this.documentToolbarTalkDrag&&"function"==typeof this.documentToolbarTalkDrag.destroy&&(this.documentToolbarTalkDrag.destroy(),this.documentToolbarTalkDrag=void 0);var e=this.props.initDragPosition||{},t=e.left,o=void 0===t?50:t,n=e.top,i=void 0===n?100:n;this.documentToolbarTalkDrag=new window.TalkDrag(this.elements.documentToolbarViewRootElement,{containerData:{left:o,top:i}})}}},{key:"_updateLanguage",value:function(){var e=this.props.languageType,t=void 0===e?"ch":e,o=this.state.viewState,n=o.remark,i=o.fullScreen,a=o.documentType;"ch"!==t&&"tw"!==t&&"en"!==t&&"ja"!==t&&(t="ch");var r=P.default.get(t).documentToolbar,s=r.prevPage,l=r.nextPage,c=r.prevStep,d=r.nextStep,u=r.addPage,h=r.enlargeWhiteboard,m=r.narrowWhiteboard,f=r.pptVolume,p=r.onRemark,g=r.offRemark,v=r.onGeneralDocumentFullScreen,y=r.offGeneralDocumentFullScreen,b=r.onDynamicPPTFullScreen,_=r.offDynamicPPTFullScreen,w=r.onH5DocumentFullScreen,k=r.offH5DocumentFullScreen,S=i?y:v;"dynamicPPT"===a?S=i?_:b:"h5Document"===a&&(S=i?k:w),this.elements.previousPageElement.title="dynamicPPT"===a?c:s,this.elements.nextPageElement.title="dynamicPPT"===a?d:l,this.elements.addPageElement.title=u,this.elements.fullScreenElement.title=S,this.elements.volumeElement.title=f,this.elements.remarkElement.title=n?g:p,this.elements.enlargeWhiteboardElement.title=h,this.elements.narrowWhiteboardElement.title=m}},{key:"_updateSelectInfo",value:function(){if(this.elementsViewClass.selectPageView){var e=this.state.viewState.page,t=void 0===e?{}:e,o=t.totalPage,n=void 0===o?1:o,i=t.currentPage,a=void 0===i?1:i,r=t.skipPage,s=void 0===r?{}:r,l=[];n<1&&(n=1),a<1&&(a=1);for(var c=1;c<=n;c++)l.push({label:c,value:c});this.elementsViewClass.selectPageView.setProps({selectOptions:l,currentValue:a,disabled:s.disabled,isMobile:this.props.isMobile}),this.elements.skipPageCurrpageElement.innerHTML=a,this.elements.skipPageTotalpageElement.innerHTML=n}}},{key:"_isShowRemarkBtn",value:function(){if(this.elements.remarkElement){var e=this.props.isLoadRemark&&this.props.canRemark&&this.state.viewState.remarkText;I.default.updateStyle(this.elements.remarkElement,{display:e?"":"none"})}}},{key:"render",value:function(){var e=this.state.viewState,t=e.page,o=void 0===t?{}:t,n=e.zoom,i=void 0===n?{}:n,a=e.documentType,r=e.fullScreen,s=e.remark,l=(e.fileid,o.prevPage),c=void 0===l?{}:l,d=o.nextPage,u=void 0===d?{}:d,h=o.prevStep,m=void 0===h?{}:h,f=o.nextStep,p=void 0===f?{}:f,g=o.addPage,v=void 0===g?{}:g,y=o.skipPage,b=void 0===y?{}:y,_=(o.currentPage,i.zoom_big),w=void 0===_?{}:_,k=i.zoom_small,S=void 0===k?{}:k;this.elements.previousPageElement.disabled="dynamicPPT"===a?m.disabled:c.disabled,this.elements.nextPageElement.disabled="dynamicPPT"===a?p.disabled:u.disabled,this.elements.addPageElement.disabled=v.disabled,this.elements.enlargeWhiteboardElement.disabled=w.disabled,this.elements.narrowWhiteboardElement.disabled=S.disabled,b.disabled?I.default.addClass(this.elements.skipPageElement,"disabled"):I.default.removeClass(this.elements.skipPageElement,"disabled"),I.default.updateStyle(this.elements.nextPageElement,{display:v.disabled?"":"none"}),I.default.updateStyle(this.elements.addPageElement,{display:v.disabled?"none":""}),r?I.default.addClass(this.elements.fullScreenElement,"yes"):I.default.removeClass(this.elements.fullScreenElement,"yes"),I.default.updateStyle(this.elements.volumeElement,{display:this.props.isLoadVolume&&"dynamicPPT"===a&&0<this.state.dynamicPptAVSize?"":"none"}),s?I.default.addClass(this.elements.remarkElement,"yes"):I.default.removeClass(this.elements.remarkElement,"yes")}}]),r}();window.TalkDocumentToolbar=d,o.TalkDocumentToolbar=d,o.default=d},{"../../utils/DomUtils":338,"../../utils/Global":339,"../../utils/Language":340,"../../utils/Utils":343,"../components/Select":346,"../components/TalkcloudReact":347}],352:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),i=s(e("../components/TalkcloudReact")),h=s(e("../../utils/DomUtils")),m=s(e("../../utils/Utils")),a=s(e("../components/VideoDumb")),r=s(e("../components/MediaPlayerController"));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},a=5<arguments.length&&void 0!==arguments[5]&&arguments[5];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,n));return r.isVideoPlayer=a,r.parentNode=e,r.instanceId=t,r.whiteBoardManagerInstance=o,r.configration=i,r.state={streamInfo:void 0,volume:100,muteVolume:!1,isFullScreen:!1},r.progressIntervalDuration=1e3,r.elements={},r.videoDumb=void 0,r._createElements(),r._connectElements(),r.render(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,i.default),n(s,[{key:"shouldComponentUpdateState",value:function(e){if(e.streamInfo!==this.state.streamInfo&&e.streamInfo&&this.state.streamInfo&&e.streamInfo.attributes&&this.state.streamInfo.attributes){var t=!1,o=!0,n=!1,i=void 0;try{for(var a,r=Object.entries(this.state.streamInfo.attributes)[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var s=a.value,l=u(s,2),c=l[0],d=l[1];if("position"!==c&&d!==e.streamInfo.attributes[c]){t=!0;break}}}catch(e){n=!0,i=e}finally{try{!o&&r.return&&r.return()}finally{if(n)throw i}}if(e.streamInfo.attributes.position!==this.state.streamInfo.attributes.position&&!t)return!0}return!1}},{key:"componentDidUpdateState",value:function(e){if(e.streamInfo&&!this.state.streamInfo){var t=this.elements.rootElement;m.default.getFullscreenElement()&&m.default.getFullscreenElement().id===t.id&&m.default.exitFullscreen()}if(this.elements.closeVideoPlayerElement&&this.state.streamInfo){var o=!1,n=this.state.streamInfo||{},i=n.streamType,a=n.userid;"file"===i&&a!=this.props.myUserId&&(o=!0),h.default.updateStyle(this.elements.closeVideoPlayerElement,{display:!this.props.controlPermissions.hasClose||o?"none":""}),this.elements.closeVideoPlayerElement.disabled=!this.props.controlPermissions.hasClose||o}this.state.streamInfo&&this.state.streamInfo.attributes?!this.progressTimer||"media"!==this.state.streamInfo.streamType||this.state.streamInfo.userid!=this.props.myUserId&&0!=this.props.myRole&&1!=this.props.myRole?this.progressTimer&&this.state.streamInfo.attributes.pause?this._stopProgressTimer():this.progressTimer||this.state.streamInfo.attributes.pause||this._startProgressTimer():this._stopProgressTimer():this.progressTimer&&this._stopProgressTimer(),this.videoDumb&&(e.volume!==this.state.volume&&this.videoDumb.setProps({volume:this.state.volume}),e.muteVolume!==this.state.muteVolume&&this.videoDumb.setProps({muteVolume:this.state.muteVolume}),e.streamInfo!==this.state.streamInfo&&this.videoDumb.setProps({streamInfo:this.state.streamInfo})),this.mediaPlayerControllerDumb&&(e.streamInfo!==this.state.streamInfo&&this.mediaPlayerControllerDumb.setProps({streamInfo:this.state.streamInfo}),e.volume!==this.state.volume&&this.mediaPlayerControllerDumb.setProps({volume:this.state.volume}),e.muteVolume!==this.state.muteVolume&&this.mediaPlayerControllerDumb.setProps({muteVolume:this.state.muteVolume}),e.isFullScreen!==this.state.isFullScreen&&this.mediaPlayerControllerDumb.setProps({isFullScreen:this.state.isFullScreen}))}},{key:"componentDidUpdateProps",value:function(e){if(e.isLoadControl!==this.props.isLoadControl&&(!this.mediaPlayerControllerDumb&&this.props.isLoadControl?this._loadMediaPlayerController():this.mediaPlayerControllerDumb&&!this.props.isLoadControl&&(this.mediaPlayerControllerDumb.destroyView(),this.mediaPlayerControllerDumb=void 0)),this.elements.closeVideoPlayerElement&&e.controlPermissions.hasClose!==this.props.controlPermissions.hasClose){var t=!1,o=this.state.streamInfo||{},n=o.streamType,i=o.userid;"file"===n&&i!=this.props.myUserId&&(t=!0),h.default.updateStyle(this.elements.closeVideoPlayerElement,{display:!this.props.controlPermissions.hasClose||t?"none":""}),this.elements.closeVideoPlayerElement.disabled=!this.props.controlPermissions.hasClose||t}this.mediaPlayerControllerDumb&&(e.myUserId!==this.props.myUserId&&this.mediaPlayerControllerDumb.setProps({myUserId:this.props.myUserId}),e.isPlayback!==this.props.isPlayback&&(this.props.isPlayback?h.default.addClass(this.elements.rootElement,"tk-playback"):h.default.removeClass(this.elements.rootElement,"tk-playback"),this.mediaPlayerControllerDumb.setProps({isPlayback:this.props.isPlayback})),e.controlPermissions!==this.props.controlPermissions&&this.mediaPlayerControllerDumb.setProps({controlPermissions:this.props.controlPermissions})),this.videoDumb&&e.myUserId!==this.props.myUserId&&this.videoDumb.setProps({myUserId:this.props.myUserId})}},{key:"destroyView",value:function(){for(var e in h.default.removeChild(this.elements.rootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"receiveEventFullScreenChange",value:function(e){if(m.default.isFullScreenStatus()){var t=this.elements.rootElement;m.default.getFullscreenElement()&&m.default.getFullscreenElement().id===t.id?this._changeFullScreenState(!0):this._changeFullScreenState(!1)}else this._changeFullScreenState(!1)}},{key:"onPlayOrPauseClick",value:function(){var e=this;if("pc"===TK.SDKTYPE&&this.state.streamInfo&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()){var t=this.whiteBoardManagerInstance.getRoomDelegate();switch(this.state.streamInfo.streamType){case"media":if(this.state.streamInfo.attributes.pause){var o=this.state.streamInfo.attributes,n=o.position,i=void 0===n?0:n,a=o.duration;(void 0===a?0:a)<=i&&t.seekMedia(0),t.pauseShareMedia(!1),h.default.updateStyle(this.elements.closeVideoPlayerElement,{display:""}),this.props.controlCallback&&this.props.controlCallback.play&&m.default.isFunction(this.props.controlCallback.play)&&this.props.controlCallback.play()}else t.pauseShareMedia(!0),h.default.updateStyle(this.elements.closeVideoPlayerElement,{display:"none"}),this.props.controlCallback&&this.props.controlCallback.pause&&m.default.isFunction(this.props.controlCallback.pause)&&this.props.controlCallback.pause();break;case"file":if(this.state.streamInfo.userid===this.props.myUserId&&t.getNativeInterface()){var r=t.getNativeInterface();if(this.state.streamInfo.attributes.pause){var s=this.state.streamInfo.attributes,l=s.position,c=void 0===l?0:l,d=s.duration,u=void 0===d?0:d;this._updateLocalFileStreamInfoPlayerPosition(function(){u<=c+1e3&&r.seekMediaFile(0),r.pauseShareMediaFile(!1),e.props.controlCallback&&e.props.controlCallback.play&&m.default.isFunction(e.props.controlCallback.play)&&(e.props.controlCallback.play(),h.default.updateStyle(e.elements.closeVideoPlayerElement,{display:""}))})}else r.pauseShareMediaFile(!0),this.props.controlCallback&&this.props.controlCallback.pause&&m.default.isFunction(this.props.controlCallback.pause)&&(this.props.controlCallback.pause(),h.default.updateStyle(this.elements.closeVideoPlayerElement,{display:"none"}))}}}}},{key:"onChangeVolume",value:function(e){var t={volume:e};0!==e||this.state.muteVolume?0!==e&&this.state.muteVolume&&(t.muteVolume=!1):t.muteVolume=!0,this.setState(t)}},{key:"onChangeProgress",value:function(e){if("mobile"!==TK.SDKTYPE&&this.state.streamInfo&&this.state.streamInfo.attributes&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate())switch(this.state.streamInfo.streamType){case"media":var t=e/100;t<0&&(t=0),1<t&&(t=1);var o=this.state.streamInfo.attributes.duration*t;this._updateStreamInfoAttributes("position",o),this.whiteBoardManagerInstance.getRoomDelegate().seekMedia(t);break;case"file":if(this.state.streamInfo.userid===this.props.myUserId&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()){var n=e/100;n<0&&(n=0),1<n&&(n=1);var i=this.state.streamInfo.attributes.duration*n;this._updateStreamInfoAttributes("position",i),this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().seekMediaFile(n)}}}},{key:"onVolumeMuteClick",value:function(){var e={muteVolume:!this.state.muteVolume};!e.muteVolume&&this.state.volume<=0&&(e.volume=100),this.setState(e)}},{key:"onCloseClick",value:function(){if(this.state.streamInfo&&this.whiteBoardManagerInstance)switch(this.state.streamInfo.streamType){case"media":this.whiteBoardManagerInstance.stopShareMedia();break;case"file":this.whiteBoardManagerInstance.stopShareLocalMedia()}}},{key:"onFullScreenClick",value:function(){if(this.state.isFullScreen)m.default.exitFullscreen();else{m.default.isFullScreenStatus()&&m.default.exitFullscreen();var e=this.elements.rootElement;m.default.launchFullscreen(e)}}},{key:"_createElements",value:function(){this.elements.rootElement=h.default.createElement("section",this.instanceId+(this.isVideoPlayer?"VideoPlayer":"AudioPlayer")+"TalkMediaPlayerBox","talkcloud-sdk-whiteboard tk-media-player  tk-media-player-container "+(this.isVideoPlayer?"tk-video-player-container ":"tk-audio-player-container ")+(this.props.isPlayback?"tk-playback ":" "),{display:this.state.streamInfo?"":"none"}),this.elements.mediaSourceElement=h.default.createElement("article",this.instanceId+(this.isVideoPlayer?"VideoPlayer":"AudioPlayer")+"TalkMediaPlayerSourceBox","talkcloud-sdk-whiteboard tk-media-player  tk-media-player-source",{display:this.isVideoPlayer?"":"none"});var e=!1,t=this.state.streamInfo||{},o=t.streamType,n=t.userid;"file"===o&&n!=this.props.myUserId&&(e=!0),this.isVideoPlayer&&(this.elements.closeVideoPlayerElement=h.default.createElement("button",void 0,"talkcloud-sdk-whiteboard add-cursor-pointer tk-video-player-close-btn ",{display:!this.props.controlPermissions.hasClose||e?"none":""})),this.elements.mediaTotalControlElement=h.default.createElement("article",this.instanceId+(this.isVideoPlayer?"VideoPlayer":"AudioPlayer")+"TalkMediaPlayerTotalControlBox","talkcloud-sdk-whiteboard tk-media-player  tk-media-player-total-control-box",{}),this.isVideoPlayer&&(this.elements.rootElement.onmouseover=this._videoMouseover.bind(this),this.elements.rootElement.onmouseout=this._videoMouseout.bind(this),this.elements.rootElement.onclick=this._videoClick.bind(this),this.elements.mediaTotalControlElement.onmouseover=this._videoControlMouseover.bind(this),this.elements.mediaTotalControlElement.onclick=this._videoControlClick.bind(this))}},{key:"_videoMouseover",value:function(){var e=this;h.default.addClass(this.elements.rootElement,"show-controller"),clearTimeout(this.showControllerTimer),this.showControllerTimer=setTimeout(function(){h.default.removeClass(e.elements.rootElement,"show-controller")},2e3)}},{key:"_videoMouseout",value:function(){h.default.removeClass(this.elements.rootElement,"show-controller")}},{key:"_videoClick",value:function(e){var t=this;this.elements.rootElement.classList.toggle("show-controller")&&(clearTimeout(this.showControllerTimer),this.showControllerTimer=setTimeout(function(){h.default.removeClass(t.elements.rootElement,"show-controller")},2e3))}},{key:"_videoControlMouseover",value:function(e){clearTimeout(this.showControllerTimer),h.default.addClass(this.elements.rootElement,"show-controller"),e.stopPropagation()}},{key:"_videoControlClick",value:function(e){e.stopPropagation()}},{key:"_connectElements",value:function(){h.default.appendChild(this.elements.rootElement,this.elements.mediaSourceElement),h.default.appendChild(this.elements.rootElement,this.elements.mediaTotalControlElement),this.elements.closeVideoPlayerElement&&h.default.appendChild(this.elements.rootElement,this.elements.closeVideoPlayerElement),h.default.appendChild(this.parentNode,this.elements.rootElement),this.props.isLoadControl&&this._loadMediaPlayerController(),this.elements.closeVideoPlayerElement&&(this.elements.closeVideoPlayerElement.onclick=this.onCloseClick.bind(this))}},{key:"_loadMediaPlayerController",value:function(){this.props.isLoadControl?(this.mediaPlayerControllerDumb&&this.mediaPlayerControllerDumb.destroyView(),this.mediaPlayerControllerDumb=new r.default(this.elements.mediaTotalControlElement,this.instanceId,this.whiteBoardManagerInstance,{streamInfo:this.state.streamInfo,volume:this.state.volume,muteVolume:this.state.muteVolume,isFullScreen:this.state.isFullScreen,isPlayback:this.props.isPlayback,myUserId:this.props.myUserId,controlPermissions:this.props.controlPermissions,isVideoPlayer:this.isVideoPlayer,onCloseClick:this.onCloseClick.bind(this),onPlayOrPauseClick:this.onPlayOrPauseClick.bind(this),onChangeVolume:this.onChangeVolume.bind(this),onVolumeMuteClick:this.onVolumeMuteClick.bind(this),onChangeProgress:this.onChangeProgress.bind(this),onFullScreenClick:this.onFullScreenClick.bind(this)})):this.mediaPlayerControllerDumb&&this.mediaPlayerControllerDumb.destroyView()}},{key:"_formatTime",value:function(e){var t=parseInt(e/60),o=Math.round(e%60);return 60===o&&(t+=1,o=0),0===parseInt(t/10)&&(t="0"+t),0===parseInt(o/10)&&(o="0"+o),t+":"+o}},{key:"_startProgressTimer",value:function(){var m=this;if(this.props.isPlayback)this._stopProgressTimer();else if(this._stopProgressTimer(),this.state.streamInfo){if("media"===this.state.streamInfo.streamType&&(this.state.streamInfo.userid==this.props.myUserId||0==this.props.myRole||1==this.props.myRole))return void this._stopProgressTimer();this.progressTimer=setInterval(function(){if(m.state.streamInfo){var e=m.state.streamInfo,t=e.userid,o=e.streamType,n=e.attributes,i=void 0===n?{}:n;switch(o){case"media":if("media"===m.state.streamInfo.streamType&&(m.state.streamInfo.userid==m.props.myUserId||0==m.props.myRole||1==m.props.myRole))return void m._stopProgressTimer();var a=i.position,r=void 0===a?0:a,s=i.duration,l=void 0===s?0:s;l<(r+=m.progressIntervalDuration)&&(r=l,m._stopProgressTimer()),m._updateStreamInfoAttributes("position",r);break;case"file":if(t!==m.props.myUserId){var c=i.position,d=void 0===c?0:c,u=i.duration,h=void 0===u?0:u;h<(d+=m.progressIntervalDuration)&&(d=h,m._stopProgressTimer()),m._updateStreamInfoAttributes("position",d)}else m._updateLocalFileStreamInfoPlayerPosition()}}else m._stopProgressTimer()},this.progressIntervalDuration)}}},{key:"_stopProgressTimer",value:function(){clearInterval(this.progressTimer),this.progressTimer=null}},{key:"_updateStreamInfoAttributes",value:function(e,t){if(this.state.streamInfo){var o={};o[e]=t,this.setState({streamInfo:Object.deepAssign({},this.state.streamInfo,{attributes:o})})}}},{key:"_updateLocalFileStreamInfoPlayerPosition",value:function(a){var r=this;this.state.streamInfo&&"file"===this.state.streamInfo.streamType&&this.state.streamInfo.userid===this.props.myUserId&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().getMediaFileProgress(function(e){if("object"===(void 0===e?"undefined":l(e))){var t=e.position,o=void 0===t?0:t,n=e.duration,i=void 0===n?0:n;i<o&&(o=i,r._stopProgressTimer()),r._updateStreamInfoAttributes("position",o),m.default.isFunction(a)&&a(e)}})}},{key:"_changeFullScreenState",value:function(e){this.setState({isFullScreen:e})}},{key:"getVideoDumbElementId",value:function(){if(this.videoDumb)return this.videoDumb.getElementId()}},{key:"render",value:function(){this.state.streamInfo&&!this.videoDumb?this.videoDumb=new a.default(this.elements.mediaSourceElement,this.instanceId,this.whiteBoardManagerInstance,{videoDumbElementIdPrefix:this.instanceId,streamInfo:this.state.streamInfo,volume:this.state.volume,muteVolume:this.state.muteVolume,myUserId:this.props.myUserId}):!this.state.streamInfo&&this.videoDumb&&(this.videoDumb.destroyView(),this.videoDumb=void 0),h.default.updateStyle(this.elements.rootElement,{display:this.state.streamInfo?"":"none"})}}]),s}();o.default=c},{"../../utils/DomUtils":338,"../../utils/Utils":343,"../components/MediaPlayerController":345,"../components/TalkcloudReact":347,"../components/VideoDumb":348}],353:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.TalkVideoPlayer=void 0;var n=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),l=a(e("../../utils/Global")),d=a(e("../../utils/Utils")),i=a(e("./MediaPlayer"));function a(e){return e&&e.__esModule?e:{default:e}}var r=function(e){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t,o,n,i,!0));return a.configration=i,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.default),n(r,[{key:"reveiveEventRoomUsermediaorfilestateChanged",value:function(e){var t=e.message,o=t.type,n=t.userId,i=t.attributes,a=void 0===i?{}:i,r=t.published;if(("media"===o||"file"===o)&&a.audio&&a.video)if(r){l.default.isPlayVideoing=!0,this.setState({streamInfo:void 0}),this.setState({streamInfo:{userid:n,streamType:o,audio:a.audio,video:a.video,attributes:a}}),n===this.props.myUserId&&"file"===o&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()&&(this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().pauseShareMediaFile(!1),this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().seekMediaFile(0));var s=a.pause;this.sendMediaPlayerNoticeActionCommand("start",e),this.sendMediaPlayerNoticeActionCommand(s?"pause":"play",e),this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.reveiveEventRoomReceiveActionCommand&&this.whiteBoardManagerInstance.reveiveEventRoomReceiveActionCommand({type:"room-receiveActionCommand",message:{action:"closeDynamicPptWebPlay"}})}else l.default.isPlayVideoing=!1,this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("end",e)}},{key:"reveiveEventRoomUsermediaorfileattributesUpdate",value:function(e){var t=e.message,o=t.type,n=t.attributes,i=void 0===n?{}:n,a=t.updateAttributes,r=void 0===a?{}:a;("media"===o||"file"===o)&&i.audio&&i.video&&this.state.streamInfo&&(this.setState({streamInfo:Object.deepAssign({},this.state.streamInfo,{attributes:r})}),void 0!==r.pause&&this.sendMediaPlayerNoticeActionCommand(r.pause?"pause":"play",e))}},{key:"receiveEventRoomErrorNotice",value:function(e){switch(e.errorCode){case TK.ERROR_NOTICE.SHARE_MEDIA_FAILURE:case TK.ERROR_NOTICE.SHARE_FILE_FAILURE:l.default.isPlayVideoing=!1,this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("startShareMediaFail",e);break;case TK.ERROR_NOTICE.STOP_MEDIA_FAILURE:case TK.ERROR_NOTICE.STOP_FILE_FAILURE:this.sendMediaPlayerNoticeActionCommand("stopShareMediaFail",e);break;case TK.ERROR_NOTICE.SUBSCRIBE_MEDIA_FAILURE:case TK.ERROR_NOTICE.SUBSCRIBE_FILE_FAILURE:l.default.isPlayVideoing=!1,this.setState({streamInfo:void 0}),this.sendMediaPlayerNoticeActionCommand("subscribeShareMediaFail",e);break;case TK.ERROR_NOTICE.UNSUBSCRIBE_MEDIA_FAILURE:case TK.ERROR_NOTICE.UNSUBSCRIBE_FILE_FAILURE:this.sendMediaPlayerNoticeActionCommand("unsubscribeShareMediaFail",e)}}},{key:"sendMediaPlayerNoticeActionCommand",value:function(e,t){var o=t.message,n=o.type,i=o.userId,a=o.attributes,r=void 0===a?{}:a;if(("media"===n||"file"===n)&&r.audio&&r.video&&this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.whiteboardViewMap&&this.whiteBoardManagerInstance.whiteboardViewMap.has("default")){var s=this.whiteBoardManagerInstance.whiteboardViewMap.get("default");if(s&&s.sendActionCommand){var l,c={playerType:"videoPlayer",userid:i,streamType:n,audio:r.audio,video:r.video,attributes:r};c.isDynamicPptVideo="dynamicPPT"===c.attributes.source||"videoPlayer"===c.playerType&&""===c.attributes.filename,l=Object.deepAssign({type:e,fileid:c.attributes.fileid},c),s.sendActionCommand("mediaPlayerNotice",l),d.default.isFunction(s.forceViewStateUpdate)&&s.forceViewStateUpdate()}}}}]),r}();window.TalkVideoPlayer=r,o.TalkVideoPlayer=r,o.default=r},{"../../utils/Global":339,"../../utils/Utils":343,"./MediaPlayer":352}],354:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),y=i(e("../../utils/DomUtils")),r=i(e("../../utils/Configuration")),v=i(e("../../utils/Constant")),Ie=i(e("../../utils/Global")),b=i(e("../../utils/Utils")),Pe=i(e("../../intermediateLayer/WhiteboardIntermediateLayer")),_=i(e("../../intermediateLayer/DynamicPptIntermediateLayer")),w=i(e("../../intermediateLayer/H5DocumentPptIntermediateLayer"));function i(e){return e&&e.__esModule?e:{default:e}}function p(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}var a=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Object.deepAssign({},r.default.defaultWhiteboard,r.default.commonWhiteboard),n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.parentNode=e,this.instanceId=t,this.configration=o,this.receiveActionCommand=n,this.whiteBoardManagerInstance=i,this.elements={},this.fileid=0,this.fullScreen=!1,this.remark=!1,this.scale=this.configration.defaultWhiteboardScale,this.loadDocumentFail=void 0,this.remarkText="",this.fileTypeMark="generalDocument",this.cacheMaxPageNum=1,this.cacheMinPageNum=1,this.filePreLoadCurrPage=1,this.filePreLoadStep=2,this.dynamicPptVolume=100,this.maxGeneralFileForceReloadNumber=10,this.generalDocumentFileForceReloadNumber=0,this.volume=100,this.whiteboardViewState={tool:{},action:{},zoom:{},page:{},documentType:this.fileTypeMark,fileid:this.fileid,dynamicPptVolume:this.dynamicPptVolume,fullScreen:this.fullScreen,remark:this.remark,scale:this.scale,remarkText:this.remarkText,other:{primaryColor:this.configration.primaryColor,secondaryColor:this.configration.secondaryColor,backgroundColor:this.configration.backgroundColor,pencilWidth:this.configration.pencilWidth,shapeWidth:this.configration.shapeWidth,eraserWidth:this.configration.eraserWidth,fontSize:this.configration.fontSize,fontFamily:this.configration.fontFamily}},this._createElements(),this._connectElements()}return n(a,[{key:"getConfigration",value:function(){return this.configration}},{key:"saveFiledataAndLoadCurrpageWhiteboardData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this._saveFiledataAndLoadCurrpageWhiteboardData(e)}},{key:"noticeWhiteboardActionCommand",value:function(e,t){if("default"===this.instanceId)switch(e){case"playOrPauseDynamicPpt":"dynamicPPT"===this.fileTypeMark&&_.default.postMessage(this.instanceId,{action:t.pause?"stopDynamicPpt":"playDynamicPpt"});break;case"updateMute":"dynamicPPT"===this.fileTypeMark&&_.default.postMessage(this.instanceId,{action:"ExtendedNotice",extendedData:{type:"updateMute",data:{mute:t.isMute}}});break;case"ExtendedNotice":"dynamicPPT"===this.fileTypeMark&&_.default.postMessage(this.instanceId,{action:"ExtendedNotice",extendedData:t.extendedData});break;case"closeDynamicPptAutoVideo":"dynamicPPT"===this.fileTypeMark&&_.default.postMessage(this.instanceId,{action:"closeDynamicPptAutoVideo"})}}},{key:"reloadCurrentDocument",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if("default"===this.instanceId||this.configration.hasExtendDocument)switch(this.fileTypeMark){case"generalDocument":var t=Pe.default.getWhiteboardFiledata(this.instanceId),o=(t.cospdfpath,t.swfpath),n=t.isContentDocument,i=t.fileid,a=t.filetype,r=t.currpage;if(o&&"whiteboard"!==a&&0!=i){var s=void 0;if(Number(n))o&&(s=o);else{var l=o.lastIndexOf("."),c=o.substring(l),d=o.replace(c,"-"+r+c);s=Ie.default.nowUseDocAddress+d}Pe.default.setWhiteboardWatermarkImage(this.instanceId,s,{resetDedaultWhiteboardMagnification:!1})}break;case"dynamicPPT":e.isAgainreconnect||(this.forceReloadTimestampFromPpt=(new Date).getTime()),this._loadCurrentDynamicPpt({},{isAgainreconnect:e.isAgainreconnect});break;case"h5Document":this._loadCurrentH5Document({forceReloadTimestamp:(new Date).getTime()})}}},{key:"changeDocumentRemarkState",value:function(e){this.remark=e&&this.configration.canRemark,this._viewStateUpdate()}},{key:"changeFullScreenState",value:function(e){this.fullScreen=e,this._viewStateUpdate(),this.resizeWhiteboardHandler()}},{key:"destroyWhiteboardView",value:function(){for(var e in Pe.default.hasWhiteboardById(this.instanceId)&&Pe.default.destroyWhiteboardInstance(this.instanceId),_.default.hasDynamicPptById(this.instanceId)&&_.default.destroyDynamicPptInstance(this.instanceId),w.default.hasH5DocumentById(this.instanceId)&&w.default.destroyH5DocumentInstance(this.instanceId),y.default.removeChild(this.elements.whiteboardViewRootElement,this.parentNode),this.elements)this.elements[e]=void 0,delete this.elements[e]}},{key:"changeWhiteBoardConfigration",value:function(e){Object.deepAssign(this.configration,e);var t={},o={},n={},i=!0,a=!1,r=void 0;try{for(var s,l=Object.entries(e)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,d=Se(c,2),u=d[0],h=d[1];"canDraw"===u?t.deawPermission=this.configration.canDraw&&this.configration.synchronization&&this.configration.isConnectedRoom:"myUserId"===u?t.myselfId=h:"myName"===u?t.nickname=h:"primaryColor"===u||"secondaryColor"===u||"primaryColor"===u?t[u.replace(/Color/g,"")]=h:"synchronization"===u?t.synchronizationWhiteboard=this.configration.synchronization&&this.configration.isConnectedRoom:t[u]=h,"synchronization"===u?o.synchronizationDynamicPpt=this.configration.synchronization&&this.configration.isConnectedRoom:"actionClick"===u?o.dynamicPptActionClick=this.configration.actionClick&&this.configration.isConnectedRoom:o[u]=h,"synchronization"===u?n.synchronizationH5Document=this.configration.synchronization&&this.configration.isConnectedRoom:"actionClick"===u?n.h5DocumentActionClick=this.configration.actionClick&&this.configration.isConnectedRoom:n[u]=h}}catch(e){a=!0,r=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw r}}void 0!==e.isConnectedRoom&&(t.synchronizationWhiteboard=this.configration.synchronization&&this.configration.isConnectedRoom,o.synchronizationDynamicPpt=this.configration.synchronization&&this.configration.isConnectedRoom,n.synchronizationH5Document=this.configration.synchronization&&this.configration.isConnectedRoom,o.dynamicPptActionClick=this.configration.actionClick&&this.configration.isConnectedRoom,n.h5DocumentActionClick=this.configration.actionClick&&this.configration.isConnectedRoom,t.deawPermission=this.configration.canDraw&&this.configration.synchronization&&this.configration.isConnectedRoom),void 0!==e.synchronization&&(t.deawPermission=this.configration.canDraw&&this.configration.synchronization&&this.configration.isConnectedRoom),Pe.default.updateWhiteboardProperty(this.instanceId,t),(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.updateDynamicPptProperty(this.instanceId,o),(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&w.default.updateH5DocumentProperty(this.instanceId,n),void 0!==e.loadDynamicPptView&&this.elements.dynamicPptViewElement&&(e.loadDynamicPptView&&!document.getElementById(this.elements.dynamicPptViewElement.getAttribute("id"))?(y.default.appendChild(this.elements.documentViewElement,this.elements.dynamicPptViewElement),this._productionDynamicPpt()):!e.loadDynamicPptView&&document.getElementById(this.elements.dynamicPptViewElement.getAttribute("id"))&&(_.default.hasDynamicPptById(this.instanceId)&&_.default.destroyDynamicPptInstance(this.instanceId),y.default.removeChild(this.elements.dynamicPptViewElement,this.elements.documentViewElement))),void 0!==e.loadH5DocumentView&&this.elements.h5DocumentViewElement&&(e.loadH5DocumentView&&!document.getElementById(this.elements.h5DocumentViewElement.getAttribute("id"))?(y.default.appendChild(this.elements.documentViewElement,this.elements.h5DocumentViewElement),this._productionH5Document()):!e.loadH5DocumentView&&document.getElementById(this.elements.h5DocumentViewElement.getAttribute("id"))&&(w.default.hasH5DocumentById(this.instanceId)&&w.default.destroyH5DocumentInstance(this.instanceId),y.default.removeChild(this.elements.h5DocumentViewElement,this.elements.documentViewElement))),void 0!==e.rootBackgroundColor&&y.default.updateStyle(this.elements.whiteboardViewRootElement,{backgroundColor:e.rootBackgroundColor}),void 0!==e.isMobile&&(e.isMobile?y.default.addClass(this.elements.whiteboardViewRootElement,"app-mobile"):y.default.removeClass(this.elements.whiteboardViewRootElement,"app-mobile")),void 0===e.canPage&&void 0===e.addPage&&void 0===e.isConnectedRoom||this._viewStateUpdate()}},{key:"receiveEventRoomPubmsg",value:function(e){e&&"string"==typeof e&&(e=JSON.parse(e)),"object"===(void 0===e?"undefined":ke(e))&&e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),"object"===ke(e.message)&&e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var t=e.message;switch(t.name){case"ShowPage":case"ExtendShowPage":t.source="room-pubmsg",this._handleShowPageSignalling(t,e.local);break;case"whiteboardMarkTool":case"ExtendWhiteboardMarkTool":t.data&&t.data.selectMouse?Pe.default.activeWhiteboardTool("tool_mouse",this.instanceId):Pe.default.useHistoryPenTool(this.instanceId);break;case"NewPptTriggerActionClick":case"ExtendNewPptTriggerActionClick":(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.postMessageDynamicPptTriggerAction(this.instanceId,t.data);break;case"H5DocumentAction":case"ExtendH5DocumentAction":(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&w.default.postMessageH5DocumentTriggerAction(this.instanceId,t.data);break;case"PptVolumeControl":case"ExtendPptVolumeControl":this.volume=100*t.data.volume,this._updatedynamicPptVolume(100*t.data.volume)}}},{key:"receiveEventRoomDelmsg",value:function(e){}},{key:"receiveEventRoomMsglist",value:function(e,t){switch(e){case"ShowPage":case"ExtendShowPage":t.source="room-msglist",this._handleShowPageSignalling(t);break;case"whiteboardMarkTool":case"ExtendWhiteboardMarkTool":t.data&&t.data.selectMouse?Pe.default.activeWhiteboardTool("tool_mouse",this.instanceId):Pe.default.useHistoryPenTool(this.instanceId);break;case"NewPptTriggerActionClick":case"ExtendNewPptTriggerActionClick":(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.postMessageDynamicPptTriggerAction(this.instanceId,t.data);break;case"H5DocumentAction":case"ExtendH5DocumentAction":(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&w.default.postMessageH5DocumentTriggerAction(this.instanceId,t.data);break;case"PptVolumeControl":case"ExtendPptVolumeControl":this._updatedynamicPptVolume(100*t.data.volume)}}},{key:"reveiveEventRoomReceiveActionCommand",value:function(e,t){switch(e){case"fullScreenChangeCallback":this.changeFullScreenState(t.isFullScreen),this.configration.isMobile&&"dynamicPPT"===this.fileTypeMark&&_.default.changeDynamicPptSize(this.instanceId);break;case"changeDynamicPptSize":this.configration.isMobile&&"dynamicPPT"===this.fileTypeMark&&_.default.changeDynamicPptSize(this.instanceId);break;case"closeDynamicPptWebPlay":if("dynamicPPT"===this.fileTypeMark){_.default.postMessage(this.instanceId,{action:"closeDynamicPptAutoVideo"})}}}},{key:"sendActionCommand",value:function(e,t){this.receiveActionCommand&&"function"==typeof this.receiveActionCommand&&("object"!==(void 0===t?"undefined":ke(t))||Array.isArray(t)||(t=Object.deepAssign({},t)),this.receiveActionCommand(e,t))}},{key:"pubMsg",value:function(e){this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.pubMsg&&this.whiteBoardManagerInstance.pubMsg(e)}},{key:"delMsg",value:function(e){this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.delMsg&&this.whiteBoardManagerInstance.delMsg(e)}},{key:"getWhiteboardViewState",value:function(){return this.whiteboardViewState}},{key:"forceViewStateUpdate",value:function(){this._viewStateUpdate()}},{key:"useWhiteboardTool",value:function(e){if(this.whiteboardViewState.tool[e]&&this.whiteboardViewState.tool[e].disabled)L.Logger.warning("whiteboard tool("+e+") state is disabled , cannot use "+e+" tool!");else{if(("default"===this.instanceId||this.configration.hasExtendDocument)&&this.configration.synchronization&&this.configration.isConnectedRoom&&e!==Pe.default.getActiveTool(this.instanceId)&&("tool_mouse"!==e&&"tool_mouse"===Pe.default.getActiveTool(this.instanceId)||"tool_mouse"===e&&"tool_mouse"!==Pe.default.getActiveTool(this.instanceId))){var t={name:"default"===this.instanceId?"whiteboardMarkTool":"ExtendWhiteboardMarkTool",id:"default"===this.instanceId?"whiteboardMarkTool":"ExtendWhiteboardMarkTool_"+this.instanceId,toID:"__allExceptSender",data:{sourceInstanceId:this.instanceId,selectMouse:"tool_mouse"===e},save:!0};this.pubMsg(t)}Pe.default.activeWhiteboardTool(e,this.instanceId)}}},{key:"executeWhiteboardAction",value:function(e){this.whiteboardViewState.action[e]&&this.whiteboardViewState.action[e].disabled?L.Logger.warning("whiteboard action("+e+") state is disabled , cannot execute "+e+" action!"):Pe.default.activeWhiteboardTool(e,this.instanceId)}},{key:"executeZoomWhiteaord",value:function(e){this.whiteboardViewState.zoom[e]&&this.whiteboardViewState.zoom[e].disabled?L.Logger.warning("whiteboard zoom("+e+") state is disabled , cannot execute "+e+" zoom!"):Pe.default.activeWhiteboardTool(e,this.instanceId)}},{key:"addPage",value:function(){var e=Pe.default.getWhiteboardFiledata(this.instanceId),t=e.fileid,o=e.pagenum;if("generalDocument"===this.fileTypeMark||0!==Number(t)){if(o++,Pe.default.updateWhiteboardFiledata(this.instanceId,{pagenum:o}),this.configration.synchronization&&this.configration.isConnectedRoom){var n={name:"default"===this.instanceId?"WBPageCount":"ExtendWBPageCount",id:"default"===this.instanceId?"WBPageCount":"WBPageCount_"+this.instanceId,toID:"__allExceptSender",data:{sourceInstanceId:this.instanceId,totalPage:o,fileid:t},save:!0};this.pubMsg(n)}this.nextPage()}else L.Logger.warning("whiteboard addPage method can only be used in pure whiteboard.")}},{key:"nextPage",value:function(){var t=this;if(this.whiteboardViewState.page.nextPage&&this.whiteboardViewState.page.nextPage.disabled)L.Logger.warning("whiteboard nexPage state is disabled , cannot execute nextPage method!");else switch(this.fileTypeMark){case"generalDocument":var e=Pe.default.getWhiteboardFiledata(this.instanceId),o=e.currpage,n=e.pagenum;n<++o&&(o=n);var i={data:{filedata:{currpage:o}}};this._sendSignalling_ShowPage(i,function(e){t.receiveEventRoomPubmsg({type:"room-pubmsg",message:e,local:!0})});break;case"h5Document":w.default.nextPage(this.instanceId);break;case"dynamicPPT":_.default.nextSlide(this.instanceId)}}},{key:"prevPage",value:function(){var t=this;if(this.whiteboardViewState.page.prevPage&&this.whiteboardViewState.page.prevPage.disabled)L.Logger.warning("whiteboard prevPage state is disabled , cannot execute prevPage method!");else switch(this.fileTypeMark){case"generalDocument":var e=Pe.default.getWhiteboardFiledata(this.instanceId).currpage;--e<1&&(e=1);var o={data:{filedata:{currpage:e}}};this._sendSignalling_ShowPage(o,function(e){t.receiveEventRoomPubmsg({type:"room-pubmsg",message:e,local:!0})});break;case"h5Document":w.default.prevPage(this.instanceId);break;case"dynamicPPT":_.default.prevSlide(this.instanceId)}}},{key:"skipPage",value:function(e){var t=this;switch(this.fileTypeMark){case"generalDocument":var o=Pe.default.getWhiteboardFiledata(this.instanceId).pagenum;o<e&&(e=o),e<1&&(e=1);var n={data:{filedata:{currpage:e}}};this._sendSignalling_ShowPage(n,function(e){t.receiveEventRoomPubmsg({type:"room-pubmsg",message:e,local:!0})});break;case"h5Document":w.default.skipPage(this.instanceId,e);break;case"dynamicPPT":var i=e;_.default.jumpToAnimation(this.instanceId,i,0,!0)}}},{key:"nextStep",value:function(){if("dynamicPPT"===this.fileTypeMark)if(this.whiteboardViewState.page.nextStep&&this.whiteboardViewState.page.nextStep.disabled)L.Logger.warning("whiteboard nextStep state is disabled , cannot execute nextStep method!");else switch(this.fileTypeMark){case"dynamicPPT":_.default.nextStep(this.instanceId)}else L.Logger.warning("whiteboard nextStep method can only be used in dynamic PPT files.")}},{key:"prevStep",value:function(){if("dynamicPPT"===this.fileTypeMark)if(this.whiteboardViewState.page.prevStep&&this.whiteboardViewState.page.prevStep.disabled)L.Logger.warning("whiteboard prevStep state is disabled , cannot execute prevStep method!");else switch(this.fileTypeMark){case"dynamicPPT":_.default.prevStep(this.instanceId)}else L.Logger.warning("whiteboard prevStep method can only be used in dynamic PPT files.")}},{key:"resizeWhiteboardSizeCallback",value:function(e){e.loadScrollBar?y.default.addClass(this.elements.totalDocumentViewElement,"custom-scroll-bar"):y.default.removeClass(this.elements.totalDocumentViewElement,"custom-scroll-bar"),y.default.updateStyle(this.elements.documentViewElement,{width:e.style.width,height:e.style.height}),y.default.updateStyle(this.elements.totalDocumentViewElement,{width:e.style.width,height:e.style.height,top:"50%",left:"50%"}),y.default.updateStyle(this.elements.totalDocumentViewElement,{marginLeft:"-"+this.elements.totalDocumentViewElement.offsetWidth/2+"px",marginTop:"-"+this.elements.totalDocumentViewElement.offsetHeight/2+"px"})}},{key:"noticeUpdateToolDescCallback",value:function(){this._viewStateUpdate()}},{key:"noticeUpdateWhiteboardFiledataCallback",value:function(){this._viewStateUpdate()}},{key:"receiveActionCommandCallback",value:function(e,t){if(t.id===this.instanceId)switch(e){case"closeAllSelectBox":this.sendActionCommand("closeAllSelectBox");break;case"changeWhiteboardActiveTool":this._updateViewShowAndHide();break;case"updateWhiteboardWatermarkImageScale":Pe.default.updateWhiteboardWatermarkImageScale(this.instanceId,t.scale);break;case"dynamicPptLoadEnd":case"h5DocumentLoadEnd":case"generalDocumentLoadEnd":this.scale=t.scale;var o=Pe.default.getWhiteboardFiledata(this.instanceId);o.success=t.success,o.reloadNumber=t.reloadNumber,this.loadComplete=o,this._viewStateUpdate(),y.default.removeClass(this.elements.disableClickViewElement,"loading");break;case"h5DocumentReloadFail":case"dynamicPptReloadFail":case"generalDocumentReloadFail":var n=Pe.default.getWhiteboardFiledata(this.instanceId);n.success=t.success,n.reloadNumber=t.reloadNumber,this.loadDocumentFail=n,this._viewStateUpdate();break;case"sendSignalling_ShowPage":this._sendSignalling_ShowPage(t.updatePubmsgData);break;case"saveFiledataAndLoadCurrpageWhiteboardData":case"dynamicPptSlideChange":this._saveFiledataAndLoadCurrpageWhiteboardData(t.updateFileData);break;case"dynamicPptStepChange":Pe.default.updateWhiteboardFiledata(this.instanceId,t.updateFileData);break;case"publishDymanicPptNetworkMedia":if("default"===this.instanceId){_.default.postMessage(this.instanceId,{action:"closeDynamicPptAutoVideo"});var i=Pe.default.getWhiteboardFiledata(this.instanceId),a=i.swfpath,r=i.isContentDocument,s=void 0;Number(r)?a&&(s=a.replace(/\/newppt.html/g,"")):s=Ie.default.nowUseDocAddress+a,t.url=s+"/"+t.url,this.whiteBoardManagerInstance&&(this.configration.clientMediaShare&&this.whiteBoardManagerInstance.getRoomDelegate()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface()&&this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().startShareMediaFile?this.whiteBoardManagerInstance.getRoomDelegate().getNativeInterface().startShareMediaFile(t.url,void 0,void 0,{IgnoreElementId:!0,toID:this.configration.mediaShareToID,attrs:t.attributes}):this.whiteBoardManagerInstance.startShareMedia(t.url,t.video,this.configration.mediaShareToID,t.attributes))}break;case"publishDymanicPptNetworkAudio":if(this.configration.isNativePlayAudio){var l=Pe.default.getWhiteboardFiledata(this.instanceId),c=l.swfpath,d=l.isContentDocument,u=void 0;Number(d)?c&&(u=c.replace(/\/newppt.html/g,"")):u=Ie.default.nowUseDocAddress+c,u=(u=u.replace(/^https/,"http")).replace(/443/g,"80"),t.url=u+"/"+t.url,this.whiteBoardManagerInstance&&this.whiteBoardManagerInstance.getRoomDelegate().isPlayAudio&&(this.whiteBoardManagerInstance.getRoomDelegate().isPlayAudio(t.url,t.isPlay,t.attributes),this.whiteBoardManagerInstance.getRoomDelegate().setPptAudioVolume&&this.whiteBoardManagerInstance.getRoomDelegate().setPptAudioVolume(this.volume))}break;case"updateWhiteboardFiledata":Pe.default.updateWhiteboardFiledata(this.instanceId,t.updateFileData);break;case"getWhiteboardFiledata":t&&t.callback&&"function"==typeof t.callback&&t.callback(Pe.default.getWhiteboardFiledata(this.instanceId));break;case"reloadCurrentDocument":this.reloadCurrentDocument({isAgainreconnect:t.isAgainreconnect});break;case"reloadDynamicPptIframeSrc":if(t.iframeSrc&&"dynamicPPT"===this.fileTypeMark&&new RegExp(Pe.default.getWhiteboardFiledata(this.instanceId).swfpath+"/newppt.html","g").test(t.iframeSrc)){var h=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress;Ie.default.docAddressKey=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey,!0),this.whiteBoardManagerInstance&&b.default.isFunction(this.whiteBoardManagerInstance.setLocalStorageItem)&&(this.whiteBoardManagerInstance.setLocalStorageItem("tkDocAddressKey",Ie.default.docAddressKey),this.sendActionCommand("docAddressUpdate",{docAddressList:[].concat(p(Ie.default.docAddressList)),docAddressIndex:Ie.default.docAddressKey,oldDocAddress:h,nowDocAddress:b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress})),Ie.default.nowUseDocAddress=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress,L.Logger.info("[reload dynamic ppt]change doc address , old address is "+h+" , now address is "+Ie.default.nowUseDocAddress),void 0!==t.forceReloadNumber&&(this.forceReloadNumberFromPpt=t.forceReloadNumber),this._loadCurrentDynamicPpt(),L.Logger.info("["+t.source+"]load dynamic ppt failure , reload file , old url is "+t.iframeSrc+" , now url is "+_.default.getIframeSrc(this.instanceId)+" , reload number is "+t.forceReloadNumber)}break;case"reloadH5DocumentIframeSrc":if(t.iframeSrc&&"h5Document"===this.fileTypeMark&&new RegExp(Pe.default.getWhiteboardFiledata(this.instanceId).swfpath,"g").test(t.iframeSrc)){var m=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress;Ie.default.docAddressKey=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey,!0),this.whiteBoardManagerInstance&&b.default.isFunction(this.whiteBoardManagerInstance.setLocalStorageItem)&&(this.whiteBoardManagerInstance.setLocalStorageItem("tkDocAddressKey",Ie.default.docAddressKey),this.sendActionCommand("docAddressUpdate",{docAddressList:[].concat(p(Ie.default.docAddressList)),docAddressIndex:Ie.default.docAddressKey,oldDocAddress:m,nowDocAddress:b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress})),Ie.default.nowUseDocAddress=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress,L.Logger.info("[reload h5 document]change doc address , old address is "+m+" , now address is "+Ie.default.nowUseDocAddress);var f={};t.forceReloadNumber&&(f.forceReloadNumber=t.forceReloadNumber),this._loadCurrentH5Document(f,{forceReloadNumber:t.forceReloadNumber}),L.Logger.info("["+t.source+"]load h5 document failure , reload file , old url is "+t.iframeSrc+" , now url is "+_.default.getIframeSrc(this.instanceId)+" , reload number is "+t.forceReloadNumber)}break;case"updateWhiteboardToolsInfo":this._viewStateUpdate();break;case"h5DocumentOnJumpPage":this.whiteBoardManagerInstance.skipPage(t.toPage,this.instanceId)}}},{key:"whiteboardWatermarkImageOnFailureCallback",value:function(e){var t=Pe.default.getWhiteboardFiledata(this.instanceId),o=(t.cospdfpath,t.swfpath),n=t.currpage,i=t.filetype,a=t.isContentDocument;if("generalDocument"===this.fileTypeMark&&o&&e&&"whiteboard"!==i&&this.generalDocumentFileForceReloadNumber<this.maxGeneralFileForceReloadNumber){var r=void 0;if(Number(a))r=o;else{var s=o.lastIndexOf("."),l=o.substring(s);r=o.replace(l,"-"+n+l)}if(new RegExp(r,"g").test(e)){if(Number(a))this.generalDocumentFileForceReloadNumber++,L.Logger.info("[general document]load general document failure , reload file ,  url is "+r+" , reload number is "+this.generalDocumentFileForceReloadNumber);else{var c=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress;Ie.default.docAddressKey=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey,!0),this.whiteBoardManagerInstance&&b.default.isFunction(this.whiteBoardManagerInstance.setLocalStorageItem)&&(this.whiteBoardManagerInstance.setLocalStorageItem("tkDocAddressKey",Ie.default.docAddressKey),this.sendActionCommand("docAddressUpdate",{docAddressList:[].concat(p(Ie.default.docAddressList)),docAddressIndex:Ie.default.docAddressKey,oldDocAddress:c,nowDocAddress:b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress})),Ie.default.nowUseDocAddress=b.default.getItem(Ie.default.docAddressList,Ie.default.docAddressKey)||this.configration.docAddress,L.Logger.info("[reload general document]change doc address , old address is "+c+" , now address is "+Ie.default.nowUseDocAddress),this.generalDocumentFileForceReloadNumber++,L.Logger.info("[general document]load general document failure , reload file , old url is "+(c+r)+" , now url is "+(Ie.default.nowUseDocAddress+r)+" , reload number is "+this.generalDocumentFileForceReloadNumber)}var d=void 0;Number(a)?r&&(d=r):d=Ie.default.nowUseDocAddress+r,Pe.default.setWhiteboardWatermarkImage(this.instanceId,d,{resetDedaultWhiteboardMagnification:!1})}else this.generalDocumentFileForceReloadNumber=0}this.generalDocumentFileForceReloadNumber>=this.maxGeneralFileForceReloadNumber&&this.sendActionCommand("generalDocumentReloadFail",{reloadNumber:this.generalDocumentFileForceReloadNumber,success:!1})}},{key:"whiteboardWatermarkImageOnloadCallback",value:function(e){var t=e.width,o=e.height;this.scale=t/o,this.sendActionCommand("generalDocumentLoadEnd",{reloadNumber:this.generalDocumentFileForceReloadNumber,success:!0}),this._viewStateUpdate()}},{key:"resizeWhiteboardHandler",value:function(){Pe.default.resizeWhiteboardHandler(this.instanceId),"dynamicPPT"===this.fileTypeMark&&"ios"===this.configration.clientType&&_.default.changeDynamicPptSize(this.instanceId)}},{key:"isWhiteboardTextEditing",value:function(){return Pe.default.isWhiteboardTextEditing(this.instanceId)}},{key:"resetWhiteboardData",value:function(){Pe.default.clearWhiteboardAllDataById(this.instanceId)}},{key:"receiveWindowMessageEvent",value:function(e){(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.receiveWindowMessageEvent(this.instanceId,e),(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&w.default.receiveWindowMessageEvent(this.instanceId,e)}},{key:"getWhiteboardRootElement",value:function(){return this.elements.whiteboardViewRootElement}},{key:"resetPureWhiteboardTotalPage",value:function(e){if(1<e)for(var t=2;t<=e;t++)Pe.default.clearWhiteboardDataByFileidAndCurrpage(this.instanceId,0,t);var o=Pe.default.getWhiteboardFiledata(this.instanceId);if(0==o.fileid){o.currpage=1,o.pagenum=1,this._saveFiledataAndLoadCurrpageWhiteboardData(o),this._generalDocumentFileShowPage(!1)}}},{key:"getDynamicPptInstanceByID",value:function(){return _.default.getDynamicPptInstanceByID(this.instanceId)}},{key:"getH5DocumentInstanceByID",value:function(){return w.default.getH5DocumentInstanceByID(this.instanceId)}},{key:"_createElements",value:function(){this.elements.whiteboardViewRootElement=y.default.createElement("section",this.instanceId+"TalkcloudSdkWhiteboardRoot",(this.configration.isMobile?"app-mobile ":" ")+"talkcloud-sdk-whiteboard "+this.instanceId+" sdkwhiteboard-root",{width:"100%",height:"100%",position:"relative",left:0,top:0,backgroundColor:this.configration.rootBackgroundColor}),this.elements.totalDocumentViewElement=y.default.createElement("section",this.instanceId+"TalkcloudTotalDocument","talkcloud-sdk-whiteboard "+this.instanceId+" total-document-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,maxWidth:"100%",maxHeight:"100%"}),this.elements.documentViewElement=y.default.createElement("section",this.instanceId+"TalkcloudDocument","talkcloud-sdk-whiteboard "+this.instanceId+" document-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0}),this.elements.whiteboardViewElement=y.default.createElement("article",this.instanceId+"TalkcloudWhiteboard","talkcloud-sdk-whiteboard "+this.instanceId+" whiteboard-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,zIndex:2}),this.elements.dynamicPptViewElement=y.default.createElement("article",this.instanceId+"TalkcloudDynamicPpt","talkcloud-sdk-whiteboard "+this.instanceId+" dynamic-ppt-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,display:"none",zIndex:1}),this.elements.h5DocumentViewElement=y.default.createElement("article",this.instanceId+"TalkcloudH5Document","talkcloud-sdk-whiteboard "+this.instanceId+" h5-document-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,display:"none",zIndex:1}),this.elements.disableClickViewElement=y.default.createElement("div",void 0,"talkcloud-sdk-whiteboard "+this.instanceId+" disable-clock-container",{width:"100%",height:"100%",position:"absolute",left:0,top:0,display:"none",zIndex:4})}},{key:"_connectElements",value:function(){(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&y.default.appendChild(this.elements.documentViewElement,this.elements.dynamicPptViewElement),(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&y.default.appendChild(this.elements.documentViewElement,this.elements.h5DocumentViewElement),y.default.appendChild(this.elements.documentViewElement,this.elements.whiteboardViewElement),y.default.appendChild(this.elements.documentViewElement,this.elements.disableClickViewElement),y.default.appendChild(this.elements.totalDocumentViewElement,this.elements.documentViewElement),y.default.appendChild(this.elements.whiteboardViewRootElement,this.elements.totalDocumentViewElement),y.default.appendChild(this.parentNode,this.elements.whiteboardViewRootElement),this._productionWhiteboard(),this._productionDynamicPpt(),this._productionH5Document()}},{key:"_productionWhiteboard",value:function(){var l=this;Pe.default.hasWhiteboardById(this.instanceId)&&Pe.default.destroyWhiteboardInstance(this.instanceId);var e={whiteboardElementId:this.elements.whiteboardViewElement.getAttribute("id"),id:this.instanceId,handler:{sendSignallingToServer:function(e,t,o,n,i,a,r,s){l.configration.synchronization&&l.configration.isConnectedRoom&&l.pubMsg({name:e,id:t,toID:o,data:n,save:!i,expiresabs:a,associatedMsgID:r,associatedUserID:s})},delSignallingToServer:function(e,t,o,n){l.configration.synchronization&&l.configration.isConnectedRoom&&l.delMsg({name:e,id:t,toID:o,data:n})},resizeWhiteboardSizeCallback:this.resizeWhiteboardSizeCallback.bind(this),noticeUpdateToolDescCallback:this.noticeUpdateToolDescCallback.bind(this),noticeUpdateWhiteboardFiledataCallback:this.noticeUpdateWhiteboardFiledataCallback.bind(this),receiveActionCommandCallback:this.receiveActionCommandCallback.bind(this),whiteboardWatermarkImageOnFailureCallback:this.whiteboardWatermarkImageOnFailureCallback.bind(this),whiteboardWatermarkImageOnloadCallback:this.whiteboardWatermarkImageOnloadCallback.bind(this)},productionOptions:Object.deepAssign({deawPermission:this.configration.canDraw&&this.configration.synchronization&&this.configration.isConnectedRoom,showShapeAuthor:this.configration.showShapeAuthor,myselfId:this.configration.myUserId,nickname:this.configration.myName,synchronizationWhiteboard:this.configration.synchronization&&this.configration.isConnectedRoom,primaryColor:this.configration.primaryColor,secondaryColor:this.configration.secondaryColor,backgroundColor:this.configration.backgroundColor,pencilWidth:this.configration.pencilWidth,shapeWidth:this.configration.shapeWidth,eraserWidth:this.configration.eraserWidth,fontSize:this.configration.fontSize,fontFamily:this.configration.fontFamily,parcelAncestorElementId:this.elements.whiteboardViewRootElement.getAttribute("id"),defaultWhiteboardScale:this.configration.defaultWhiteboardScale,associatedMsgID:this.configration.associatedMsgID,associatedUserID:this.configration.associatedUserID,isOnlyUndoRedoClearMyselfShape:this.configration.isOnlyUndoRedoClearMyselfShape,insertPictureRule:this.configration.insertPictureRule},this.configration.initWhiteboardProductionOptions||{})};Pe.default.productionWhiteboard(e),Pe.default.registerWhiteboardTools(this.instanceId,{tool_pencil:{},tool_highlighter:{},tool_line:{},tool_arrow:{},tool_eraser:{},tool_text:{},tool_rectangle:{},tool_rectangle_empty:{},tool_ellipse:{},tool_ellipse_empty:{},tool_mouse:{},tool_laser:{},action_undo:{},action_redo:{},action_clear:{},zoom_big:{},zoom_small:{}}),Pe.default.clearRedoAndUndoStack(this.instanceId),Pe.default.loadCurrpageWhiteboard(this.instanceId),("default"===this.instanceId||this.configration.hasExtendDocument)&&Pe.default.activeWhiteboardTool("tool_mouse",this.instanceId)}},{key:"_productionDynamicPpt",value:function(){var l=this;if(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument){_.default.hasDynamicPptById(this.instanceId)&&_.default.destroyDynamicPptInstance(this.instanceId);var e={dynamicPptElementId:this.elements.dynamicPptViewElement.getAttribute("id"),id:this.instanceId,handler:{sendSignallingToServer:function(e,t,o,n,i,a,r,s){l.configration.synchronization&&l.configration.isConnectedRoom&&l.pubMsg({name:e,id:t,toID:o,data:n,save:!i,expiresabs:a,associatedMsgID:r,associatedUserID:s})},receiveActionCommandCallback:this.receiveActionCommandCallback.bind(this)},productionOptions:{synchronizationDynamicPpt:this.configration.synchronization&&this.configration.isConnectedRoom,associatedMsgID:this.configration.associatedMsgID,associatedUserID:this.configration.associatedUserID,isShowReloadFileTip:this.configration.isShowReloadFileTip,languageType:this.configration.languageType,againreconnectElementParentNode:this.elements.documentViewElement,dynamicPptActionClick:this.configration.actionClick}};_.default.productionDynamicPpt(e)}}},{key:"_productionH5Document",value:function(){var l=this;if(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument){w.default.hasH5DocumentById(this.instanceId)&&w.default.destroyH5DocumentInstance(this.instanceId);var e={h5DocumentElementId:this.elements.h5DocumentViewElement.getAttribute("id"),id:this.instanceId,handler:{sendSignallingToServer:function(e,t,o,n,i,a,r,s){l.configration.synchronization&&l.configration.isConnectedRoom&&l.pubMsg({name:e,id:t,toID:o,data:n,save:!i,expiresabs:a,associatedMsgID:r,associatedUserID:s})},receiveActionCommandCallback:this.receiveActionCommandCallback.bind(this)},productionOptions:{synchronizationH5Document:this.configration.synchronization&&this.configration.isConnectedRoom,associatedMsgID:this.configration.associatedMsgID,associatedUserID:this.configration.associatedUserID,isShowReloadFileTip:this.configration.isShowReloadFileTip,languageType:this.configration.languageType,h5DocumentActionClick:this.configration.actionClick}};w.default.productionH5Document(e)}}},{key:"_handleShowPageSignalling",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=e.source,n=e.data,i=this.fileid!=n.filedata.fileid;if(this.fileid=n.filedata.fileid,!this.configration.isPlayback)if(t)"ShowPage"===e.name?Ie.default.showPageFromId=this.configration.myUserId:"ExtendShowPage"===e.name&&(Ie.default.extendShowPageFromId=this.configration.myUserId);else{var a=!0;if("ShowPage"===e.name?((i||!e.fromID||Ie.default.showPageFromId!==this.configration.myUserId&&e.fromID===this.configration.myUserId||e.fromID!==this.configration.myUserId)&&(a=!1),Ie.default.showPageFromId=e.fromID):"ExtendShowPage"===e.name&&((i||!e.fromID||Ie.default.extendShowPageFromId!==this.configration.myUserId&&e.fromID===this.configration.myUserId||e.fromID!==this.configration.myUserId)&&(a=!1),Ie.default.extendShowPageFromId=e.fromID),a)return}if(this.fileTypeMark=n.isDynamicPPT?"dynamicPPT":n.isH5Document?"h5Document":"generalDocument",(n.isDynamicPPT||n.isH5Document)&&(n.filedata.pagenum=Pe.default.getWhiteboardFiledata(this.instanceId).pagenum),n.isGeneralFile||!i&&n.isDynamicPPT&&(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.isLoadFinished(this.instanceId)||!i&&n.isH5Document&&(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&w.default.isLoadFinished(this.instanceId)){var r=n.filedata;r.currpage>r.pagenum&&(r.currpage=r.pagenum),r.currpage<1&&(r.currpage=1),n.isDynamicPPT&&(r.pptslide=r.currpage)}if(this._updateViewShowAndHide(),this._viewStateUpdate(),n.isGeneralFile){if("room-pubmsg"===o&&!i&&Number(n.filedata.currpage)===Pe.default.getWhiteboardFiledata(this.instanceId).currpage)return;this._saveFiledataAndLoadCurrpageWhiteboardData(n.filedata),this._generalDocumentFileShowPage(i)}else if(n.isDynamicPPT)Pe.default.setWhiteboardWatermarkImage(this.instanceId,""),this._dynamicPPTFileShowPage(i,e);else if(n.isH5Document){if("room-pubmsg"===o&&!i&&Number(n.filedata.currpage)===Pe.default.getWhiteboardFiledata(this.instanceId).currpage)return;Pe.default.setWhiteboardWatermarkImage(this.instanceId,""),this._saveFiledataAndLoadCurrpageWhiteboardData(n.filedata),this._h5DocumentFileShowPage(i)}}},{key:"_generalDocumentFileShowPage",value:function(e){this.generalDocumentFileForceReloadNumber=0,(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.setDynamicPptIframeSrc(this.instanceId,""),(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&w.default.setH5DocumentIframeSrc(this.instanceId,""),Pe.default.resetDedaultWhiteboardMagnification(this.instanceId);var t=Pe.default.getWhiteboardFiledata(this.instanceId),o=(t.cospdfpath,t.swfpath),n=t.currpage,i=t.pagenum,a=t.filetype,r=t.isContentDocument;if(y.default.removeClass(this.elements.disableClickViewElement,"loading"),"whiteboard"===a)this.scale=this.configration.defaultWhiteboardScale,this._viewStateUpdate(),Pe.default.updateWhiteboardWatermarkImageScale(this.instanceId,this.configration.defaultWhiteboardScale),Pe.default.setWhiteboardWatermarkImage(this.instanceId,"",{resetDedaultWhiteboardMagnification:!1});else{var s=void 0;if(Number(r))o&&(s=o);else{var l=o.lastIndexOf("."),c=o.substring(l),d=o.replace(c,"-"+n+c);s=Ie.default.nowUseDocAddress+d}if(Pe.default.setWhiteboardWatermarkImage(this.instanceId,s,{resetDedaultWhiteboardMagnification:!1}),!Number(r)){var u=1,h=1;e?(this.cacheMaxPageNum=n,this.cacheMinPageNum=n,this.filePreLoadCurrPage=n,this.cacheMaxPageNum+this.filePreLoadStep<=i?this.cacheMaxPageNum+=this.filePreLoadStep:this.cacheMaxPageNum<i&&(this.cacheMaxPageNum+=i-this.cacheMaxPageNum),1<=this.cacheMinPageNum-this.filePreLoadStep?this.cacheMinPageNum-=this.filePreLoadStep:this.cacheMinPageNum=1,h=this.cacheMaxPageNum,u=this.cacheMinPageNum):(this.filePreLoadCurrPage<n?(u=this.cacheMaxPageNum+1,n>this.cacheMaxPageNum&&(this.cacheMaxPageNum=n),this.cacheMaxPageNum+this.filePreLoadStep<=i?this.cacheMaxPageNum+=this.filePreLoadStep:this.cacheMaxPageNum<i&&(this.cacheMaxPageNum+=i-this.cacheMaxPageNum),h=this.cacheMaxPageNum):this.filePreLoadCurrPage>n&&(h=this.cacheMinPageNum-1,n<this.cacheMinPageNum&&(this.cacheMinPageNum=n),1<=this.cacheMinPageNum-this.filePreLoadStep?this.cacheMinPageNum-=this.filePreLoadStep:this.cacheMinPageNum=1,u=this.cacheMinPageNum),this.filePreLoadCurrPage=n);for(var m=u;m<=h;m++)if(m!==n){var f=o.lastIndexOf("."),p=o.substring(f),g=o.replace(p,"-"+m+p),v=Ie.default.nowUseDocAddress+g;Pe.default.preloadWhiteboardImg(v)}}}}},{key:"_dynamicPPTFileShowPage",value:function(e,t){if(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)if((this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&w.default.setH5DocumentIframeSrc(this.instanceId,""),e)Pe.default.updateWhiteboardWatermarkImageScale(this.instanceId,this.configration.defaultWhiteboardScale),this._saveFiledataAndLoadCurrpageWhiteboardData(t.data.filedata),y.default.addClass(this.elements.disableClickViewElement,"loading"),this.forceReloadNumberFromPpt=void 0,this.forceReloadTimestampFromPpt=void 0,this._loadCurrentDynamicPpt();else{var o=t.data.filedata,n=o.currpage,i=o.pptstep;_.default.jumpToAnimation(this.instanceId,n,i)}}},{key:"_h5DocumentFileShowPage",value:function(e){if(this.configration.loadH5DocumentView&&"default"===this.instanceId||this.configration.hasExtendDocument){(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.setDynamicPptIframeSrc(this.instanceId,"");var t=Pe.default.getWhiteboardFiledata(this.instanceId),o=(t.swfpath,t.currpage);e?(Pe.default.updateWhiteboardWatermarkImageScale(this.instanceId,this.configration.defaultWhiteboardScale),y.default.addClass(this.elements.disableClickViewElement,"loading"),this._loadCurrentH5Document()):w.default.jumpToPage(this.instanceId,o)}}},{key:"_saveFiledataAndLoadCurrpageWhiteboardData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Pe.default.saveWhiteboardStackToStorage(this.instanceId),Pe.default.updateWhiteboardFiledata(this.instanceId,e),Pe.default.loadCurrpageWhiteboard(this.instanceId)}},{key:"_updateViewShowAndHide",value:function(){switch(this.fileTypeMark){case"generalDocument":y.default.show(this.elements.whiteboardViewElement),y.default.hide([this.elements.h5DocumentViewElement,this.elements.dynamicPptViewElement]);break;case"h5Document":y.default.show(this.elements.h5DocumentViewElement),y.default.hide(this.elements.dynamicPptViewElement),"tool_mouse"!==Pe.default.getActiveTool(this.instanceId)?y.default.show(this.elements.whiteboardViewElement):y.default.hide(this.elements.whiteboardViewElement);break;case"dynamicPPT":y.default.show(this.elements.dynamicPptViewElement),y.default.hide(this.elements.h5DocumentViewElement),"tool_mouse"!==Pe.default.getActiveTool(this.instanceId)?y.default.show(this.elements.whiteboardViewElement):y.default.hide(this.elements.whiteboardViewElement)}y.default.removeClass(this.elements.documentViewElement,["talkcloud-filetype-generalDocument","talkcloud-filetype-h5Document","talkcloud-filetype-dynamicPPT"]),y.default.addClass(this.elements.documentViewElement,"talkcloud-filetype-"+this.fileTypeMark),this.resizeWhiteboardHandler()}},{key:"_updatedynamicPptVolume",value:function(e){e<0?e=0:100<e&&(e=100),this.dynamicPptVolume=e,(this.configration.loadDynamicPptView&&"default"===this.instanceId||this.configration.hasExtendDocument)&&_.default.postMessage(this.instanceId,{action:"PptVolumeControl",volumeValue:this.dynamicPptVolume/100}),this.whiteBoardManagerInstance.getRoomDelegate().setPptAudioVolume&&this.whiteBoardManagerInstance.getRoomDelegate().setPptAudioVolume(e),this._viewStateUpdate()}},{key:"_viewStateUpdate",value:function(){if(Pe.default.hasWhiteboardById(this.instanceId)){var e={},t=Pe.default.getWhiteboardFiledata(this.instanceId),o=t.currpage,n=t.pagenum,i=t.pptslide,a=t.pptstep,r=t.steptotal,s=t.fileid,l=Pe.default.getRegisterWhiteboardToolsList(this.instanceId),c={nextPage:{disabled:Ie.default.isPlayVideoing&&"default"===this.instanceId||!(this.configration.canPage&&this.configration.isConnectedRoom&&o<n)},prevPage:{disabled:Ie.default.isPlayVideoing&&"default"===this.instanceId||!(this.configration.canPage&&this.configration.isConnectedRoom&&1<o)},skipPage:{disabled:Ie.default.isPlayVideoing&&"default"===this.instanceId||!(this.configration.canPage&&this.configration.isConnectedRoom)},addPage:{disabled:!(!(Ie.default.isPlayVideoing&&"default"===this.instanceId||"generalDocument"!==this.fileTypeMark)&&this.configration.canPage&&this.configration.addPage&&this.configration.isConnectedRoom)||!(n<=o&&0===Number(s))},nextStep:{disabled:!(!(Ie.default.isPlayVideoing&&"default"===this.instanceId||"dynamicPPT"!==this.fileTypeMark)&&this.configration.canPage&&this.configration.isConnectedRoom)||n<=i&&r-1<=a},prevStep:{disabled:!(!(Ie.default.isPlayVideoing&&"default"===this.instanceId||"dynamicPPT"!==this.fileTypeMark)&&this.configration.canPage&&this.configration.isConnectedRoom)||i<=1&&a<=0},currentPage:o<1?1:o,totalPage:n<1?1:n},d=!0,u=!1,h=void 0;try{for(var m,f=Object.entries(l)[Symbol.iterator]();!(d=(m=f.next()).done);d=!0){var p=m.value,g=Se(p,2),v=g[0],y=g[1];if(/tool_/g.test(v)){if(this.whiteboardViewState.tool[v]!==y)if("object"!==(void 0===y?"undefined":ke(y))||Array.isArray(y))e.tool=e.tool||{},e.tool[v]=y;else{var b=!0,_=!1,w=void 0;try{for(var k,S=Object.entries(y)[Symbol.iterator]();!(b=(k=S.next()).done);b=!0){var I=k.value,P=Se(I,2),x=P[0],C=P[1];this.whiteboardViewState.tool[v]=this.whiteboardViewState.tool[v]||{},C!==this.whiteboardViewState.tool[v][x]&&(e.tool=e.tool||{},e.tool[v]=e.tool[v]||{},e.tool[v][x]=C)}}catch(e){_=!0,w=e}finally{try{!b&&S.return&&S.return()}finally{if(_)throw w}}}}else if(/action_/g.test(v)){if(this.whiteboardViewState.action[v]!==y)if("object"!==(void 0===y?"undefined":ke(y))||Array.isArray(y))e.action=e.action||{},e.action[v]=y;else{var T=!0,D=!1,E=void 0;try{for(var L,A=Object.entries(y)[Symbol.iterator]();!(T=(L=A.next()).done);T=!0){var M=L.value,R=Se(M,2),W=R[0],j=R[1];this.whiteboardViewState.action[v]=this.whiteboardViewState.action[v]||{},j!==this.whiteboardViewState.action[v][W]&&(e.action=e.action||{},e.action[v]=e.action[v]||{},e.action[v][W]=j)}}catch(e){D=!0,E=e}finally{try{!T&&A.return&&A.return()}finally{if(D)throw E}}}}else if(/zoom_/g.test(v)&&this.whiteboardViewState.zoom[v]!==y)if("object"!==(void 0===y?"undefined":ke(y))||Array.isArray(y))e.zoom=e.zoom||{},e.zoom[v]=y;else{var N=!0,O=!1,V=void 0;try{for(var F,B=Object.entries(y)[Symbol.iterator]();!(N=(F=B.next()).done);N=!0){var z=F.value,U=Se(z,2),H=U[0],J=U[1];this.whiteboardViewState.zoom[v]=this.whiteboardViewState.zoom[v]||{},J!==this.whiteboardViewState.zoom[v][H]&&(e.zoom=e.zoom||{},e.zoom[v]=e.zoom[v]||{},e.zoom[v][H]=J)}}catch(e){O=!0,V=e}finally{try{!N&&B.return&&B.return()}finally{if(O)throw V}}}}}catch(e){u=!0,h=e}finally{try{!d&&f.return&&f.return()}finally{if(u)throw h}}var K=!0,q=!1,G=void 0;try{for(var Y,X=Object.entries(c)[Symbol.iterator]();!(K=(Y=X.next()).done);K=!0){var Z=Y.value,$=Se(Z,2),Q=$[0],ee=$[1];if(this.whiteboardViewState.page[Q]=this.whiteboardViewState.page[Q]||{},"object"===(void 0===ee?"undefined":ke(ee))){var te=!0,oe=!1,ne=void 0;try{for(var ie,ae=Object.entries(ee)[Symbol.iterator]();!(te=(ie=ae.next()).done);te=!0){var re=ie.value,se=Se(re,2),le=se[0],ce=se[1];this.whiteboardViewState.page[Q][le]!==ce&&(e.page=e.page||{},e.page[Q]=e.page[Q]||{},e.page[Q][le]=ce)}}catch(e){oe=!0,ne=e}finally{try{!te&&ae.return&&ae.return()}finally{if(oe)throw ne}}}else this.whiteboardViewState.page[Q]!==ee&&(e.page=e.page||{},e.page[Q]=ee)}}catch(e){q=!0,G=e}finally{try{!K&&X.return&&X.return()}finally{if(q)throw G}}this.fileTypeMark!==this.whiteboardViewState.documentType&&(e.documentType=this.fileTypeMark),this.fileid!=this.whiteboardViewState.fileid&&(e.fileid=this.fileid),this.dynamicPptVolume!==this.whiteboardViewState.dynamicPptVolume&&(e.dynamicPptVolume=this.dynamicPptVolume),this.fullScreen!==this.whiteboardViewState.fullScreen&&(e.fullScreen=this.fullScreen),this.remark!==this.whiteboardViewState.remark&&(e.remark=this.remark),this.scale!==this.whiteboardViewState.scale&&(e.scale=this.scale),e.loadFail=this.loadDocumentFail,e.loadSuccess=this.loadComplete;var de=Ie.default.allDocumentRemarkInfoMap.get("documentRemark_"+this.fileid);this.remarkText=0!=this.fileid&&de&&de[this.fileid+"_"+c.currentPage]?de[s+"_"+c.currentPage]:"",this.remarkText!==this.whiteboardViewState.remarkText&&(e.remarkText=this.remarkText);var ue=Pe.default.getWhiteboardToolsInfo(this.instanceId);if(ue&&"object"===(void 0===ue?"undefined":ke(ue))){var he=!0,me=!1,fe=void 0;try{for(var pe,ge=Object.entries(ue)[Symbol.iterator]();!(he=(pe=ge.next()).done);he=!0){var ve=pe.value,ye=Se(ve,2),be=ye[0],_e=ye[1];void 0!==this.whiteboardViewState.other[be]&&this.whiteboardViewState.other[be]!==_e&&(e.other=e.other||{},e.other[be]=_e)}}catch(e){me=!0,fe=e}finally{try{!he&&ge.return&&ge.return()}finally{if(me)throw fe}}}if(Object.keys(e).length&&(void 0!==e.tool&&this._updateViewShowAndHide(),Object.deepAssign(this.whiteboardViewState,e),Object.keys(this.whiteboardViewState.tool).length&&Object.keys(this.whiteboardViewState.action).length&&Object.keys(this.whiteboardViewState.zoom).length&&Object.keys(this.whiteboardViewState.page).length)){var we={viewState:this.whiteboardViewState,updateViewState:e};this.sendActionCommand("viewStateUpdate",we)}}}},{key:"_sendSignalling_ShowPage",value:function(e,t){if("default"===this.instanceId||this.configration.hasExtendDocument){var o=Pe.default.getWhiteboardFiledata(this.instanceId),n={name:"default"===this.instanceId?"ShowPage":"ExtendShowPage",id:"default"===this.instanceId?"DocumentFilePage_ShowPage":"DocumentFilePage_ExtendShowPage_"+this.instanceId,toID:"__all",data:{sourceInstanceId:this.instanceId,isGeneralFile:"generalDocument"===this.fileTypeMark,isMedia:!1,isDynamicPPT:"dynamicPPT"===this.fileTypeMark,isH5Document:"h5Document"===this.fileTypeMark,action:"",mediaType:"",filedata:o},save:!0};e&&Object.deepAssign(n,e),this.configration.synchronization&&this.configration.isConnectedRoom&&this.pubMsg(n),t&&"function"==typeof t&&t(n)}}},{key:"_loadCurrentDynamicPpt",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("dynamicPPT"===this.fileTypeMark){var o=Pe.default.getWhiteboardFiledata(this.instanceId),n=o.fileid,i=o.swfpath,a=o.isContentDocument,r=Number(a)?i:Ie.default.nowUseDocAddress+i+"/newppt.html",s={versions:v.default.dynamicPptVersions,fileid:n,playback:this.configration.isPlayback,classbegin:!0,publishDynamicPptMediaPermission_video:this.configration.synchronization&&this.configration.isConnectedRoom,remoteNewpptUpdateTime:v.default.remoteDynamicPptUpdateTime,role:this.configration.myRole,dynamicPptActionClick:this.configration.actionClick&&this.configration.isConnectedRoom,newpptPagingPage:this.configration.canPage&&this.configration.isConnectedRoom,dynamicPptDebug:v.default.dynamicPptDebugLog,PptVolumeValue:this.dynamicPptVolume/100,deviceType:"phone"===this.configration.deviceType?0:void 0,isBackEvent:this.configration.isBackEvent,isClientPlayAudio:this.configration.isNativePlayAudio};if(void 0!==this.forceReloadTimestampFromPpt&&(s.forceReloadTimestamp=this.forceReloadTimestampFromPpt),void 0!==this.forceReloadNumberFromPpt&&(s.forceReloadNumber=this.forceReloadNumberFromPpt,t.forceReloadNumber=this.forceReloadNumberFromPpt),e&&b.default.isJson(e)){var l=!0,c=!1,d=void 0;try{for(var u,h=Object.entries(e)[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var m=u.value,f=Se(m,2),p=f[0],g=f[1];s[p]=g}}catch(e){c=!0,d=e}finally{try{!l&&h.return&&h.return()}finally{if(c)throw d}}}t.playback=this.configration.isPlayback,_.default.setDynamicPptIframeSrc(this.instanceId,r,s,o,t)}}},{key:"_loadCurrentH5Document",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("h5Document"===this.fileTypeMark){var o=Pe.default.getWhiteboardFiledata(this.instanceId),n=o.swfpath,i=o.isContentDocument,a=void 0;L.Logger.info("Document swfpath：",n,"isContentDocument:",i),Number(i)?n&&(a=n):a=Ie.default.nowUseDocAddress+n;var r=this.configration.sendH5DocumentRoomInfo;if(r.role=this.configration.myRole,e&&b.default.isJson(e)){var s=!0,l=!1,c=void 0;try{for(var d,u=Object.entries(e)[Symbol.iterator]();!(s=(d=u.next()).done);s=!0){var h=d.value,m=Se(h,2),f=m[0],p=m[1];r[f]=p}}catch(e){l=!0,c=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw c}}}w.default.setH5DocumentIframeSrc(this.instanceId,a,r,o,t)}}}]),a}();o.default=a},{"../../intermediateLayer/DynamicPptIntermediateLayer":333,"../../intermediateLayer/H5DocumentPptIntermediateLayer":334,"../../intermediateLayer/WhiteboardIntermediateLayer":335,"../../utils/Configuration":336,"../../utils/Constant":337,"../../utils/DomUtils":338,"../../utils/Global":339,"../../utils/Utils":343}]},{},[344]);