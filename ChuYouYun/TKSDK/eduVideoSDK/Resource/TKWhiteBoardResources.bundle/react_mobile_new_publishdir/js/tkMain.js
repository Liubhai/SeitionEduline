webpackJsonp([1],{0:function(e,t,n){e.exports=n("6G9P")},"0jvK":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("pFYg"),r=o(a),i=n("Zrlr"),l=o(i),s=n("wxAW"),d=o(s),u=n("T+56"),c=o(u),f=function(){function e(){(0,l.default)(this,e),this.permissionsJson=this.productionDefaultAppAppPermissions()}return(0,d.default)(e,[{key:"productionDefaultAppAppPermissions",value:function(){return{canDraw:!1,pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,isShowCoursewareRemarks:!1,sendSignallingFromRemoteControl:!1,sendSignallingFromUpdateTime:!1}}},{key:"resetDefaultAppPermissions",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this;t.permissionsJson=t.productionDefaultAppAppPermissions(),e&&c.default.CoreController.dispatchEvent({type:"initAppPermissions",message:{data:t.permissionsJson}})}},{key:"resetAppPermissions",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this;e&&"object"===(void 0===e?"undefined":(0,r.default)(e))&&(Object.customAssign(n.permissionsJson,e),t&&c.default.CoreController.dispatchEvent({type:"resetAppPermissions",message:{data:n.permissionsJson}}))}},{key:"setAppPermissions",value:function(e,t){var n=this;if(n.permissionsJson[e]!==t){L.Logger.debug("setAppPermissions key and value:",e,t,"old appPermissions:",n.permissionsJson[e]),n.permissionsJson[e]=t;var o={type:"updateAppPermissions_"+e,message:{key:e,value:t}};c.default.CoreController.dispatchEvent(o)}}},{key:"getAppPermissions",value:function(e){return this.permissionsJson[e]}},{key:"initAppPermissions",value:function(e){L.Logger.debug("initAppPermissions data:",e);var t=this;for(var n in e)t.permissionsJson[n]=e[n];c.default.CoreController.dispatchEvent({type:"initAppPermissions",message:{data:t.permissionsJson}})}}]),e}(),m=new f;t.default=m},"0lA4":function(e,t){},"2vo4":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={preLoad:{text:"課件加載中",pass:"跳過"}};t.default=o},"4yR4":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("fZjL"),r=o(a),i=n("pFYg"),l=o(i),s=n("Zx67"),d=o(s),u=n("Zrlr"),c=o(u),f=n("wxAW"),m=o(f),g=n("zwoO"),p=o(g),v=n("Pf15"),h=o(v),b=n("GiK3"),y=o(b),w=n("O27J"),T=(o(w),n("T+56")),k=o(T),S=n("VSuD"),E=o(S),P=n("yE5a"),C=o(P),R=n("HUPQ"),_=o(R),I=function(e){function t(){(0,c.default)(this,t);var e=(0,p.default)(this,(t.__proto__||(0,d.default)(t)).call(this));return e.listernerBackupid=(new Date).getTime()+"_"+Math.random(),e.state={passPreload:!1,preloadWidth:"0%",preLoadBegin:!1,iframeSrc:void 0},e}return(0,h.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){var e=this;k.default.Window.addEventListener(E.default.EVENTTYPE.WindowEvent.onMessage,e.BeginLoading.bind(e),e.listernerBackupid),k.default.CoreController.addEventListener(E.default.EVENTTYPE.RoomEvent.roomReceiveActionCommand,e.receiveActionCommand.bind(e),e.listernerBackupid)}},{key:"receiveActionCommand",value:function(e){var t=e.message,n=t.cmd;if("preLoadingFile"===t.action){var o=n.cmd;if(o&&"string"==typeof o)try{o=JSON.parse(o)}catch(e){L.Logger.error("preLoadingFile error info:",e)}if(E.default.joinRoomInfo.preLoading&&o&&"object"===(void 0===o?"undefined":(0,l.default)(o))&&(0,r.default)(o).length&&o.downloadpath&&!o.isGeneralFile)try{this.setState({preLoadBegin:!0,iframeSrc:void 0,preloadWidth:"0%"}),this.handlerPreLoadBegin(o)}catch(e){L.Logger.error("preLoadingFile error info:",e)}else C.default.getTkRoom().sendActionCommand("preloadingFished",{})}_.default.playback&&C.default.getTkRoom().sendActionCommand("preloadingFished",{})}},{key:"handlerPreLoadBegin",value:function(e){var t=this;this.timer=setTimeout(function(){t.setState({passPreload:!0})},3e4),e&&"object"===(void 0===e?"undefined":(0,l.default)(e))&&e.downloadpath?t.setState({iframeSrc:window.WBGlobal.nowUseDocAddress+"/Public/html/preload.html?fileUrl="+e.downloadpath+"&fileid="+e.fileid}):(C.default.getTkRoom().sendActionCommand("preloadingFished",{}),this.setState({preLoadBegin:!1}))}},{key:"BeginLoading",value:function(e){if(e&&e.message&&e.message.event){var t=e.message.event,n=void 0;try{n=JSON.parse(t.data)}catch(e){return void L.Logger.warning("preload dynamic ppt receive iframe message data can't be converted to JSON , iframe data:",t.data)}n&&"tk_dynamicPPT_preload"===n.source&&(n.data&&n.data.progress&&this.setState({preloadWidth:Math.floor(100*n.data.progress)+"%"}),n.data&&n.data.progress>=1&&(clearTimeout(this.timer),C.default.getTkRoom().sendActionCommand("preloadingFished",{}),this.setState({preLoadBegin:!1})))}}},{key:"passPreload",value:function(){clearTimeout(this.timer),C.default.getTkRoom().sendActionCommand("preloadingFished",{}),this.setState({passPreload:!1,preLoadBegin:!1})}},{key:"PreLoadingBoxOnTouchEnd",value:function(){var e=null;document.body.addEventListener("touchend",function(t){var n=(new Date).getTime();e=e||n+1;var o=n-e;if(o<500&&o>0)return t.preventDefault(),!1;e=n},!1)}},{key:"render",value:function(){var e=this;return y.default.createElement("div",{id:"PreLoading_box",className:"PreLoading_box",style:{display:this.state.preLoadBegin?"block":"none"},onTouchEnd:e.PreLoadingBoxOnTouchEnd.bind(e)},y.default.createElement("div",{className:"bg"}),y.default.createElement("div",{className:"container"},y.default.createElement("div",{className:"PreLoad"},y.default.createElement("div",{className:"PreLoading",style:{width:this.state.preloadWidth}})),y.default.createElement("span",{className:"skip",onClick:e.passPreload.bind(e),style:{display:e.state.passPreload?"":"none"}},_.default.language.languageData.preLoad.pass)),y.default.createElement("div",{className:"load"},_.default.language.languageData.preLoad.text,"(",this.state.preloadWidth,")"),y.default.createElement("iframe",{id:"preload_iframe",src:e.state.iframeSrc,allow:"autoplay",frameBorder:"0"}))}}]),t}(y.default.Component);t.default=I},"5PlU":function(e,t,n){var o=n("RY/4"),a=n("dSzd")("iterator"),r=n("/bQp");e.exports=n("FeBl").isIterable=function(e){var t=Object(e);return void 0!==t[a]||"@@iterator"in t||r.hasOwnProperty(o(t))}},"6G9P":function(e,t,n){"use strict";n("0lA4"),n("XkXc"),n("WN3Y"),n("gDty"),n("buLY"),n("PqAP");var o=n("nst9");(0,function(e){return e&&e.__esModule?e:{default:e}}(o).default)()},BO1k:function(e,t,n){e.exports={default:n("fxRn"),__esModule:!0}},CJli:function(e,t,n){n("pRCB");var o=n("FeBl").Object;e.exports=function(e,t){return o.defineProperties(e,t)}},Cdx3:function(e,t,n){var o=n("sB3e"),a=n("lktj");n("uqUo")("keys",function(){return function(e){return a(o(e))}})},DrPG:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("gRE1"),r=o(a),i=n("W3Iv"),l=o(i),s=n("BO1k"),d=o(s),u=n("d7EF"),c=o(u),f=n("fZjL"),m=o(f),g=n("pFYg"),p=o(g),v={tool:{launchFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},exitFullscreen:function(){document.exitFullScreen?document.exitFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():element.msExitFullscreen&&element.msExitFullscreen()},isFullScreenStatus:function(e){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen||!1},getFullscreenElement:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement},isFullscreenEnabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled},runPrefixMethod:function(e,t){var n=void 0;return["webkit","moz","ms","o",""].forEach(function(o){if(!n){""===o&&(t=t.slice(0,1).toLowerCase()+t.slice(1));var a=(0,p.default)(e[o+t]);a+""!="undefined"&&(n="function"===a?e[o+t]():e[o+t])}}),n},addFullscreenchange:function(e){v.tool.addEvent(document,"fullscreenchange",e,!1),v.tool.addEvent(document,"webkitfullscreenchange",e,!1),v.tool.addEvent(document,"mozfullscreenchange",e,!1),v.tool.addEvent(document,"MSFullscreenChange",e,!1),v.tool.addEvent(document,"msfullscreenchange",e,!1),v.tool.addEvent(document,"fullscreeneventchange",e,!1)},removeFullscreenchange:function(e){v.tool.removeEvent(document,"fullscreenchange",e,!1),v.tool.removeEvent(document,"webkitfullscreenchange",e,!1),v.tool.removeEvent(document,"mozfullscreenchange",e,!1),v.tool.removeEvent(document,"MSFullscreenChange",e,!1),v.tool.removeEvent(document,"msfullscreenchange",e,!1),v.tool.removeEvent(document,"fullscreeneventchange",e,!1)},addFullscreenerror:function(e){v.tool.addEvent(document,"fullscreenerror",e,!1),v.tool.addEvent(document,"webkitfullscreenerror",e,!1),v.tool.addEvent(document,"mozfullscreenerror",e,!1),v.tool.addEvent(document,"MSFullscreenError",e,!1),v.tool.addEvent(document,"msfullscreenerror",e,!1),v.tool.addEvent(document,"fullscreenerroreventchange",e,!1)},removeFullscreenerror:function(e){v.tool.removeEvent(document,"fullscreenerror",e,!1),v.tool.removeEvent(document,"webkitfullscreenerror",e,!1),v.tool.removeEvent(document,"mozfullscreenerror",e,!1),v.tool.removeEvent(document,"MSFullscreenError",e,!1),v.tool.removeEvent(document,"msfullscreenerror",e,!1),v.tool.removeEvent(document,"fullscreenerroreventchange",e,!1)},addEvent:function(e,t,n,o){o=void 0!=o&&null!=o&&o,e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},removeEvent:function(e,t,n,o){e.addEventListener?e.removeEventListener(t,n,o):e.attachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},fireEvent:function(e,t){if(document.createEventObject){var n=document.createEventObject();return e.fireEvent("on"+t,n)}var o=document.createEvent("HTMLEvents");return o.initEvent(t,!0,!0),!e.dispatchEvent(o)}},getGUID:function(){function e(){this.date=new Date,"function"!=typeof this.newGUID&&(e.prototype.newGUID=function(){this.date=new Date;for(var e="",t=this.hexadecimal(this.getGUIDDate(),16),n=this.hexadecimal(this.getGUIDTime(),16),o=0;o<9;o++)e+=Math.floor(16*Math.random()).toString(16);for(e+=t,e+=n;e.length<32;)e+=Math.floor(16*Math.random()).toString(16);return this.formatGUID(e)},e.prototype.getGUIDDate=function(){return this.date.getFullYear()+this.addZero(this.date.getMonth()+1)+this.addZero(this.date.getDay())},e.prototype.getGUIDTime=function(){return this.addZero(this.date.getHours())+this.addZero(this.date.getMinutes())+this.addZero(this.date.getSeconds())+this.addZero(parseInt(this.date.getMilliseconds()/10))},e.prototype.addZero=function(e){return"NaN"!=Number(e).toString()&&e>=0&&e<10?"0"+Math.floor(e):e.toString()},e.prototype.hexadecimal=function(e,t,n){return void 0!=n?parseInt(e.toString(),n).toString(t):parseInt(e.toString()).toString(t)},e.prototype.formatGUID=function(e){return e.slice(0,8)+"-"+e.slice(8,12)+"-"+e.slice(12,16)+"-"+e.slice(16,20)+"-"+e.slice(20)})}return new e},getNewGUID:function(){v.guidObj||(v.guidObj=new v.getGUID);var e=v.guidObj.newGUID();return v.guidObj=null,e},getBrowserInfo:function(){var e=window.navigator.userAgent,t=/(msie\s|trident.*rv:)([\w.]+)/,n=/(firefox)\/([\w.]+)/,o=/(opera).+version\/([\w.]+)/,a=/(chrome)\/([\w.]+)/,r=/version\/([\w.]+).*(safari)/,i=function(e){var i=t.exec(e);return null!=i?{browser:"IE",version:i[2]||"0"}:null!=(i=n.exec(e))?{browser:i[1]||"",version:i[2]||"0"}:null!=(i=o.exec(e))?{browser:i[1]||"",version:i[2]||"0"}:null!=(i=a.exec(e))?{browser:i[1]||"",version:i[2]||"0"}:(i=r.exec(e),null!=i?{browser:i[2]||"",version:i[1]||"0"}:null!=i?{browser:"",version:"0"}:{browser:"unknown",version:"unknown"})}(e.toLowerCase());return{versions:function(){var e=navigator.userAgent;return navigator.appVersion,{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase(),info:{browserName:i.browser,browserVersion:i.version,appCodeName:navigator.appCodeName,appMinorVersion:navigator.appMinorVersion,appName:navigator.appName,appVersion:navigator.appVersion,browserLanguage:navigator.browserLanguage,cookieEnabled:navigator.cookieEnabled,cpuClass:navigator.cpuClass,onLine:navigator.onLine,platform:navigator.platform,systemLanguage:navigator.systemLanguage,userAgent:navigator.userAgent,userLanguage:navigator.userLanguage}}},isEmpty:function(e){return 0===(0,m.default)(e).length},getUrlParams:function(e,t){var n=window.location.href;window.TkConstant&&(n=v.decrypt(window.TkConstant.SERVICEINFO.joinUrl)||window.location.href),n=t||n;var o=decodeURIComponent(n),a=o.indexOf("?"),r=o.substring(a+1),i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),l=r.match(i);return null!=l?l[2]:""},replaceFirstUper:function(e){if(e.length>0)return e.substring(0,1).toUpperCase()+e.substring(1)},isArray:function(e){return Array&&Array.isArray&&"function"==typeof Array.isArray?Array.isArray(e):e&&"object"===(void 0===e?"undefined":(0,p.default)(e))&&"number"==typeof e.length&&"function"==typeof e.splice&&!e.propertyIsEnumerable("length")},filterContainDataAttribute:function(e){var t=v;if(e&&!t.isArray(e)&&"object"===(void 0===e?"undefined":(0,p.default)(e))){var n={},o=!0,a=!1,r=void 0;try{for(var i,s=(0,d.default)((0,l.default)(e));!(o=(i=s.next()).done);o=!0){var u=i.value,f=(0,c.default)(u,2),m=f[0],g=f[1];/^tkcustomdata/g.test(m)&&(n[m]=g)}}catch(e){a=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw r}}return n}return e},getFiletyeByFilesuffix:function(e){return"jpg"==e||"jpeg"==e||"png"==e||"gif"==e||"ico"==e||"bmp"==e?"jpg":"doc"==e||"docx"==e||"rtf"==e?"doc":"pdf"==e?"pdf":"ppt"==e||"pptx"==e||"pps"==e?"ppt":"txt"==e?"txt":"xls"==e||"xlsx"==e?"xlsx":"mp4"==e||"webm"==e?"mp4":"mp3"==e||"wav"==e?"mp3":"zip"==e?"h5":"whiteboard"===e?"whiteboard":"other"},isFunction:function(e){return e&&"function"==typeof e},getCustomUserPropertyByUser:function(e){return{disableaudio:e.disableaudio,disablevideo:e.disablevideo,giftnumber:e.giftnumber,hasaudio:e.hasaudio,hasvideo:e.hasvideo,publishstate:e.publishstate,raisehand:e.raisehand}},getTimeDifferenceToFormat:function(e,t){var n=t-e;if(n>=0){var o=Math.floor(n/864e5),a=n%864e5,r=Math.floor(a/36e5),i=a%36e5,l=Math.floor(i/6e4),s=i%6e4,d=Math.round(s/1e3),u=r+24*o,c={};return d>=60&&(d=0,l+=1),l>=60&&(l=0,u+=1),c.hh=u>9?u:"0"+u,c.mm=l>9?l:"0"+l,c.ss=d>9?d:"0"+d,c}return void L.Logger.error("Start time is greater than end time [start:"+e+"  , end:"+t+"]!")},isMillisecondClass:function(e){if("number"!=typeof e)return void L.Logger.error("time must is number!");e=String(e);var t=e.length;return 13===t||10!==t&&void L.Logger.warning("The incoming time is incorrect and cannot be judged to be second or second!")},encrypt:function(e,t){if(!e)return e;if(window.TkConstant){if(window.TkConstant.DEV)return e}else{var n=!1;try{n=!1}catch(e){L.Logger.warning("There is no configuration dev mark[__DEV__]!")}if(n||v.getUrlParams("debug"))return e}return L.Utils.encrypt(e,t)},decrypt:function(e,t){if(!e)return e;if(window.TkConstant){if(window.TkConstant.DEV)return e}else if(v.getUrlParams("debug"))return e;return L.Utils.decrypt(e,t)},detectOS:function(){var e=navigator.userAgent,t="Win32"===navigator.platform||"Windows"===navigator.platform,n="Mac68K"===navigator.platform||"MacPPC"===navigator.platform||"Macintosh"===navigator.platform||"MacIntel"===navigator.platform;if(n)return"Mac";if("X11"===navigator.platform&&!t&&!n)return"Unix";if(String(navigator.platform).indexOf("Linux")>-1)return"Linux";if(t){if(e.indexOf("Windows NT 5.0")>-1||e.indexOf("Windows 2000")>-1)return"Win2000";if(e.indexOf("Windows NT 5.1")>-1||e.indexOf("Windows XP")>-1)return"WinXP";if(e.indexOf("Windows NT 5.2")>-1||e.indexOf("Windows 2003")>-1)return"Win2003";if(e.indexOf("Windows NT 6.0")>-1||e.indexOf("Windows Vista")>-1)return"WinVista";if(e.indexOf("Windows NT 6.1")>-1||e.indexOf("Windows 7")>-1)return"Win7";if(e.indexOf("Windows NT 6.2")>-1||e.indexOf("Windows 8")>-1)return"Win8";if(e.indexOf("Windows NT 10.0")>-1||e.indexOf("Windows 10")>-1)return"Win10"}return"Other"},percentageChangeToRem:function(e,t,n){var o=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,a=document.getElementById(n);if(a){var r=a.offsetWidth,i=a.offsetHeight,l=void 0,s=void 0;if("pc"===TK.SDKTYPE){var d=document.getElementById("lc-full-vessel");l=d.clientWidth,s=d.clientHeight}else l=window.GLOBAL.windowInnerWidth,s=window.GLOBAL.windowInnerHeight;var u=e*(l-r)/o,c=t*(s-i)/o;return u=u&&u!==1/0&&!isNaN(u)&&u>0?u:0,c=c&&c!==1/0&&!isNaN(c)&&c>0?c:0,{left:u,top:c}}return{left:0,top:0}},RemChangeToPercentage:function(e,t,n){var o=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,a=document.getElementById(n);if(a){var r=a.offsetWidth,i=a.offsetHeight,l=void 0,s=void 0;if("pc"===TK.SDKTYPE){var d=document.getElementById("lc-full-vessel");l=d.clientWidth,s=d.clientHeight}else l=window.GLOBAL.windowInnerWidth,s=window.GLOBAL.windowInnerHeight;var u=e*o/(l-r),c=t*o/(s-i);return u=u&&u!==1/0&&!isNaN(u)&&u>0?u:0,c=c&&c!==1/0&&!isNaN(c)&&c>0?c:0,{percentLeft:u,percentTop:c}}return{percentLeft:0,percentTop:0}},controlDragBounds:function(e,t,n){var o=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,a=document.getElementById(t),r=a.offsetWidth/o,i=a.offsetHeight/o,l=document.getElementById(n),s=l.clientWidth/o,d=l.clientHeight/o;return e.state[t].left=e.state[t].left<0?e.state[t].left=0:e.state[t].left,e.state[t].left=e.state[t].left>s-r?s-r:e.state[t].left,e.state[t].top=e.state[t].top<0?e.state[t].top=0:e.state[t].top,e.state[t].top=e.state[t].top>d-i?d-i:e.state[t].top,e.state[t]},replaceRemToNumber:function(e){return e&&"string"==typeof e&&(e=Number(e.replace(/rem/g,""))),e},replaceCalc:function(e){return e&&"string"==typeof e&&(e=e.replace(/(^\s*)|(\s*$)/g,""),e=e.replace(/(^calc\s*\(|\)$)/g,"")),e},limitEleReSize:function(e,t,n){var o=window.GLOBAL.windowInnerWidth/TkConstant.STANDARDSIZE,a=window.GLOBAL.windowInnerWidth/o,r=window.GLOBAL.windowInnerHeight/o;if("pc"===TK.SDKTYPE){var i=document.getElementById("lc-full-vessel");a=i.clientWidth/o,r=i.clientHeight/o}return(e>a||t>r)&&(n>a/r?(e=a,t=a/n):(t=r,e=r*n)),{width:e,height:t}},getStyle:function(e,t){return e?window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t]:0},getSpecifyRoleList:function(e,t){if(void 0===e||void 0===t)return{};var n={},o=!0,a=!1,i=void 0;try{for(var l,s=(0,d.default)((0,r.default)(t));!(o=(l=s.next()).done);o=!0){var u=l.value;n[u.role]||(n[u.role]={}),n[u.role][u.id]=u}}catch(e){a=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw i}}return n[e]||{}}};t.default=v},GrKX:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("pFYg"),r=o(a),i=n("W3Iv"),l=o(i),s=n("BO1k"),d=o(s),u=n("d7EF"),c=o(u),f=n("mvHQ"),m=o(f),g=n("Zrlr"),p=o(g),v=n("wxAW"),h=o(v),b=n("T+56"),y=o(b),w=n("VSuD"),T=o(w),k=n("DrPG"),S=o(k),E=n("Wi6Q"),P=o(E),C=n("HUPQ"),R=o(C),_=n("yE5a"),I=o(_),M=n("0jvK"),A=o(M),O=n("YRCL"),D=o(O),B=function(){function e(t){(0,p.default)(this,e),this.room=t}return(0,h.default)(e,[{key:"registerEventToRoom",value:function(){var e=this;for(var t in T.default.EVENTTYPE.RoomEvent)!function(t){I.default.getTkRoom().addEventListener(T.default.EVENTTYPE.RoomEvent[t],function(n){if(!e["handler"+S.default.replaceFirstUper(t)]||"function"!=typeof e["handler"+S.default.replaceFirstUper(t)]||!e["handler"+S.default.replaceFirstUper(t)](n)){var o=!0;("stream-rtcStats"===n.type||"room-pubmsg"===n.type&&"sendNetworkState"===n.message.name)&&(o=!1),o&&L.Logger.debug(T.default.EVENTTYPE.RoomEvent[t]+" event:",n),y.default.CoreController.dispatchEvent(n,o)}})}(t)}},{key:"handlerRoomPubmsg",value:function(e){var t=this;e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var n=e.message;if(R.default.signallingMessageList&&R.default.signallingMessageList.length>0&&"UpdateTime"!==n.name&&"LowConsume"!==n.name&&"StreamFailure"!==n.name)return R.default.signallingMessageList.push(n),!0;switch(R.default.serviceTime||(R.default.serviceTime=1e3*n.ts,R.default.remindServiceTime=1e3*n.ts),n.name){case"ClassBegin":R.default.serviceTime=S.default.isMillisecondClass(n.ts)?n.ts:1e3*n.ts,R.default.remindServiceTime=S.default.isMillisecondClass(n.ts)?n.ts:1e3*n.ts,t._classBeginStartHandler(n);break;case"UpdateTime":R.default.serviceTime=1e3*n.ts,R.default.remindServiceTime=1e3*n.ts,R.default.firstGetServiceTime||R.default.isHandleMsglistFromRoomPubmsg||!R.default.signallingMessageList||(R.default.firstGetServiceTime=!0,R.default.classBegin||this._msglistOnConnected(R.default.signallingMessageList,"roomConnected"),this._msglistOnConnected(R.default.signallingMessageList,"roomPubmsg"),R.default.signallingMessageList=null,delete R.default.signallingMessageList);break;case"RemoteControl":switch(n.data.action){case"nowSomeoneCdnIp":D.default.sendSignallingFromRemoteControl(n.fromID,{action:"callCdnIp",serverInfo:{serverKey:window.WBGlobal.docAddressKey}});break;case"changeCdnIp":var o=n.data.key;window.WBGlobal.docAddressKey!==o&&I.default.getTkWhiteBoardManager().switchDocAddress(o,!0)}break;case"StreamFailure":L.Logger.info("StreamFailure signalling:"+(0,m.default)(n))}return"sendNetworkState"===n.name||"BlackBoardDrag"===n.name||"videoDraghandle"===n.name||void 0}},{key:"handlerRoomDelmsg",value:function(e){var t=this;e.message&&"string"==typeof e.message&&(e.message=JSON.parse(e.message)),e.message.data&&"string"==typeof e.message.data&&(e.message.data=JSON.parse(e.message.data));var n=e.message;if(R.default.signallingMessageList&&R.default.signallingMessageList.length>0){for(var o=R.default.signallingMessageList.length-1;o>=0;o--)R.default.signallingMessageList[o].id!==n.id&&R.default.signallingMessageList[o].associatedMsgID!==n.id||R.default.signallingMessageList.splice(o,1);return!0}switch(n.name){case"ClassBegin":t._classBeginEndHandler(n)}}},{key:"handlerRoomConnected",value:function(e){this._compareDocServerSpeedSwitchCND(),I.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({languageType:"chinese"===R.default.language.name?"ch":"complex"===R.default.language.name?"tw":"en",mediaShareToID:I.default.getTkRoom().getMySelf().id,clientMediaShare:R.default.isClient&&R.default.clientversion>=2018031e3&&!R.default.isMacClient,synchronization:!1,canDraw:!1,canPage:I.default.getTkRoom().getMySelf().candraw||T.default.hasRole.roleTeachingAssistant||T.default.hasRole.roleChairman||T.default.hasRole.roleStudent&&T.default.joinRoomInfo.isSupportPageTrun,actionClick:I.default.getTkRoom().getMySelf().candraw,isMobile:"mobile"===TK.SDKTYPE,pptVolumeSynchronization:!1,addPage:!1}),R.default.firstGetServiceTime=!1,R.default.isHandleMsglistFromRoomPubmsg=!1,R.default.appConnected=!0;var t=P.default.getRoleHasDefalutAppPermissions();A.default.initAppPermissions(t);var n=e.message;R.default.signallingMessageList=n,this._msglistOnConnected(R.default.signallingMessageList,"roomConnected"),R.default.serviceTime&&!R.default.firstGetServiceTime&&!R.default.isHandleMsglistFromRoomPubmsg&&R.default.signallingMessageList&&(R.default.firstGetServiceTime=!0,this._msglistOnConnected(R.default.signallingMessageList,"roomPubmsg"),R.default.signallingMessageList=null,delete R.default.signallingMessageList),D.default.setParticipantPropertyToAll(I.default.getTkRoom().getMySelf().id,{codeVersion:2}),this._startTime()}},{key:"handlerRoomDisconnected",value:function(e){R.default.appConnected=!1,R.default.classBegin=!1,R.default.serviceTime=void 0,R.default.remindServiceTime=void 0,R.default.signallingMessageList=null,delete R.default.signallingMessageList,R.default.isHandleMsglistFromRoomPubmsg=!1,R.default.participantGiftNumberJson={}}},{key:"handlerRoomUserpropertyChanged",value:function(e){var t=e.message,n=e.user,o=!0,a=!1,r=void 0;try{for(var i,s=(0,d.default)((0,l.default)(t));!(o=(i=s.next()).done);o=!0){var u=i.value,f=(0,c.default)(u,2),m=f[0],g=f[1];n.id===I.default.getTkRoom().getMySelf().id&&"candraw"===m&&(I.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({canDraw:!1,canPage:g||T.default.hasRole.roleStudent&&T.default.joinRoomInfo.isSupportPageTrun,actionClick:g,synchronization:g}),A.default.setAppPermissions("canDraw",g))}}catch(e){a=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw r}}}},{key:"handlerRoomPlaybackClearAll",value:function(e){return y.default.CoreController.dispatchEvent({type:T.default.EVENTTYPE.RoomEvent.roomPlaybackClearAllFromPlaybackController}),!0}},{key:"handlerRoomReceiveActionCommand",value:function(e){var t=e.message,n=t.action;switch(t.cmd,n){case"transmitWindowSize":document.getElementById("tk_app")?(R.default.windowInnerWidth=document.getElementById("tk_app").clientWidth,R.default.windowInnerHeight=document.getElementById("tk_app").clientHeight):(R.default.windowInnerWidth=window.innerWidth,R.default.windowInnerHeight=window.innerHeight);var o=R.default.windowInnerWidth/T.default.STANDARDSIZE,a=document.getElementById("all_root")||document.getElementsByTagName("html");if(a){var r=S.default.isArray(a)?a[0]:a;r&&r.style&&(r.style.fontSize=o+"px")}return y.default.Window.dispatchEvent({type:T.default.EVENTTYPE.WindowEvent.onResize,message:{defalutFontSize:o}}),!0}}},{key:"handlerRoomModeChanged",value:function(e){e.message.roomMode===TK.ROOM_MODE.BIG_ROOM?R.default.HeightConcurrence=!0:e.message.roomMode===TK.ROOM_MODE.NORMAL_ROOM&&(R.default.HeightConcurrence=!1)}},{key:"handlerRoomAudiovideostateSwitched",value:function(e){var t=e.message;R.default.isOnlyAudioRoom=t.onlyAudio}},{key:"handlerRoomCheckroom",value:function(e){var t=e.message||{},n=t.ret,o=t.roominfo;this._handlerCheckroomOrInitPlaybackInfo(n,o)}},{key:"handlerRoomCheckroomPlayback",value:function(e){var t=e.message||{},n=t.ret,o=t.roominfo;this._handlerCheckroomOrInitPlaybackInfo(n,o)}},{key:"handlerRoomUpdateFakeJsSdkInitInfo",value:function(e){var t=e.message;void 0!==t.playback&&(R.default.playback=t.playback),void 0!==t.deviceType&&(R.default.mobileDeviceType=t.deviceType,R.default.clientType=t.clientType,T.default.STANDARDSIZE="pad"===t.deviceType?20.48:13.34)}},{key:"handlerRoomServeraddressUpdate",value:function(e){var t=e.message,n=t.web_protocol,o=t.web_host,a=t.web_port;T.default.bindServiceinfoToTkConstant({protocol:n,web_host:o,web_port:a,isInit:R.default.handlerRoomServeraddressUpdateIsInit})}},{key:"_classBeginStartHandler",value:function(e){R.default.classBeginTime=S.default.isMillisecondClass(e.ts)?e.ts:1e3*e.ts,R.default.classBegin=!0,I.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({mediaShareToID:"__all",synchronization:!(!T.default.hasRole.roleChairman&&!T.default.hasRole.roleTeachingAssistant)||I.default.getTkRoom().getMySelf().candraw,addPage:T.default.hasRole.roleChairman||T.default.hasRole.roleTeachingAssistant,pptVolumeSynchronization:T.default.hasRole.roleChairman||T.default.hasRole.roleTeachingAssistant});var t=P.default.getRoleHasDefalutAppPermissions();A.default.initAppPermissions(t)}},{key:"_classBeginEndHandler",value:function(e){R.default.classBegin=!1,R.default.endClassBegin=!0,I.default.getTkWhiteBoardManager().changeWhiteBoardConfigration({mediaShareToID:void 0,synchronization:!1,addPage:!1,pptVolumeSynchronization:!1});var t=P.default.getRoleHasDefalutAppPermissions();A.default.initAppPermissions(t)}},{key:"_msglistOnConnected",value:function(e,t){var n=this,o={};return function(e,t,o){var a={};for(var r in e)o&&o[e[r].name]||(e[r].data&&"string"==typeof e[r].data&&(e[r].data=JSON.parse(e[r].data)),/outIframe/.test(e[r].name)?y.default.CoreController.dispatchEvent({type:"outIframe-msglist",message:{signallingData:e[r]}}):null==a[e[r].name]||void 0==a[e[r].name]?(a[e[r].name]=[],a[e[r].name].push(e[r])):a[e[r].name].push(e[r]));if("roomConnected"===t){var i=a.ClassBegin;null!=i&&void 0!=i&&i.length>0?"ClassBegin"==i[i.length-1].name&&(n._classBeginStartHandler(i[i.length-1]),y.default.CoreController.dispatchEvent({type:"receive-msglist-ClassBegin",source:"room-msglist",message:i[i.length-1]})):y.default.CoreController.dispatchEvent({type:"receive-msglist-not-ClassBegin",source:"room-msglist",message:{}}),a.ClassBegin=null}else if("roomPubmsg"===t){var l=a.WBPageCount;null!=l&&void 0!=l&&l.length>0&&"WBPageCount"==l[l.length-1].name&&y.default.CoreController.dispatchEvent({type:"receive-msglist-WBPageCount",source:"room-msglist",message:l[l.length-1]}),a.WBPageCount=null;var s=a.PptVolumeControl;null!=s&&void 0!=s&&s.length>0&&"PptVolumeControl"==s[s.length-1].name&&y.default.CoreController.dispatchEvent({type:"receive-msglist-PptVolumeControl",source:"room-msglist",message:{PptVolumeControlArr:s}}),a.PptVolumeControl=null;var d=null,u=a.ShowPage;if(null!=u&&void 0!=u&&u.length>0)for(var c=0;c<u.length;c++)u[c].data.isMedia||(d=u[c]);a.ShowPage=null,void 0!=d&&null!=d&&(L.Logger.debug("receive-msglist-ShowPage-lastDocument info:",d),y.default.CoreController.dispatchEvent({type:"receive-msglist-ShowPage-lastDocument",message:{data:d.data,source:"room-msglist"}})),R.default.isHandleMsglistFromRoomPubmsg=!0}}(e,t,o),!0}},{key:"_handlerCheckroomOrInitPlaybackInfo",value:function(e,t){L.Logger.debug("checkroom  ret and roominfo:",e,t);var n=S.default.decrypt(T.default.SERVICEINFO.joinUrl)||window.location.href,o=I.default.getTkRoom().getRoomProperties().chairmancontrol,a=void 0,i=void 0;R.default.playback?"mobile"===TK.SDKTYPE&&TK.global&&void 0!==TK.global.fakeJsSdkInitInfo.clientType?t.skins&&"object"===(0,r.default)(t.skins[TK.global.fakeJsSdkInitInfo.clientType])&&(a=t.skins[TK.global.fakeJsSdkInitInfo.clientType].tplId,i="0"===t.room.colourid?t.skins[TK.global.fakeJsSdkInitInfo.clientType].skinId:t.room.colourid):t.skins&&"object"===(0,r.default)(t.skins.pc)&&(a=t.skins.pc.tplId,i=t.skins.pc.skinId):t.room&&"object"===(0,r.default)(t.room)&&(a=t.room.tplId,i="0"===t.room.colourid?t.room.skinId:t.room.colourid);var l={starttime:I.default.getTkRoom().getRoomProperties().starttime,endtime:I.default.getTkRoom().getRoomProperties().endtime,nickname:I.default.getTkRoom().getMySelf().nickname,thirdid:I.default.getTkRoom().getMySelf().id,joinUrl:S.default.encrypt(n),serial:I.default.getTkRoom().getRoomProperties().serial,roomrole:Number(I.default.getTkRoom().getMySelf().role),roomtype:Number(I.default.getTkRoom().getRoomProperties().roomtype),companyid:Number(I.default.getTkRoom().getRoomProperties().companyid),isLivebypass:void 0!==I.default.getTkRoom().getRoomProperties().livebypass&&null!==I.default.getTkRoom().getRoomProperties().livebypass&&1===Number(I.default.getTkRoom().getRoomProperties().livebypass),assistantOpenMyseftAV:!(R.default.playback||!o)&&1===Number(o.substr(36,1)),isSupportCandraw:!(R.default.playback||!o)&&1===Number(o.substr(37,1)),isSupportPageTrun:!(R.default.playback||!o)&&1===Number(o.substr(38,1)),hasCoursewareRemarks:!(R.default.playback||!o)&&1===Number(o.substr(43,1)),isClassOverNotLeave:!(R.default.playback||!o)&&1===Number(o.substr(47,1)),videoInFullScreen:!(R.default.playback||!o)&&1===Number(o.substr(50,1)),pauseWhenOver:!(R.default.playback||!o)&&1===Number(o.substr(52,1)),pushflow:!(R.default.playback||!o)&&1===Number(o.substr(60,1)),preLoading:!(R.default.playback||!o)&&1===Number(o.substr(102,1)),pptpagingoptions:!(R.default.playback||!o)&&1===Number(o.substr(112,1)),jumpurl:R.default.playback?"":S.default.getUrlParams("jumpurl"),roomname:I.default.getTkRoom().getRoomProperties().roomname,pullConfigure:I.default.getTkRoom().getRoomProperties().pullConfigure,pushConfigure:I.default.getTkRoom().getRoomProperties().pushConfigure,pushUrl:I.default.getTkRoom().getRoomProperties().pullid,helpcallbackurl:t.helpcallbackurl,classRoomLogoUrl:t.room.classroomlogo?t.room.classroomlogo:void 0,template:T.default.testTemplate?T.default.testTemplate:a&&!/^\d*$/g.test(a)?"template_"+a:T.default.template,skin:T.default.testSkin?T.default.testSkin:i&&!/^\d*$/g.test(i)?"skin_"+i:T.default.skin,pushflowaddr:I.default.getTkRoom().getRoomProperties().pushflowaddr?I.default.getTkRoom().getRoomProperties().pushflowaddr:void 0};I.default.setRoomName(I.default.getTkRoom().getRoomProperties().roomname),I.default.setUserName(I.default.getTkRoom().getMySelf().nickname),I.default.setUserThirdid(I.default.getTkRoom().getMySelf().id),document.head.getElementsByTagName("title")[0].innerHTML=I.default.getRoomName(),T.default.bindRoomInfoToTkConstant(l),T.default.bindParticipantHasRoleToTkConstant(),T.default.bindParticipantHasRoomtypeToTkConstant(),T.default.updateTemplate("template_beyond"),T.default.updateSkin(l.skin),R.default.videoScale=T.default.joinRoomInfo.roomVideoWidth/T.default.joinRoomInfo.roomVideoHeight}},{key:"_compareDocServerSpeedSwitchCND",value:function(){var e=function(e,t){if("function"==typeof t)if("mobile"===TK.SDKTYPE){if(I.default.getTkRoom()&&"function"==typeof I.default.getTkRoom().getLocalStorageItem)try{I.default.getTkRoom().getLocalStorageItem(e,function(e){t(e)})}catch(e){L.Logger.error("getLocalStorageItem error:",e),t("")}}else t(L.Utils.localStorage.getItem("tkDocAddressKey"))};e("tkDocAddressKey",function(t){if(!t){var n=void 0,o=1,a=[],r=!1,i=function(e,t,n,o,a){var r={},i=(new Date).getTime(),l=e+"/speed.bmp?ts="+i,s=new Image;s.onload=function(){var e=(new Date).getTime();r={code:0,loadingTime:a?e-i-50:e-i},"function"==typeof t&&t(r,n,o)},s.onerror=function(){r={code:-1,loadingTime:void 0},"function"==typeof t&&t(r,n,o)},s.src=l},l=function(t){e("tkDocAddressKey",function(e){e||t!==window.WBGlobal.docAddressKey&&(I.default.getTkWhiteBoardManager().switchDocAddress(t,!1),L.Logger.info("auto switch cdn , cdn key is "+window.WBGlobal.docAddressKey+", address is "+window.WBGlobal.nowUseDocAddress))})},s=function(e,t){return e.filter(function(e,n){return(o-1)*t<=n&&n<o*t})},d=function(e,t,n){return e+"://"+t+":"+n};!function e(){var t=[],u=[];s(window.WBGlobal.docAddressList,3).forEach(function(s,c){i(d(s.protocol,s.hostname,s.port),function(o,i,s){L.Logger.info("load backup document cdn  speed.bmp , response is "+L.Utils.toJsonStringify(o)),0===o.code&&o.loadingTime?r||(u.push({hostname:s.hostname,speed:o.loadingTime}),clearTimeout(n),n=setTimeout(function(){if(u.length>1){var e=u.sort(function(e,t){return e.speed-t.speed});l(e[0].hostname)}else l(s.hostname);r=!0},100)):(t.push(1),a.push(1)),a.length===window.WBGlobal.docAddressList.length?l(window.WBGlobal.docAddressList[0].hostname):3===t.length&&e()},c,s,1===o&&0===c)}),o+=1}()}})}},{key:"_startTime",value:function(){var e=this;clearInterval(e.timer),e.intervalNumber=0,D.default.sendSignallingFromUpdateTime(I.default.getTkRoom().getMySelf().id),e.timer=setInterval(function(){R.default.classBeginTime&&R.default.serviceTime?R.default.serviceTime+=1e3:R.default.serviceTime||D.default.sendSignallingFromUpdateTime(I.default.getTkRoom().getMySelf().id),++e.intervalNumber>300&&(D.default.sendSignallingFromUpdateTime(I.default.getTkRoom().getMySelf().id),e.intervalNumber=0)},1e3)}},{key:"_stopTime",value:function(){var e=this;clearInterval(e.timer),e.timer=null,e.intervalNumber=0}}]),e}(),N=new B;t.default=N},HSQo:function(e,t,n){e.exports={default:n("CJli"),__esModule:!0}},HUPQ:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("mvHQ"),r=o(a),i=n("DrPG"),l=o(i);window.GLOBAL=window.GLOBAL||{};var s=window.GLOBAL;s.classBegin=!1,s.endClassBegin=!1,s.routeName=void 0,s.playback=!1,s.playPptVideoing=!1,s.playMediaFileing=!1,s.serviceTime=void 0,s.firstGetServiceTime=!1,s.isHandleMsglist=!1,s.remindServiceTime=void 0,s.classBeginTime=void 0,s.isSkipPageing=!1,s.mobileDeviceType=void 0,s.windowInnerWidth=window.innerWidth,s.windowInnerHeight=window.innerHeight,s.isOnlyAudioRoom=!1;var d=l.default.getBrowserInfo();L.Logger.info("浏览器 browserInfo:"+(0,r.default)(d)),s.isMobile=d.versions.mobile||d.versions.ios||d.versions.android||d.versions.iPhone||d.versions.iPad,s.isBroadcastClient=s.isClient&&s.isBroadcast,s.isBroadcastMobile=s.isMobile&&s.isBroadcast,s.languageName="ch"===l.default.getUrlParams("languageType")?"chinese":"tw"===l.default.getUrlParams("languageType")?"complex":"english",s.showShapeAuthor=!1,s.clientComponentName=l.default.getUrlParams("loadComponentName"),s.handlerRoomServeraddressUpdateIsInit=!0,t.default=s},KyAL:function(e,t,n){function o(e){return n(a(e))}function a(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var r={"./i18_chinese.js":"ppOE","./i18_complex.js":"2vo4","./i18_english.js":"yZ13"};o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id="KyAL"},Ovlj:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("mvHQ"),r=o(a),i=n("pFYg"),l=o(i),s=n("Zrlr"),d=o(s),u=n("wxAW"),c=o(u),f=n("HUPQ"),m=o(f),g=n("yE5a"),p=o(g),v=n("Sa83"),h=o(v),b=n("VSuD"),y=(o(b),function(){function e(){(0,d.default)(this,e)}return(0,c.default)(e,[{key:"pubMsg",value:function(e,t,n,o,a,i,s,d){if(h.default.handler.getAppPermissions("pubMsg")&&m.default.appConnected){n=n||"__all";var u=!a;o&&"object"===(void 0===o?"undefined":(0,l.default)(o))&&(o=(0,r.default)(o));var c={msgName:e,msgId:t,toId:n,data:o,save:u,expiresabs:i,associatedMsgID:s,associatedUserID:d,expires:void 0,type:void 0,write2DB:void 0,actions:void 0,do_not_replace:void 0};p.default.getTkRoom().pubMsg(c)}}},{key:"delMsg",value:function(e,t,n,o){if(h.default.handler.getAppPermissions("delMsg")&&m.default.appConnected){n=n||"__all",o&&"object"===(void 0===o?"undefined":(0,l.default)(o))&&(o=(0,r.default)(o));var a={msgName:e,msgId:t,toId:n,data:o};p.default.getTkRoom().delMsg(a)}}},{key:"setProperty",value:function(e,t,n){h.default.handler.getAppPermissions("setProperty")&&m.default.appConnected&&(t=t||"__all",p.default.getTkRoom().changeUserProperty(e,t,n))}},{key:"setParticipantPropertyToAll",value:function(e,t){h.default.handler.getAppPermissions("setParticipantPropertyToAll")&&this.setProperty(e,"__all",t)}},{key:"sendSignallingDataToParticipant",value:function(e,t,n,o,a,r,i,l,s){if(h.default.handler.getAppPermissions("sendSignallingDataToParticipant")){var d=this;e?d.delMsg(t,n,o,a):(l||"VideoWhiteboard"===t||"ClassBegin"===t||"SharpsChange"===t||"WBPageCount"===t||"ShowPage"===t||"whiteboardMarkTool"===t||(l="ClassBegin"),d.pubMsg(t,n,o,a,r,i,l,s))}}}]),e}());t.default=y},PqAP:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var a=n("GiK3"),r=o(a),i=n("O27J"),l=o(i),s=n("Sa83"),d=o(s),u=n("rkp3"),c=o(u);d.default.handler.loadSystemRequiredInfo(),l.default.render(r.default.createElement(c.default,null),document.getElementById("tk_app"))},Sa83:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("T+56"),r=o(a),i=n("GrKX"),l=o(i),s=n("VSuD"),d=o(s),u=n("HUPQ"),c=o(u),f=n("DrPG"),m=o(f),g=n("0jvK"),p=o(g),v=n("ZZXC"),h=o(v),b=n("yE5a"),y=o(b),w=TK.EventDispatcher({});r.default.CoreController=w,w.handler={},w.handler.loadSystemRequiredInfo=function(){if(TK.tkLogPrintConfig)if(d.default.DEV){var e={debug:!0},t={development:!0,logLevel:d.default.LOGLEVEL.DEBUG},n={webrtcLogDebug:!0};TK.tkLogPrintConfig(e,t,n)}else{var o={debug:!1},a={development:!1,logLevel:d.default.LOGLEVEL.INFO},r={webrtcLogDebug:!1};TK.tkLogPrintConfig(o,a,r)}h.default.getAppLanguageInfo(function(e){c.default.language=e}),y.default.setTkRoom(TK.MobileNativeRoom()),l.default.registerEventToRoom();var i=new window.TKWhiteBoardManager(void 0,void 0,!0);y.default.setTkWhiteBoardManager(i),y.default.getTkRoom().registerRoomWhiteBoardDelegate(i)},w.handler.checkRoom=function(e){var t={type:d.default.EVENTTYPE.RoomEvent.roomCheckroom,message:{checkMeetingAterCallback:e}};r.default.CoreController.dispatchEvent(t)},w.handler.setAppPermissions=function(e,t){p.default.setAppPermissions(e,t)},w.handler.getAppPermissions=function(e){return p.default.getAppPermissions(e)},w.handler.initAppPermissions=function(e){p.default.initAppPermissions(e)},w.handler.addEventListenerOnCoreController=function(){document.oncontextmenu=null,document.oncontextmenu=function(){return!1},window.onbeforeunload=null,window.onbeforeunload=function(){},m.default.tool.removeEvent(document,"selectstart",function(){return!1}),m.default.tool.addEvent(document,"selectstart",function(){return!1},!1);var e=function(){document.getElementById("tk_app")?(c.default.windowInnerWidth=document.getElementById("tk_app").clientWidth,c.default.windowInnerHeight=document.getElementById("tk_app").clientHeight):(c.default.windowInnerWidth=window.innerWidth,c.default.windowInnerHeight=window.innerHeight);var e=c.default.windowInnerWidth/d.default.STANDARDSIZE,t=document.getElementById("all_root")||document.getElementsByTagName("html");if(t){var n=m.default.isArray(t)?t[0]:t;n&&n.style&&(n.style.fontSize=e+"px")}r.default.Window.dispatchEvent({type:d.default.EVENTTYPE.WindowEvent.onResize,message:{defalutFontSize:e}})};m.default.tool.removeEvent(window,"resize",e),m.default.tool.addEvent(window,"resize",e),e();var t=function(e){r.default.Window.dispatchEvent({type:d.default.EVENTTYPE.WindowEvent.onMessage,message:{event:e}})};m.default.tool.removeEvent(window,"message",t),m.default.tool.addEvent(window,"message",t,!1)},w.handler.addEventListenerOnCoreController(),t.default=w},"T+56":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={};o.Document=TK.EventDispatcher({}),o.Window=TK.EventDispatcher({}),o.Element=TK.EventDispatcher({}),o.Room=TK.EventDispatcher({}),o.Stream=TK.EventDispatcher({}),o.Role=TK.EventDispatcher({}),t.default=o},TmV0:function(e,t,n){n("fZOM"),e.exports=n("FeBl").Object.values},VSuD:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("HSQo"),r=o(a),i=n("DrPG"),l=o(i),s=n("T+56"),d=o(s),u=n("HUPQ"),c=o(u),f=n("yE5a"),m=(o(f),{}),g="v2.1.7",p="2018031000",v=!1;try{g="3.2.0",p=2018121710,v=!1}catch(n){L.Logger.warning("There is no configuration version number and version time[__VERSIONS__ , __VERSIONSTIME__]!"),L.Logger.warning("There is no configuration dev mark[__DEV__]!")}m.VERSIONS=g,m.VERSIONSTIME=p,m.newpptVersions=2017091401,m.remoteNewpptUpdateTime=2018032113,m.debugFromAddress=!!l.default.getUrlParams("debug")&&""!=l.default.getUrlParams("debug"),m.DEV=v||m.debugFromAddress,m.role={},(0,r.default)(m.role,{roleChairman:{value:0,writable:!1},roleTeachingAssistant:{value:1,writable:!1},roleStudent:{value:2,writable:!1},roleAudit:{value:3,writable:!1},rolePatrol:{value:4,writable:!1},rolePlayback:{value:-1,writable:!1}});var h={};(0,r.default)(h,{roomConnected:{value:"room-connected",writable:!1,enumerable:!0},roomParticipantJoin:{value:"room-participant_join",writable:!1,enumerable:!0},roomParticipantLeave:{value:"room-participant_leave",writable:!1,enumerable:!0},roomPubmsg:{value:"room-pubmsg",writable:!1,enumerable:!0},roomDelmsg:{value:"room-delmsg",writable:!1,enumerable:!0},roomUserpropertyChanged:{value:"room-userproperty-changed",writable:!1,enumerable:!0},roomDisconnected:{value:"room-disconnected",writable:!1,enumerable:!0},roomPlaybackDuration:{value:"room-playback-duration",writable:!1,enumerable:!0},roomPlaybackPlaybackEnd:{value:"room-playback-playbackEnd",writable:!1,enumerable:!0},roomPlaybackPlaybackUpdatetime:{value:"room-playback-playback_updatetime",writable:!1,enumerable:!0},roomPlaybackClearAll:{value:"room-playback-clear_all",writable:!1,enumerable:!0},roomPlaybackClearAllFromPlaybackController:{value:"room-playback-clear_all-from-playback-controller",writable:!1,enumerable:!0},roomServeraddressUpdate:{value:"room-serveraddress-update",writable:!1,enumerable:!0},roomUpdateFakeJsSdkInitInfo:{value:"room-updateFakeJsSdkInitInfo",writable:!1,enumerable:!0},roomReceiveActionCommand:{value:"room-receiveActionCommand",writable:!1,enumerable:!0},roomCheckroom:{value:"room-checkroom",writable:!1,enumerable:!0},roomCheckroomPlayback:{value:"room-checkroom-playback",writable:!1,enumerable:!0},roomAudiovideostateSwitched:{value:"room-audiovideostate-switched",writable:!1,enumerable:!0},roomModeChanged:{value:"room-mode-changed",writable:!1,enumerable:!0}});var b={};(0,r.default)(b,{onResize:{value:"onResize",writable:!1}}),(0,r.default)(b,{onMessage:{value:"onMessage",writable:!1}});var y={};(0,r.default)(y,{onKeydown:{value:"onKeydown",writable:!1},onFullscreenchange:{value:"onFullscreenchange",writable:!1}}),m.EVENTTYPE={},(0,r.default)(m.EVENTTYPE,{RoomEvent:{value:h,writable:!1},WindowEvent:{value:b,writable:!1},DocumentEvent:{value:y,writable:!1}}),m.ROOMTYPE={},(0,r.default)(m.ROOMTYPE,{oneToOne:{value:0,writable:!1}}),m.PUBLISHSTATE={},(0,r.default)(m.PUBLISHSTATE,{PUBLISH_STATE_NONE:{value:TK.PUBLISH_STATE_NONE,writable:!1},PUBLISH_STATE_AUDIOONLY:{value:TK.PUBLISH_STATE_AUDIOONLY,writable:!1},PUBLISH_STATE_VIDEOONLY:{value:TK.PUBLISH_STATE_VIDEOONLY,writable:!1},PUBLISH_STATE_BOTH:{value:TK.PUBLISH_STATE_BOTH,writable:!1},PUBLISH_STATE_MUTEALL:{value:TK.PUBLISH_STATE_MUTEALL,writable:!1}}),m.STANDARDSIZE=15.8,m.LOGLEVEL={},(0,r.default)(m.LOGLEVEL,{DEBUG:{value:0,writable:!1},TRACE:{value:1,writable:!1},INFO:{value:2,writable:!1},WARNING:{value:3,writable:!1},ERROR:{value:4,writable:!1},NONE:{value:5,writable:!1}}),m.SERVICEINFO={},m.bindServiceinfoToTkConstant=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.protocol,n=e.web_host,o=e.web_port,a=e.isInit,r=void 0===a||a,i={webProtocol:t||m.SERVICEINFO.webProtocol,webHostname:n||m.SERVICEINFO.webHostname,webPort:o||m.SERVICEINFO.webPort};Object.customAssign(i,{webProtocolAndHostname:i.webProtocol+"://"+i.webHostname,webAddress:i.webProtocol+"://"+i.webHostname+":"+i.webPort}),r&&(i.joinUrl=l.default.encrypt(window.location.href)),Object.customAssign(m.SERVICEINFO,i),r&&console.info("encrypt_tk_info:\n",m.SERVICEINFO.joinUrl),d.default&&d.default.CoreController&&d.default.CoreController.dispatchEvent&&d.default.CoreController.dispatchEvent({type:"bindServiceinfoToTkConstant",message:{SERVICEINFO:m.SERVICEINFO}}),c.default.handlerRoomServeraddressUpdateIsInit=!1},m.joinRoomInfo={},m.bindRoomInfoToTkConstant=function(e){if(!e)return void L.Logger.error("joinRoomInfo is not exist!");L.Logger.debug("joinRoomInfo:",e),m.joinRoomInfo=e,d.default.CoreController.dispatchEvent({type:"bindRoomInfoToTkConstant",message:{joinRoomInfo:m.joinRoomInfo}})},m.hasRole={},m.bindParticipantHasRoleToTkConstant=function(){if(!m.joinRoomInfo)return void L.Logger.error("TkConstant.joinRoomInfo is not exist!");(0,r.default)(m.hasRole,{roleChairman:{value:m.joinRoomInfo&&m.joinRoomInfo.roomrole===m.role.roleChairman,writable:!1},roleTeachingAssistant:{value:m.joinRoomInfo&&m.joinRoomInfo.roomrole===m.role.roleTeachingAssistant,writable:!1},roleStudent:{value:m.joinRoomInfo&&m.joinRoomInfo.roomrole===m.role.roleStudent,writable:!1},roleAudit:{value:m.joinRoomInfo&&m.joinRoomInfo.roomrole===m.role.roleAudit,writable:!1},rolePatrol:{value:m.joinRoomInfo&&m.joinRoomInfo.roomrole===m.role.rolePatrol,writable:!1},rolePlayback:{value:m.joinRoomInfo&&m.joinRoomInfo.roomrole===m.role.rolePlayback,writable:!1}}),d.default.CoreController.dispatchEvent({type:"bindParticipantHasRoleToTkConstant",message:{hasRole:m.hasRole}})},m.hasRoomtype={},m.bindParticipantHasRoomtypeToTkConstant=function(){if(!m.joinRoomInfo)return void L.Logger.error("TkConstant.joinRoomInfo is not exist!");(0,r.default)(m.hasRoomtype,{oneToOne:{value:m.joinRoomInfo&&m.joinRoomInfo.roomtype===m.ROOMTYPE.oneToOne,writable:!1}}),d.default.CoreController.dispatchEvent({type:"bindParticipantHasRoomtypeToTkConstant",message:{hasRoomtype:m.hasRoomtype}})},m.template="template_beyond",m.updateTemplate=function(e){var t=m.template;document.body.classList.remove(t),document.body.classList.remove(m.template),document.body.classList.remove(c.default.isClient?"clientApp":"webpageApp"),document.body.classList.add(m.template),document.body.classList.add(c.default.isClient?"clientApp":"webpageApp"),document.body.setAttribute("tkcustomdatatemplate",m.template),d.default.CoreController.dispatchEvent({type:"updateTemplate",message:{template:m.template}})};var w=l.default.getUrlParams("skinId");w&&(m.skin="skin_"+w),m.skin=m.skin||"skin_beyond_default",m.updateSkin=function(e){var t=m.skin;"skin_default"!==e&&"skin_purple"!==e&&"skin_beyond_default"!==e||(e="skin_beyond_default"),m.skin=e,document.body.classList.remove(t),document.body.classList.remove(m.skin),document.body.classList.add(m.skin),document.body.setAttribute("tkcustomdataskin",m.skin),d.default.CoreController.dispatchEvent({type:"updateSkin",message:{skin:m.skin}})},window.TkConstant=m,t.default=m},W3Iv:function(e,t,n){e.exports={default:n("wEtr"),__esModule:!0}},WN3Y:function(e,t){},Wi6Q:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("fZjL"),r=o(a),i=n("BO1k"),l=o(i),s=n("Zrlr"),d=o(s),u=n("wxAW"),c=o(u),f=n("VSuD"),m=o(f),g=n("yE5a"),p=o(g),v=n("0jvK"),h=o(v),b=n("T+56"),y=(o(b),n("HUPQ")),w=o(y),T=n("Sa83"),k=(o(T),function(){function e(t){(0,d.default)(this,e),this.role=t}return(0,c.default)(e,[{key:"getRoleHasDefalutAppPermissions",value:function(e){var t=e||h.default.productionDefaultAppAppPermissions();if(m.default.joinRoomInfo&&void 0!=m.default.joinRoomInfo.roomrole)switch(m.default.joinRoomInfo.roomrole){case m.default.role.roleChairman:if(w.default.classBegin){var n=!0,o=!1,a=void 0;try{for(var i,s=(0,l.default)((0,r.default)(t));!(n=(i=s.next()).done);n=!0)t[i.value]=!0}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}Object.customAssign(t,{raisehand:!1,dialCircleClick:!1,isShowCoursewareRemarks:m.default.joinRoomInfo.hasCoursewareRemarks,canDraw:p.default.getTkRoom().getMySelf().candraw})}else Object.customAssign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,endClassbeginRevertToStartupLayout:!0,isShowCoursewareRemarks:m.default.joinRoomInfo.hasCoursewareRemarks,sendSignallingFromRemoteControl:!0,sendSignallingFromUpdateTime:!0});break;case m.default.role.roleTeachingAssistant:if(w.default.classBegin){var d=!0,u=!1,c=void 0;try{for(var f,g=(0,l.default)((0,r.default)(t));!(d=(f=g.next()).done);d=!0)t[f.value]=!0}catch(e){u=!0,c=e}finally{try{!d&&g.return&&g.return()}finally{if(u)throw c}}Object.customAssign(t,{endClassbeginRevertToStartupLayout:!1,isShowCoursewareRemarks:m.default.joinRoomInfo.hasCoursewareRemarks,canDraw:p.default.getTkRoom().getMySelf().candraw})}else Object.customAssign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,endClassbeginRevertToStartupLayout:m.default.joinRoomInfo.isClassOverNotLeave,isShowCoursewareRemarks:m.default.joinRoomInfo.hasCoursewareRemarks,sendSignallingFromRemoteControl:!0,sendSignallingFromUpdateTime:!0});break;case m.default.role.rolePatrol:w.default.classBegin?Object.customAssign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,sendSignallingFromUpdateTime:!0}):Object.customAssign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,endClassbeginRevertToStartupLayout:m.default.joinRoomInfo.isClassOverNotLeave,sendSignallingFromUpdateTime:!0});break;case m.default.role.roleStudent:w.default.classBegin?Object.customAssign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,sendSignallingFromRemoteControl:!0,sendSignallingFromUpdateTime:!0,canDraw:p.default.getTkRoom().getMySelf().candraw}):Object.customAssign(t,{pubMsg:!0,delMsg:!0,setProperty:!0,setParticipantPropertyToAll:!0,sendSignallingDataToParticipant:!0,endClassbeginRevertToStartupLayout:m.default.joinRoomInfo.isClassOverNotLeave,sendSignallingFromRemoteControl:!0,sendSignallingFromUpdateTime:!0});break;case m.default.role.rolePlayback:w.default.classBegin,Object.customAssign(t,{pubMsg:!1,delMsg:!1,setProperty:!1,setParticipantPropertyToAll:!1,sendSignallingDataToParticipant:!1,sendSignallingFromRemoteControl:!0});break;case m.default.role.roleAudit:var v=!0,b=!1,y=void 0;try{for(var T,k=(0,l.default)((0,r.default)(t));!(v=(T=k.next()).done);v=!0)t[T.value]=!1}catch(e){b=!0,y=e}finally{try{!v&&k.return&&k.return()}finally{if(b)throw y}}Object.customAssign(t,{pubMsg:!0,sendSignallingDataToParticipant:!0})}return t}},{key:"addEventListenerToRoomHandler",value:function(){}}]),e}()),S=new k;S.addEventListenerToRoomHandler(),t.default=S},Xd32:function(e,t,n){n("+tPU"),n("zQR9"),e.exports=n("5PlU")},XkXc:function(e,t){},YRCL:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("Zx67"),r=o(a),i=n("Zrlr"),l=o(i),s=n("wxAW"),d=o(s),u=n("zwoO"),c=o(u),f=n("Pf15"),m=o(f),g=n("Ovlj"),p=o(g),v=n("yE5a"),h=(o(v),n("DrPG")),b=(o(h),n("VSuD")),y=(o(b),n("HUPQ")),w=(o(y),n("Sa83")),T=o(w),k=function(e){function t(){return(0,l.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"sendSignallingFromUpdateTime",value:function(e){if(T.default.handler.getAppPermissions("sendSignallingFromUpdateTime")){var t=this,n=e||"__all",o={};t.sendSignallingDataToParticipant(!1,"UpdateTime","UpdateTime",n,o,!0)}}},{key:"sendSignallingFromRemoteControl",value:function(e,t){if(T.default.handler.getAppPermissions("sendSignallingFromRemoteControl")){var n=e||"__all";this.sendSignallingDataToParticipant(!1,"RemoteControl","RemoteControl",n,t,!0)}}}]),t}(p.default),S=new k;t.default=S},ZZXC:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("DrPG"),r=o(a),i=n("HUPQ"),l=o(i),s=n("VSuD"),d=(o(s),n("yE5a")),u=(o(d),n("T+56")),c=(o(u),n("YRCL")),f=(o(c),{getAppLanguageInfo:function(e,t){var o=t||l.default.languageName,a={};l.default.language=l.default.language||{},a.name=o,a.languageData=n("KyAL")("./i18_"+o+".js").default,e&&"function"==typeof e&&e(a),document.body.className=document.body.className.replace(/(chinese|english|complex)/g,"")+" "+a.name,document.body.setAttribute("data-language",a.name)},TkUtils:r.default});t.default=f},buLY:function(e,t,n){"use strict";var o={error:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,e)},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)},info:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.info.apply(console,e)},warn:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e)},trace:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.trace.apply(console,e)},debug:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.debug.apply(console,e)}};window.Log=o},cSSE:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("Zx67"),r=o(a),i=n("Zrlr"),l=o(i),s=n("wxAW"),d=o(s),u=n("zwoO"),c=o(u),f=n("Pf15"),m=o(f),g=n("GiK3"),p=o(g),v=n("Sa83"),h=(o(v),n("T+56")),b=o(h),y=n("yE5a"),w=o(y),T=n("HUPQ"),k=o(T),S=n("VSuD"),E=o(S),P=n("Ovlj"),C=(o(P),function(e){function t(e){(0,l.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={fileTypeMark:"generalDocument",scale:void 0},n.fatherContainerId="white_board_outer_layout",n.whiteboardContainerId="big_literally_wrap",n.filetpye="",n.sendMobileData={page:{},fileTypeMark:void 0,scale:void 0,irregular:void 0},n}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=this;b.default.CoreController.addEventListener(E.default.EVENTTYPE.RoomEvent.roomDelmsg,e.handlerRoomDelmsg.bind(e),e.listernerBackupid),b.default.CoreController.addEventListener(E.default.EVENTTYPE.RoomEvent.roomPubmsg,e.handlerRoomPubmsg.bind(e),e.listernerBackupid),b.default.CoreController.addEventListener(E.default.EVENTTYPE.RoomEvent.roomConnected,this.handlerRoomConnected.bind(this),this.listernerBackupid),b.default.CoreController.addEventListener(E.default.EVENTTYPE.RoomEvent.roomReceiveActionCommand,e.receiveActionCommand.bind(e),e.listernerBackupid),e._initWhiteboardDefault()}},{key:"componentWillUnmount",value:function(){w.default.getTkWhiteBoardManager().destroyMainWhiteboard()}},{key:"componentDidUpdate",value:function(e,t){t.scale!==this.state.scale&&["svg","gif","pptx","zip"].includes(this.filetpye)&&(this.sendMobileData.scale=this.state.scale,w.default.getTkRoom().sendActionCommand("viewStateUpdate",this.sendMobileData))}},{key:"handlerRoomPubmsg",value:function(e){var t=e.message;switch(t.name){case"ClassBegin":E.default.joinRoomInfo.isClassOverNotLeave&&w.default.getTkWhiteBoardManager().resetPureWhiteboardTotalPage();break;case"ShowPage":this.filetpye=t.data.filedata.filetype}}},{key:"handlerRoomDelmsg",value:function(e){switch(e.message.name){case"ClassBegin":E.default.joinRoomInfo.isClassOverNotLeave||w.default.getTkWhiteBoardManager().resetPureWhiteboardTotalPage()}}},{key:"_receiveActionCommand",value:function(e,t){if(L.Logger.info("receive whiteboard sdk action command（action,cmd）:",e,t),b.default.CoreController.dispatchEvent({type:"receiveWhiteboardSDKAction",message:{action:e,cmd:t}}),"viewStateUpdate"===e){for(var n in t.viewState)switch(n){case"page":for(var o in t.viewState[n])this.sendMobileData.page[o]="currentPage"===o||"totalPage"===o?t.viewState[n][o]:!t.viewState[n][o].disabled;break;case"scale":t.viewState[n]===4/3?(this.setState({scale:0}),this.sendMobileData.scale=0):t.viewState[n]===16/9?(this.setState({scale:1}),this.sendMobileData.scale=1):(this.setState({scale:2}),this.sendMobileData.scale=2),this.sendMobileData.irregular=t.viewState[n];break;case"documentType":this.setState({fileTypeMark:t.viewState[n]}),this.sendMobileData.fileTypeMark=t.viewState[n]}["svg","gif","pptx","zip"].includes(this.filetpye)&&w.default.getTkRoom().sendActionCommand("viewStateUpdate",this.sendMobileData)}}},{key:"receiveActionCommand",value:function(e){var t=e.message,n=t.action,o=t.cmd;if(document.getElementById("tk_app")&&document.getElementsByClassName("all-container")[0]&&(document.getElementById("tk_app").getElementsByClassName("all-container")[0].style.background="#161616"),"mobile"===TK.SDKTYPE)if("chooseShow"===n);else if("whiteboardSDK_addPage"===n)w.default.getTkWhiteBoardManager().addPage();else if("whiteboardSDK_nextPage"===n)w.default.getTkWhiteBoardManager().nextPage();else if("whiteboardSDK_prevPage"===n)w.default.getTkWhiteBoardManager().prevPage();else if("whiteboardSDK_skipPage"===n){var a=o.number;w.default.getTkWhiteBoardManager().skipPage(a)}else"whiteboardSDK_nextStep"===n?w.default.getTkWhiteBoardManager().nextStep():"whiteboardSDK_prevStep"===n?w.default.getTkWhiteBoardManager().prevStep():"whiteboardSDK_enlargeWhiteboard"===n?w.default.getTkWhiteBoardManager().enlargeWhiteboard():"whiteboardSDK_narrowWhiteboard"===n?w.default.getTkWhiteBoardManager().narrowWhiteboard():"whiteboardSDK_openDocumentRemark"===n?w.default.getTkWhiteBoardManager().openDocumentRemark():"whiteboardSDK_closeDocumentRemark"===n&&w.default.getTkWhiteBoardManager().closeDocumentRemark()}},{key:"_initWhiteboardDefault",value:function(){var e=document.getElementById(this.whiteboardContainerId),t={isMobile:!0,canDraw:!1,isLoadDocumentToolBar:!1,isLoadWhiteboardToolBar:!1};w.default.getTkWhiteBoardManager().createMainWhiteboard(e,t,this._receiveActionCommand.bind(this))}},{key:"handlerRoomConnected",value:function(){var e={isNativePlayAudio:"ios"===k.default.clientType};w.default.getTkWhiteBoardManager().changeWhiteBoardConfigration(e,"default")}},{key:"render",value:function(){var e=this,t={background:"skin_black"===E.default.skin?"#2b2b2f":"#231942",border:"skin_black"===E.default.skin?"1px solid #434346":"1px solid #463380"};return p.default.createElement("div",{id:e.fatherContainerId,className:"white-board-outer-layout "+(2===this.state.scale||k.default.playback?" change-background-border":""),style:t},"  ",p.default.createElement("div",{id:e.whiteboardContainerId,className:"big-literally-wrap "+("dynamicPPT"===e.state.fileTypeMark||"h5Document"===e.state.fileTypeMark?" hide-document":"")}," "))}}]),t}(p.default.Component));t.default=C},d7EF:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=n("us/S"),r=o(a),i=n("BO1k"),l=o(i);t.default=function(){function e(e,t){var n=[],o=!0,a=!1,r=void 0;try{for(var i,s=(0,l.default)(e);!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,r.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},fZOM:function(e,t,n){var o=n("kM2E"),a=n("mbce")(!1);o(o.S,"Object",{values:function(e){return a(e)}})},fZjL:function(e,t,n){e.exports={default:n("jFbC"),__esModule:!0}},fxRn:function(e,t,n){n("+tPU"),n("zQR9"),e.exports=n("g8Ux")},g8Ux:function(e,t,n){var o=n("77Pl"),a=n("3fs2");e.exports=n("FeBl").getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return o(t.call(e))}},gDty:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var a=n("pFYg"),r=o(a),i=n("woOf"),l=o(i);Object.customAssign=function(e){try{return l.default.apply(l.default,arguments)}catch(i){for(var t=L.Utils.toJsonParse(L.Utils.toJsonStringify(e)),n=1;n<arguments.length;n++){var o=arguments[n];if(o&&"object"===(void 0===o?"undefined":(0,r.default)(o)))for(var a in o)t[a]=o[a]}return e=t||{}}}},gRE1:function(e,t,n){e.exports={default:n("TmV0"),__esModule:!0}},gSvA:function(e,t,n){var o=n("kM2E"),a=n("mbce")(!0);o(o.S,"Object",{entries:function(e){return a(e)}})},jFbC:function(e,t,n){n("Cdx3"),e.exports=n("FeBl").Object.keys},mbce:function(e,t,n){var o=n("lktj"),a=n("TcQ7"),r=n("NpIQ").f;e.exports=function(e){return function(t){for(var n,i=a(t),l=o(i),s=l.length,d=0,u=[];s>d;)r.call(i,n=l[d++])&&u.push(e?[n,i[n]]:i[n]);return u}}},mvHQ:function(e,t,n){e.exports={default:n("qkKv"),__esModule:!0}},pRCB:function(e,t,n){var o=n("kM2E");o(o.S+o.F*!n("+E39"),"Object",{defineProperties:n("qio6")})},ppOE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={preLoad:{text:"课件加载中",pass:"跳过"}};t.default=o},qkKv:function(e,t,n){var o=n("FeBl"),a=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},rkp3:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n("Zx67"),r=o(a),i=n("Zrlr"),l=o(i),s=n("wxAW"),d=o(s),u=n("zwoO"),c=o(u),f=n("Pf15"),m=o(f),g=n("GiK3"),p=o(g),v=n("yE5a"),h=o(v),b=n("T+56"),y=o(b),w=n("cSSE"),T=o(w),k=n("4yR4"),S=o(k),E=function(e){function t(e){(0,l.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.listernerBackupid=(new Date).getTime()+"_"+Math.random(),n}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){h.default.getTkRoom()&&h.default.getTkRoom().onPageFinished&&h.default.getTkRoom().onPageFinished()}},{key:"componentWillUnmount",value:function(){y.default.CoreController.removeBackupListerner(this.listernerBackupid)}},{key:"roomUpdateFakeJsSdkInitInfo",value:function(e){}},{key:"callAllWrapOnClick",value:function(e){y.default.CoreController.dispatchEvent({type:"callAllWrapOnClick",message:{event:e}})}},{key:"render",value:function(){return p.default.createElement("section",{className:"app-mobile  all-container ",onTouchStart:this.callAllWrapOnClick.bind(this)},p.default.createElement(T.default,null),p.default.createElement(S.default,null))}}]),t}(p.default.Component);t.default=E},"us/S":function(e,t,n){e.exports={default:n("Xd32"),__esModule:!0}},wEtr:function(e,t,n){n("gSvA"),e.exports=n("FeBl").Object.entries},yE5a:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e=void 0,t=void 0,n=void 0,o=void 0,a=void 0,r=void 0;this.getTkRoom=function(){return e},this.getRoomName=function(){return t},this.setTkRoom=function(t){e=t},this.setRoomName=function(e){t=e},this.getLocalStream=function(){return o},this.setLocalStream=function(e){o=e},this.getUserName=function(){return n},this.setUserName=function(e){n=e},this.getUserThirdid=function(){return a},this.setUserThirdid=function(e){a=e},this.getTkWhiteBoardManager=function(e){return r},this.setTkWhiteBoardManager=function(e){r=e},this.clearAll=function(){e=null,t=null,n=null,o=null,a=null,r=null}};t.default=new o},yZ13:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={preLoad:{text:"Courseware loading",pass:"Skip "}};t.default=o}},[0]);